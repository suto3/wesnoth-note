<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>d_</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/901.html#L849'>d_</a>                849 src/actions/attack.cpp 	unit_info a_, d_;</span>
<span class='curline'><a href='../S/901.html#L911'>d_</a>                911 src/actions/attack.cpp 	, d_(defender, defend_with, resources::gameboard-&gt;units())</span>
<span class='curline'><a href='../S/901.html#L932'>d_</a>                932 src/actions/attack.cpp 	if(d_stats_-&gt;weapon != nullptr &amp;&amp; d_.valid()) {</span>
<span class='curline'><a href='../S/901.html#L946'>d_</a>                946 src/actions/attack.cpp 		resources::game_events-&gt;pump().fire(n, a_.loc_, d_.loc_, ev_data);</span>
<span class='curline'><a href='../S/901.html#L950'>d_</a>                950 src/actions/attack.cpp 	const int defender_side = d_.get_unit().side();</span>
<span class='curline'><a href='../S/901.html#L954'>d_</a>                954 src/actions/attack.cpp 		game_events::entity_location(d_.loc_, d_.id_), ev_data);</span>
<span class='curline'><a href='../S/901.html#L960'>d_</a>                960 src/actions/attack.cpp 	if(!a_.valid() || !d_.valid()</span>
<span class='curline'><a href='../S/901.html#L961'>d_</a>                961 src/actions/attack.cpp 		|| !resources::gameboard-&gt;get_team(a_.get_unit().side()).is_enemy(d_.get_unit().side())</span>
<span class='curline'><a href='../S/901.html#L982'>d_</a>                982 src/actions/attack.cpp 	if(d_.valid()) {</span>
<span class='curline'><a href='../S/901.html#L983'>d_</a>                983 src/actions/attack.cpp 		refresh_weapon_index(d_.weapon_, d_.weap_id_, d_.get_unit().attacks());</span>
<span class='curline'><a href='../S/901.html#L986'>d_</a>                986 src/actions/attack.cpp 	if(!a_.valid() || !d_.valid()) {</span>
<span class='curline'><a href='../S/901.html#L992'>d_</a>                992 src/actions/attack.cpp 				= d_.valid() &amp;&amp; d_.weapon_ &gt;= 0 ? d_.get_unit().attacks()[d_.weapon_].shared_from_this() : nullptr;</span>
<span class='curline'><a href='../S/901.html#L997'>d_</a>                997 src/actions/attack.cpp 	bc_.reset(new battle_context(units_, a_.loc_, d_.loc_, a_.weapon_, d_.weapon_));</span>
<span class='curline'><a href='../S/901.html#L1003'>d_</a>               1003 src/actions/attack.cpp 	d_.cth_ = d_stats_-&gt;chance_to_hit;</span>
<span class='curline'><a href='../S/901.html#L1005'>d_</a>               1005 src/actions/attack.cpp 	d_.damage_ = d_stats_-&gt;damage;</span>
<span class='curline'><a href='../S/901.html#L1010'>d_</a>               1010 src/actions/attack.cpp 	unit_info&amp; attacker = attacker_turn ? a_ : d_;</span>
<span class='curline'><a href='../S/901.html#L1011'>d_</a>               1011 src/actions/attack.cpp 	unit_info&amp; defender = attacker_turn ? d_ : a_;</span>
<span class='curline'><a href='../S/901.html#L1130'>d_</a>               1130 src/actions/attack.cpp 		errbuf_ &lt;&lt; "SYNC: In attack " &lt;&lt; a_.dump() &lt;&lt; " vs " &lt;&lt; d_.dump() &lt;&lt; ": the data source says the "</span>
<span class='curline'><a href='../S/901.html#L1338'>d_</a>               1338 src/actions/attack.cpp 	if(!a_.valid() || !d_.valid()) {</span>
<span class='curline'><a href='../S/901.html#L1349'>d_</a>               1349 src/actions/attack.cpp 	a_.get_unit().set_facing(a_.loc_.get_relative_dir(d_.loc_));</span>
<span class='curline'><a href='../S/901.html#L1350'>d_</a>               1350 src/actions/attack.cpp 	d_.get_unit().set_facing(d_.loc_.get_relative_dir(a_.loc_));</span>
<span class='curline'><a href='../S/901.html#L1360'>d_</a>               1360 src/actions/attack.cpp 	d_.get_unit().set_resting(false);</span>
<span class='curline'><a href='../S/901.html#L1365'>d_</a>               1365 src/actions/attack.cpp 	bc_.reset(new battle_context(units_, a_.loc_, d_.loc_, a_.weapon_, d_.weapon_));</span>
<span class='curline'><a href='../S/901.html#L1375'>d_</a>               1375 src/actions/attack.cpp 		d_.weap_id_ = d_stats_-&gt;weapon-&gt;id();</span>
<span class='curline'><a href='../S/901.html#L1388'>d_</a>               1388 src/actions/attack.cpp 			a_.get_unit(), d_.get_unit(), a_stats_-&gt;chance_to_hit, d_stats_-&gt;chance_to_hit);</span>
<span class='curline'><a href='../S/901.html#L1391'>d_</a>               1391 src/actions/attack.cpp 	d_.orig_attacks_ = d_stats_-&gt;num_blows;</span>
<span class='curline'><a href='../S/901.html#L1393'>d_</a>               1393 src/actions/attack.cpp 	d_.n_attacks_ = d_.orig_attacks_;</span>
<span class='curline'><a href='../S/901.html#L1394'>d_</a>               1394 src/actions/attack.cpp 	a_.xp_ = d_.get_unit().level();</span>
<span class='curline'><a href='../S/901.html#L1395'>d_</a>               1395 src/actions/attack.cpp 	d_.xp_ = a_.get_unit().level();</span>
<span class='curline'><a href='../S/901.html#L1399'>d_</a>               1399 src/actions/attack.cpp 	const int defender_side = d_.get_unit().side();</span>
<span class='curline'><a href='../S/901.html#L1401'>d_</a>               1401 src/actions/attack.cpp 	LOG_NG &lt;&lt; "Fight: (" &lt;&lt; a_.loc_ &lt;&lt; ") vs (" &lt;&lt; d_.loc_ &lt;&lt; ") ATT: " &lt;&lt; a_stats_-&gt;weapon-&gt;name() &lt;&lt; " "</span>
<span class='curline'><a href='../S/901.html#L1408'>d_</a>               1408 src/actions/attack.cpp 	unit_display::unit_draw_weapon(a_.loc_, a_.get_unit(), a_stats_-&gt;weapon, d_stats_-&gt;weapon, d_.loc_, &amp;d_.get_unit());</span>
<span class='curline'><a href='../S/901.html#L1425'>d_</a>               1425 src/actions/attack.cpp 		if(d_.n_attacks_ &gt; 0) {</span>
<span class='curline'><a href='../S/901.html#L1434'>d_</a>               1434 src/actions/attack.cpp 		if(rounds &gt; 0 &amp;&amp; d_.n_attacks_ == 0 &amp;&amp; a_.n_attacks_ == 0) {</span>
<span class='curline'><a href='../S/901.html#L1436'>d_</a>               1436 src/actions/attack.cpp 			d_.n_attacks_ = d_.orig_attacks_;</span>
<span class='curline'><a href='../S/901.html#L1441'>d_</a>               1441 src/actions/attack.cpp 		if(a_.n_attacks_ &lt;= 0 &amp;&amp; d_.n_attacks_ &lt;= 0) {</span>
<span class='curline'><a href='../S/901.html#L1463'>d_</a>               1463 src/actions/attack.cpp 	if(d_.valid()) {</span>
<span class='curline'><a href='../S/901.html#L1464'>d_</a>               1464 src/actions/attack.cpp 		unit&amp; u = d_.get_unit();</span>
<span class='curline'><a href='../S/901.html#L1466'>d_</a>               1466 src/actions/attack.cpp 		u.set_experience(u.experience() + d_.xp_);</span>
<span class='curline'><a href='../S/901.html#L1470'>d_</a>               1470 src/actions/attack.cpp 			d_.loc_, d_.valid() ? &amp;d_.get_unit() : nullptr);</span>
<span class='curline'><a href='../S/901.html#L1475'>d_</a>               1475 src/actions/attack.cpp 		resources::screen-&gt;invalidate(d_.loc_);</span>
<span class='curline'><a href='../S/901.html#L1492'>d_</a>               1492 src/actions/attack.cpp 	errbuf_ &lt;&lt; "SYNC: In attack " &lt;&lt; a_.dump() &lt;&lt; " vs " &lt;&lt; d_.dump()</span>
<span class='curline'><a href='../S/901.html#L1508'>d_</a>               1508 src/actions/attack.cpp 		errbuf_ &lt;&lt; "SYNC: In attack " &lt;&lt; a_.dump() &lt;&lt; " vs " &lt;&lt; d_.dump()</span>
<span class='curline'><a href='../S/901.html#L1516'>d_</a>               1516 src/actions/attack.cpp 		errbuf_ &lt;&lt; "SYNC: In attack " &lt;&lt; a_.dump() &lt;&lt; " vs " &lt;&lt; d_.dump() &lt;&lt; ": the data source says the hit was "</span>
<span class='curline'><a href='../S/901.html#L1525'>d_</a>               1525 src/actions/attack.cpp 		errbuf_ &lt;&lt; "SYNC: In attack " &lt;&lt; a_.dump() &lt;&lt; " vs " &lt;&lt; d_.dump() &lt;&lt; ": the data source says the hit did "</span>
<span class='curline'><a href='../S/233.html#L278'>d_</a>                278 src/ai/actions.cpp 	const unit_map::const_iterator d_ = resources::gameboard-&gt;units().find(defender_loc_);</span>
<span class='curline'><a href='../S/233.html#L294'>d_</a>                294 src/ai/actions.cpp 			d_-&gt;type_id(), a_-&gt;level(), d_-&gt;level(), resources::tod_manager-&gt;turn(),</span>
</pre>
</body>
</html>
