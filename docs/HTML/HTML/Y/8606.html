<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>defender</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/4411.html#L194'>defender</a>          194 data/ai/lua/ai_helper.lua function ai_helper.checked_attack(ai, attacker, defender, weapon)</span>
<span class='curline'><a href='../S/4411.html#L195'>defender</a>          195 data/ai/lua/ai_helper.lua     local check = ai.check_attack(attacker, defender, weapon)</span>
<span class='curline'><a href='../S/4411.html#L199'>defender</a>          199 data/ai/lua/ai_helper.lua         ai_helper.checked_action_error('ai.attack from ' .. attacker.x .. ',' .. attacker.y .. ' to ' .. defender.x .. ',' .. defender.y, check.status .. ' (' .. check.result .. ')')</span>
<span class='curline'><a href='../S/4411.html#L203'>defender</a>          203 data/ai/lua/ai_helper.lua     return ai.attack(attacker, defender, weapon)</span>
<span class='curline'><a href='../S/4413.html#L87'>defender</a>           87 data/ai/lua/battle_calcs.lua function battle_calcs.strike_damage(attacker, defender, att_weapon, def_weapon, dst, cache)</span>
<span class='curline'><a href='../S/4413.html#L103'>defender</a>          103 data/ai/lua/battle_calcs.lua     local def_lawful_bonus = wesnoth.get_time_of_day({ defender.x, defender.y, true }).lawful_bonus</span>
<span class='curline'><a href='../S/4413.html#L106'>defender</a>          106 data/ai/lua/battle_calcs.lua     cind = cind .. 'x' .. defender.id .. defender.max_hitpoints .. defender.side</span>
<span class='curline'><a href='../S/4413.html#L116'>defender</a>          116 data/ai/lua/battle_calcs.lua     local defender_info = battle_calcs.unit_attack_info(defender, cache)</span>
<span class='curline'><a href='../S/4413.html#L174'>defender</a>          174 data/ai/lua/battle_calcs.lua function battle_calcs.best_weapons(attacker, defender, dst, cache)</span>
<span class='curline'><a href='../S/4413.html#L190'>defender</a>          190 data/ai/lua/battle_calcs.lua     local def_lawful_bonus = wesnoth.get_time_of_day({ defender.x, defender.y, true }).lawful_bonus</span>
<span class='curline'><a href='../S/4413.html#L193'>defender</a>          193 data/ai/lua/battle_calcs.lua     cind = cind .. 'x' .. defender.id .. defender.max_hitpoints .. defender.side</span>
<span class='curline'><a href='../S/4413.html#L202'>defender</a>          202 data/ai/lua/battle_calcs.lua     local defender_info = battle_calcs.unit_attack_info(defender, cache)</span>
<span class='curline'><a href='../S/4413.html#L207'>defender</a>          207 data/ai/lua/battle_calcs.lua         local att_damage = battle_calcs.strike_damage(attacker, defender, att_weapon_number, 0, { dst[1], dst[2] }, cache)</span>
<span class='curline'><a href='../S/4413.html#L211'>defender</a>          211 data/ai/lua/battle_calcs.lua                 local def_damage = battle_calcs.strike_damage(defender, attacker, def_weapon_number, 0, { defender.x, defender.y }, cache)</span>
<span class='curline'><a href='../S/4413.html#L639'>defender</a>          639 data/ai/lua/battle_calcs.lua function battle_calcs.battle_outcome(attacker, defender, cfg, cache)</span>
<span class='curline'><a href='../S/4413.html#L653'>defender</a>          653 data/ai/lua/battle_calcs.lua         att_weapon, def_weapon = battle_calcs.best_weapons(attacker, defender, dst, cache)</span>
<span class='curline'><a href='../S/4413.html#L661'>defender</a>          661 data/ai/lua/battle_calcs.lua         battle_calcs.strike_damage(attacker, defender, att_weapon, def_weapon, { dst[1], dst[2] }, cache)</span>
<span class='curline'><a href='../S/4413.html#L673'>defender</a>          673 data/ai/lua/battle_calcs.lua         def_strikes = math.floor(def_strikes * defender.hitpoints / defender.max_hitpoints)</span>
<span class='curline'><a href='../S/4413.html#L679'>defender</a>          679 data/ai/lua/battle_calcs.lua     local def_max_hits = math.floor((defender.hitpoints - 1) / att_damage)</span>
<span class='curline'><a href='../S/4413.html#L683'>defender</a>          683 data/ai/lua/battle_calcs.lua     local att_hit_prob = wesnoth.unit_defense(defender, wesnoth.get_terrain(defender.x, defender.y)) / 100.</span>
<span class='curline'><a href='../S/4413.html#L708'>defender</a>          708 data/ai/lua/battle_calcs.lua     local def_stats = battle_calcs.hp_distribution(def_coeffs, att_hit_prob, def_hit_prob, defender.hitpoints, att_damage, att_attack)</span>
<span class='curline'><a href='../S/4413.html#L729'>defender</a>          729 data/ai/lua/battle_calcs.lua function battle_calcs.simulate_combat_loc(attacker, dst, defender, weapon)</span>
<span class='curline'><a href='../S/4413.html#L738'>defender</a>          738 data/ai/lua/battle_calcs.lua         return wesnoth.simulate_combat(attacker_dst, weapon, defender)</span>
<span class='curline'><a href='../S/4413.html#L740'>defender</a>          740 data/ai/lua/battle_calcs.lua         return wesnoth.simulate_combat(attacker_dst, defender)</span>
<span class='curline'><a href='../S/4413.html#L744'>defender</a>          744 data/ai/lua/battle_calcs.lua function battle_calcs.attack_rating(attacker, defender, dst, cfg, cache)</span>
<span class='curline'><a href='../S/4413.html#L790'>defender</a>          790 data/ai/lua/battle_calcs.lua         att_stats,def_stats = battle_calcs.battle_outcome(attacker, defender, battle_cfg, cache)</span>
<span class='curline'><a href='../S/4413.html#L840'>defender</a>          840 data/ai/lua/battle_calcs.lua     local defender_level = wesnoth.unit_types[defender.type].level</span>
<span class='curline'><a href='../S/4413.html#L862'>defender</a>          862 data/ai/lua/battle_calcs.lua     local damage = defender.hitpoints - def_stats.average_hp</span>
<span class='curline'><a href='../S/4413.html#L873'>defender</a>          873 data/ai/lua/battle_calcs.lua     local is_village = wesnoth.get_terrain_info(wesnoth.get_terrain(defender.x, defender.y)).village</span>
<span class='curline'><a href='../S/4413.html#L881'>defender</a>          881 data/ai/lua/battle_calcs.lua     local value_fraction = damage / defender.max_hitpoints</span>
<span class='curline'><a href='../S/4413.html#L890'>defender</a>          890 data/ai/lua/battle_calcs.lua     if (defender.max_experience - defender.experience &lt;= attacker_level) then</span>
<span class='curline'><a href='../S/4413.html#L893'>defender</a>          893 data/ai/lua/battle_calcs.lua         if (defender.max_experience - defender.experience &lt;= attacker_level * 8) then</span>
<span class='curline'><a href='../S/4413.html#L900'>defender</a>          900 data/ai/lua/battle_calcs.lua     local defender_value = wesnoth.unit_types[defender.type].cost</span>
<span class='curline'><a href='../S/4413.html#L903'>defender</a>          903 data/ai/lua/battle_calcs.lua     if defender.canrecruit then</span>
<span class='curline'><a href='../S/4413.html#L908'>defender</a>          908 data/ai/lua/battle_calcs.lua     local defender_starting_damage_fraction = (defender.max_hitpoints - defender.hitpoints) / defender.max_hitpoints</span>
<span class='curline'><a href='../S/4413.html#L912'>defender</a>          912 data/ai/lua/battle_calcs.lua     local xp_bonus = defender.experience / defender.max_experience</span>
<span class='curline'><a href='../S/4413.html#L918'>defender</a>          918 data/ai/lua/battle_calcs.lua     local is_village = wesnoth.get_terrain_info(wesnoth.get_terrain(defender.x, defender.y)).village</span>
<span class='curline'><a href='../S/4413.html#L935'>defender</a>          935 data/ai/lua/battle_calcs.lua     local defender_defense = - wesnoth.unit_defense(defender, wesnoth.get_terrain(dst[1], dst[2])) / 100.</span>
<span class='curline'><a href='../S/4413.html#L942'>defender</a>          942 data/ai/lua/battle_calcs.lua             M.distance_between(defender.x, defender.y, leader.x, leader.y)</span>
<span class='curline'><a href='../S/4413.html#L965'>defender</a>          965 data/ai/lua/battle_calcs.lua function battle_calcs.attack_combo_stats(tmp_attackers, tmp_dsts, defender, cache, cache_this_move)</span>
<span class='curline'><a href='../S/4413.html#L991'>defender</a>          991 data/ai/lua/battle_calcs.lua     local defender_ind = defender.x * 1000 + defender.y</span>
<span class='curline'><a href='../S/4413.html#L1002'>defender</a>         1002 data/ai/lua/battle_calcs.lua                 battle_calcs.attack_rating(attacker, defender, tmp_dsts[i], {}, cache )</span>
<span class='curline'><a href='../S/4413.html#L1033'>defender</a>         1033 data/ai/lua/battle_calcs.lua                 rating = rating + wesnoth.unit_types[defender.type].cost / 2.</span>
<span class='curline'><a href='../S/4413.html#L1083'>defender</a>         1083 data/ai/lua/battle_calcs.lua                 local org_hp = defender.hitpoints</span>
<span class='curline'><a href='../S/4413.html#L1084'>defender</a>         1084 data/ai/lua/battle_calcs.lua                 defender.hitpoints = hp1</span>
<span class='curline'><a href='../S/4413.html#L1089'>defender</a>         1089 data/ai/lua/battle_calcs.lua                     ast, dst = battle_calcs.battle_outcome(attackers[i], defender, { dst = dsts[i] } , cache)</span>
<span class='curline'><a href='../S/4413.html#L1096'>defender</a>         1096 data/ai/lua/battle_calcs.lua                 defender.hitpoints = org_hp</span>
<span class='curline'><a href='../S/4413.html#L1133'>defender</a>         1133 data/ai/lua/battle_calcs.lua         local r, dr, ar = battle_calcs.attack_rating(attackers[i], defender, dsts[i], cfg, cache)</span>
<span class='curline'><a href='../S/4415.html#L106'>defender</a>          106 data/ai/lua/generic_recruit_engine.lua             local function get_best_attack(attacker, defender, defender_defense, attacker_defense, can_poison)</span>
<span class='curline'><a href='../S/4415.html#L198'>defender</a>          198 data/ai/lua/generic_recruit_engine.lua                     for defender_attack in H.child_range(defender.__cfg, 'attack') do</span>
<span class='curline'><a href='../S/4415.html#L212'>defender</a>          212 data/ai/lua/generic_recruit_engine.lua                     local resistance = wesnoth.unit_resistance(defender, attack.type)</span>
<span class='curline'><a href='../S/4408.html#L440'>defender</a>          440 data/ai/lua/generic_rush_engine.lua                 local defender = wesnoth.get_unit(a.target.x, a.target.y)</span>
<span class='curline'><a href='../S/4408.html#L443'>defender</a>          443 data/ai/lua/generic_rush_engine.lua                 local cant_poison = defender.status.poisoned or defender.status.unpoisonable</span>
<span class='curline'><a href='../S/4408.html#L446'>defender</a>          446 data/ai/lua/generic_rush_engine.lua                 local on_village = wesnoth.get_terrain_info(wesnoth.get_terrain(defender.x, defender.y)).village</span>
<span class='curline'><a href='../S/4408.html#L449'>defender</a>          449 data/ai/lua/generic_rush_engine.lua                 local about_to_level = defender.max_experience - defender.experience &lt;= (wesnoth.unit_types[attacker.type].level * 2)</span>
<span class='curline'><a href='../S/4408.html#L453'>defender</a>          453 data/ai/lua/generic_rush_engine.lua                     local rating = defender.hitpoints</span>
<span class='curline'><a href='../S/4408.html#L456'>defender</a>          456 data/ai/lua/generic_rush_engine.lua                     if defender.canrecruit then rating = rating + 1000 end</span>
<span class='curline'><a href='../S/4408.html#L459'>defender</a>          459 data/ai/lua/generic_rush_engine.lua                     if wesnoth.unit_ability(defender, 'regenerate') then rating = rating - 1000 end</span>
<span class='curline'><a href='../S/4408.html#L462'>defender</a>          462 data/ai/lua/generic_rush_engine.lua                     local defender_defense = 100 - wesnoth.unit_defense(defender, wesnoth.get_terrain(defender.x, defender.y))</span>
<span class='curline'><a href='../S/4356.html#L323'>defender</a>          323 data/ai/micro_ais/cas/ca_bottleneck_move.lua                     defender = enemy,</span>
<span class='curline'><a href='../S/4356.html#L384'>defender</a>          384 data/ai/micro_ais/cas/ca_bottleneck_move.lua                         local att_stats, def_stats = BC.simulate_combat_loc(unit, { attack.x, attack.y }, attack.defender, n_weapon)</span>
<span class='curline'><a href='../S/4356.html#L420'>defender</a>          420 data/ai/micro_ais/cas/ca_bottleneck_move.lua                             data.BD_level_up_defender = attack.defender</span>
<span class='curline'><a href='../S/4365.html#L128'>defender</a>          128 data/ai/micro_ais/cas/ca_wolves_multipacks_attack.lua                 local defender = wesnoth.get_unit(best_attack.target.x, best_attack.target.y)</span>
<span class='curline'><a href='../S/4365.html#L130'>defender</a>          130 data/ai/micro_ais/cas/ca_wolves_multipacks_attack.lua                 AH.robust_move_and_attack(ai, attacker, best_attack.dst, defender)</span>
<span class='curline'><a href='../S/4365.html#L136'>defender</a>          136 data/ai/micro_ais/cas/ca_wolves_multipacks_attack.lua                     if (not defender) or (not defender.valid) then</span>
<span class='curline'><a href='../S/5029.html#L23'>defender</a>           23 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua         local defender = wesnoth.get_unit(att.target.x, att.target.y)</span>
<span class='curline'><a href='../S/5029.html#L28'>defender</a>           28 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua         local att_stats, def_stats = wesnoth.simulate_combat(attacker_dst, defender)</span>
<span class='curline'><a href='../S/5029.html#L34'>defender</a>           34 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua             local defender_damage = defender.hitpoints - def_stats.average_hp</span>
<span class='curline'><a href='../S/1797.html#L96'>defender</a>           96 doc/design/gui2/unit_attack.cpp 		const battle_context::unit_stats&amp; defender =</span>
<span class='curline'><a href='../S/1797.html#L101'>defender</a>          101 doc/design/gui2/unit_attack.cpp 				defender.weapon ? *defender.weapon : no_weapon);</span>
<span class='curline'><a href='../S/901.html#L364'>defender</a>          364 src/actions/attack.cpp 	const unit&amp; defender = *units.find(defender_loc);</span>
<span class='curline'><a href='../S/901.html#L377'>defender</a>          377 src/actions/attack.cpp 			attacker, defender, units, attacker_loc, defender_loc, harm_weight, &amp;defender_weapon, prev_def</span>
<span class='curline'><a href='../S/901.html#L381'>defender</a>          381 src/actions/attack.cpp 			attacker, defender, attacker_weapon, units, attacker_loc, defender_loc, prev_def</span>
<span class='curline'><a href='../S/901.html#L398'>defender</a>          398 src/actions/attack.cpp 			VALIDATE(defender_weapon &lt; static_cast&lt;int&gt;(defender.attacks().size()),</span>
<span class='curline'><a href='../S/901.html#L401'>defender</a>          401 src/actions/attack.cpp 			ddef = defender.attacks()[defender_weapon].shared_from_this();</span>
<span class='curline'><a href='../S/901.html#L407'>defender</a>          407 src/actions/attack.cpp 				attacker, attacker_loc, attacker_weapon, true, defender, defender_loc, ddef, units));</span>
<span class='curline'><a href='../S/901.html#L409'>defender</a>          409 src/actions/attack.cpp 				defender, defender_loc, defender_weapon, false, attacker, attacker_loc, adef, units));</span>
<span class='curline'><a href='../S/901.html#L538'>defender</a>          538 src/actions/attack.cpp 		const unit&amp; defender,</span>
<span class='curline'><a href='../S/901.html#L565'>defender</a>          565 src/actions/attack.cpp 				= choose_defender_weapon(attacker, defender, choices[0], units, attacker_loc, defender_loc, prev_def);</span>
<span class='curline'><a href='../S/901.html#L567'>defender</a>          567 src/actions/attack.cpp 				= *defender_weapon &gt;= 0 ? defender.attacks()[*defender_weapon].shared_from_this() : nullptr;</span>
<span class='curline'><a href='../S/901.html#L569'>defender</a>          569 src/actions/attack.cpp 				attacker, attacker_loc, choices[0], true, defender, defender_loc, def_weapon, units));</span>
<span class='curline'><a href='../S/901.html#L577'>defender</a>          577 src/actions/attack.cpp 				defender, defender_loc, *defender_weapon, false, attacker, attacker_loc, att.shared_from_this(), units));</span>
<span class='curline'><a href='../S/901.html#L593'>defender</a>          593 src/actions/attack.cpp 			choose_defender_weapon(attacker, defender, choices[i], units, attacker_loc, defender_loc, prev_def);</span>
<span class='curline'><a href='../S/901.html#L600'>defender</a>          600 src/actions/attack.cpp 				def = defender.attacks()[def_weapon].shared_from_this();</span>
<span class='curline'><a href='../S/901.html#L604'>defender</a>          604 src/actions/attack.cpp 					attacker, attacker_loc, choices[i], true, defender, defender_loc, def, units));</span>
<span class='curline'><a href='../S/901.html#L611'>defender</a>          611 src/actions/attack.cpp 					defender, defender_loc, def_weapon, false, attacker, attacker_loc, att.shared_from_this(), units));</span>
<span class='curline'><a href='../S/901.html#L654'>defender</a>          654 src/actions/attack.cpp 		const unit&amp; defender,</span>
<span class='curline'><a href='../S/901.html#L669'>defender</a>          669 src/actions/attack.cpp 	for(i = 0; i &lt; defender.attacks().size(); ++i) {</span>
<span class='curline'><a href='../S/901.html#L670'>defender</a>          670 src/actions/attack.cpp 		const attack_type&amp; def = defender.attacks()[i];</span>
<span class='curline'><a href='../S/901.html#L683'>defender</a>          683 src/actions/attack.cpp 				defender, defender_loc, choices[0], false, attacker, attacker_loc, att.shared_from_this(), units);</span>
<span class='curline'><a href='../S/901.html#L698'>defender</a>          698 src/actions/attack.cpp 			const attack_type&amp; def = defender.attacks()[choices[i]];</span>
<span class='curline'><a href='../S/901.html#L701'>defender</a>          701 src/actions/attack.cpp 				const battle_context_unit_stats def_stats(defender, defender_loc, choices[i], false, attacker,</span>
<span class='curline'><a href='../S/901.html#L721'>defender</a>          721 src/actions/attack.cpp 		const attack_type&amp; def = defender.attacks()[choices[i]];</span>
<span class='curline'><a href='../S/901.html#L724'>defender</a>          724 src/actions/attack.cpp 				attacker, attacker_loc, attacker_weapon, true, defender, defender_loc, def.shared_from_this(), units));</span>
<span class='curline'><a href='../S/901.html#L727'>defender</a>          727 src/actions/attack.cpp 				defender, defender_loc, choices[i], false, attacker, attacker_loc, att.shared_from_this(), units));</span>
<span class='curline'><a href='../S/901.html#L794'>defender</a>          794 src/actions/attack.cpp 			const map_location&amp; defender,</span>
<span class='curline'><a href='../S/901.html#L898'>defender</a>          898 src/actions/attack.cpp 		const map_location&amp; defender,</span>
<span class='curline'><a href='../S/901.html#L911'>defender</a>          911 src/actions/attack.cpp 	, d_(defender, defend_with, resources::gameboard-&gt;units())</span>
<span class='curline'><a href='../S/901.html#L1011'>defender</a>         1011 src/actions/attack.cpp 	unit_info&amp; defender = attacker_turn ? d_ : a_;</span>
<span class='curline'><a href='../S/901.html#L1042'>defender</a>         1042 src/actions/attack.cpp 	int damage_done = std::min&lt;int&gt;(defender.get_unit().hitpoints(), attacker.damage_);</span>
<span class='curline'><a href='../S/901.html#L1070'>defender</a>         1070 src/actions/attack.cpp 			const unit&amp; defender_unit = defender.get_unit();</span>
<span class='curline'><a href='../S/901.html#L1095'>defender</a>         1095 src/actions/attack.cpp 			attacker.loc_, defender.loc_,</span>
<span class='curline'><a href='../S/901.html#L1103'>defender</a>         1103 src/actions/attack.cpp 	bool dies = defender.get_unit().take_hit(damage);</span>
<span class='curline'><a href='../S/901.html#L1139'>defender</a>         1139 src/actions/attack.cpp 			defender.get_unit().set_hitpoints(0);</span>
<span class='curline'><a href='../S/901.html#L1172'>defender</a>         1172 src/actions/attack.cpp 		unit_killed(attacker, defender, attacker_stats, defender_stats, false);</span>
<span class='curline'><a href='../S/901.html#L1177'>defender</a>         1177 src/actions/attack.cpp 		unit_killed(defender, attacker, defender_stats, attacker_stats, true);</span>
<span class='curline'><a href='../S/901.html#L1187'>defender</a>         1187 src/actions/attack.cpp 		unit&amp; defender_unit = defender.get_unit();</span>
<span class='curline'><a href='../S/901.html#L1197'>defender</a>         1197 src/actions/attack.cpp 			defender.damage_ = defender_stats-&gt;slow_damage;</span>
<span class='curline'><a href='../S/901.html#L1206'>defender</a>         1206 src/actions/attack.cpp 			defender.n_attacks_ = -1; // Petrified.</span>
<span class='curline'><a href='../S/901.html#L1207'>defender</a>         1207 src/actions/attack.cpp 			resources::game_events-&gt;pump().fire("petrified", defender.loc_, attacker.loc_);</span>
<span class='curline'><a href='../S/901.html#L1223'>defender</a>         1223 src/actions/attack.cpp 		unit_info&amp; defender,</span>
<span class='curline'><a href='../S/901.html#L1228'>defender</a>         1228 src/actions/attack.cpp 	attacker.xp_ = game_config::kill_xp(defender.get_unit().level());</span>
<span class='curline'><a href='../S/901.html#L1229'>defender</a>         1229 src/actions/attack.cpp 	defender.xp_ = 0;</span>
<span class='curline'><a href='../S/901.html#L1233'>defender</a>         1233 src/actions/attack.cpp 	game_events::entity_location death_loc(defender.loc_, defender.id_);</span>
<span class='curline'><a href='../S/901.html#L1236'>defender</a>         1236 src/actions/attack.cpp 	std::string undead_variation = defender.get_unit().undead_variation();</span>
<span class='curline'><a href='../S/901.html#L1244'>defender</a>         1244 src/actions/attack.cpp 	config d_weapon_cfg = defender_stats-&gt;weapon &amp;&amp; defender.valid() ? defender_stats-&gt;weapon-&gt;to_config() : config();</span>
<span class='curline'><a href='../S/901.html#L1261'>defender</a>         1261 src/actions/attack.cpp 	if(!defender.valid() || defender.get_unit().hitpoints() &gt; 0) {</span>
<span class='curline'><a href='../S/901.html#L1267'>defender</a>         1267 src/actions/attack.cpp 			defender.loc_,</span>
<span class='curline'><a href='../S/901.html#L1268'>defender</a>         1268 src/actions/attack.cpp 			defender.get_unit(),</span>
<span class='curline'><a href='../S/901.html#L1274'>defender</a>         1274 src/actions/attack.cpp 			defender.loc_,</span>
<span class='curline'><a href='../S/901.html#L1275'>defender</a>         1275 src/actions/attack.cpp 			defender.get_unit(),</span>
<span class='curline'><a href='../S/901.html#L1286'>defender</a>         1286 src/actions/attack.cpp 	if(!defender.valid() || defender.get_unit().hitpoints() &gt; 0) {</span>
<span class='curline'><a href='../S/901.html#L1291'>defender</a>         1291 src/actions/attack.cpp 	units_.erase(defender.loc_);</span>
<span class='curline'><a href='../S/901.html#L1319'>defender</a>         1319 src/actions/attack.cpp 			game_events::entity_location reanim_loc(defender.loc_, newunit-&gt;underlying_id());</span>
<span class='curline'><a href='../S/901.html#L1540'>defender</a>         1540 src/actions/attack.cpp 		const map_location&amp; defender,</span>
<span class='curline'><a href='../S/901.html#L1545'>defender</a>         1545 src/actions/attack.cpp 	attack dummy(attacker, defender, attack_with, defend_with, update_display);</span>
<span class='curline'><a href='../S/901.html#L1550'>defender</a>         1550 src/actions/attack.cpp 		const map_location&amp; defender,</span>
<span class='curline'><a href='../S/901.html#L1556'>defender</a>         1556 src/actions/attack.cpp 	attack_unit(attacker, defender, attack_with, defend_with, update_display);</span>
<span class='curline'><a href='../S/901.html#L1563'>defender</a>         1563 src/actions/attack.cpp 	unit_map::const_iterator defu = resources::gameboard-&gt;units().find(defender);</span>
<span class='curline'><a href='../S/901.html#L1565'>defender</a>         1565 src/actions/attack.cpp 		advance_unit_at(advance_unit_params(defender).ai_advancements(ai_advancement));</span>
<span class='curline'><a href='../S/901.html#L1624'>defender</a>         1624 src/actions/attack.cpp 	const unit_map::const_iterator defender = units.find(defender_loc);</span>
<span class='curline'><a href='../S/901.html#L1625'>defender</a>         1625 src/actions/attack.cpp 	if(defender == units.end()) {</span>
<span class='curline'><a href='../S/901.html#L1656'>defender</a>         1656 src/actions/attack.cpp 	if(size_t(defender-&gt;side() - 1) &gt;= teams.size() || size_t(opp-&gt;side() - 1) &gt;= teams.size()) {</span>
<span class='curline'><a href='../S/901.html#L1661'>defender</a>         1661 src/actions/attack.cpp 	if(teams[defender-&gt;side() - 1].is_enemy(opp-&gt;side())) {</span>
<span class='curline'><a href='../S/904.html#L222'>defender</a>          222 src/actions/attack.hpp 			const unit&amp; defender,</span>
<span class='curline'><a href='../S/904.html#L231'>defender</a>          231 src/actions/attack.hpp 			const unit&amp; defender,</span>
<span class='curline'><a href='../S/904.html#L249'>defender</a>          249 src/actions/attack.hpp 		const map_location&amp; defender,</span>
<span class='curline'><a href='../S/904.html#L256'>defender</a>          256 src/actions/attack.hpp 		const map_location&amp; defender,</span>
<span class='curline'><a href='../S/233.html#L182'>defender</a>          182 src/ai/actions.cpp 	const unit_map::const_iterator defender = resources::gameboard-&gt;units().find(defender_loc_);</span>
<span class='curline'><a href='../S/233.html#L191'>defender</a>          191 src/ai/actions.cpp 	if (defender==resources::gameboard-&gt;units().end())</span>
<span class='curline'><a href='../S/233.html#L204'>defender</a>          204 src/ai/actions.cpp 	if(defender-&gt;incapacitated()) {</span>
<span class='curline'><a href='../S/233.html#L222'>defender</a>          222 src/ai/actions.cpp 	if(!get_my_team().is_enemy(defender-&gt;side())) {</span>
<span class='curline'><a href='../S/247.html#L1057'>defender</a>         1057 src/ai/default/recruitment.cpp 	attack_simulation(const unit_type* attacker, const unit_type* defender,</span>
<span class='curline'><a href='../S/247.html#L1062'>defender</a>         1062 src/ai/default/recruitment.cpp 			defender_type(defender),</span>
<span class='curline'><a href='../S/247.html#L1063'>defender</a>         1063 src/ai/default/recruitment.cpp 			attacker_stats(attacker, att_weapon, true, defender, def_weapon,</span>
<span class='curline'><a href='../S/247.html#L1065'>defender</a>         1065 src/ai/default/recruitment.cpp 			defender_stats(defender, def_weapon, false, attacker, att_weapon,</span>
<span class='curline'><a href='../S/247.html#L1113'>defender</a>         1113 src/ai/default/recruitment.cpp 			const unit_type* const attacker, const unit_type* const defender,</span>
<span class='curline'><a href='../S/247.html#L1116'>defender</a>         1116 src/ai/default/recruitment.cpp 	if(!attacker || !defender || !damage_to_attacker || !damage_to_defender) {</span>
<span class='curline'><a href='../S/247.html#L1121'>defender</a>         1121 src/ai/default/recruitment.cpp 	const_attack_itors defender_weapons = defender-&gt;attacks();</span>
<span class='curline'><a href='../S/247.html#L1134'>defender</a>         1134 src/ai/default/recruitment.cpp 					attacker, defender,</span>
<span class='curline'><a href='../S/247.html#L1145'>defender</a>         1145 src/ai/default/recruitment.cpp 					attacker, defender,</span>
<span class='curline'><a href='../S/247.html#L1158'>defender</a>         1158 src/ai/default/recruitment.cpp 	*damage_to_defender += (defender-&gt;hitpoints() - best_att_attack-&gt;get_avg_hp_of_defender());</span>
<span class='curline'><a href='../S/236.html#L220'>defender</a>          220 src/ai/default/recruitment.hpp 			const unit_type* const attacker, const unit_type* const defender,</span>
<span class='curline'><a href='../S/253.html#L1300'>defender</a>         1300 src/ai/formula/function_table.cpp 	std::pair&lt;int, int&gt; best_melee_and_ranged_attacks(unit_adapter attacker, unit_adapter defender) const {</span>
<span class='curline'><a href='../S/253.html#L1305'>defender</a>         1305 src/ai/formula/function_table.cpp 			const int dmg = round_damage(attack.damage(), defender.damage_from(attack), 100) * attack.num_attacks();</span>
<span class='curline'><a href='../S/253.html#L1325'>defender</a>         1325 src/ai/formula/function_table.cpp 		unit_adapter defender(u2);</span>
<span class='curline'><a href='../S/253.html#L1328'>defender</a>         1328 src/ai/formula/function_table.cpp 		std::pair&lt;int, int&gt; best_attacker_attacks = best_melee_and_ranged_attacks(attacker, defender);</span>
<span class='curline'><a href='../S/253.html#L1329'>defender</a>         1329 src/ai/formula/function_table.cpp 		std::pair&lt;int, int&gt; best_defender_attacks = best_melee_and_ranged_attacks(defender, attacker);</span>
<span class='curline'><a href='../S/293.html#L209'>defender</a>          209 src/ai/lua/core.cpp 	map_location defender = luaW_checklocation(L, 2);</span>
<span class='curline'><a href='../S/293.html#L230'>defender</a>          230 src/ai/lua/core.cpp 	ai::attack_result_ptr attack_result = ai::actions::execute_attack_action(side,exec,attacker,defender,attacker_weapon,aggression,advancements);</span>
<span class='curline'><a href='../S/427.html#L51'>defender</a>           51 src/gui/dialogs/attack_predictions.cpp attack_predictions::attack_predictions(battle_context&amp; bc, const unit&amp; attacker, const unit&amp; defender)</span>
<span class='curline'><a href='../S/427.html#L53'>defender</a>           53 src/gui/dialogs/attack_predictions.cpp 	, defender_data_(defender, bc.get_defender_combatant(), bc.get_defender_stats())</span>
<span class='curline'><a href='../S/427.html#L76'>defender</a>           76 src/gui/dialogs/attack_predictions.cpp void attack_predictions::set_data(window&amp; window, const combatant_data&amp; attacker, const combatant_data&amp; defender)</span>
<span class='curline'><a href='../S/427.html#L109'>defender</a>          109 src/gui/dialogs/attack_predictions.cpp 	draw_hp_graph(graph_widget, attacker, defender);</span>
<span class='curline'><a href='../S/427.html#L130'>defender</a>          130 src/gui/dialogs/attack_predictions.cpp 	weapon-&gt;set_specials_context(attacker.unit_.get_location(), defender.unit_.get_location(), attacker.stats_.is_attacker, defender.stats_.weapon);</span>
<span class='curline'><a href='../S/427.html#L185'>defender</a>          185 src/gui/dialogs/attack_predictions.cpp 	const int resistance_modifier = defender.unit_.damage_from(*weapon, !attacker.stats_.is_attacker, defender.unit_.get_location());</span>
<span class='curline'><a href='../S/427.html#L259'>defender</a>          259 src/gui/dialogs/attack_predictions.cpp void attack_predictions::draw_hp_graph(drawing&amp; hp_graph, const combatant_data&amp; attacker, const combatant_data&amp; defender)</span>
<span class='curline'><a href='../S/427.html#L301'>defender</a>          301 src/gui/dialogs/attack_predictions.cpp 			if(defender.stats_.petrifies) {</span>
<span class='curline'><a href='../S/428.html#L41'>defender</a>           41 src/gui/dialogs/attack_predictions.hpp 	attack_predictions(battle_context&amp; bc, const unit&amp; attacker, const unit&amp; defender);</span>
<span class='curline'><a href='../S/428.html#L43'>defender</a>           43 src/gui/dialogs/attack_predictions.hpp 	static void display(battle_context&amp; bc, const unit&amp; attacker, const unit&amp; defender, CVideo&amp; video)</span>
<span class='curline'><a href='../S/428.html#L45'>defender</a>           45 src/gui/dialogs/attack_predictions.hpp 		attack_predictions(bc, attacker, defender).show(video);</span>
<span class='curline'><a href='../S/428.html#L68'>defender</a>           68 src/gui/dialogs/attack_predictions.hpp 	void set_data(window&amp; window, const combatant_data&amp; attacker, const combatant_data&amp; defender);</span>
<span class='curline'><a href='../S/428.html#L76'>defender</a>           76 src/gui/dialogs/attack_predictions.hpp 	void draw_hp_graph(drawing&amp; hp_graph, const combatant_data&amp; attacker, const combatant_data&amp; defender);</span>
<span class='curline'><a href='../S/459.html#L118'>defender</a>          118 src/gui/dialogs/unit_attack.cpp 		const battle_context_unit_stats&amp; defender = weapon.get_defender_stats();</span>
<span class='curline'><a href='../S/459.html#L122'>defender</a>          122 src/gui/dialogs/unit_attack.cpp 		const attack_type&amp; defender_weapon = defender.weapon ?</span>
<span class='curline'><a href='../S/459.html#L123'>defender</a>          123 src/gui/dialogs/unit_attack.cpp 			*defender.weapon : *no_weapon;</span>
<span class='curline'><a href='../S/459.html#L131'>defender</a>          131 src/gui/dialogs/unit_attack.cpp 		const color_t d_cth_color = game_config::red_to_green(defender.chance_to_hit);</span>
<span class='curline'><a href='../S/459.html#L155'>defender</a>          155 src/gui/dialogs/unit_attack.cpp 			&lt;&lt; defender.damage &lt;&lt; font::weapon_numbers_sep &lt;&lt; defender.num_blows</span>
<span class='curline'><a href='../S/459.html#L157'>defender</a>          157 src/gui/dialogs/unit_attack.cpp 			&lt;&lt; font::span_color(d_cth_color) &lt;&lt; defender.chance_to_hit &lt;&lt; "%&lt;/span&gt;";</span>
<span class='curline'><a href='../S/962.html#L961'>defender</a>          961 src/mouse_events.cpp 		std::vector&lt;battle_context&gt;&amp; bc_vector, unit_map::iterator attacker, unit_map::iterator defender)</span>
<span class='curline'><a href='../S/962.html#L967'>defender</a>          967 src/mouse_events.cpp 			battle_context bc(pc_.gamestate().board_.units_, attacker-&gt;get_location(), defender-&gt;get_location(), i);</span>
<span class='curline'><a href='../S/962.html#L986'>defender</a>          986 src/mouse_events.cpp 	unit_map::iterator defender = board.units_.find(defender_loc);</span>
<span class='curline'><a href='../S/962.html#L988'>defender</a>          988 src/mouse_events.cpp 	if(!attacker || !defender) {</span>
<span class='curline'><a href='../S/962.html#L994'>defender</a>          994 src/mouse_events.cpp 	const int best = fill_weapon_choices(bc_vector, attacker, defender);</span>
<span class='curline'><a href='../S/962.html#L1006'>defender</a>         1006 src/mouse_events.cpp 	gui2::dialogs::unit_attack dlg(attacker, defender, bc_vector, best);</span>
<span class='curline'><a href='../S/962.html#L1039'>defender</a>         1039 src/mouse_events.cpp 	unit_map::iterator defender = find_unit(defender_loc);</span>
<span class='curline'><a href='../S/962.html#L1040'>defender</a>         1040 src/mouse_events.cpp 	if(!defender || current_team().is_enemy(defender-&gt;side()) == false || defender-&gt;incapacitated()) {</span>
<span class='curline'><a href='../S/962.html#L1045'>defender</a>         1045 src/mouse_events.cpp 	fill_weapon_choices(bc_vector, attacker, defender);</span>
<span class='curline'><a href='../S/962.html#L1081'>defender</a>         1081 src/mouse_events.cpp 			defender-&gt;type_id(),</span>
<span class='curline'><a href='../S/17.html#L137'>defender</a>          137 src/mouse_events.hpp 	int fill_weapon_choices(std::vector&lt;battle_context&gt;&amp; bc_vector, unit_map::iterator attacker, unit_map::iterator defender);</span>
<span class='curline'><a href='../S/762.html#L844'>defender</a>          844 src/reports.cpp static config unit_weapons(reports::context &amp; rc, const unit *attacker, const map_location &amp;attacker_pos, const unit *defender, bool show_attacker)</span>
<span class='curline'><a href='../S/762.html#L846'>defender</a>          846 src/reports.cpp 	if (!attacker || !defender) return config();</span>
<span class='curline'><a href='../S/762.html#L848'>defender</a>          848 src/reports.cpp 	const unit* u = show_attacker ? attacker : defender;</span>
<span class='curline'><a href='../S/762.html#L849'>defender</a>          849 src/reports.cpp 	const map_location unit_loc = show_attacker ? attacker_pos : defender-&gt;get_location();</span>
<span class='curline'><a href='../S/762.html#L858'>defender</a>          858 src/reports.cpp 			battle_context weapon(rc.units(), attacker_pos, defender-&gt;get_location(), i, -1, 0.0, nullptr, attacker);</span>
<span class='curline'><a href='../S/998.html#L507'>defender</a>          507 src/units/udisplay.cpp void reset_helpers(const unit *attacker,const unit *defender);</span>
<span class='curline'><a href='../S/998.html#L510'>defender</a>          510 src/units/udisplay.cpp 		const_attack_ptr attack,const_attack_ptr secondary_attack, const map_location&amp; defender_loc,unit* defender)</span>
<span class='curline'><a href='../S/998.html#L518'>defender</a>          518 src/units/udisplay.cpp 	defender-&gt;set_facing(defender_loc.get_relative_dir(loc));</span>
<span class='curline'><a href='../S/998.html#L520'>defender</a>          520 src/units/udisplay.cpp 	animator.add_animation(defender,"draw_weapon",defender_loc,loc,0,false,"",{0,0,0},unit_animation::hit_type::MISS,secondary_attack,attack,0);</span>
<span class='curline'><a href='../S/998.html#L604'>defender</a>          604 src/units/udisplay.cpp 	unit &amp;defender = *def;</span>
<span class='curline'><a href='../S/998.html#L605'>defender</a>          605 src/units/udisplay.cpp 	int def_hitpoints = defender.hitpoints();</span>
<span class='curline'><a href='../S/998.html#L609'>defender</a>          609 src/units/udisplay.cpp 	defender.set_facing(b.get_relative_dir(a));</span>
<span class='curline'><a href='../S/998.html#L614'>defender</a>          614 src/units/udisplay.cpp 	unit_ability_list helpers = defender.get_abilities("resistance");</span>
<span class='curline'><a href='../S/998.html#L620'>defender</a>          620 src/units/udisplay.cpp 	if(damage &gt;= defender.hitpoints()) {</span>
<span class='curline'><a href='../S/998.html#L636'>defender</a>          636 src/units/udisplay.cpp 	animator.add_animation(&amp;defender, defender_anim, def-&gt;get_location(),</span>
<span class='curline'><a href='../S/998.html#L677'>defender</a>          677 src/units/udisplay.cpp 		defender.take_hit(removed_hp);</span>
<span class='curline'><a href='../S/998.html#L689'>defender</a>          689 src/units/udisplay.cpp void reset_helpers(const unit *attacker,const unit *defender)</span>
<span class='curline'><a href='../S/998.html#L702'>defender</a>          702 src/units/udisplay.cpp 	if(defender) {</span>
<span class='curline'><a href='../S/998.html#L703'>defender</a>          703 src/units/udisplay.cpp 		unit_ability_list helpers = defender-&gt;get_abilities("resistance");</span>
<span class='curline'><a href='../S/1022.html#L91'>defender</a>           91 src/units/udisplay.hpp void unit_draw_weapon( const map_location&amp; loc, unit&amp; u, const_attack_ptr attack=nullptr, const_attack_ptr secondary_attack=nullptr,const map_location&amp; defender_loc = map_location::null_location(), unit * defender=nullptr);</span>
<span class='curline'><a href='../S/1022.html#L97'>defender</a>           97 src/units/udisplay.hpp void unit_sheath_weapon( const map_location&amp; loc, unit* u=nullptr, const_attack_ptr attack=nullptr, const_attack_ptr secondary_attack=nullptr,const map_location&amp; defender_loc = map_location::null_location(), unit * defender=nullptr);</span>
<span class='curline'><a href='../S/1354.html#L56'>defender</a>           56 utils/wesnoth-attack-sim.c static void strike(struct unit *attacker, struct unit *defender)</span>
<span class='curline'><a href='../S/1354.html#L63'>defender</a>           63 utils/wesnoth-attack-sim.c 	if (damage &gt; defender-&gt;hp)</span>
<span class='curline'><a href='../S/1354.html#L64'>defender</a>           64 utils/wesnoth-attack-sim.c 		damage = defender-&gt;hp;</span>
<span class='curline'><a href='../S/1354.html#L65'>defender</a>           65 utils/wesnoth-attack-sim.c 	if (attacker-&gt;slows &amp;&amp; !defender-&gt;slowed) {</span>
<span class='curline'><a href='../S/1354.html#L66'>defender</a>           66 utils/wesnoth-attack-sim.c 		defender-&gt;slowed = true;</span>
<span class='curline'><a href='../S/1354.html#L67'>defender</a>           67 utils/wesnoth-attack-sim.c 		defender-&gt;damage = (defender-&gt;damage + 1) / 2;</span>
<span class='curline'><a href='../S/1354.html#L74'>defender</a>           74 utils/wesnoth-attack-sim.c 	defender-&gt;hp -= damage;</span>
<span class='curline'><a href='../S/1354.html#L75'>defender</a>           75 utils/wesnoth-attack-sim.c 	defender-&gt;touched = true;</span>
<span class='curline'><a href='../S/1354.html#L109'>defender</a>          109 utils/wesnoth-attack-sim.c static void calculate_attack(const struct unit *defender,</span>
<span class='curline'><a href='../S/1354.html#L126'>defender</a>          126 utils/wesnoth-attack-sim.c 		struct unit def = *defender;</span>
<span class='curline'><a href='../S/1354.html#L138'>defender</a>          138 utils/wesnoth-attack-sim.c 			def.num_attacks = num_attacks(defender-&gt;num_attacks,</span>
<span class='curline'><a href='../S/1354.html#L139'>defender</a>          139 utils/wesnoth-attack-sim.c 						      defender-&gt;max_hp, def.hp,</span>
<span class='curline'><a href='../S/1354.html#L155'>defender</a>          155 utils/wesnoth-attack-sim.c 	for (i = 0; i &lt;= defender-&gt;max_hp; i++)</span>
</pre>
</body>
</html>
