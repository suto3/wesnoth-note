<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>hp_chance</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/4386.html#L586'>hp_chance</a>         586 data/ai/lua/battle_calcs.lua     local stats  = { hp_chance = {}, average_hp = 0 }</span>
<span class='curline'><a href='../S/4386.html#L607'>hp_chance</a>         607 data/ai/lua/battle_calcs.lua             stats.hp_chance[hp] = hp_prob</span>
<span class='curline'><a href='../S/4386.html#L616'>hp_chance</a>         616 data/ai/lua/battle_calcs.lua     stats.hp_chance[skip_hp] = skip_prob</span>
<span class='curline'><a href='../S/4386.html#L620'>hp_chance</a>         620 data/ai/lua/battle_calcs.lua     stats.hp_chance[0] = stats.hp_chance[0] or 0</span>
<span class='curline'><a href='../S/4386.html#L624'>hp_chance</a>         624 data/ai/lua/battle_calcs.lua         stats.poisoned = 1. - stats.hp_chance[starting_hp]</span>
<span class='curline'><a href='../S/4386.html#L631'>hp_chance</a>         631 data/ai/lua/battle_calcs.lua         stats.slowed = 1. - stats.hp_chance[starting_hp]</span>
<span class='curline'><a href='../S/4386.html#L717'>hp_chance</a>         717 data/ai/lua/battle_calcs.lua     local att_stats, def_stats = { hp_chance = {} }, { hp_chance = {} }</span>
<span class='curline'><a href='../S/4386.html#L719'>hp_chance</a>         719 data/ai/lua/battle_calcs.lua     att_stats.hp_chance[0] = 0</span>
<span class='curline'><a href='../S/4386.html#L720'>hp_chance</a>         720 data/ai/lua/battle_calcs.lua     att_stats.hp_chance[21], att_stats.hp_chance[23], att_stats.hp_chance[25], att_stats.hp_chance[27] = 0.125, 0.375, 0.375, 0.125</span>
<span class='curline'><a href='../S/4386.html#L723'>hp_chance</a>         723 data/ai/lua/battle_calcs.lua     def_stats.hp_chance[0], def_stats.hp_chance[2], def_stats.hp_chance[10] = 0.09, 0.42, 0.49</span>
<span class='curline'><a href='../S/4386.html#L808'>hp_chance</a>         808 data/ai/lua/battle_calcs.lua         damage = damage + 8 * (att_stats.poisoned - att_stats.hp_chance[0])</span>
<span class='curline'><a href='../S/4386.html#L812'>hp_chance</a>         812 data/ai/lua/battle_calcs.lua         damage = damage + 6 * (att_stats.slowed - att_stats.hp_chance[0])</span>
<span class='curline'><a href='../S/4386.html#L835'>hp_chance</a>         835 data/ai/lua/battle_calcs.lua     value_fraction = value_fraction - att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4386.html#L842'>hp_chance</a>         842 data/ai/lua/battle_calcs.lua         level_bonus = 1. - att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4386.html#L845'>hp_chance</a>         845 data/ai/lua/battle_calcs.lua             level_bonus = (1. - att_stats.hp_chance[0]) * def_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4386.html#L865'>hp_chance</a>         865 data/ai/lua/battle_calcs.lua         damage = damage + 8 * (def_stats.poisoned - def_stats.hp_chance[0])</span>
<span class='curline'><a href='../S/4386.html#L869'>hp_chance</a>         869 data/ai/lua/battle_calcs.lua         damage = damage + 6 * (def_stats.slowed - def_stats.hp_chance[0])</span>
<span class='curline'><a href='../S/4386.html#L884'>hp_chance</a>         884 data/ai/lua/battle_calcs.lua     value_fraction = value_fraction + def_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4386.html#L891'>hp_chance</a>         891 data/ai/lua/battle_calcs.lua         defender_level_penalty = 1. - def_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4386.html#L894'>hp_chance</a>         894 data/ai/lua/battle_calcs.lua             defender_level_penalty = (1. - def_stats.hp_chance[0]) * att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4386.html#L1073'>hp_chance</a>        1073 data/ai/lua/battle_calcs.lua         att_stats[i] = { hp_chance = {} }</span>
<span class='curline'><a href='../S/4386.html#L1074'>hp_chance</a>        1074 data/ai/lua/battle_calcs.lua         def_stats[i] = { hp_chance = {} }</span>
<span class='curline'><a href='../S/4386.html#L1077'>hp_chance</a>        1077 data/ai/lua/battle_calcs.lua         for hp1,prob1 in pairs(def_stats[i-1].hp_chance) do -- Note: need pairs(), not ipairs() !!</span>
<span class='curline'><a href='../S/4386.html#L1079'>hp_chance</a>        1079 data/ai/lua/battle_calcs.lua                 att_stats[i].hp_chance[attackers[i].hitpoints] =</span>
<span class='curline'><a href='../S/4386.html#L1080'>hp_chance</a>        1080 data/ai/lua/battle_calcs.lua                     (att_stats[i].hp_chance[attackers[i].hitpoints] or 0) + prob1</span>
<span class='curline'><a href='../S/4386.html#L1081'>hp_chance</a>        1081 data/ai/lua/battle_calcs.lua                 def_stats[i].hp_chance[0] = (def_stats[i].hp_chance[0] or 0) + prob1</span>
<span class='curline'><a href='../S/4386.html#L1098'>hp_chance</a>        1098 data/ai/lua/battle_calcs.lua                 for hp2,prob2 in pairs(ast.hp_chance) do</span>
<span class='curline'><a href='../S/4386.html#L1099'>hp_chance</a>        1099 data/ai/lua/battle_calcs.lua                     att_stats[i].hp_chance[hp2] = (att_stats[i].hp_chance[hp2] or 0) + prob1 * prob2</span>
<span class='curline'><a href='../S/4386.html#L1101'>hp_chance</a>        1101 data/ai/lua/battle_calcs.lua                 for hp2,prob2 in pairs(dst.hp_chance) do</span>
<span class='curline'><a href='../S/4386.html#L1102'>hp_chance</a>        1102 data/ai/lua/battle_calcs.lua                     def_stats[i].hp_chance[hp2] = (def_stats[i].hp_chance[hp2] or 0) + prob1 * prob2</span>
<span class='curline'><a href='../S/4386.html#L1117'>hp_chance</a>        1117 data/ai/lua/battle_calcs.lua         for hp,prob in pairs(att_stats[i].hp_chance) do av_hp = av_hp + hp * prob end</span>
<span class='curline'><a href='../S/4386.html#L1120'>hp_chance</a>        1120 data/ai/lua/battle_calcs.lua         for hp,prob in pairs(def_stats[i].hp_chance) do av_hp = av_hp + hp * prob end</span>
<span class='curline'><a href='../S/4389.html#L236'>hp_chance</a>         236 data/ai/lua/ca_high_xp_attack.lua                 if (att_stats.hp_chance[0] &lt;= aggression) then</span>
<span class='curline'><a href='../S/4389.html#L237'>hp_chance</a>         237 data/ai/lua/ca_high_xp_attack.lua                     if (def_stats.hp_chance[0] &gt; 0) then</span>
<span class='curline'><a href='../S/4389.html#L238'>hp_chance</a>         238 data/ai/lua/ca_high_xp_attack.lua                         rating = 5000 + def_stats.hp_chance[0] - att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4389.html#L251'>hp_chance</a>         251 data/ai/lua/ca_high_xp_attack.lua                         own_value_loss = own_value_loss + att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4336.html#L26'>hp_chance</a>          26 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                 if (att_stats.hp_chance[attacker.hitpoints] == 1)</span>
<span class='curline'><a href='../S/4336.html#L27'>hp_chance</a>          27 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                     or ((def_stats.hp_chance[0] &gt;= 0.67) and (att_stats.hp_chance[0] == 0))</span>
<span class='curline'><a href='../S/4336.html#L29'>hp_chance</a>          29 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                     rating = target.max_hitpoints + def_stats.hp_chance[0] * 100</span>
<span class='curline'><a href='../S/4336.html#L34'>hp_chance</a>          34 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                     if (def_stats.hp_chance[0] &gt;= 0.67) then</span>
<span class='curline'><a href='../S/4329.html#L393'>hp_chance</a>         393 data/ai/micro_ais/cas/ca_bottleneck_move.lua                             if (att_stats.hp_chance[0] == 0) then</span>
<span class='curline'><a href='../S/4329.html#L399'>hp_chance</a>         399 data/ai/micro_ais/cas/ca_bottleneck_move.lua                                 and (att_stats.hp_chance[0] == 0)</span>
<span class='curline'><a href='../S/4329.html#L400'>hp_chance</a>         400 data/ai/micro_ais/cas/ca_bottleneck_move.lua                                 and (def_stats.hp_chance[0] &gt;= 0.66)</span>
<span class='curline'><a href='../S/4323.html#L268'>hp_chance</a>         268 data/ai/micro_ais/cas/ca_fast_attack_utils.lua         damage = damage + 8 * (att_stat.poisoned - att_stat.hp_chance[0])</span>
<span class='curline'><a href='../S/4323.html#L272'>hp_chance</a>         272 data/ai/micro_ais/cas/ca_fast_attack_utils.lua         damage = damage + 4 * (att_stat.slowed - att_stat.hp_chance[0])</span>
<span class='curline'><a href='../S/4323.html#L289'>hp_chance</a>         289 data/ai/micro_ais/cas/ca_fast_attack_utils.lua     fractional_damage = fractional_damage + att_stat.hp_chance[0]</span>
<span class='curline'><a href='../S/4323.html#L300'>hp_chance</a>         300 data/ai/micro_ais/cas/ca_fast_attack_utils.lua         level_bonus = 1. - att_stat.hp_chance[0]</span>
<span class='curline'><a href='../S/4323.html#L302'>hp_chance</a>         302 data/ai/micro_ais/cas/ca_fast_attack_utils.lua         level_bonus = (1. - att_stat.hp_chance[0]) * def_stat.hp_chance[0]</span>
<span class='curline'><a href='../S/4323.html#L466'>hp_chance</a>         466 data/ai/micro_ais/cas/ca_fast_attack_utils.lua         hp_chance = {},</span>
<span class='curline'><a href='../S/4323.html#L472'>hp_chance</a>         472 data/ai/micro_ais/cas/ca_fast_attack_utils.lua     att_stat.hp_chance[0] = tmp_att_stat.hp_chance[0]</span>
<span class='curline'><a href='../S/4323.html#L473'>hp_chance</a>         473 data/ai/micro_ais/cas/ca_fast_attack_utils.lua     for i = 1,#tmp_att_stat.hp_chance do</span>
<span class='curline'><a href='../S/4323.html#L474'>hp_chance</a>         474 data/ai/micro_ais/cas/ca_fast_attack_utils.lua         if (tmp_att_stat.hp_chance[i] ~= 0) then</span>
<span class='curline'><a href='../S/4323.html#L475'>hp_chance</a>         475 data/ai/micro_ais/cas/ca_fast_attack_utils.lua             att_stat.hp_chance[i] = tmp_att_stat.hp_chance[i]</span>
<span class='curline'><a href='../S/4323.html#L480'>hp_chance</a>         480 data/ai/micro_ais/cas/ca_fast_attack_utils.lua         hp_chance = {},</span>
<span class='curline'><a href='../S/4323.html#L486'>hp_chance</a>         486 data/ai/micro_ais/cas/ca_fast_attack_utils.lua     def_stat.hp_chance[0] = tmp_def_stat.hp_chance[0]</span>
<span class='curline'><a href='../S/4323.html#L487'>hp_chance</a>         487 data/ai/micro_ais/cas/ca_fast_attack_utils.lua     for i = 1,#tmp_def_stat.hp_chance do</span>
<span class='curline'><a href='../S/4323.html#L488'>hp_chance</a>         488 data/ai/micro_ais/cas/ca_fast_attack_utils.lua         if (tmp_def_stat.hp_chance[i] ~= 0) then</span>
<span class='curline'><a href='../S/4323.html#L489'>hp_chance</a>         489 data/ai/micro_ais/cas/ca_fast_attack_utils.lua             def_stat.hp_chance[i] = tmp_def_stat.hp_chance[i]</span>
<span class='curline'><a href='../S/4320.html#L106'>hp_chance</a>         106 data/ai/micro_ais/cas/ca_messenger_move.lua             if (att_stats.hp_chance[messenger.hitpoints] == 1)</span>
<span class='curline'><a href='../S/4320.html#L107'>hp_chance</a>         107 data/ai/micro_ais/cas/ca_messenger_move.lua                 or (def_stats.hp_chance[0] &gt;= tonumber(enemy_death_chance)) and (att_stats.hp_chance[0] &lt;= tonumber(messenger_death_chance))</span>
<span class='curline'><a href='../S/4320.html#L109'>hp_chance</a>         109 data/ai/micro_ais/cas/ca_messenger_move.lua                 rating = target.max_hitpoints + def_stats.hp_chance[0]*100 + att_stats.average_hp - def_stats.average_hp</span>
<span class='curline'><a href='../S/4314.html#L36'>hp_chance</a>          36 data/ai/micro_ais/cas/ca_protect_unit_attack.lua         if (attack.att_stats.hp_chance[0] == 0)</span>
<span class='curline'><a href='../S/4314.html#L59'>hp_chance</a>          59 data/ai/micro_ais/cas/ca_protect_unit_attack.lua                             for hp,chance in pairs(def_stats.hp_chance) do</span>
<span class='curline'><a href='../S/4314.html#L75'>hp_chance</a>          75 data/ai/micro_ais/cas/ca_protect_unit_attack.lua             for hp,chance in pairs(attack.att_stats.hp_chance) do</span>
<span class='curline'><a href='../S/5004.html#L30'>hp_chance</a>          30 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua         if (att_stats.hp_chance[0] == 0) then</span>
<span class='curline'><a href='../S/5004.html#L31'>hp_chance</a>          31 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua             local rating = def_stats.hp_chance[0] * 100</span>
</pre>
</body>
</html>
