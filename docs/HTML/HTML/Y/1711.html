<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>L</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/240.html#L468'>L</a>                 468 src/ai/default/aspect_attacks.cpp static bool call_lua_filter_fcn(lua_State* L, const unit&amp; u, int idx)</span>
<span class='curline'><a href='../S/240.html#L470'>L</a>                 470 src/ai/default/aspect_attacks.cpp 	lua_rawgeti(L, LUA_REGISTRYINDEX, idx);</span>
<span class='curline'><a href='../S/240.html#L471'>L</a>                 471 src/ai/default/aspect_attacks.cpp 	luaW_pushunit(L, u.underlying_id());</span>
<span class='curline'><a href='../S/240.html#L472'>L</a>                 472 src/ai/default/aspect_attacks.cpp 	luaW_pcall(L, 1, 1);</span>
<span class='curline'><a href='../S/240.html#L473'>L</a>                 473 src/ai/default/aspect_attacks.cpp 	bool result = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/240.html#L474'>L</a>                 474 src/ai/default/aspect_attacks.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/236.html#L119'>L</a>                 119 src/ai/default/recruitment.hpp 	recruit_job(std::vector&lt;std::string&gt; t, std::string L, std::string id, int n, int i, bool s, bool p, bool b)</span>
<span class='curline'><a href='../S/236.html#L120'>L</a>                 120 src/ai/default/recruitment.hpp 		: types(t), leader(L), id(id)</span>
<span class='curline'><a href='../S/295.html#L44'>L</a>                  44 src/ai/lua/aspect_advancements.cpp unit_advancements_aspect::unit_advancements_aspect(lua_State* L, int n)</span>
<span class='curline'><a href='../S/295.html#L46'>L</a>                  46 src/ai/lua/aspect_advancements.cpp 	, L_(L)</span>
<span class='curline'><a href='../S/295.html#L49'>L</a>                  49 src/ai/lua/aspect_advancements.cpp 	lua_settop(L, n);</span>
<span class='curline'><a href='../S/295.html#L52'>L</a>                  52 src/ai/lua/aspect_advancements.cpp 	ref_ = luaL_ref(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/298.html#L31'>L</a>                  31 src/ai/lua/aspect_advancements.hpp 	unit_advancements_aspect(lua_State* L, int n);</span>
<span class='curline'><a href='../S/293.html#L59'>L</a>                  59 src/ai/lua/core.cpp static void push_attack_analysis(lua_State *L, const attack_analysis&amp;);</span>
<span class='curline'><a href='../S/293.html#L61'>L</a>                  61 src/ai/lua/core.cpp void lua_ai_context::init(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L64'>L</a>                  64 src/ai/lua/core.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/293.html#L65'>L</a>                  65 src/ai/lua/core.cpp 	lua_setfield(L, LUA_REGISTRYINDEX, aisKey);</span>
<span class='curline'><a href='../S/293.html#L70'>L</a>                  70 src/ai/lua/core.cpp 	int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/293.html#L72'>L</a>                  72 src/ai/lua/core.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, aisKey);</span>
<span class='curline'><a href='../S/293.html#L73'>L</a>                  73 src/ai/lua/core.cpp 	lua_rawgeti(L, -1, num_);</span>
<span class='curline'><a href='../S/293.html#L75'>L</a>                  75 src/ai/lua/core.cpp 	lua_getfield(L, -1, "params");</span>
<span class='curline'><a href='../S/293.html#L76'>L</a>                  76 src/ai/lua/core.cpp 	luaW_toconfig(L, -1, cfg);</span>
<span class='curline'><a href='../S/293.html#L78'>L</a>                  78 src/ai/lua/core.cpp 	lua_settop(L, top);</span>
<span class='curline'><a href='../S/293.html#L83'>L</a>                  83 src/ai/lua/core.cpp 	int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/293.html#L85'>L</a>                  85 src/ai/lua/core.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, aisKey);</span>
<span class='curline'><a href='../S/293.html#L86'>L</a>                  86 src/ai/lua/core.cpp 	lua_rawgeti(L, -1, num_);</span>
<span class='curline'><a href='../S/293.html#L88'>L</a>                  88 src/ai/lua/core.cpp 	luaW_pushconfig(L, cfg);</span>
<span class='curline'><a href='../S/293.html#L89'>L</a>                  89 src/ai/lua/core.cpp 	lua_setfield(L, -2, "params");</span>
<span class='curline'><a href='../S/293.html#L91'>L</a>                  91 src/ai/lua/core.cpp 	lua_settop(L, top);</span>
<span class='curline'><a href='../S/293.html#L96'>L</a>                  96 src/ai/lua/core.cpp 	int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/293.html#L98'>L</a>                  98 src/ai/lua/core.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, aisKey);</span>
<span class='curline'><a href='../S/293.html#L99'>L</a>                  99 src/ai/lua/core.cpp 	lua_rawgeti(L, -1, num_);</span>
<span class='curline'><a href='../S/293.html#L101'>L</a>                 101 src/ai/lua/core.cpp 	lua_getfield(L, -1, "data");</span>
<span class='curline'><a href='../S/293.html#L102'>L</a>                 102 src/ai/lua/core.cpp 	luaW_toconfig(L, -1, cfg);</span>
<span class='curline'><a href='../S/293.html#L104'>L</a>                 104 src/ai/lua/core.cpp 	lua_settop(L, top);</span>
<span class='curline'><a href='../S/293.html#L109'>L</a>                 109 src/ai/lua/core.cpp 	int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/293.html#L111'>L</a>                 111 src/ai/lua/core.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, aisKey);</span>
<span class='curline'><a href='../S/293.html#L112'>L</a>                 112 src/ai/lua/core.cpp 	lua_rawgeti(L, -1, num_);</span>
<span class='curline'><a href='../S/293.html#L114'>L</a>                 114 src/ai/lua/core.cpp 	luaW_pushconfig(L, cfg);</span>
<span class='curline'><a href='../S/293.html#L115'>L</a>                 115 src/ai/lua/core.cpp 	lua_setfield(L, -2, "data");</span>
<span class='curline'><a href='../S/293.html#L117'>L</a>                 117 src/ai/lua/core.cpp 	lua_settop(L, top);</span>
<span class='curline'><a href='../S/293.html#L120'>L</a>                 120 src/ai/lua/core.cpp static ai::engine_lua &amp;get_engine(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L123'>L</a>                 123 src/ai/lua/core.cpp 			lua_touserdata(L, lua_upvalueindex(1))));</span>
<span class='curline'><a href='../S/293.html#L126'>L</a>                 126 src/ai/lua/core.cpp static ai::readonly_context &amp;get_readonly_context(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L128'>L</a>                 128 src/ai/lua/core.cpp 	return get_engine(L).get_readonly_context();</span>
<span class='curline'><a href='../S/293.html#L136'>L</a>                 136 src/ai/lua/core.cpp static int transform_ai_action(lua_State *L, ai::action_result_ptr action_result)</span>
<span class='curline'><a href='../S/293.html#L138'>L</a>                 138 src/ai/lua/core.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/293.html#L139'>L</a>                 139 src/ai/lua/core.cpp 	lua_pushboolean(L,action_result-&gt;is_ok());</span>
<span class='curline'><a href='../S/293.html#L140'>L</a>                 140 src/ai/lua/core.cpp 	lua_setfield(L, -2, "ok");</span>
<span class='curline'><a href='../S/293.html#L141'>L</a>                 141 src/ai/lua/core.cpp 	lua_pushboolean(L,action_result-&gt;is_gamestate_changed());</span>
<span class='curline'><a href='../S/293.html#L142'>L</a>                 142 src/ai/lua/core.cpp 	lua_setfield(L, -2, "gamestate_changed");</span>
<span class='curline'><a href='../S/293.html#L143'>L</a>                 143 src/ai/lua/core.cpp 	lua_pushinteger(L,action_result-&gt;get_status());</span>
<span class='curline'><a href='../S/293.html#L144'>L</a>                 144 src/ai/lua/core.cpp 	lua_setfield(L, -2, "status");</span>
<span class='curline'><a href='../S/293.html#L145'>L</a>                 145 src/ai/lua/core.cpp 	lua_pushstring(L, actions::get_error_name(action_result-&gt;get_status()).c_str());</span>
<span class='curline'><a href='../S/293.html#L146'>L</a>                 146 src/ai/lua/core.cpp 	lua_setfield(L, -2, "result");</span>
<span class='curline'><a href='../S/293.html#L150'>L</a>                 150 src/ai/lua/core.cpp static int cfun_ai_get_suitable_keep(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L154'>L</a>                 154 src/ai/lua/core.cpp 	ai::readonly_context &amp;context = get_readonly_context(L);</span>
<span class='curline'><a href='../S/293.html#L156'>L</a>                 156 src/ai/lua/core.cpp 	if (lua_isuserdata(L, index))</span>
<span class='curline'><a href='../S/293.html#L158'>L</a>                 158 src/ai/lua/core.cpp 		leader = luaW_tounit(L, index);</span>
<span class='curline'><a href='../S/293.html#L159'>L</a>                 159 src/ai/lua/core.cpp 		if (!leader) return luaL_argerror(L, 1, "unknown unit");</span>
<span class='curline'><a href='../S/293.html#L161'>L</a>                 161 src/ai/lua/core.cpp 	else return luaW_type_error(L, 1, "unit");</span>
<span class='curline'><a href='../S/293.html#L169'>L</a>                 169 src/ai/lua/core.cpp 		lua_pushnumber(L, res.wml_x());</span>
<span class='curline'><a href='../S/293.html#L170'>L</a>                 170 src/ai/lua/core.cpp 		lua_pushnumber(L, res.wml_y());</span>
<span class='curline'><a href='../S/293.html#L175'>L</a>                 175 src/ai/lua/core.cpp static int ai_move(lua_State *L, bool exec, bool remove_movement)</span>
<span class='curline'><a href='../S/293.html#L177'>L</a>                 177 src/ai/lua/core.cpp 	int side = get_readonly_context(L).get_side();</span>
<span class='curline'><a href='../S/293.html#L178'>L</a>                 178 src/ai/lua/core.cpp 	map_location from = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/293.html#L179'>L</a>                 179 src/ai/lua/core.cpp 	map_location to = luaW_checklocation(L, 2);</span>
<span class='curline'><a href='../S/293.html#L181'>L</a>                 181 src/ai/lua/core.cpp 	if (lua_isboolean(L, 3)) {</span>
<span class='curline'><a href='../S/293.html#L182'>L</a>                 182 src/ai/lua/core.cpp 		unreach_is_ok = luaW_toboolean(L, 3);</span>
<span class='curline'><a href='../S/293.html#L185'>L</a>                 185 src/ai/lua/core.cpp 	return transform_ai_action(L,move_result);</span>
<span class='curline'><a href='../S/293.html#L188'>L</a>                 188 src/ai/lua/core.cpp static int cfun_ai_execute_move_full(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L190'>L</a>                 190 src/ai/lua/core.cpp 	return ai_move(L, true, true);</span>
<span class='curline'><a href='../S/293.html#L193'>L</a>                 193 src/ai/lua/core.cpp static int cfun_ai_execute_move_partial(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L195'>L</a>                 195 src/ai/lua/core.cpp 	return ai_move(L, true, false);</span>
<span class='curline'><a href='../S/293.html#L198'>L</a>                 198 src/ai/lua/core.cpp static int cfun_ai_check_move(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L200'>L</a>                 200 src/ai/lua/core.cpp 	return ai_move(L, false, false);</span>
<span class='curline'><a href='../S/293.html#L203'>L</a>                 203 src/ai/lua/core.cpp static int ai_attack(lua_State *L, bool exec)</span>
<span class='curline'><a href='../S/293.html#L205'>L</a>                 205 src/ai/lua/core.cpp 	ai::readonly_context &amp;context = get_readonly_context(L);</span>
<span class='curline'><a href='../S/293.html#L208'>L</a>                 208 src/ai/lua/core.cpp 	map_location attacker = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/293.html#L209'>L</a>                 209 src/ai/lua/core.cpp 	map_location defender = luaW_checklocation(L, 2);</span>
<span class='curline'><a href='../S/293.html#L214'>L</a>                 214 src/ai/lua/core.cpp 	if (!lua_isnoneornil(L, 3)) {</span>
<span class='curline'><a href='../S/293.html#L215'>L</a>                 215 src/ai/lua/core.cpp 		attacker_weapon = lua_tointeger(L, 3);</span>
<span class='curline'><a href='../S/293.html#L225'>L</a>                 225 src/ai/lua/core.cpp 	if (!lua_isnoneornil(L, 4) &amp;&amp; lua_isnumber(L,4)) {</span>
<span class='curline'><a href='../S/293.html#L226'>L</a>                 226 src/ai/lua/core.cpp 		aggression = lua_tonumber(L, 4);</span>
<span class='curline'><a href='../S/293.html#L231'>L</a>                 231 src/ai/lua/core.cpp 	return transform_ai_action(L,attack_result);</span>
<span class='curline'><a href='../S/293.html#L234'>L</a>                 234 src/ai/lua/core.cpp static int cfun_ai_execute_attack(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L236'>L</a>                 236 src/ai/lua/core.cpp 	return ai_attack(L, true);</span>
<span class='curline'><a href='../S/293.html#L239'>L</a>                 239 src/ai/lua/core.cpp static int cfun_ai_check_attack(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L241'>L</a>                 241 src/ai/lua/core.cpp 	return ai_attack(L, false);</span>
<span class='curline'><a href='../S/293.html#L244'>L</a>                 244 src/ai/lua/core.cpp static int ai_stopunit_select(lua_State *L, bool exec, bool remove_movement, bool remove_attacks)</span>
<span class='curline'><a href='../S/293.html#L246'>L</a>                 246 src/ai/lua/core.cpp 	int side = get_readonly_context(L).get_side();</span>
<span class='curline'><a href='../S/293.html#L247'>L</a>                 247 src/ai/lua/core.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/293.html#L250'>L</a>                 250 src/ai/lua/core.cpp 	return transform_ai_action(L,stopunit_result);</span>
<span class='curline'><a href='../S/293.html#L253'>L</a>                 253 src/ai/lua/core.cpp static int cfun_ai_execute_stopunit_moves(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L255'>L</a>                 255 src/ai/lua/core.cpp 	return ai_stopunit_select(L, true, true, false);</span>
<span class='curline'><a href='../S/293.html#L258'>L</a>                 258 src/ai/lua/core.cpp static int cfun_ai_execute_stopunit_attacks(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L260'>L</a>                 260 src/ai/lua/core.cpp 	return ai_stopunit_select(L, true, false, true);</span>
<span class='curline'><a href='../S/293.html#L263'>L</a>                 263 src/ai/lua/core.cpp static int cfun_ai_execute_stopunit_all(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L265'>L</a>                 265 src/ai/lua/core.cpp 	return ai_stopunit_select(L, true, true, true);</span>
<span class='curline'><a href='../S/293.html#L268'>L</a>                 268 src/ai/lua/core.cpp static int cfun_ai_check_stopunit(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L270'>L</a>                 270 src/ai/lua/core.cpp 	return ai_stopunit_select(L, false, true, true);</span>
<span class='curline'><a href='../S/293.html#L273'>L</a>                 273 src/ai/lua/core.cpp static int ai_synced_command(lua_State *L, bool exec)</span>
<span class='curline'><a href='../S/293.html#L275'>L</a>                 275 src/ai/lua/core.cpp 	const char *lua_code = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/293.html#L276'>L</a>                 276 src/ai/lua/core.cpp 	int side = get_readonly_context(L).get_side();</span>
<span class='curline'><a href='../S/293.html#L278'>L</a>                 278 src/ai/lua/core.cpp 	if (!lua_isnoneornil(L, 2)) {</span>
<span class='curline'><a href='../S/293.html#L279'>L</a>                 279 src/ai/lua/core.cpp 		location.set_wml_x(lua_tonumber(L, 2));</span>
<span class='curline'><a href='../S/293.html#L280'>L</a>                 280 src/ai/lua/core.cpp 		location.set_wml_y(lua_tonumber(L, 3));</span>
<span class='curline'><a href='../S/293.html#L284'>L</a>                 284 src/ai/lua/core.cpp 	return transform_ai_action(L,synced_command_result);</span>
<span class='curline'><a href='../S/293.html#L287'>L</a>                 287 src/ai/lua/core.cpp static int cfun_ai_execute_synced_command(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L289'>L</a>                 289 src/ai/lua/core.cpp 	return ai_synced_command(L, true);</span>
<span class='curline'><a href='../S/293.html#L292'>L</a>                 292 src/ai/lua/core.cpp static int cfun_ai_check_synced_command(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L294'>L</a>                 294 src/ai/lua/core.cpp 	return ai_synced_command(L, false);</span>
<span class='curline'><a href='../S/293.html#L297'>L</a>                 297 src/ai/lua/core.cpp static int ai_recruit(lua_State *L, bool exec)</span>
<span class='curline'><a href='../S/293.html#L299'>L</a>                 299 src/ai/lua/core.cpp 	const char *unit_name = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/293.html#L300'>L</a>                 300 src/ai/lua/core.cpp 	int side = get_readonly_context(L).get_side();</span>
<span class='curline'><a href='../S/293.html#L302'>L</a>                 302 src/ai/lua/core.cpp 	if (!lua_isnoneornil(L, 2)) {</span>
<span class='curline'><a href='../S/293.html#L303'>L</a>                 303 src/ai/lua/core.cpp 		where.set_wml_x(lua_tonumber(L, 2));</span>
<span class='curline'><a href='../S/293.html#L304'>L</a>                 304 src/ai/lua/core.cpp 		where.set_wml_y(lua_tonumber(L, 3));</span>
<span class='curline'><a href='../S/293.html#L309'>L</a>                 309 src/ai/lua/core.cpp 	return transform_ai_action(L,recruit_result);</span>
<span class='curline'><a href='../S/293.html#L312'>L</a>                 312 src/ai/lua/core.cpp static int cfun_ai_execute_recruit(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L314'>L</a>                 314 src/ai/lua/core.cpp 	return ai_recruit(L, true);</span>
<span class='curline'><a href='../S/293.html#L317'>L</a>                 317 src/ai/lua/core.cpp static int cfun_ai_check_recruit(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L319'>L</a>                 319 src/ai/lua/core.cpp 	return ai_recruit(L, false);</span>
<span class='curline'><a href='../S/293.html#L322'>L</a>                 322 src/ai/lua/core.cpp static int ai_recall(lua_State *L, bool exec)</span>
<span class='curline'><a href='../S/293.html#L324'>L</a>                 324 src/ai/lua/core.cpp 	const char *unit_id = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/293.html#L325'>L</a>                 325 src/ai/lua/core.cpp 	int side = get_readonly_context(L).get_side();</span>
<span class='curline'><a href='../S/293.html#L327'>L</a>                 327 src/ai/lua/core.cpp 	if (!lua_isnoneornil(L, 2)) {</span>
<span class='curline'><a href='../S/293.html#L328'>L</a>                 328 src/ai/lua/core.cpp 		where.set_wml_x(lua_tonumber(L, 2));</span>
<span class='curline'><a href='../S/293.html#L329'>L</a>                 329 src/ai/lua/core.cpp 		where.set_wml_y(lua_tonumber(L, 3));</span>
<span class='curline'><a href='../S/293.html#L334'>L</a>                 334 src/ai/lua/core.cpp 	return transform_ai_action(L,recall_result);</span>
<span class='curline'><a href='../S/293.html#L337'>L</a>                 337 src/ai/lua/core.cpp static int cfun_ai_execute_recall(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L339'>L</a>                 339 src/ai/lua/core.cpp 	return ai_recall(L, true);</span>
<span class='curline'><a href='../S/293.html#L342'>L</a>                 342 src/ai/lua/core.cpp static int cfun_ai_check_recall(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L344'>L</a>                 344 src/ai/lua/core.cpp 	return ai_recall(L, false);</span>
<span class='curline'><a href='../S/293.html#L355'>L</a>                 355 src/ai/lua/core.cpp static int cfun_ai_get_targets(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L357'>L</a>                 357 src/ai/lua/core.cpp 	move_map enemy_dst_src = get_readonly_context(L).get_enemy_dstsrc();</span>
<span class='curline'><a href='../S/293.html#L358'>L</a>                 358 src/ai/lua/core.cpp 	std::vector&lt;target&gt; targets = get_engine(L).get_ai_context()-&gt;find_targets(enemy_dst_src);</span>
<span class='curline'><a href='../S/293.html#L361'>L</a>                 361 src/ai/lua/core.cpp 	lua_createtable(L, 0, 0);</span>
<span class='curline'><a href='../S/293.html#L364'>L</a>                 364 src/ai/lua/core.cpp 		lua_pushinteger(L, i);</span>
<span class='curline'><a href='../S/293.html#L367'>L</a>                 367 src/ai/lua/core.cpp 		lua_createtable(L, 3, 0);</span>
<span class='curline'><a href='../S/293.html#L370'>L</a>                 370 src/ai/lua/core.cpp 		lua_pushstring(L, "type");</span>
<span class='curline'><a href='../S/293.html#L371'>L</a>                 371 src/ai/lua/core.cpp 		lua_pushstring(L, it-&gt;type.to_string().c_str());</span>
<span class='curline'><a href='../S/293.html#L372'>L</a>                 372 src/ai/lua/core.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L374'>L</a>                 374 src/ai/lua/core.cpp 		lua_pushstring(L, "loc");</span>
<span class='curline'><a href='../S/293.html#L375'>L</a>                 375 src/ai/lua/core.cpp 		luaW_pushlocation(L, it-&gt;loc);</span>
<span class='curline'><a href='../S/293.html#L376'>L</a>                 376 src/ai/lua/core.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L378'>L</a>                 378 src/ai/lua/core.cpp 		lua_pushstring(L, "value");</span>
<span class='curline'><a href='../S/293.html#L379'>L</a>                 379 src/ai/lua/core.cpp 		lua_pushnumber(L, it-&gt;value);</span>
<span class='curline'><a href='../S/293.html#L380'>L</a>                 380 src/ai/lua/core.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L382'>L</a>                 382 src/ai/lua/core.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L391'>L</a>                 391 src/ai/lua/core.cpp static int cfun_ai_get_aggression(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L394'>L</a>                 394 src/ai/lua/core.cpp 	double aggression = get_readonly_context(L).get_aggression();</span>
<span class='curline'><a href='../S/293.html#L395'>L</a>                 395 src/ai/lua/core.cpp 	lua_pushnumber(L, aggression);</span>
<span class='curline'><a href='../S/293.html#L399'>L</a>                 399 src/ai/lua/core.cpp static int cfun_ai_get_attack_depth(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L402'>L</a>                 402 src/ai/lua/core.cpp 	int attack_depth = get_readonly_context(L).get_attack_depth();</span>
<span class='curline'><a href='../S/293.html#L403'>L</a>                 403 src/ai/lua/core.cpp 	lua_pushnumber(L, attack_depth);</span>
<span class='curline'><a href='../S/293.html#L407'>L</a>                 407 src/ai/lua/core.cpp static int cfun_ai_get_attacks(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L410'>L</a>                 410 src/ai/lua/core.cpp 	const ai::attacks_vector&amp; attacks = get_readonly_context(L).get_attacks();</span>
<span class='curline'><a href='../S/293.html#L411'>L</a>                 411 src/ai/lua/core.cpp 	lua_createtable(L, attacks.size(), 0);</span>
<span class='curline'><a href='../S/293.html#L412'>L</a>                 412 src/ai/lua/core.cpp 	int table_index = lua_gettop(L);</span>
<span class='curline'><a href='../S/293.html#L417'>L</a>                 417 src/ai/lua/core.cpp 		push_attack_analysis(L, *it);</span>
<span class='curline'><a href='../S/293.html#L419'>L</a>                 419 src/ai/lua/core.cpp 		lua_rawseti(L, table_index, i);</span>
<span class='curline'><a href='../S/293.html#L424'>L</a>                 424 src/ai/lua/core.cpp static int cfun_ai_get_avoid(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L428'>L</a>                 428 src/ai/lua/core.cpp 	terrain_filter avoid = get_readonly_context(L).get_avoid();</span>
<span class='curline'><a href='../S/293.html#L430'>L</a>                 430 src/ai/lua/core.cpp 	lua_push(L, locs);</span>
<span class='curline'><a href='../S/293.html#L435'>L</a>                 435 src/ai/lua/core.cpp static int cfun_ai_get_caution(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L438'>L</a>                 438 src/ai/lua/core.cpp 	double caution = get_readonly_context(L).get_caution();</span>
<span class='curline'><a href='../S/293.html#L439'>L</a>                 439 src/ai/lua/core.cpp 	lua_pushnumber(L, caution);</span>
<span class='curline'><a href='../S/293.html#L443'>L</a>                 443 src/ai/lua/core.cpp static int cfun_ai_get_grouping(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L446'>L</a>                 446 src/ai/lua/core.cpp 	std::string grouping = get_readonly_context(L).get_grouping();</span>
<span class='curline'><a href='../S/293.html#L447'>L</a>                 447 src/ai/lua/core.cpp 	lua_pushstring(L, grouping.c_str());</span>
<span class='curline'><a href='../S/293.html#L451'>L</a>                 451 src/ai/lua/core.cpp static int cfun_ai_get_leader_aggression(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L454'>L</a>                 454 src/ai/lua/core.cpp 	double leader_aggression = get_readonly_context(L).get_leader_aggression();</span>
<span class='curline'><a href='../S/293.html#L455'>L</a>                 455 src/ai/lua/core.cpp 	lua_pushnumber(L, leader_aggression);</span>
<span class='curline'><a href='../S/293.html#L459'>L</a>                 459 src/ai/lua/core.cpp static int cfun_ai_get_leader_goal(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L462'>L</a>                 462 src/ai/lua/core.cpp 	config goal = get_readonly_context(L).get_leader_goal();</span>
<span class='curline'><a href='../S/293.html#L463'>L</a>                 463 src/ai/lua/core.cpp 	luaW_pushconfig(L, goal);</span>
<span class='curline'><a href='../S/293.html#L467'>L</a>                 467 src/ai/lua/core.cpp static int cfun_ai_get_leader_ignores_keep(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L470'>L</a>                 470 src/ai/lua/core.cpp 	bool leader_ignores_keep = get_readonly_context(L).get_leader_ignores_keep();</span>
<span class='curline'><a href='../S/293.html#L471'>L</a>                 471 src/ai/lua/core.cpp 	lua_pushboolean(L, leader_ignores_keep);</span>
<span class='curline'><a href='../S/293.html#L475'>L</a>                 475 src/ai/lua/core.cpp static int cfun_ai_get_leader_value(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L478'>L</a>                 478 src/ai/lua/core.cpp 	double leader_value = get_readonly_context(L).get_leader_value();</span>
<span class='curline'><a href='../S/293.html#L479'>L</a>                 479 src/ai/lua/core.cpp 	lua_pushnumber(L, leader_value);</span>
<span class='curline'><a href='../S/293.html#L483'>L</a>                 483 src/ai/lua/core.cpp static int cfun_ai_get_passive_leader(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L486'>L</a>                 486 src/ai/lua/core.cpp 	bool passive_leader = get_readonly_context(L).get_passive_leader();</span>
<span class='curline'><a href='../S/293.html#L487'>L</a>                 487 src/ai/lua/core.cpp 	lua_pushboolean(L, passive_leader);</span>
<span class='curline'><a href='../S/293.html#L491'>L</a>                 491 src/ai/lua/core.cpp static int cfun_ai_get_passive_leader_shares_keep(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L494'>L</a>                 494 src/ai/lua/core.cpp 	bool passive_leader_shares_keep = get_readonly_context(L).get_passive_leader_shares_keep();</span>
<span class='curline'><a href='../S/293.html#L495'>L</a>                 495 src/ai/lua/core.cpp 	lua_pushboolean(L, passive_leader_shares_keep);</span>
<span class='curline'><a href='../S/293.html#L499'>L</a>                 499 src/ai/lua/core.cpp static int cfun_ai_get_recruitment_pattern(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L502'>L</a>                 502 src/ai/lua/core.cpp 	std::vector&lt;std::string&gt; recruiting = get_readonly_context(L).get_recruitment_pattern();</span>
<span class='curline'><a href='../S/293.html#L504'>L</a>                 504 src/ai/lua/core.cpp 	lua_createtable(L, size, 0); // create an empty table with predefined size</span>
<span class='curline'><a href='../S/293.html#L507'>L</a>                 507 src/ai/lua/core.cpp 		lua_pushinteger(L, i + 1); // Indexing in Lua starts from 1</span>
<span class='curline'><a href='../S/293.html#L508'>L</a>                 508 src/ai/lua/core.cpp 		lua_pushstring(L, recruiting[i].c_str());</span>
<span class='curline'><a href='../S/293.html#L509'>L</a>                 509 src/ai/lua/core.cpp 		lua_settable(L, -3);</span>
<span class='curline'><a href='../S/293.html#L514'>L</a>                 514 src/ai/lua/core.cpp static int cfun_ai_get_scout_village_targeting(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L517'>L</a>                 517 src/ai/lua/core.cpp 	double scout_village_targeting = get_readonly_context(L).get_scout_village_targeting();</span>
<span class='curline'><a href='../S/293.html#L518'>L</a>                 518 src/ai/lua/core.cpp 	lua_pushnumber(L, scout_village_targeting);</span>
<span class='curline'><a href='../S/293.html#L522'>L</a>                 522 src/ai/lua/core.cpp static int cfun_ai_get_simple_targeting(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L525'>L</a>                 525 src/ai/lua/core.cpp 	bool simple_targeting = get_readonly_context(L).get_simple_targeting();</span>
<span class='curline'><a href='../S/293.html#L526'>L</a>                 526 src/ai/lua/core.cpp 	lua_pushboolean(L, simple_targeting);</span>
<span class='curline'><a href='../S/293.html#L530'>L</a>                 530 src/ai/lua/core.cpp static int cfun_ai_get_support_villages(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L533'>L</a>                 533 src/ai/lua/core.cpp 	bool support_villages = get_readonly_context(L).get_support_villages();</span>
<span class='curline'><a href='../S/293.html#L534'>L</a>                 534 src/ai/lua/core.cpp 	lua_pushboolean(L, support_villages);</span>
<span class='curline'><a href='../S/293.html#L538'>L</a>                 538 src/ai/lua/core.cpp static int cfun_ai_get_village_value(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L541'>L</a>                 541 src/ai/lua/core.cpp 	double village_value = get_readonly_context(L).get_village_value();</span>
<span class='curline'><a href='../S/293.html#L542'>L</a>                 542 src/ai/lua/core.cpp 	lua_pushnumber(L, village_value);</span>
<span class='curline'><a href='../S/293.html#L546'>L</a>                 546 src/ai/lua/core.cpp static int cfun_ai_get_villages_per_scout(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L549'>L</a>                 549 src/ai/lua/core.cpp 	int villages_per_scout = get_readonly_context(L).get_villages_per_scout();</span>
<span class='curline'><a href='../S/293.html#L550'>L</a>                 550 src/ai/lua/core.cpp 	lua_pushnumber(L, villages_per_scout);</span>
<span class='curline'><a href='../S/293.html#L555'>L</a>                 555 src/ai/lua/core.cpp static int cfun_attack_rating(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L557'>L</a>                 557 src/ai/lua/core.cpp 	int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/293.html#L559'>L</a>                 559 src/ai/lua/core.cpp 	lua_getfield(L, -1, "att_ptr"); // [-2: attack_analysis; -1: pointer to attack_analysis object in c++]</span>
<span class='curline'><a href='../S/293.html#L561'>L</a>                 561 src/ai/lua/core.cpp 	const attack_analysis* aa_ptr = static_cast&lt; attack_analysis * &gt;(lua_touserdata(L, -1));</span>
<span class='curline'><a href='../S/293.html#L565'>L</a>                 565 src/ai/lua/core.cpp 	double aggression = get_readonly_context(L).get_aggression();</span>
<span class='curline'><a href='../S/293.html#L567'>L</a>                 567 src/ai/lua/core.cpp 	double rating = aa_ptr-&gt;rating(aggression, get_readonly_context(L));</span>
<span class='curline'><a href='../S/293.html#L569'>L</a>                 569 src/ai/lua/core.cpp 	lua_settop(L, top);</span>
<span class='curline'><a href='../S/293.html#L571'>L</a>                 571 src/ai/lua/core.cpp 	lua_pushnumber(L, rating);</span>
<span class='curline'><a href='../S/293.html#L575'>L</a>                 575 src/ai/lua/core.cpp static void push_movements(lua_State *L, const std::vector&lt; std::pair &lt; map_location, map_location &gt; &gt; &amp; moves)</span>
<span class='curline'><a href='../S/293.html#L577'>L</a>                 577 src/ai/lua/core.cpp 	lua_createtable(L, moves.size(), 0);</span>
<span class='curline'><a href='../S/293.html#L579'>L</a>                 579 src/ai/lua/core.cpp 	int table_index = lua_gettop(L);</span>
<span class='curline'><a href='../S/293.html#L585'>L</a>                 585 src/ai/lua/core.cpp 		lua_createtable(L, 2, 0); // Creating a table for a pair of map_location's</span>
<span class='curline'><a href='../S/293.html#L587'>L</a>                 587 src/ai/lua/core.cpp 		lua_pushstring(L, "src");</span>
<span class='curline'><a href='../S/293.html#L588'>L</a>                 588 src/ai/lua/core.cpp 		luaW_pushlocation(L, move-&gt;first);</span>
<span class='curline'><a href='../S/293.html#L589'>L</a>                 589 src/ai/lua/core.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L591'>L</a>                 591 src/ai/lua/core.cpp 		lua_pushstring(L, "dst");</span>
<span class='curline'><a href='../S/293.html#L592'>L</a>                 592 src/ai/lua/core.cpp 		luaW_pushlocation(L, move-&gt;second);</span>
<span class='curline'><a href='../S/293.html#L593'>L</a>                 593 src/ai/lua/core.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L595'>L</a>                 595 src/ai/lua/core.cpp 		lua_rawseti(L, table_index, i); // setting  the pair as an element of the movements table</span>
<span class='curline'><a href='../S/293.html#L601'>L</a>                 601 src/ai/lua/core.cpp static void push_attack_analysis(lua_State *L, const attack_analysis&amp; aa)</span>
<span class='curline'><a href='../S/293.html#L603'>L</a>                 603 src/ai/lua/core.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/293.html#L606'>L</a>                 606 src/ai/lua/core.cpp 	lua_pushstring(L, "att_ptr");</span>
<span class='curline'><a href='../S/293.html#L607'>L</a>                 607 src/ai/lua/core.cpp 	lua_pushlightuserdata(L, const_cast&lt;attack_analysis*&gt;(&amp;aa));</span>
<span class='curline'><a href='../S/293.html#L608'>L</a>                 608 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L611'>L</a>                 611 src/ai/lua/core.cpp 	lua_pushstring(L, "rating");</span>
<span class='curline'><a href='../S/293.html#L612'>L</a>                 612 src/ai/lua/core.cpp 	lua_pushlightuserdata(L, &amp;get_engine(L));</span>
<span class='curline'><a href='../S/293.html#L613'>L</a>                 613 src/ai/lua/core.cpp 	lua_pushcclosure(L, &amp;cfun_attack_rating, 1);</span>
<span class='curline'><a href='../S/293.html#L614'>L</a>                 614 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L616'>L</a>                 616 src/ai/lua/core.cpp 	lua_pushstring(L, "movements");</span>
<span class='curline'><a href='../S/293.html#L617'>L</a>                 617 src/ai/lua/core.cpp 	push_movements(L, aa.movements);</span>
<span class='curline'><a href='../S/293.html#L618'>L</a>                 618 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L620'>L</a>                 620 src/ai/lua/core.cpp 	lua_pushstring(L, "target");</span>
<span class='curline'><a href='../S/293.html#L621'>L</a>                 621 src/ai/lua/core.cpp 	luaW_pushlocation(L, aa.target);</span>
<span class='curline'><a href='../S/293.html#L622'>L</a>                 622 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L624'>L</a>                 624 src/ai/lua/core.cpp 	lua_pushstring(L, "target_value");</span>
<span class='curline'><a href='../S/293.html#L625'>L</a>                 625 src/ai/lua/core.cpp 	lua_pushnumber(L, aa.target_value);</span>
<span class='curline'><a href='../S/293.html#L626'>L</a>                 626 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L628'>L</a>                 628 src/ai/lua/core.cpp 	lua_pushstring(L, "avg_losses");</span>
<span class='curline'><a href='../S/293.html#L629'>L</a>                 629 src/ai/lua/core.cpp 	lua_pushnumber(L, aa.avg_losses);</span>
<span class='curline'><a href='../S/293.html#L630'>L</a>                 630 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L632'>L</a>                 632 src/ai/lua/core.cpp 	lua_pushstring(L, "chance_to_kill");</span>
<span class='curline'><a href='../S/293.html#L633'>L</a>                 633 src/ai/lua/core.cpp 	lua_pushnumber(L, aa.chance_to_kill);</span>
<span class='curline'><a href='../S/293.html#L634'>L</a>                 634 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L636'>L</a>                 636 src/ai/lua/core.cpp 	lua_pushstring(L, "avg_damage_inflicted");</span>
<span class='curline'><a href='../S/293.html#L637'>L</a>                 637 src/ai/lua/core.cpp 	lua_pushnumber(L, aa.avg_damage_inflicted);</span>
<span class='curline'><a href='../S/293.html#L638'>L</a>                 638 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L640'>L</a>                 640 src/ai/lua/core.cpp 	lua_pushstring(L, "target_starting_damage");</span>
<span class='curline'><a href='../S/293.html#L641'>L</a>                 641 src/ai/lua/core.cpp 	lua_pushinteger(L, aa.target_starting_damage);</span>
<span class='curline'><a href='../S/293.html#L642'>L</a>                 642 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L644'>L</a>                 644 src/ai/lua/core.cpp 	lua_pushstring(L, "avg_damage_taken");</span>
<span class='curline'><a href='../S/293.html#L645'>L</a>                 645 src/ai/lua/core.cpp 	lua_pushnumber(L, aa.avg_damage_taken);</span>
<span class='curline'><a href='../S/293.html#L646'>L</a>                 646 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L648'>L</a>                 648 src/ai/lua/core.cpp 	lua_pushstring(L, "resources_used");</span>
<span class='curline'><a href='../S/293.html#L649'>L</a>                 649 src/ai/lua/core.cpp 	lua_pushnumber(L, aa.resources_used);</span>
<span class='curline'><a href='../S/293.html#L650'>L</a>                 650 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L652'>L</a>                 652 src/ai/lua/core.cpp 	lua_pushstring(L, "terrain_quality");</span>
<span class='curline'><a href='../S/293.html#L653'>L</a>                 653 src/ai/lua/core.cpp 	lua_pushnumber(L, aa.alternative_terrain_quality);</span>
<span class='curline'><a href='../S/293.html#L654'>L</a>                 654 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L656'>L</a>                 656 src/ai/lua/core.cpp 	lua_pushstring(L, "alternative_terrain_quality");</span>
<span class='curline'><a href='../S/293.html#L657'>L</a>                 657 src/ai/lua/core.cpp 	lua_pushnumber(L, aa.alternative_terrain_quality);</span>
<span class='curline'><a href='../S/293.html#L658'>L</a>                 658 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L660'>L</a>                 660 src/ai/lua/core.cpp 	lua_pushstring(L, "vulnerability");</span>
<span class='curline'><a href='../S/293.html#L661'>L</a>                 661 src/ai/lua/core.cpp 	lua_pushnumber(L, aa.vulnerability);</span>
<span class='curline'><a href='../S/293.html#L662'>L</a>                 662 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L664'>L</a>                 664 src/ai/lua/core.cpp 	lua_pushstring(L, "support");</span>
<span class='curline'><a href='../S/293.html#L665'>L</a>                 665 src/ai/lua/core.cpp 	lua_pushnumber(L, aa.support);</span>
<span class='curline'><a href='../S/293.html#L666'>L</a>                 666 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L668'>L</a>                 668 src/ai/lua/core.cpp 	lua_pushstring(L, "leader_threat");</span>
<span class='curline'><a href='../S/293.html#L669'>L</a>                 669 src/ai/lua/core.cpp 	lua_pushboolean(L, aa.leader_threat);</span>
<span class='curline'><a href='../S/293.html#L670'>L</a>                 670 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L672'>L</a>                 672 src/ai/lua/core.cpp 	lua_pushstring(L, "uses_leader");</span>
<span class='curline'><a href='../S/293.html#L673'>L</a>                 673 src/ai/lua/core.cpp 	lua_pushboolean(L, aa.uses_leader);</span>
<span class='curline'><a href='../S/293.html#L674'>L</a>                 674 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L676'>L</a>                 676 src/ai/lua/core.cpp 	lua_pushstring(L, "is_surrounded");</span>
<span class='curline'><a href='../S/293.html#L677'>L</a>                 677 src/ai/lua/core.cpp 	lua_pushboolean(L, aa.is_surrounded);</span>
<span class='curline'><a href='../S/293.html#L678'>L</a>                 678 src/ai/lua/core.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L681'>L</a>                 681 src/ai/lua/core.cpp static void push_move_map(lua_State *L, const move_map&amp; m)</span>
<span class='curline'><a href='../S/293.html#L683'>L</a>                 683 src/ai/lua/core.cpp 	lua_createtable(L, 0, 0); // the main table</span>
<span class='curline'><a href='../S/293.html#L699'>L</a>                 699 src/ai/lua/core.cpp 		lua_pushinteger(L, lhash(key));</span>
<span class='curline'><a href='../S/293.html#L701'>L</a>                 701 src/ai/lua/core.cpp 		lua_createtable(L, 0, 0);</span>
<span class='curline'><a href='../S/293.html#L705'>L</a>                 705 src/ai/lua/core.cpp 			luaW_pushlocation(L, it-&gt;second);</span>
<span class='curline'><a href='../S/293.html#L706'>L</a>                 706 src/ai/lua/core.cpp 			lua_rawseti(L, -2, index);</span>
<span class='curline'><a href='../S/293.html#L713'>L</a>                 713 src/ai/lua/core.cpp 		lua_settable(L, -3);</span>
<span class='curline'><a href='../S/293.html#L720'>L</a>                 720 src/ai/lua/core.cpp static int cfun_ai_get_dstsrc(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L722'>L</a>                 722 src/ai/lua/core.cpp 	move_map dst_src = get_readonly_context(L).get_dstsrc();</span>
<span class='curline'><a href='../S/293.html#L723'>L</a>                 723 src/ai/lua/core.cpp 	get_readonly_context(L).set_dst_src_valid_lua();</span>
<span class='curline'><a href='../S/293.html#L724'>L</a>                 724 src/ai/lua/core.cpp 	push_move_map(L, dst_src);</span>
<span class='curline'><a href='../S/293.html#L728'>L</a>                 728 src/ai/lua/core.cpp static int cfun_ai_get_srcdst(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L730'>L</a>                 730 src/ai/lua/core.cpp 	move_map src_dst = get_readonly_context(L).get_srcdst();</span>
<span class='curline'><a href='../S/293.html#L731'>L</a>                 731 src/ai/lua/core.cpp 	get_readonly_context(L).set_src_dst_valid_lua();</span>
<span class='curline'><a href='../S/293.html#L732'>L</a>                 732 src/ai/lua/core.cpp 	push_move_map(L, src_dst);</span>
<span class='curline'><a href='../S/293.html#L736'>L</a>                 736 src/ai/lua/core.cpp static int cfun_ai_get_enemy_dstsrc(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L738'>L</a>                 738 src/ai/lua/core.cpp 	move_map enemy_dst_src = get_readonly_context(L).get_enemy_dstsrc();</span>
<span class='curline'><a href='../S/293.html#L739'>L</a>                 739 src/ai/lua/core.cpp 	get_readonly_context(L).set_dst_src_enemy_valid_lua();</span>
<span class='curline'><a href='../S/293.html#L740'>L</a>                 740 src/ai/lua/core.cpp 	push_move_map(L, enemy_dst_src);</span>
<span class='curline'><a href='../S/293.html#L744'>L</a>                 744 src/ai/lua/core.cpp static int cfun_ai_get_enemy_srcdst(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L746'>L</a>                 746 src/ai/lua/core.cpp 	move_map enemy_src_dst = get_readonly_context(L).get_enemy_srcdst();</span>
<span class='curline'><a href='../S/293.html#L747'>L</a>                 747 src/ai/lua/core.cpp 	get_readonly_context(L).set_src_dst_enemy_valid_lua();</span>
<span class='curline'><a href='../S/293.html#L748'>L</a>                 748 src/ai/lua/core.cpp 	push_move_map(L, enemy_src_dst);</span>
<span class='curline'><a href='../S/293.html#L752'>L</a>                 752 src/ai/lua/core.cpp static int cfun_ai_is_dst_src_valid(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L754'>L</a>                 754 src/ai/lua/core.cpp 	bool valid = get_readonly_context(L).is_dst_src_valid_lua();</span>
<span class='curline'><a href='../S/293.html#L755'>L</a>                 755 src/ai/lua/core.cpp 	lua_pushboolean(L, valid);</span>
<span class='curline'><a href='../S/293.html#L759'>L</a>                 759 src/ai/lua/core.cpp static int cfun_ai_is_dst_src_enemy_valid(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L761'>L</a>                 761 src/ai/lua/core.cpp 	bool valid = get_readonly_context(L).is_dst_src_enemy_valid_lua();</span>
<span class='curline'><a href='../S/293.html#L762'>L</a>                 762 src/ai/lua/core.cpp 	lua_pushboolean(L, valid);</span>
<span class='curline'><a href='../S/293.html#L766'>L</a>                 766 src/ai/lua/core.cpp static int cfun_ai_is_src_dst_valid(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L768'>L</a>                 768 src/ai/lua/core.cpp 	bool valid = get_readonly_context(L).is_src_dst_valid_lua();</span>
<span class='curline'><a href='../S/293.html#L769'>L</a>                 769 src/ai/lua/core.cpp 	lua_pushboolean(L, valid);</span>
<span class='curline'><a href='../S/293.html#L773'>L</a>                 773 src/ai/lua/core.cpp static int cfun_ai_is_src_dst_enemy_valid(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L775'>L</a>                 775 src/ai/lua/core.cpp 	bool valid = get_readonly_context(L).is_src_dst_enemy_valid_lua();</span>
<span class='curline'><a href='../S/293.html#L776'>L</a>                 776 src/ai/lua/core.cpp 	lua_pushboolean(L, valid);</span>
<span class='curline'><a href='../S/293.html#L780'>L</a>                 780 src/ai/lua/core.cpp static int cfun_ai_recalculate_move_maps(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L782'>L</a>                 782 src/ai/lua/core.cpp 	get_readonly_context(L).recalculate_move_maps();</span>
<span class='curline'><a href='../S/293.html#L786'>L</a>                 786 src/ai/lua/core.cpp static int cfun_ai_recalculate_move_maps_enemy(lua_State *L)</span>
<span class='curline'><a href='../S/293.html#L788'>L</a>                 788 src/ai/lua/core.cpp 	get_readonly_context(L).recalculate_move_maps_enemy();</span>
<span class='curline'><a href='../S/293.html#L798'>L</a>                 798 src/ai/lua/core.cpp static int impl_ai_aspect_get(lua_State* L)</span>
<span class='curline'><a href='../S/293.html#L800'>L</a>                 800 src/ai/lua/core.cpp 	const aspect_map&amp; aspects = get_engine(L).get_readonly_context().get_aspects();</span>
<span class='curline'><a href='../S/293.html#L801'>L</a>                 801 src/ai/lua/core.cpp 	aspect_map::const_iterator iter = aspects.find(luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/293.html#L808'>L</a>                 808 src/ai/lua/core.cpp 		lua_pushboolean(L, aspect_as_bool-&gt;get());</span>
<span class='curline'><a href='../S/293.html#L810'>L</a>                 810 src/ai/lua/core.cpp 		lua_pushinteger(L, aspect_as_int-&gt;get());</span>
<span class='curline'><a href='../S/293.html#L812'>L</a>                 812 src/ai/lua/core.cpp 		lua_pushnumber(L, aspect_as_double-&gt;get());</span>
<span class='curline'><a href='../S/293.html#L814'>L</a>                 814 src/ai/lua/core.cpp 		luaW_pushconfig(L, aspect_as_config-&gt;get());</span>
<span class='curline'><a href='../S/293.html#L816'>L</a>                 816 src/ai/lua/core.cpp 		lua_push(L, aspect_as_string_list-&gt;get());</span>
<span class='curline'><a href='../S/293.html#L820'>L</a>                 820 src/ai/lua/core.cpp 		lua_push(L, result);</span>
<span class='curline'><a href='../S/293.html#L830'>L</a>                 830 src/ai/lua/core.cpp 		int my_side = get_engine(L).get_readonly_context().get_side();</span>
<span class='curline'><a href='../S/293.html#L842'>L</a>                 842 src/ai/lua/core.cpp 		lua_createtable(L, 0, 2);</span>
<span class='curline'><a href='../S/293.html#L843'>L</a>                 843 src/ai/lua/core.cpp 		lua_createtable(L, attackers.size(), 0);</span>
<span class='curline'><a href='../S/293.html#L845'>L</a>                 845 src/ai/lua/core.cpp 			luaW_pushunit(L, attackers[i]-&gt;underlying_id());</span>
<span class='curline'><a href='../S/293.html#L846'>L</a>                 846 src/ai/lua/core.cpp 			lua_rawseti(L, -2, i + 1);</span>
<span class='curline'><a href='../S/293.html#L848'>L</a>                 848 src/ai/lua/core.cpp 		lua_setfield(L, -2, "own");</span>
<span class='curline'><a href='../S/293.html#L849'>L</a>                 849 src/ai/lua/core.cpp 		lua_createtable(L, enemies.size(), 0);</span>
<span class='curline'><a href='../S/293.html#L851'>L</a>                 851 src/ai/lua/core.cpp 			luaW_pushunit(L, enemies[i]-&gt;underlying_id());</span>
<span class='curline'><a href='../S/293.html#L852'>L</a>                 852 src/ai/lua/core.cpp 			lua_rawseti(L, -2, i + 1);</span>
<span class='curline'><a href='../S/293.html#L854'>L</a>                 854 src/ai/lua/core.cpp 		lua_setfield(L, -2, "enemy");</span>
<span class='curline'><a href='../S/293.html#L858'>L</a>                 858 src/ai/lua/core.cpp 		int my_side = get_engine(L).get_readonly_context().get_side();</span>
<span class='curline'><a href='../S/293.html#L859'>L</a>                 859 src/ai/lua/core.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/293.html#L865'>L</a>                 865 src/ai/lua/core.cpp 			lua_pushinteger(L, lhash(u-&gt;get_location()));</span>
<span class='curline'><a href='../S/293.html#L866'>L</a>                 866 src/ai/lua/core.cpp 			lua_push(L, val.get_advancements(u));</span>
<span class='curline'><a href='../S/293.html#L867'>L</a>                 867 src/ai/lua/core.cpp 			lua_settable(L, -3);</span>
<span class='curline'><a href='../S/293.html#L870'>L</a>                 870 src/ai/lua/core.cpp 		lua_pushnil(L);</span>
<span class='curline'><a href='../S/293.html#L875'>L</a>                 875 src/ai/lua/core.cpp static int impl_ai_aspect_set(lua_State* L)</span>
<span class='curline'><a href='../S/293.html#L877'>L</a>                 877 src/ai/lua/core.cpp 	lua_pushstring(L, "attempted to write to the ai.aspects table, which is read-only");</span>
<span class='curline'><a href='../S/293.html#L878'>L</a>                 878 src/ai/lua/core.cpp 	return lua_error(L);</span>
<span class='curline'><a href='../S/293.html#L881'>L</a>                 881 src/ai/lua/core.cpp static int impl_ai_get(lua_State* L)</span>
<span class='curline'><a href='../S/293.html#L883'>L</a>                 883 src/ai/lua/core.cpp 	if(!lua_isstring(L,2)) {</span>
<span class='curline'><a href='../S/293.html#L886'>L</a>                 886 src/ai/lua/core.cpp 	ai::engine_lua&amp; engine = get_engine(L);</span>
<span class='curline'><a href='../S/293.html#L887'>L</a>                 887 src/ai/lua/core.cpp 	std::string m = lua_tostring(L,2);</span>
<span class='curline'><a href='../S/293.html#L889'>L</a>                 889 src/ai/lua/core.cpp 		lua_pushinteger(L, engine.get_readonly_context().get_side());</span>
<span class='curline'><a href='../S/293.html#L893'>L</a>                 893 src/ai/lua/core.cpp 		lua_newtable(L); // [-1: Aspects table]</span>
<span class='curline'><a href='../S/293.html#L894'>L</a>                 894 src/ai/lua/core.cpp 		lua_newtable(L); // [-1: Aspects metatable  -2: Aspects table]</span>
<span class='curline'><a href='../S/293.html#L895'>L</a>                 895 src/ai/lua/core.cpp 		lua_pushlightuserdata(L, &amp;engine); // [-1: Engine  -2: Aspects mt  -3: Aspects table]</span>
<span class='curline'><a href='../S/293.html#L896'>L</a>                 896 src/ai/lua/core.cpp 		lua_pushcclosure(L, &amp;impl_ai_aspect_get, 1); // [-1: Metafunction  -2: Aspects mt  -3: Aspects table]</span>
<span class='curline'><a href='../S/293.html#L897'>L</a>                 897 src/ai/lua/core.cpp 		lua_setfield(L, -2, "__index"); // [-1: Aspects metatable  -2: Aspects table]</span>
<span class='curline'><a href='../S/293.html#L898'>L</a>                 898 src/ai/lua/core.cpp 		lua_pushcfunction(L, &amp;impl_ai_aspect_set); // [-1: Metafunction  -2: Aspects mt  -3: Aspects table]</span>
<span class='curline'><a href='../S/293.html#L899'>L</a>                 899 src/ai/lua/core.cpp 		lua_setfield(L, -2, "__newindex"); // [-1: Aspects metatable  -2: Aspects table]</span>
<span class='curline'><a href='../S/293.html#L900'>L</a>                 900 src/ai/lua/core.cpp 		lua_setmetatable(L, -2); // [-1: Aspects table]</span>
<span class='curline'><a href='../S/293.html#L953'>L</a>                 953 src/ai/lua/core.cpp 			lua_pushlightuserdata(L, &amp;engine); // [-1: engine  ...]</span>
<span class='curline'><a href='../S/293.html#L954'>L</a>                 954 src/ai/lua/core.cpp 			lua_pushcclosure(L, p-&gt;func, 1); // [-1: function  ...]</span>
<span class='curline'><a href='../S/293.html#L956'>L</a>                 956 src/ai/lua/core.cpp 			lua_pushstring(L, p-&gt;name); // [-1: name  -2: function  ...]</span>
<span class='curline'><a href='../S/293.html#L957'>L</a>                 957 src/ai/lua/core.cpp 			lua_pushvalue(L, -2); // [-1: function  -2: name  -3: function ...]</span>
<span class='curline'><a href='../S/293.html#L958'>L</a>                 958 src/ai/lua/core.cpp 			lua_rawset(L, 1); // [-1: function  ...]</span>
<span class='curline'><a href='../S/293.html#L962'>L</a>                 962 src/ai/lua/core.cpp 	lua_pushstring(L, "read_only");</span>
<span class='curline'><a href='../S/293.html#L963'>L</a>                 963 src/ai/lua/core.cpp 	lua_rawget(L, 1);</span>
<span class='curline'><a href='../S/293.html#L964'>L</a>                 964 src/ai/lua/core.cpp 	bool read_only = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/293.html#L965'>L</a>                 965 src/ai/lua/core.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/293.html#L983'>L</a>                 983 src/ai/lua/core.cpp 			lua_pushlightuserdata(L, &amp;engine);</span>
<span class='curline'><a href='../S/293.html#L984'>L</a>                 984 src/ai/lua/core.cpp 			lua_pushcclosure(L, p-&gt;func, 1);</span>
<span class='curline'><a href='../S/293.html#L991'>L</a>                 991 src/ai/lua/core.cpp static void generate_and_push_ai_table(lua_State* L, ai::engine_lua* engine) {</span>
<span class='curline'><a href='../S/293.html#L993'>L</a>                 993 src/ai/lua/core.cpp 	lua_newtable(L); // [-1: ai table]</span>
<span class='curline'><a href='../S/293.html#L994'>L</a>                 994 src/ai/lua/core.cpp 	lua_newtable(L); // [-1: metatable  -2: ai table]</span>
<span class='curline'><a href='../S/293.html#L995'>L</a>                 995 src/ai/lua/core.cpp 	lua_pushlightuserdata(L, engine); // [-1: engine  -2: metatable  -3: ai table]</span>
<span class='curline'><a href='../S/293.html#L996'>L</a>                 996 src/ai/lua/core.cpp 	lua_pushcclosure(L, &amp;impl_ai_get, 1); // [-1: metafunc  -2: metatable  -3: ai table]</span>
<span class='curline'><a href='../S/293.html#L997'>L</a>                 997 src/ai/lua/core.cpp 	lua_setfield(L, -2, "__index"); // [-1: metatable  -2: ai table]</span>
<span class='curline'><a href='../S/293.html#L998'>L</a>                 998 src/ai/lua/core.cpp 	lua_setmetatable(L, -2); // [-1: ai table]</span>
<span class='curline'><a href='../S/293.html#L1001'>L</a>                1001 src/ai/lua/core.cpp static size_t generate_and_push_ai_state(lua_State* L, ai::engine_lua* engine)</span>
<span class='curline'><a href='../S/293.html#L1004'>L</a>                1004 src/ai/lua/core.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, aisKey); // [-1: AIs registry table]</span>
<span class='curline'><a href='../S/293.html#L1005'>L</a>                1005 src/ai/lua/core.cpp 	size_t length_ai = lua_rawlen(L, -1); // length of table</span>
<span class='curline'><a href='../S/293.html#L1006'>L</a>                1006 src/ai/lua/core.cpp 	lua_newtable(L); // [-1: AI state table  -2: AIs registry table]</span>
<span class='curline'><a href='../S/293.html#L1007'>L</a>                1007 src/ai/lua/core.cpp 	generate_and_push_ai_table(L, engine); // [-1: AI routines  -2: AI state  -3: AIs registry]</span>
<span class='curline'><a href='../S/293.html#L1008'>L</a>                1008 src/ai/lua/core.cpp 	lua_setfield(L, -2, "ai"); // [-1: AI state  -2: AIs registry]</span>
<span class='curline'><a href='../S/293.html#L1009'>L</a>                1009 src/ai/lua/core.cpp 	lua_pushvalue(L, -1); // [-1: AI state  -2: AI state  -3: AIs registry]</span>
<span class='curline'><a href='../S/293.html#L1010'>L</a>                1010 src/ai/lua/core.cpp 	lua_rawseti(L, -3, length_ai + 1); // [-1: AI state  -2: AIs registry]</span>
<span class='curline'><a href='../S/293.html#L1011'>L</a>                1011 src/ai/lua/core.cpp 	lua_remove(L, -2); // [-1: AI state table]</span>
<span class='curline'><a href='../S/293.html#L1015'>L</a>                1015 src/ai/lua/core.cpp lua_ai_context* lua_ai_context::create(lua_State *L, char const *code, ai::engine_lua *engine)</span>
<span class='curline'><a href='../S/293.html#L1017'>L</a>                1017 src/ai/lua/core.cpp 	int res_ai = luaL_loadstring(L, code); // [-1: AI code]</span>
<span class='curline'><a href='../S/293.html#L1021'>L</a>                1021 src/ai/lua/core.cpp 		char const *m = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/293.html#L1023'>L</a>                1023 src/ai/lua/core.cpp 		lua_pop(L, 2);//return with stack size 0 []</span>
<span class='curline'><a href='../S/293.html#L1027'>L</a>                1027 src/ai/lua/core.cpp 	size_t idx = generate_and_push_ai_state(L, engine); // [-1: AI state  -2: AI code]</span>
<span class='curline'><a href='../S/293.html#L1028'>L</a>                1028 src/ai/lua/core.cpp 	lua_pushvalue(L, -2); // [-1: AI code  -2: AI state  -3: AI code]</span>
<span class='curline'><a href='../S/293.html#L1029'>L</a>                1029 src/ai/lua/core.cpp 	lua_setfield(L, -2, "update_self"); // [-1: AI state  -2: AI code]</span>
<span class='curline'><a href='../S/293.html#L1030'>L</a>                1030 src/ai/lua/core.cpp 	lua_pushlightuserdata(L, engine);</span>
<span class='curline'><a href='../S/293.html#L1031'>L</a>                1031 src/ai/lua/core.cpp 	lua_setfield(L, -2, "engine"); // [-1: AI state  -2: AI code]</span>
<span class='curline'><a href='../S/293.html#L1032'>L</a>                1032 src/ai/lua/core.cpp 	lua_pop(L, 2);</span>
<span class='curline'><a href='../S/293.html#L1033'>L</a>                1033 src/ai/lua/core.cpp 	return new lua_ai_context(L, idx, engine-&gt;get_readonly_context().get_side());</span>
<span class='curline'><a href='../S/293.html#L1041'>L</a>                1041 src/ai/lua/core.cpp 	lua_getfield(L, -1, "update_self"); // [-1: AI code  -2: AI state]</span>
<span class='curline'><a href='../S/293.html#L1042'>L</a>                1042 src/ai/lua/core.cpp 	lua_getfield(L, -2, "params"); // [-1: Arguments  -2: AI code  -3: AI state]</span>
<span class='curline'><a href='../S/293.html#L1043'>L</a>                1043 src/ai/lua/core.cpp 	lua_getfield(L, -3, "data"); // [-1: Persistent data  -2: Arguments  -3: AI code  -4: AI state]</span>
<span class='curline'><a href='../S/293.html#L1046'>L</a>                1046 src/ai/lua/core.cpp 	if (!luaW_pcall(L, 2, 1, true)) { // [-1: Result  -2: AI state]</span>
<span class='curline'><a href='../S/293.html#L1051'>L</a>                1051 src/ai/lua/core.cpp 	lua_setfield(L, -2, "self"); // [-1: AI state]</span>
<span class='curline'><a href='../S/293.html#L1054'>L</a>                1054 src/ai/lua/core.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/293.html#L1057'>L</a>                1057 src/ai/lua/core.cpp lua_ai_action_handler* lua_ai_action_handler::create(lua_State *L, char const *code, lua_ai_context &amp;context)</span>
<span class='curline'><a href='../S/293.html#L1059'>L</a>                1059 src/ai/lua/core.cpp 	int res = luaL_loadstring(L, code);//stack size is now 1 [ -1: f]</span>
<span class='curline'><a href='../S/293.html#L1062'>L</a>                1062 src/ai/lua/core.cpp 		char const *m = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/293.html#L1064'>L</a>                1064 src/ai/lua/core.cpp 		lua_pop(L, 2);//return with stack size 0 []</span>
<span class='curline'><a href='../S/293.html#L1069'>L</a>                1069 src/ai/lua/core.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, aisKey);   //stack size is now 2  [-1: ais_table -2: f]</span>
<span class='curline'><a href='../S/293.html#L1071'>L</a>                1071 src/ai/lua/core.cpp 	size_t length = lua_rawlen(L, -1);//length of ais_table</span>
<span class='curline'><a href='../S/293.html#L1072'>L</a>                1072 src/ai/lua/core.cpp 	lua_pushvalue(L, -2); //stack size is now 3: [-1: f  -2: ais_table  -3: f]</span>
<span class='curline'><a href='../S/293.html#L1073'>L</a>                1073 src/ai/lua/core.cpp 	lua_rawseti(L, -2, length + 1);// ais_table[length+1]=f.  stack size is now 2 [-1: ais_table  -2: f]</span>
<span class='curline'><a href='../S/293.html#L1074'>L</a>                1074 src/ai/lua/core.cpp 	lua_remove(L, -1);//stack size is now 1 [-1: f]</span>
<span class='curline'><a href='../S/293.html#L1075'>L</a>                1075 src/ai/lua/core.cpp 	lua_remove(L, -1);//stack size is now 0 []</span>
<span class='curline'><a href='../S/293.html#L1077'>L</a>                1077 src/ai/lua/core.cpp 	return new lua_ai_action_handler(L, context, length + 1);</span>
<span class='curline'><a href='../S/293.html#L1083'>L</a>                1083 src/ai/lua/core.cpp lua_ai_load::lua_ai_load(lua_ai_context&amp; ctx, bool read_only) : L(ctx.L), was_readonly(false)</span>
<span class='curline'><a href='../S/293.html#L1087'>L</a>                1087 src/ai/lua/core.cpp 	lua_getglobal(L, "ai");</span>
<span class='curline'><a href='../S/293.html#L1088'>L</a>                1088 src/ai/lua/core.cpp 	if(!lua_isnoneornil(L, -1)) {</span>
<span class='curline'><a href='../S/293.html#L1090'>L</a>                1090 src/ai/lua/core.cpp 		lua_getfield(L, -1, "read_only");</span>
<span class='curline'><a href='../S/293.html#L1091'>L</a>                1091 src/ai/lua/core.cpp 		was_readonly = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/293.html#L1092'>L</a>                1092 src/ai/lua/core.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/293.html#L1094'>L</a>                1094 src/ai/lua/core.cpp 		lua_pushstring(L, "read_only");</span>
<span class='curline'><a href='../S/293.html#L1095'>L</a>                1095 src/ai/lua/core.cpp 		lua_pushboolean(L, read_only);</span>
<span class='curline'><a href='../S/293.html#L1096'>L</a>                1096 src/ai/lua/core.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L1099'>L</a>                1099 src/ai/lua/core.cpp 	lua_pop(L, 1); // Pop the nil value off the stack</span>
<span class='curline'><a href='../S/293.html#L1100'>L</a>                1100 src/ai/lua/core.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, aisKey); // [-1: AI registry]</span>
<span class='curline'><a href='../S/293.html#L1101'>L</a>                1101 src/ai/lua/core.cpp 	lua_rawgeti(L, -1, ctx.num_); // [-1: AI state  -2: AI registry]</span>
<span class='curline'><a href='../S/293.html#L1102'>L</a>                1102 src/ai/lua/core.cpp 	lua_remove(L,-2); // [-1: AI state]</span>
<span class='curline'><a href='../S/293.html#L1105'>L</a>                1105 src/ai/lua/core.cpp 	lua_getfield(L, -1, "ai"); // [-1: AI functions  -2: AI state]</span>
<span class='curline'><a href='../S/293.html#L1106'>L</a>                1106 src/ai/lua/core.cpp 	lua_pushstring(L, "read_only"); // [-1: key  -2: AI functions  -3: AI state]</span>
<span class='curline'><a href='../S/293.html#L1107'>L</a>                1107 src/ai/lua/core.cpp 	lua_pushboolean(L, read_only); // [-1: value  -2: key  -3: AI functions  -4: AI state]</span>
<span class='curline'><a href='../S/293.html#L1108'>L</a>                1108 src/ai/lua/core.cpp 	lua_rawset(L, -3); // [-1: AI functions  -2: AI state]</span>
<span class='curline'><a href='../S/293.html#L1109'>L</a>                1109 src/ai/lua/core.cpp 	lua_setglobal(L, "ai"); // [-1: AI state]</span>
<span class='curline'><a href='../S/293.html#L1117'>L</a>                1117 src/ai/lua/core.cpp 		lua_pushnil(L);</span>
<span class='curline'><a href='../S/293.html#L1118'>L</a>                1118 src/ai/lua/core.cpp 		lua_setglobal(L, "ai");</span>
<span class='curline'><a href='../S/293.html#L1121'>L</a>                1121 src/ai/lua/core.cpp 		lua_getglobal(L, "ai");</span>
<span class='curline'><a href='../S/293.html#L1122'>L</a>                1122 src/ai/lua/core.cpp 		lua_pushstring(L, "read_only");</span>
<span class='curline'><a href='../S/293.html#L1123'>L</a>                1123 src/ai/lua/core.cpp 		lua_pushboolean(L, was_readonly);</span>
<span class='curline'><a href='../S/293.html#L1124'>L</a>                1124 src/ai/lua/core.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/293.html#L1125'>L</a>                1125 src/ai/lua/core.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/293.html#L1132'>L</a>                1132 src/ai/lua/core.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, aisKey);</span>
<span class='curline'><a href='../S/293.html#L1133'>L</a>                1133 src/ai/lua/core.cpp 	lua_pushnil(L);</span>
<span class='curline'><a href='../S/293.html#L1134'>L</a>                1134 src/ai/lua/core.cpp 	lua_rawseti(L, -2, num_);</span>
<span class='curline'><a href='../S/293.html#L1135'>L</a>                1135 src/ai/lua/core.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/293.html#L1140'>L</a>                1140 src/ai/lua/core.cpp 	int initial_top = lua_gettop(L);//get the old stack size</span>
<span class='curline'><a href='../S/293.html#L1146'>L</a>                1146 src/ai/lua/core.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, aisKey); // [-1: AI registry  -2: AI state]</span>
<span class='curline'><a href='../S/293.html#L1147'>L</a>                1147 src/ai/lua/core.cpp 	lua_rawgeti(L, -1, num_); // [-1: AI action  -2: AI registry  -3: AI state]</span>
<span class='curline'><a href='../S/293.html#L1148'>L</a>                1148 src/ai/lua/core.cpp 	lua_remove(L, -2); // [-1: AI action  -2: AI state]</span>
<span class='curline'><a href='../S/293.html#L1151'>L</a>                1151 src/ai/lua/core.cpp 	int iState = lua_absindex(L, -2);</span>
<span class='curline'><a href='../S/293.html#L1152'>L</a>                1152 src/ai/lua/core.cpp 	lua_getfield(L, iState, "self");</span>
<span class='curline'><a href='../S/293.html#L1153'>L</a>                1153 src/ai/lua/core.cpp 	luaW_pushconfig(L, cfg);</span>
<span class='curline'><a href='../S/293.html#L1154'>L</a>                1154 src/ai/lua/core.cpp 	lua_getfield(L, iState, "data");</span>
<span class='curline'><a href='../S/293.html#L1157'>L</a>                1157 src/ai/lua/core.cpp 	luaW_pcall(L, 3, l_obj ? 1 : 0, true);</span>
<span class='curline'><a href='../S/293.html#L1159'>L</a>                1159 src/ai/lua/core.cpp 		l_obj-&gt;store(L, -1);</span>
<span class='curline'><a href='../S/293.html#L1162'>L</a>                1162 src/ai/lua/core.cpp 	lua_settop(L, initial_top);//empty stack</span>
<span class='curline'><a href='../S/293.html#L1168'>L</a>                1168 src/ai/lua/core.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, aisKey);</span>
<span class='curline'><a href='../S/293.html#L1169'>L</a>                1169 src/ai/lua/core.cpp 	lua_pushnil(L);</span>
<span class='curline'><a href='../S/293.html#L1170'>L</a>                1170 src/ai/lua/core.cpp 	lua_rawseti(L, -2, num_);</span>
<span class='curline'><a href='../S/293.html#L1171'>L</a>                1171 src/ai/lua/core.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/297.html#L36'>L</a>                  36 src/ai/lua/core.hpp 	lua_State *L;</span>
<span class='curline'><a href='../S/297.html#L39'>L</a>                  39 src/ai/lua/core.hpp 	lua_ai_context(lua_State *l, int num, int side) : L(l), num_(num), side_(side)</span>
<span class='curline'><a href='../S/297.html#L42'>L</a>                  42 src/ai/lua/core.hpp 	static lua_ai_context* create(lua_State *L, char const *code, engine_lua *engine);</span>
<span class='curline'><a href='../S/297.html#L51'>L</a>                  51 src/ai/lua/core.hpp 	static void init(lua_State *L);</span>
<span class='curline'><a href='../S/297.html#L58'>L</a>                  58 src/ai/lua/core.hpp 	lua_State* L;</span>
<span class='curline'><a href='../S/297.html#L72'>L</a>                  72 src/ai/lua/core.hpp 	lua_State *L;</span>
<span class='curline'><a href='../S/297.html#L75'>L</a>                  75 src/ai/lua/core.hpp 	lua_ai_action_handler(lua_State *l, lua_ai_context &amp;context, int num) : L(l), context_(context),num_(num)</span>
<span class='curline'><a href='../S/297.html#L78'>L</a>                  78 src/ai/lua/core.hpp 	static lua_ai_action_handler* create(lua_State *L, char const *code, lua_ai_context &amp;context);</span>
<span class='curline'><a href='../S/299.html#L40'>L</a>                  40 src/ai/lua/lua_object.cpp 	std::shared_ptr&lt;aspect_attacks_lua_filter&gt; lua_object&lt;aspect_attacks_lua_filter&gt;::to_type(lua_State *L, int n)</span>
<span class='curline'><a href='../S/299.html#L45'>L</a>                  45 src/ai/lua/lua_object.cpp 		if(!lua_istable(L, n)) {</span>
<span class='curline'><a href='../S/299.html#L48'>L</a>                  48 src/ai/lua/lua_object.cpp 		lua_getfield(L, n, "own");</span>
<span class='curline'><a href='../S/299.html#L49'>L</a>                  49 src/ai/lua/lua_object.cpp 		if(lua_istable(L, -1)) {</span>
<span class='curline'><a href='../S/299.html#L51'>L</a>                  51 src/ai/lua/lua_object.cpp 			if(luaW_tovconfig(L, -1, vcfg)) {</span>
<span class='curline'><a href='../S/299.html#L54'>L</a>                  54 src/ai/lua/lua_object.cpp 		} else if(lua_isfunction(L, -1)) {</span>
<span class='curline'><a href='../S/299.html#L55'>L</a>                  55 src/ai/lua/lua_object.cpp 			att-&gt;lua = L;</span>
<span class='curline'><a href='../S/299.html#L56'>L</a>                  56 src/ai/lua/lua_object.cpp 			att-&gt;ref_own_ = luaL_ref(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/299.html#L59'>L</a>                  59 src/ai/lua/lua_object.cpp 		lua_getfield(L, n, "enemy");</span>
<span class='curline'><a href='../S/299.html#L60'>L</a>                  60 src/ai/lua/lua_object.cpp 		if(lua_istable(L, -1)) {</span>
<span class='curline'><a href='../S/299.html#L62'>L</a>                  62 src/ai/lua/lua_object.cpp 			if(luaW_tovconfig(L, -1, vcfg)) {</span>
<span class='curline'><a href='../S/299.html#L65'>L</a>                  65 src/ai/lua/lua_object.cpp 		} else if(lua_isfunction(L, -1)) {</span>
<span class='curline'><a href='../S/299.html#L66'>L</a>                  66 src/ai/lua/lua_object.cpp 			att-&gt;lua = L;</span>
<span class='curline'><a href='../S/299.html#L67'>L</a>                  67 src/ai/lua/lua_object.cpp 			att-&gt;ref_enemy_ = luaL_ref(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/299.html#L70'>L</a>                  70 src/ai/lua/lua_object.cpp 		lua_pop(L, 2);</span>
<span class='curline'><a href='../S/296.html#L48'>L</a>                  48 src/ai/lua/lua_object.hpp 	virtual void store(lua_State* L, int n) = 0;</span>
<span class='curline'><a href='../S/296.html#L68'>L</a>                  68 src/ai/lua/lua_object.hpp 	void store(lua_State* L, int n)</span>
<span class='curline'><a href='../S/296.html#L70'>L</a>                  70 src/ai/lua/lua_object.hpp 		this-&gt;value_ = to_type(L, lua_absindex(L, n));</span>
<span class='curline'><a href='../S/296.html#L85'>L</a>                  85 src/ai/lua/lua_object.hpp inline std::shared_ptr&lt;double&gt; lua_object&lt;double&gt;::to_type(lua_State *L, int n)</span>
<span class='curline'><a href='../S/296.html#L87'>L</a>                  87 src/ai/lua/lua_object.hpp 	return std::make_shared&lt;double&gt;(lua_tonumber(L, n));</span>
<span class='curline'><a href='../S/296.html#L91'>L</a>                  91 src/ai/lua/lua_object.hpp inline std::shared_ptr&lt;std::string&gt; lua_object&lt;std::string&gt;::to_type(lua_State *L, int n)</span>
<span class='curline'><a href='../S/296.html#L93'>L</a>                  93 src/ai/lua/lua_object.hpp 	return std::make_shared&lt;std::string&gt;(lua_tostring(L, n));</span>
<span class='curline'><a href='../S/296.html#L97'>L</a>                  97 src/ai/lua/lua_object.hpp inline std::shared_ptr&lt;bool&gt; lua_object&lt;bool&gt;::to_type(lua_State *L, int n)</span>
<span class='curline'><a href='../S/296.html#L99'>L</a>                  99 src/ai/lua/lua_object.hpp 	return std::make_shared&lt;bool&gt;(luaW_toboolean(L, n));</span>
<span class='curline'><a href='../S/296.html#L103'>L</a>                 103 src/ai/lua/lua_object.hpp inline std::shared_ptr&lt;int&gt; lua_object&lt;int&gt;::to_type(lua_State *L, int n)</span>
<span class='curline'><a href='../S/296.html#L105'>L</a>                 105 src/ai/lua/lua_object.hpp 	return std::make_shared&lt;int&gt;(static_cast&lt;int&gt;(lua_tointeger(L, n)));</span>
<span class='curline'><a href='../S/296.html#L109'>L</a>                 109 src/ai/lua/lua_object.hpp inline std::shared_ptr&lt; std::vector&lt;std::string&gt; &gt; lua_object&lt; std::vector&lt;std::string&gt; &gt;::to_type(lua_State *L, int n)</span>
<span class='curline'><a href='../S/296.html#L112'>L</a>                 112 src/ai/lua/lua_object.hpp 	int l = lua_rawlen(L, n);</span>
<span class='curline'><a href='../S/296.html#L115'>L</a>                 115 src/ai/lua/lua_object.hpp 		lua_pushinteger(L, i);</span>
<span class='curline'><a href='../S/296.html#L116'>L</a>                 116 src/ai/lua/lua_object.hpp 		lua_gettable(L, n);</span>
<span class='curline'><a href='../S/296.html#L117'>L</a>                 117 src/ai/lua/lua_object.hpp 		std::string  s = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/296.html#L118'>L</a>                 118 src/ai/lua/lua_object.hpp 		lua_settop(L, n);</span>
<span class='curline'><a href='../S/296.html#L126'>L</a>                 126 src/ai/lua/lua_object.hpp inline std::shared_ptr&lt;config&gt; lua_object&lt;config&gt;::to_type(lua_State *L, int n)</span>
<span class='curline'><a href='../S/296.html#L129'>L</a>                 129 src/ai/lua/lua_object.hpp 	luaW_toconfig(L, n, *cfg);</span>
<span class='curline'><a href='../S/296.html#L134'>L</a>                 134 src/ai/lua/lua_object.hpp inline std::shared_ptr&lt;terrain_filter&gt; lua_object&lt;terrain_filter&gt;::to_type(lua_State *L, int n)</span>
<span class='curline'><a href='../S/296.html#L138'>L</a>                 138 src/ai/lua/lua_object.hpp 	if (!luaW_tovconfig(L, n, *vcfg)) {</span>
<span class='curline'><a href='../S/296.html#L147'>L</a>                 147 src/ai/lua/lua_object.hpp inline std::shared_ptr&lt;std::vector&lt;target&gt; &gt; lua_object&lt; std::vector&lt;target&gt; &gt;::to_type(lua_State *L, int n)</span>
<span class='curline'><a href='../S/296.html#L151'>L</a>                 151 src/ai/lua/lua_object.hpp 	int l = lua_rawlen(L, n);</span>
<span class='curline'><a href='../S/296.html#L155'>L</a>                 155 src/ai/lua/lua_object.hpp 		lua_rawgeti(L, n, i); // st n + 1  TABLE @ N    table @ n + 1</span>
<span class='curline'><a href='../S/296.html#L157'>L</a>                 157 src/ai/lua/lua_object.hpp 		lua_pushstring(L, "loc"); // st n + 2</span>
<span class='curline'><a href='../S/296.html#L158'>L</a>                 158 src/ai/lua/lua_object.hpp 		lua_rawget(L, -2); // st n + 2</span>
<span class='curline'><a href='../S/296.html#L160'>L</a>                 160 src/ai/lua/lua_object.hpp 		lua_pushstring(L, "x"); // st n + 3</span>
<span class='curline'><a href='../S/296.html#L161'>L</a>                 161 src/ai/lua/lua_object.hpp 		lua_rawget(L, -2); // st n + 3</span>
<span class='curline'><a href='../S/296.html#L162'>L</a>                 162 src/ai/lua/lua_object.hpp 		int x = static_cast&lt;int&gt;(lua_tointeger(L, -1)); // st n + 3</span>
<span class='curline'><a href='../S/296.html#L163'>L</a>                 163 src/ai/lua/lua_object.hpp 		lua_pop(L, 1); // st n + 2</span>
<span class='curline'><a href='../S/296.html#L165'>L</a>                 165 src/ai/lua/lua_object.hpp 		lua_pushstring(L, "y"); // st n + 3</span>
<span class='curline'><a href='../S/296.html#L166'>L</a>                 166 src/ai/lua/lua_object.hpp 		lua_rawget(L, -2); // st n + 3</span>
<span class='curline'><a href='../S/296.html#L167'>L</a>                 167 src/ai/lua/lua_object.hpp 		int y = static_cast&lt;int&gt;(lua_tointeger(L, -1)); // st n + 3</span>
<span class='curline'><a href='../S/296.html#L169'>L</a>                 169 src/ai/lua/lua_object.hpp 		lua_pop(L, 2); // st n + 1</span>
<span class='curline'><a href='../S/296.html#L171'>L</a>                 171 src/ai/lua/lua_object.hpp 		lua_pushstring(L, "type"); // st n + 2</span>
<span class='curline'><a href='../S/296.html#L172'>L</a>                 172 src/ai/lua/lua_object.hpp 		lua_rawget(L, -2);  // st n + 2</span>
<span class='curline'><a href='../S/296.html#L174'>L</a>                 174 src/ai/lua/lua_object.hpp 		if(lua_isnumber(L, -1)) {</span>
<span class='curline'><a href='../S/296.html#L175'>L</a>                 175 src/ai/lua/lua_object.hpp 			type = target::TYPE::from_int(static_cast&lt;int&gt;(lua_tointeger(L, -1)));  // st n + 2</span>
<span class='curline'><a href='../S/296.html#L176'>L</a>                 176 src/ai/lua/lua_object.hpp 		} else if(lua_isstring(L, -1)) {</span>
<span class='curline'><a href='../S/296.html#L177'>L</a>                 177 src/ai/lua/lua_object.hpp 			type = target::TYPE::string_to_enum(lua_tostring(L, -1));  // st n + 2</span>
<span class='curline'><a href='../S/296.html#L179'>L</a>                 179 src/ai/lua/lua_object.hpp 		lua_pop(L, 1); // st n + 1</span>
<span class='curline'><a href='../S/296.html#L182'>L</a>                 182 src/ai/lua/lua_object.hpp 		lua_pushstring(L, "value");</span>
<span class='curline'><a href='../S/296.html#L183'>L</a>                 183 src/ai/lua/lua_object.hpp 		lua_rawget(L, -2);</span>
<span class='curline'><a href='../S/296.html#L184'>L</a>                 184 src/ai/lua/lua_object.hpp 		int value = static_cast&lt;int&gt;(lua_tointeger(L, -1));</span>
<span class='curline'><a href='../S/296.html#L191'>L</a>                 191 src/ai/lua/lua_object.hpp 	lua_settop(L, n);</span>
<span class='curline'><a href='../S/296.html#L196'>L</a>                 196 src/ai/lua/lua_object.hpp inline std::shared_ptr&lt;unit_advancements_aspect&gt; lua_object&lt;unit_advancements_aspect&gt;::to_type(lua_State *L, int n)</span>
<span class='curline'><a href='../S/296.html#L198'>L</a>                 198 src/ai/lua/lua_object.hpp 	return std::make_shared&lt;unit_advancements_aspect&gt;(L, n);</span>
<span class='curline'><a href='../S/296.html#L204'>L</a>                 204 src/ai/lua/lua_object.hpp std::shared_ptr&lt;aspect_attacks_lua_filter&gt; lua_object&lt;aspect_attacks_lua_filter&gt;::to_type(lua_State *L, int n);</span>
<span class='curline'><a href='../S/977.html#L1075'>L</a>                1075 src/image_modifications.cpp REGISTER_MOD_PARSER(L, args)</span>
<span class='curline'><a href='../S/1181.html#L60'>L</a>                  60 src/lua/lapi.cpp static TValue *index2addr (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L61'>L</a>                  61 src/lua/lapi.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1181.html#L64'>L</a>                  64 src/lua/lapi.cpp     api_check(L, idx &lt;= ci-&gt;top - (ci-&gt;func + 1), "unacceptable index");</span>
<span class='curline'><a href='../S/1181.html#L65'>L</a>                  65 src/lua/lapi.cpp     if (o &gt;= L-&gt;top) return NONVALIDVALUE;</span>
<span class='curline'><a href='../S/1181.html#L69'>L</a>                  69 src/lua/lapi.cpp     api_check(L, idx != 0 &amp;&amp; -idx &lt;= L-&gt;top - (ci-&gt;func + 1), "invalid index");</span>
<span class='curline'><a href='../S/1181.html#L70'>L</a>                  70 src/lua/lapi.cpp     return L-&gt;top + idx;</span>
<span class='curline'><a href='../S/1181.html#L73'>L</a>                  73 src/lua/lapi.cpp     return &amp;G(L)-&gt;l_registry;</span>
<span class='curline'><a href='../S/1181.html#L76'>L</a>                  76 src/lua/lapi.cpp     api_check(L, idx &lt;= MAXUPVAL + 1, "upvalue index too large");</span>
<span class='curline'><a href='../S/1181.html#L91'>L</a>                  91 src/lua/lapi.cpp static void growstack (lua_State *L, void *ud) {</span>
<span class='curline'><a href='../S/1181.html#L93'>L</a>                  93 src/lua/lapi.cpp   luaD_growstack(L, size);</span>
<span class='curline'><a href='../S/1181.html#L97'>L</a>                  97 src/lua/lapi.cpp LUA_API int lua_checkstack (lua_State *L, int n) {</span>
<span class='curline'><a href='../S/1181.html#L99'>L</a>                  99 src/lua/lapi.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1181.html#L100'>L</a>                 100 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L101'>L</a>                 101 src/lua/lapi.cpp   api_check(L, n &gt;= 0, "negative 'n'");</span>
<span class='curline'><a href='../S/1181.html#L102'>L</a>                 102 src/lua/lapi.cpp   if (L-&gt;stack_last - L-&gt;top &gt; n)  /* stack large enough? */</span>
<span class='curline'><a href='../S/1181.html#L105'>L</a>                 105 src/lua/lapi.cpp     int inuse = cast_int(L-&gt;top - L-&gt;stack) + EXTRA_STACK;</span>
<span class='curline'><a href='../S/1181.html#L109'>L</a>                 109 src/lua/lapi.cpp       res = (luaD_rawrunprotected(L, &amp;growstack, &amp;n) == LUA_OK);</span>
<span class='curline'><a href='../S/1181.html#L111'>L</a>                 111 src/lua/lapi.cpp   if (res &amp;&amp; ci-&gt;top &lt; L-&gt;top + n)</span>
<span class='curline'><a href='../S/1181.html#L112'>L</a>                 112 src/lua/lapi.cpp     ci-&gt;top = L-&gt;top + n;  /* adjust frame top */</span>
<span class='curline'><a href='../S/1181.html#L113'>L</a>                 113 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L134'>L</a>                 134 src/lua/lapi.cpp LUA_API lua_CFunction lua_atpanic (lua_State *L, lua_CFunction panicf) {</span>
<span class='curline'><a href='../S/1181.html#L136'>L</a>                 136 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L137'>L</a>                 137 src/lua/lapi.cpp   old = G(L)-&gt;panic;</span>
<span class='curline'><a href='../S/1181.html#L138'>L</a>                 138 src/lua/lapi.cpp   G(L)-&gt;panic = panicf;</span>
<span class='curline'><a href='../S/1181.html#L139'>L</a>                 139 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L144'>L</a>                 144 src/lua/lapi.cpp LUA_API const lua_Number *lua_version (lua_State *L) {</span>
<span class='curline'><a href='../S/1181.html#L146'>L</a>                 146 src/lua/lapi.cpp   if (L == NULL) return &amp;version;</span>
<span class='curline'><a href='../S/1181.html#L147'>L</a>                 147 src/lua/lapi.cpp   else return G(L)-&gt;version;</span>
<span class='curline'><a href='../S/1181.html#L160'>L</a>                 160 src/lua/lapi.cpp LUA_API int lua_absindex (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L163'>L</a>                 163 src/lua/lapi.cpp          : cast_int(L-&gt;top - L-&gt;ci-&gt;func) + idx;</span>
<span class='curline'><a href='../S/1181.html#L167'>L</a>                 167 src/lua/lapi.cpp LUA_API int lua_gettop (lua_State *L) {</span>
<span class='curline'><a href='../S/1181.html#L168'>L</a>                 168 src/lua/lapi.cpp   return cast_int(L-&gt;top - (L-&gt;ci-&gt;func + 1));</span>
<span class='curline'><a href='../S/1181.html#L172'>L</a>                 172 src/lua/lapi.cpp LUA_API void lua_settop (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L173'>L</a>                 173 src/lua/lapi.cpp   StkId func = L-&gt;ci-&gt;func;</span>
<span class='curline'><a href='../S/1181.html#L174'>L</a>                 174 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L176'>L</a>                 176 src/lua/lapi.cpp     api_check(L, idx &lt;= L-&gt;stack_last - (func + 1), "new top too large");</span>
<span class='curline'><a href='../S/1181.html#L177'>L</a>                 177 src/lua/lapi.cpp     while (L-&gt;top &lt; (func + 1) + idx)</span>
<span class='curline'><a href='../S/1181.html#L178'>L</a>                 178 src/lua/lapi.cpp       setnilvalue(L-&gt;top++);</span>
<span class='curline'><a href='../S/1181.html#L179'>L</a>                 179 src/lua/lapi.cpp     L-&gt;top = (func + 1) + idx;</span>
<span class='curline'><a href='../S/1181.html#L182'>L</a>                 182 src/lua/lapi.cpp     api_check(L, -(idx+1) &lt;= (L-&gt;top - (func + 1)), "invalid new top");</span>
<span class='curline'><a href='../S/1181.html#L183'>L</a>                 183 src/lua/lapi.cpp     L-&gt;top += idx+1;  /* 'subtract' index (index is negative) */</span>
<span class='curline'><a href='../S/1181.html#L185'>L</a>                 185 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L193'>L</a>                 193 src/lua/lapi.cpp static void reverse (lua_State *L, StkId from, StkId to) {</span>
<span class='curline'><a href='../S/1181.html#L196'>L</a>                 196 src/lua/lapi.cpp     setobj(L, &amp;temp, from);</span>
<span class='curline'><a href='../S/1181.html#L197'>L</a>                 197 src/lua/lapi.cpp     setobjs2s(L, from, to);</span>
<span class='curline'><a href='../S/1181.html#L198'>L</a>                 198 src/lua/lapi.cpp     setobj2s(L, to, &amp;temp);</span>
<span class='curline'><a href='../S/1181.html#L207'>L</a>                 207 src/lua/lapi.cpp LUA_API void lua_rotate (lua_State *L, int idx, int n) {</span>
<span class='curline'><a href='../S/1181.html#L209'>L</a>                 209 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L210'>L</a>                 210 src/lua/lapi.cpp   t = L-&gt;top - 1;  /* end of stack segment being rotated */</span>
<span class='curline'><a href='../S/1181.html#L211'>L</a>                 211 src/lua/lapi.cpp   p = index2addr(L, idx);  /* start of segment */</span>
<span class='curline'><a href='../S/1181.html#L212'>L</a>                 212 src/lua/lapi.cpp   api_checkstackindex(L, idx, p);</span>
<span class='curline'><a href='../S/1181.html#L213'>L</a>                 213 src/lua/lapi.cpp   api_check(L, (n &gt;= 0 ? n : -n) &lt;= (t - p + 1), "invalid 'n'");</span>
<span class='curline'><a href='../S/1181.html#L215'>L</a>                 215 src/lua/lapi.cpp   reverse(L, p, m);  /* reverse the prefix with length 'n' */</span>
<span class='curline'><a href='../S/1181.html#L216'>L</a>                 216 src/lua/lapi.cpp   reverse(L, m + 1, t);  /* reverse the suffix */</span>
<span class='curline'><a href='../S/1181.html#L217'>L</a>                 217 src/lua/lapi.cpp   reverse(L, p, t);  /* reverse the entire segment */</span>
<span class='curline'><a href='../S/1181.html#L218'>L</a>                 218 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L222'>L</a>                 222 src/lua/lapi.cpp LUA_API void lua_copy (lua_State *L, int fromidx, int toidx) {</span>
<span class='curline'><a href='../S/1181.html#L224'>L</a>                 224 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L225'>L</a>                 225 src/lua/lapi.cpp   fr = index2addr(L, fromidx);</span>
<span class='curline'><a href='../S/1181.html#L226'>L</a>                 226 src/lua/lapi.cpp   to = index2addr(L, toidx);</span>
<span class='curline'><a href='../S/1181.html#L227'>L</a>                 227 src/lua/lapi.cpp   api_checkvalidindex(L, to);</span>
<span class='curline'><a href='../S/1181.html#L228'>L</a>                 228 src/lua/lapi.cpp   setobj(L, to, fr);</span>
<span class='curline'><a href='../S/1181.html#L230'>L</a>                 230 src/lua/lapi.cpp     luaC_barrier(L, clCvalue(L-&gt;ci-&gt;func), fr);</span>
<span class='curline'><a href='../S/1181.html#L233'>L</a>                 233 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L237'>L</a>                 237 src/lua/lapi.cpp LUA_API void lua_pushvalue (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L238'>L</a>                 238 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L239'>L</a>                 239 src/lua/lapi.cpp   setobj2s(L, L-&gt;top, index2addr(L, idx));</span>
<span class='curline'><a href='../S/1181.html#L240'>L</a>                 240 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L241'>L</a>                 241 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L251'>L</a>                 251 src/lua/lapi.cpp LUA_API int lua_type (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L252'>L</a>                 252 src/lua/lapi.cpp   StkId o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L257'>L</a>                 257 src/lua/lapi.cpp LUA_API const char *lua_typename (lua_State *L, int t) {</span>
<span class='curline'><a href='../S/1181.html#L258'>L</a>                 258 src/lua/lapi.cpp   UNUSED(L);</span>
<span class='curline'><a href='../S/1181.html#L259'>L</a>                 259 src/lua/lapi.cpp   api_check(L, LUA_TNONE &lt;= t &amp;&amp; t &lt; LUA_NUMTAGS, "invalid tag");</span>
<span class='curline'><a href='../S/1181.html#L264'>L</a>                 264 src/lua/lapi.cpp LUA_API int lua_iscfunction (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L265'>L</a>                 265 src/lua/lapi.cpp   StkId o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L270'>L</a>                 270 src/lua/lapi.cpp LUA_API int lua_isinteger (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L271'>L</a>                 271 src/lua/lapi.cpp   StkId o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L276'>L</a>                 276 src/lua/lapi.cpp LUA_API int lua_isnumber (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L278'>L</a>                 278 src/lua/lapi.cpp   const TValue *o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L283'>L</a>                 283 src/lua/lapi.cpp LUA_API int lua_isstring (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L284'>L</a>                 284 src/lua/lapi.cpp   const TValue *o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L289'>L</a>                 289 src/lua/lapi.cpp LUA_API int lua_isuserdata (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L290'>L</a>                 290 src/lua/lapi.cpp   const TValue *o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L295'>L</a>                 295 src/lua/lapi.cpp LUA_API int lua_rawequal (lua_State *L, int index1, int index2) {</span>
<span class='curline'><a href='../S/1181.html#L296'>L</a>                 296 src/lua/lapi.cpp   StkId o1 = index2addr(L, index1);</span>
<span class='curline'><a href='../S/1181.html#L297'>L</a>                 297 src/lua/lapi.cpp   StkId o2 = index2addr(L, index2);</span>
<span class='curline'><a href='../S/1181.html#L302'>L</a>                 302 src/lua/lapi.cpp LUA_API void lua_arith (lua_State *L, int op) {</span>
<span class='curline'><a href='../S/1181.html#L303'>L</a>                 303 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L305'>L</a>                 305 src/lua/lapi.cpp     api_checknelems(L, 2);  /* all other operations expect two operands */</span>
<span class='curline'><a href='../S/1181.html#L307'>L</a>                 307 src/lua/lapi.cpp     api_checknelems(L, 1);</span>
<span class='curline'><a href='../S/1181.html#L308'>L</a>                 308 src/lua/lapi.cpp     setobjs2s(L, L-&gt;top, L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L309'>L</a>                 309 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L312'>L</a>                 312 src/lua/lapi.cpp   luaO_arith(L, op, L-&gt;top - 2, L-&gt;top - 1, L-&gt;top - 2);</span>
<span class='curline'><a href='../S/1181.html#L313'>L</a>                 313 src/lua/lapi.cpp   L-&gt;top--;  /* remove second operand */</span>
<span class='curline'><a href='../S/1181.html#L314'>L</a>                 314 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L318'>L</a>                 318 src/lua/lapi.cpp LUA_API int lua_compare (lua_State *L, int index1, int index2, int op) {</span>
<span class='curline'><a href='../S/1181.html#L321'>L</a>                 321 src/lua/lapi.cpp   lua_lock(L);  /* may call tag method */</span>
<span class='curline'><a href='../S/1181.html#L322'>L</a>                 322 src/lua/lapi.cpp   o1 = index2addr(L, index1);</span>
<span class='curline'><a href='../S/1181.html#L323'>L</a>                 323 src/lua/lapi.cpp   o2 = index2addr(L, index2);</span>
<span class='curline'><a href='../S/1181.html#L326'>L</a>                 326 src/lua/lapi.cpp       case LUA_OPEQ: i = luaV_equalobj(L, o1, o2); break;</span>
<span class='curline'><a href='../S/1181.html#L327'>L</a>                 327 src/lua/lapi.cpp       case LUA_OPLT: i = luaV_lessthan(L, o1, o2); break;</span>
<span class='curline'><a href='../S/1181.html#L328'>L</a>                 328 src/lua/lapi.cpp       case LUA_OPLE: i = luaV_lessequal(L, o1, o2); break;</span>
<span class='curline'><a href='../S/1181.html#L329'>L</a>                 329 src/lua/lapi.cpp       default: api_check(L, 0, "invalid option");</span>
<span class='curline'><a href='../S/1181.html#L332'>L</a>                 332 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L337'>L</a>                 337 src/lua/lapi.cpp LUA_API size_t lua_stringtonumber (lua_State *L, const char *s) {</span>
<span class='curline'><a href='../S/1181.html#L338'>L</a>                 338 src/lua/lapi.cpp   size_t sz = luaO_str2num(s, L-&gt;top);</span>
<span class='curline'><a href='../S/1181.html#L340'>L</a>                 340 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L345'>L</a>                 345 src/lua/lapi.cpp LUA_API lua_Number lua_tonumberx (lua_State *L, int idx, int *pisnum) {</span>
<span class='curline'><a href='../S/1181.html#L347'>L</a>                 347 src/lua/lapi.cpp   const TValue *o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L356'>L</a>                 356 src/lua/lapi.cpp LUA_API lua_Integer lua_tointegerx (lua_State *L, int idx, int *pisnum) {</span>
<span class='curline'><a href='../S/1181.html#L358'>L</a>                 358 src/lua/lapi.cpp   const TValue *o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L367'>L</a>                 367 src/lua/lapi.cpp LUA_API int lua_toboolean (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L368'>L</a>                 368 src/lua/lapi.cpp   const TValue *o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L373'>L</a>                 373 src/lua/lapi.cpp LUA_API const char *lua_tolstring (lua_State *L, int idx, size_t *len) {</span>
<span class='curline'><a href='../S/1181.html#L374'>L</a>                 374 src/lua/lapi.cpp   StkId o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L380'>L</a>                 380 src/lua/lapi.cpp     lua_lock(L);  /* 'luaO_tostring' may create a new string */</span>
<span class='curline'><a href='../S/1181.html#L381'>L</a>                 381 src/lua/lapi.cpp     luaO_tostring(L, o);</span>
<span class='curline'><a href='../S/1181.html#L382'>L</a>                 382 src/lua/lapi.cpp     luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1181.html#L383'>L</a>                 383 src/lua/lapi.cpp     o = index2addr(L, idx);  /* previous call may reallocate the stack */</span>
<span class='curline'><a href='../S/1181.html#L384'>L</a>                 384 src/lua/lapi.cpp     lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L392'>L</a>                 392 src/lua/lapi.cpp LUA_API size_t lua_rawlen (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L393'>L</a>                 393 src/lua/lapi.cpp   StkId o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L404'>L</a>                 404 src/lua/lapi.cpp LUA_API lua_CFunction lua_tocfunction (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L405'>L</a>                 405 src/lua/lapi.cpp   StkId o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L413'>L</a>                 413 src/lua/lapi.cpp LUA_API void *lua_touserdata (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L414'>L</a>                 414 src/lua/lapi.cpp   StkId o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L423'>L</a>                 423 src/lua/lapi.cpp LUA_API lua_State *lua_tothread (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L424'>L</a>                 424 src/lua/lapi.cpp   StkId o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L429'>L</a>                 429 src/lua/lapi.cpp LUA_API const void *lua_topointer (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L430'>L</a>                 430 src/lua/lapi.cpp   StkId o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L450'>L</a>                 450 src/lua/lapi.cpp LUA_API void lua_pushnil (lua_State *L) {</span>
<span class='curline'><a href='../S/1181.html#L451'>L</a>                 451 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L452'>L</a>                 452 src/lua/lapi.cpp   setnilvalue(L-&gt;top);</span>
<span class='curline'><a href='../S/1181.html#L453'>L</a>                 453 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L454'>L</a>                 454 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L458'>L</a>                 458 src/lua/lapi.cpp LUA_API void lua_pushnumber (lua_State *L, lua_Number n) {</span>
<span class='curline'><a href='../S/1181.html#L459'>L</a>                 459 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L460'>L</a>                 460 src/lua/lapi.cpp   setfltvalue(L-&gt;top, n);</span>
<span class='curline'><a href='../S/1181.html#L461'>L</a>                 461 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L462'>L</a>                 462 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L466'>L</a>                 466 src/lua/lapi.cpp LUA_API void lua_pushinteger (lua_State *L, lua_Integer n) {</span>
<span class='curline'><a href='../S/1181.html#L467'>L</a>                 467 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L468'>L</a>                 468 src/lua/lapi.cpp   setivalue(L-&gt;top, n);</span>
<span class='curline'><a href='../S/1181.html#L469'>L</a>                 469 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L470'>L</a>                 470 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L479'>L</a>                 479 src/lua/lapi.cpp LUA_API const char *lua_pushlstring (lua_State *L, const char *s, size_t len) {</span>
<span class='curline'><a href='../S/1181.html#L481'>L</a>                 481 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L482'>L</a>                 482 src/lua/lapi.cpp   ts = (len == 0) ? luaS_new(L, "") : luaS_newlstr(L, s, len);</span>
<span class='curline'><a href='../S/1181.html#L483'>L</a>                 483 src/lua/lapi.cpp   setsvalue2s(L, L-&gt;top, ts);</span>
<span class='curline'><a href='../S/1181.html#L484'>L</a>                 484 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L485'>L</a>                 485 src/lua/lapi.cpp   luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1181.html#L486'>L</a>                 486 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L491'>L</a>                 491 src/lua/lapi.cpp LUA_API const char *lua_pushstring (lua_State *L, const char *s) {</span>
<span class='curline'><a href='../S/1181.html#L492'>L</a>                 492 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L494'>L</a>                 494 src/lua/lapi.cpp     setnilvalue(L-&gt;top);</span>
<span class='curline'><a href='../S/1181.html#L497'>L</a>                 497 src/lua/lapi.cpp     ts = luaS_new(L, s);</span>
<span class='curline'><a href='../S/1181.html#L498'>L</a>                 498 src/lua/lapi.cpp     setsvalue2s(L, L-&gt;top, ts);</span>
<span class='curline'><a href='../S/1181.html#L501'>L</a>                 501 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L502'>L</a>                 502 src/lua/lapi.cpp   luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1181.html#L503'>L</a>                 503 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L508'>L</a>                 508 src/lua/lapi.cpp LUA_API const char *lua_pushvfstring (lua_State *L, const char *fmt,</span>
<span class='curline'><a href='../S/1181.html#L511'>L</a>                 511 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L512'>L</a>                 512 src/lua/lapi.cpp   ret = luaO_pushvfstring(L, fmt, argp);</span>
<span class='curline'><a href='../S/1181.html#L513'>L</a>                 513 src/lua/lapi.cpp   luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1181.html#L514'>L</a>                 514 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L519'>L</a>                 519 src/lua/lapi.cpp LUA_API const char *lua_pushfstring (lua_State *L, const char *fmt, ...) {</span>
<span class='curline'><a href='../S/1181.html#L522'>L</a>                 522 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L524'>L</a>                 524 src/lua/lapi.cpp   ret = luaO_pushvfstring(L, fmt, argp);</span>
<span class='curline'><a href='../S/1181.html#L526'>L</a>                 526 src/lua/lapi.cpp   luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1181.html#L527'>L</a>                 527 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L532'>L</a>                 532 src/lua/lapi.cpp LUA_API void lua_pushcclosure (lua_State *L, lua_CFunction fn, int n) {</span>
<span class='curline'><a href='../S/1181.html#L533'>L</a>                 533 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L535'>L</a>                 535 src/lua/lapi.cpp     setfvalue(L-&gt;top, fn);</span>
<span class='curline'><a href='../S/1181.html#L539'>L</a>                 539 src/lua/lapi.cpp     api_checknelems(L, n);</span>
<span class='curline'><a href='../S/1181.html#L540'>L</a>                 540 src/lua/lapi.cpp     api_check(L, n &lt;= MAXUPVAL, "upvalue index too large");</span>
<span class='curline'><a href='../S/1181.html#L541'>L</a>                 541 src/lua/lapi.cpp     cl = luaF_newCclosure(L, n);</span>
<span class='curline'><a href='../S/1181.html#L543'>L</a>                 543 src/lua/lapi.cpp     L-&gt;top -= n;</span>
<span class='curline'><a href='../S/1181.html#L545'>L</a>                 545 src/lua/lapi.cpp       setobj2n(L, &amp;cl-&gt;upvalue[n], L-&gt;top + n);</span>
<span class='curline'><a href='../S/1181.html#L548'>L</a>                 548 src/lua/lapi.cpp     setclCvalue(L, L-&gt;top, cl);</span>
<span class='curline'><a href='../S/1181.html#L550'>L</a>                 550 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L551'>L</a>                 551 src/lua/lapi.cpp   luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1181.html#L552'>L</a>                 552 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L556'>L</a>                 556 src/lua/lapi.cpp LUA_API void lua_pushboolean (lua_State *L, int b) {</span>
<span class='curline'><a href='../S/1181.html#L557'>L</a>                 557 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L558'>L</a>                 558 src/lua/lapi.cpp   setbvalue(L-&gt;top, (b != 0));  /* ensure that true is 1 */</span>
<span class='curline'><a href='../S/1181.html#L559'>L</a>                 559 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L560'>L</a>                 560 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L564'>L</a>                 564 src/lua/lapi.cpp LUA_API void lua_pushlightuserdata (lua_State *L, void *p) {</span>
<span class='curline'><a href='../S/1181.html#L565'>L</a>                 565 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L566'>L</a>                 566 src/lua/lapi.cpp   setpvalue(L-&gt;top, p);</span>
<span class='curline'><a href='../S/1181.html#L567'>L</a>                 567 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L568'>L</a>                 568 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L572'>L</a>                 572 src/lua/lapi.cpp LUA_API int lua_pushthread (lua_State *L) {</span>
<span class='curline'><a href='../S/1181.html#L573'>L</a>                 573 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L574'>L</a>                 574 src/lua/lapi.cpp   setthvalue(L, L-&gt;top, L);</span>
<span class='curline'><a href='../S/1181.html#L575'>L</a>                 575 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L576'>L</a>                 576 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L577'>L</a>                 577 src/lua/lapi.cpp   return (G(L)-&gt;mainthread == L);</span>
<span class='curline'><a href='../S/1181.html#L587'>L</a>                 587 src/lua/lapi.cpp static int auxgetstr (lua_State *L, const TValue *t, const char *k) {</span>
<span class='curline'><a href='../S/1181.html#L589'>L</a>                 589 src/lua/lapi.cpp   TString *str = luaS_new(L, k);</span>
<span class='curline'><a href='../S/1181.html#L590'>L</a>                 590 src/lua/lapi.cpp   if (luaV_fastget(L, t, str, slot, luaH_getstr)) {</span>
<span class='curline'><a href='../S/1181.html#L591'>L</a>                 591 src/lua/lapi.cpp     setobj2s(L, L-&gt;top, slot);</span>
<span class='curline'><a href='../S/1181.html#L592'>L</a>                 592 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L595'>L</a>                 595 src/lua/lapi.cpp     setsvalue2s(L, L-&gt;top, str);</span>
<span class='curline'><a href='../S/1181.html#L596'>L</a>                 596 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L597'>L</a>                 597 src/lua/lapi.cpp     luaV_finishget(L, t, L-&gt;top - 1, L-&gt;top - 1, slot);</span>
<span class='curline'><a href='../S/1181.html#L599'>L</a>                 599 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L600'>L</a>                 600 src/lua/lapi.cpp   return ttnov(L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L604'>L</a>                 604 src/lua/lapi.cpp LUA_API int lua_getglobal (lua_State *L, const char *name) {</span>
<span class='curline'><a href='../S/1181.html#L605'>L</a>                 605 src/lua/lapi.cpp   Table *reg = hvalue(&amp;G(L)-&gt;l_registry);</span>
<span class='curline'><a href='../S/1181.html#L606'>L</a>                 606 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L607'>L</a>                 607 src/lua/lapi.cpp   return auxgetstr(L, luaH_getint(reg, LUA_RIDX_GLOBALS), name);</span>
<span class='curline'><a href='../S/1181.html#L611'>L</a>                 611 src/lua/lapi.cpp LUA_API int lua_gettable (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L613'>L</a>                 613 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L614'>L</a>                 614 src/lua/lapi.cpp   t = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L615'>L</a>                 615 src/lua/lapi.cpp   luaV_gettable(L, t, L-&gt;top - 1, L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L616'>L</a>                 616 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L617'>L</a>                 617 src/lua/lapi.cpp   return ttnov(L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L621'>L</a>                 621 src/lua/lapi.cpp LUA_API int lua_getfield (lua_State *L, int idx, const char *k) {</span>
<span class='curline'><a href='../S/1181.html#L622'>L</a>                 622 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L623'>L</a>                 623 src/lua/lapi.cpp   return auxgetstr(L, index2addr(L, idx), k);</span>
<span class='curline'><a href='../S/1181.html#L627'>L</a>                 627 src/lua/lapi.cpp LUA_API int lua_geti (lua_State *L, int idx, lua_Integer n) {</span>
<span class='curline'><a href='../S/1181.html#L630'>L</a>                 630 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L631'>L</a>                 631 src/lua/lapi.cpp   t = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L632'>L</a>                 632 src/lua/lapi.cpp   if (luaV_fastget(L, t, n, slot, luaH_getint)) {</span>
<span class='curline'><a href='../S/1181.html#L633'>L</a>                 633 src/lua/lapi.cpp     setobj2s(L, L-&gt;top, slot);</span>
<span class='curline'><a href='../S/1181.html#L634'>L</a>                 634 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L637'>L</a>                 637 src/lua/lapi.cpp     setivalue(L-&gt;top, n);</span>
<span class='curline'><a href='../S/1181.html#L638'>L</a>                 638 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L639'>L</a>                 639 src/lua/lapi.cpp     luaV_finishget(L, t, L-&gt;top - 1, L-&gt;top - 1, slot);</span>
<span class='curline'><a href='../S/1181.html#L641'>L</a>                 641 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L642'>L</a>                 642 src/lua/lapi.cpp   return ttnov(L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L646'>L</a>                 646 src/lua/lapi.cpp LUA_API int lua_rawget (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L648'>L</a>                 648 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L649'>L</a>                 649 src/lua/lapi.cpp   t = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L650'>L</a>                 650 src/lua/lapi.cpp   api_check(L, ttistable(t), "table expected");</span>
<span class='curline'><a href='../S/1181.html#L651'>L</a>                 651 src/lua/lapi.cpp   setobj2s(L, L-&gt;top - 1, luaH_get(hvalue(t), L-&gt;top - 1));</span>
<span class='curline'><a href='../S/1181.html#L652'>L</a>                 652 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L653'>L</a>                 653 src/lua/lapi.cpp   return ttnov(L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L657'>L</a>                 657 src/lua/lapi.cpp LUA_API int lua_rawgeti (lua_State *L, int idx, lua_Integer n) {</span>
<span class='curline'><a href='../S/1181.html#L659'>L</a>                 659 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L660'>L</a>                 660 src/lua/lapi.cpp   t = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L661'>L</a>                 661 src/lua/lapi.cpp   api_check(L, ttistable(t), "table expected");</span>
<span class='curline'><a href='../S/1181.html#L662'>L</a>                 662 src/lua/lapi.cpp   setobj2s(L, L-&gt;top, luaH_getint(hvalue(t), n));</span>
<span class='curline'><a href='../S/1181.html#L663'>L</a>                 663 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L664'>L</a>                 664 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L665'>L</a>                 665 src/lua/lapi.cpp   return ttnov(L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L669'>L</a>                 669 src/lua/lapi.cpp LUA_API int lua_rawgetp (lua_State *L, int idx, const void *p) {</span>
<span class='curline'><a href='../S/1181.html#L672'>L</a>                 672 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L673'>L</a>                 673 src/lua/lapi.cpp   t = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L674'>L</a>                 674 src/lua/lapi.cpp   api_check(L, ttistable(t), "table expected");</span>
<span class='curline'><a href='../S/1181.html#L676'>L</a>                 676 src/lua/lapi.cpp   setobj2s(L, L-&gt;top, luaH_get(hvalue(t), &amp;k));</span>
<span class='curline'><a href='../S/1181.html#L677'>L</a>                 677 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L678'>L</a>                 678 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L679'>L</a>                 679 src/lua/lapi.cpp   return ttnov(L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L683'>L</a>                 683 src/lua/lapi.cpp LUA_API void lua_createtable (lua_State *L, int narray, int nrec) {</span>
<span class='curline'><a href='../S/1181.html#L685'>L</a>                 685 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L686'>L</a>                 686 src/lua/lapi.cpp   t = luaH_new(L);</span>
<span class='curline'><a href='../S/1181.html#L687'>L</a>                 687 src/lua/lapi.cpp   sethvalue(L, L-&gt;top, t);</span>
<span class='curline'><a href='../S/1181.html#L688'>L</a>                 688 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L690'>L</a>                 690 src/lua/lapi.cpp     luaH_resize(L, t, narray, nrec);</span>
<span class='curline'><a href='../S/1181.html#L691'>L</a>                 691 src/lua/lapi.cpp   luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1181.html#L692'>L</a>                 692 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L696'>L</a>                 696 src/lua/lapi.cpp LUA_API int lua_getmetatable (lua_State *L, int objindex) {</span>
<span class='curline'><a href='../S/1181.html#L700'>L</a>                 700 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L701'>L</a>                 701 src/lua/lapi.cpp   obj = index2addr(L, objindex);</span>
<span class='curline'><a href='../S/1181.html#L710'>L</a>                 710 src/lua/lapi.cpp       mt = G(L)-&gt;mt[ttnov(obj)];</span>
<span class='curline'><a href='../S/1181.html#L714'>L</a>                 714 src/lua/lapi.cpp     sethvalue(L, L-&gt;top, mt);</span>
<span class='curline'><a href='../S/1181.html#L715'>L</a>                 715 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L718'>L</a>                 718 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L723'>L</a>                 723 src/lua/lapi.cpp LUA_API int lua_getuservalue (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L725'>L</a>                 725 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L726'>L</a>                 726 src/lua/lapi.cpp   o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L727'>L</a>                 727 src/lua/lapi.cpp   api_check(L, ttisfulluserdata(o), "full userdata expected");</span>
<span class='curline'><a href='../S/1181.html#L728'>L</a>                 728 src/lua/lapi.cpp   getuservalue(L, uvalue(o), L-&gt;top);</span>
<span class='curline'><a href='../S/1181.html#L729'>L</a>                 729 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L730'>L</a>                 730 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L731'>L</a>                 731 src/lua/lapi.cpp   return ttnov(L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L742'>L</a>                 742 src/lua/lapi.cpp static void auxsetstr (lua_State *L, const TValue *t, const char *k) {</span>
<span class='curline'><a href='../S/1181.html#L744'>L</a>                 744 src/lua/lapi.cpp   TString *str = luaS_new(L, k);</span>
<span class='curline'><a href='../S/1181.html#L745'>L</a>                 745 src/lua/lapi.cpp   api_checknelems(L, 1);</span>
<span class='curline'><a href='../S/1181.html#L746'>L</a>                 746 src/lua/lapi.cpp   if (luaV_fastset(L, t, str, slot, luaH_getstr, L-&gt;top - 1))</span>
<span class='curline'><a href='../S/1181.html#L747'>L</a>                 747 src/lua/lapi.cpp     L-&gt;top--;  /* pop value */</span>
<span class='curline'><a href='../S/1181.html#L749'>L</a>                 749 src/lua/lapi.cpp     setsvalue2s(L, L-&gt;top, str);  /* push 'str' (to make it a TValue) */</span>
<span class='curline'><a href='../S/1181.html#L750'>L</a>                 750 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L751'>L</a>                 751 src/lua/lapi.cpp     luaV_finishset(L, t, L-&gt;top - 1, L-&gt;top - 2, slot);</span>
<span class='curline'><a href='../S/1181.html#L752'>L</a>                 752 src/lua/lapi.cpp     L-&gt;top -= 2;  /* pop value and key */</span>
<span class='curline'><a href='../S/1181.html#L754'>L</a>                 754 src/lua/lapi.cpp   lua_unlock(L);  /* lock done by caller */</span>
<span class='curline'><a href='../S/1181.html#L758'>L</a>                 758 src/lua/lapi.cpp LUA_API void lua_setglobal (lua_State *L, const char *name) {</span>
<span class='curline'><a href='../S/1181.html#L759'>L</a>                 759 src/lua/lapi.cpp   Table *reg = hvalue(&amp;G(L)-&gt;l_registry);</span>
<span class='curline'><a href='../S/1181.html#L760'>L</a>                 760 src/lua/lapi.cpp   lua_lock(L);  /* unlock done in 'auxsetstr' */</span>
<span class='curline'><a href='../S/1181.html#L761'>L</a>                 761 src/lua/lapi.cpp   auxsetstr(L, luaH_getint(reg, LUA_RIDX_GLOBALS), name);</span>
<span class='curline'><a href='../S/1181.html#L765'>L</a>                 765 src/lua/lapi.cpp LUA_API void lua_settable (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L767'>L</a>                 767 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L768'>L</a>                 768 src/lua/lapi.cpp   api_checknelems(L, 2);</span>
<span class='curline'><a href='../S/1181.html#L769'>L</a>                 769 src/lua/lapi.cpp   t = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L770'>L</a>                 770 src/lua/lapi.cpp   luaV_settable(L, t, L-&gt;top - 2, L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L771'>L</a>                 771 src/lua/lapi.cpp   L-&gt;top -= 2;  /* pop index and value */</span>
<span class='curline'><a href='../S/1181.html#L772'>L</a>                 772 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L776'>L</a>                 776 src/lua/lapi.cpp LUA_API void lua_setfield (lua_State *L, int idx, const char *k) {</span>
<span class='curline'><a href='../S/1181.html#L777'>L</a>                 777 src/lua/lapi.cpp   lua_lock(L);  /* unlock done in 'auxsetstr' */</span>
<span class='curline'><a href='../S/1181.html#L778'>L</a>                 778 src/lua/lapi.cpp   auxsetstr(L, index2addr(L, idx), k);</span>
<span class='curline'><a href='../S/1181.html#L782'>L</a>                 782 src/lua/lapi.cpp LUA_API void lua_seti (lua_State *L, int idx, lua_Integer n) {</span>
<span class='curline'><a href='../S/1181.html#L785'>L</a>                 785 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L786'>L</a>                 786 src/lua/lapi.cpp   api_checknelems(L, 1);</span>
<span class='curline'><a href='../S/1181.html#L787'>L</a>                 787 src/lua/lapi.cpp   t = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L788'>L</a>                 788 src/lua/lapi.cpp   if (luaV_fastset(L, t, n, slot, luaH_getint, L-&gt;top - 1))</span>
<span class='curline'><a href='../S/1181.html#L789'>L</a>                 789 src/lua/lapi.cpp     L-&gt;top--;  /* pop value */</span>
<span class='curline'><a href='../S/1181.html#L791'>L</a>                 791 src/lua/lapi.cpp     setivalue(L-&gt;top, n);</span>
<span class='curline'><a href='../S/1181.html#L792'>L</a>                 792 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L793'>L</a>                 793 src/lua/lapi.cpp     luaV_finishset(L, t, L-&gt;top - 1, L-&gt;top - 2, slot);</span>
<span class='curline'><a href='../S/1181.html#L794'>L</a>                 794 src/lua/lapi.cpp     L-&gt;top -= 2;  /* pop value and key */</span>
<span class='curline'><a href='../S/1181.html#L796'>L</a>                 796 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L800'>L</a>                 800 src/lua/lapi.cpp LUA_API void lua_rawset (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L803'>L</a>                 803 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L804'>L</a>                 804 src/lua/lapi.cpp   api_checknelems(L, 2);</span>
<span class='curline'><a href='../S/1181.html#L805'>L</a>                 805 src/lua/lapi.cpp   o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L806'>L</a>                 806 src/lua/lapi.cpp   api_check(L, ttistable(o), "table expected");</span>
<span class='curline'><a href='../S/1181.html#L807'>L</a>                 807 src/lua/lapi.cpp   slot = luaH_set(L, hvalue(o), L-&gt;top - 2);</span>
<span class='curline'><a href='../S/1181.html#L808'>L</a>                 808 src/lua/lapi.cpp   setobj2t(L, slot, L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L810'>L</a>                 810 src/lua/lapi.cpp   luaC_barrierback(L, hvalue(o), L-&gt;top-1);</span>
<span class='curline'><a href='../S/1181.html#L811'>L</a>                 811 src/lua/lapi.cpp   L-&gt;top -= 2;</span>
<span class='curline'><a href='../S/1181.html#L812'>L</a>                 812 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L816'>L</a>                 816 src/lua/lapi.cpp LUA_API void lua_rawseti (lua_State *L, int idx, lua_Integer n) {</span>
<span class='curline'><a href='../S/1181.html#L818'>L</a>                 818 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L819'>L</a>                 819 src/lua/lapi.cpp   api_checknelems(L, 1);</span>
<span class='curline'><a href='../S/1181.html#L820'>L</a>                 820 src/lua/lapi.cpp   o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L821'>L</a>                 821 src/lua/lapi.cpp   api_check(L, ttistable(o), "table expected");</span>
<span class='curline'><a href='../S/1181.html#L822'>L</a>                 822 src/lua/lapi.cpp   luaH_setint(L, hvalue(o), n, L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L823'>L</a>                 823 src/lua/lapi.cpp   luaC_barrierback(L, hvalue(o), L-&gt;top-1);</span>
<span class='curline'><a href='../S/1181.html#L824'>L</a>                 824 src/lua/lapi.cpp   L-&gt;top--;</span>
<span class='curline'><a href='../S/1181.html#L825'>L</a>                 825 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L829'>L</a>                 829 src/lua/lapi.cpp LUA_API void lua_rawsetp (lua_State *L, int idx, const void *p) {</span>
<span class='curline'><a href='../S/1181.html#L832'>L</a>                 832 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L833'>L</a>                 833 src/lua/lapi.cpp   api_checknelems(L, 1);</span>
<span class='curline'><a href='../S/1181.html#L834'>L</a>                 834 src/lua/lapi.cpp   o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L835'>L</a>                 835 src/lua/lapi.cpp   api_check(L, ttistable(o), "table expected");</span>
<span class='curline'><a href='../S/1181.html#L837'>L</a>                 837 src/lua/lapi.cpp   slot = luaH_set(L, hvalue(o), &amp;k);</span>
<span class='curline'><a href='../S/1181.html#L838'>L</a>                 838 src/lua/lapi.cpp   setobj2t(L, slot, L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L839'>L</a>                 839 src/lua/lapi.cpp   luaC_barrierback(L, hvalue(o), L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L840'>L</a>                 840 src/lua/lapi.cpp   L-&gt;top--;</span>
<span class='curline'><a href='../S/1181.html#L841'>L</a>                 841 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L845'>L</a>                 845 src/lua/lapi.cpp LUA_API int lua_setmetatable (lua_State *L, int objindex) {</span>
<span class='curline'><a href='../S/1181.html#L848'>L</a>                 848 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L849'>L</a>                 849 src/lua/lapi.cpp   api_checknelems(L, 1);</span>
<span class='curline'><a href='../S/1181.html#L850'>L</a>                 850 src/lua/lapi.cpp   obj = index2addr(L, objindex);</span>
<span class='curline'><a href='../S/1181.html#L851'>L</a>                 851 src/lua/lapi.cpp   if (ttisnil(L-&gt;top - 1))</span>
<span class='curline'><a href='../S/1181.html#L854'>L</a>                 854 src/lua/lapi.cpp     api_check(L, ttistable(L-&gt;top - 1), "table expected");</span>
<span class='curline'><a href='../S/1181.html#L855'>L</a>                 855 src/lua/lapi.cpp     mt = hvalue(L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L861'>L</a>                 861 src/lua/lapi.cpp         luaC_objbarrier(L, gcvalue(obj), mt);</span>
<span class='curline'><a href='../S/1181.html#L862'>L</a>                 862 src/lua/lapi.cpp         luaC_checkfinalizer(L, gcvalue(obj), mt);</span>
<span class='curline'><a href='../S/1181.html#L869'>L</a>                 869 src/lua/lapi.cpp         luaC_objbarrier(L, uvalue(obj), mt);</span>
<span class='curline'><a href='../S/1181.html#L870'>L</a>                 870 src/lua/lapi.cpp         luaC_checkfinalizer(L, gcvalue(obj), mt);</span>
<span class='curline'><a href='../S/1181.html#L875'>L</a>                 875 src/lua/lapi.cpp       G(L)-&gt;mt[ttnov(obj)] = mt;</span>
<span class='curline'><a href='../S/1181.html#L879'>L</a>                 879 src/lua/lapi.cpp   L-&gt;top--;</span>
<span class='curline'><a href='../S/1181.html#L880'>L</a>                 880 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L885'>L</a>                 885 src/lua/lapi.cpp LUA_API void lua_setuservalue (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L887'>L</a>                 887 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L888'>L</a>                 888 src/lua/lapi.cpp   api_checknelems(L, 1);</span>
<span class='curline'><a href='../S/1181.html#L889'>L</a>                 889 src/lua/lapi.cpp   o = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L890'>L</a>                 890 src/lua/lapi.cpp   api_check(L, ttisfulluserdata(o), "full userdata expected");</span>
<span class='curline'><a href='../S/1181.html#L891'>L</a>                 891 src/lua/lapi.cpp   setuservalue(L, uvalue(o), L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L892'>L</a>                 892 src/lua/lapi.cpp   luaC_barrier(L, gcvalue(o), L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L893'>L</a>                 893 src/lua/lapi.cpp   L-&gt;top--;</span>
<span class='curline'><a href='../S/1181.html#L894'>L</a>                 894 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L903'>L</a>                 903 src/lua/lapi.cpp #define checkresults(L,na,nr) \</span>
<span class='curline'><a href='../S/1181.html#L904'>L</a>                 904 src/lua/lapi.cpp      api_check(L, (nr) == LUA_MULTRET || (L-&gt;ci-&gt;top - L-&gt;top &gt;= (nr) - (na)), \</span>
<span class='curline'><a href='../S/1181.html#L908'>L</a>                 908 src/lua/lapi.cpp LUA_API void lua_callk (lua_State *L, int nargs, int nresults,</span>
<span class='curline'><a href='../S/1181.html#L911'>L</a>                 911 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L912'>L</a>                 912 src/lua/lapi.cpp   api_check(L, k == NULL || !isLua(L-&gt;ci),</span>
<span class='curline'><a href='../S/1181.html#L914'>L</a>                 914 src/lua/lapi.cpp   api_checknelems(L, nargs+1);</span>
<span class='curline'><a href='../S/1181.html#L915'>L</a>                 915 src/lua/lapi.cpp   api_check(L, L-&gt;status == LUA_OK, "cannot do calls on non-normal thread");</span>
<span class='curline'><a href='../S/1181.html#L916'>L</a>                 916 src/lua/lapi.cpp   checkresults(L, nargs, nresults);</span>
<span class='curline'><a href='../S/1181.html#L917'>L</a>                 917 src/lua/lapi.cpp   func = L-&gt;top - (nargs+1);</span>
<span class='curline'><a href='../S/1181.html#L918'>L</a>                 918 src/lua/lapi.cpp   if (k != NULL &amp;&amp; L-&gt;nny == 0) {  /* need to prepare continuation? */</span>
<span class='curline'><a href='../S/1181.html#L919'>L</a>                 919 src/lua/lapi.cpp     L-&gt;ci-&gt;u.c.k = k;  /* save continuation */</span>
<span class='curline'><a href='../S/1181.html#L920'>L</a>                 920 src/lua/lapi.cpp     L-&gt;ci-&gt;u.c.ctx = ctx;  /* save context */</span>
<span class='curline'><a href='../S/1181.html#L921'>L</a>                 921 src/lua/lapi.cpp     luaD_call(L, func, nresults);  /* do the call */</span>
<span class='curline'><a href='../S/1181.html#L924'>L</a>                 924 src/lua/lapi.cpp     luaD_callnoyield(L, func, nresults);  /* just do the call */</span>
<span class='curline'><a href='../S/1181.html#L925'>L</a>                 925 src/lua/lapi.cpp   adjustresults(L, nresults);</span>
<span class='curline'><a href='../S/1181.html#L926'>L</a>                 926 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L940'>L</a>                 940 src/lua/lapi.cpp static void f_call (lua_State *L, void *ud) {</span>
<span class='curline'><a href='../S/1181.html#L942'>L</a>                 942 src/lua/lapi.cpp   luaD_callnoyield(L, c-&gt;func, c-&gt;nresults);</span>
<span class='curline'><a href='../S/1181.html#L947'>L</a>                 947 src/lua/lapi.cpp LUA_API int lua_pcallk (lua_State *L, int nargs, int nresults, int errfunc,</span>
<span class='curline'><a href='../S/1181.html#L952'>L</a>                 952 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L953'>L</a>                 953 src/lua/lapi.cpp   api_check(L, k == NULL || !isLua(L-&gt;ci),</span>
<span class='curline'><a href='../S/1181.html#L955'>L</a>                 955 src/lua/lapi.cpp   api_checknelems(L, nargs+1);</span>
<span class='curline'><a href='../S/1181.html#L956'>L</a>                 956 src/lua/lapi.cpp   api_check(L, L-&gt;status == LUA_OK, "cannot do calls on non-normal thread");</span>
<span class='curline'><a href='../S/1181.html#L957'>L</a>                 957 src/lua/lapi.cpp   checkresults(L, nargs, nresults);</span>
<span class='curline'><a href='../S/1181.html#L961'>L</a>                 961 src/lua/lapi.cpp     StkId o = index2addr(L, errfunc);</span>
<span class='curline'><a href='../S/1181.html#L962'>L</a>                 962 src/lua/lapi.cpp     api_checkstackindex(L, errfunc, o);</span>
<span class='curline'><a href='../S/1181.html#L963'>L</a>                 963 src/lua/lapi.cpp     func = savestack(L, o);</span>
<span class='curline'><a href='../S/1181.html#L965'>L</a>                 965 src/lua/lapi.cpp   c.func = L-&gt;top - (nargs+1);  /* function to be called */</span>
<span class='curline'><a href='../S/1181.html#L966'>L</a>                 966 src/lua/lapi.cpp   if (k == NULL || L-&gt;nny &gt; 0) {  /* no continuation or no yieldable? */</span>
<span class='curline'><a href='../S/1181.html#L968'>L</a>                 968 src/lua/lapi.cpp     status = luaD_pcall(L, f_call, &amp;c, savestack(L, c.func), func);</span>
<span class='curline'><a href='../S/1181.html#L971'>L</a>                 971 src/lua/lapi.cpp     CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1181.html#L975'>L</a>                 975 src/lua/lapi.cpp     ci-&gt;extra = savestack(L, c.func);</span>
<span class='curline'><a href='../S/1181.html#L976'>L</a>                 976 src/lua/lapi.cpp     ci-&gt;u.c.old_errfunc = L-&gt;errfunc;</span>
<span class='curline'><a href='../S/1181.html#L977'>L</a>                 977 src/lua/lapi.cpp     L-&gt;errfunc = func;</span>
<span class='curline'><a href='../S/1181.html#L978'>L</a>                 978 src/lua/lapi.cpp     setoah(ci-&gt;callstatus, L-&gt;allowhook);  /* save value of 'allowhook' */</span>
<span class='curline'><a href='../S/1181.html#L980'>L</a>                 980 src/lua/lapi.cpp     luaD_call(L, c.func, nresults);  /* do the call */</span>
<span class='curline'><a href='../S/1181.html#L982'>L</a>                 982 src/lua/lapi.cpp     L-&gt;errfunc = ci-&gt;u.c.old_errfunc;</span>
<span class='curline'><a href='../S/1181.html#L985'>L</a>                 985 src/lua/lapi.cpp   adjustresults(L, nresults);</span>
<span class='curline'><a href='../S/1181.html#L986'>L</a>                 986 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L991'>L</a>                 991 src/lua/lapi.cpp LUA_API int lua_load (lua_State *L, lua_Reader reader, void *data,</span>
<span class='curline'><a href='../S/1181.html#L995'>L</a>                 995 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L997'>L</a>                 997 src/lua/lapi.cpp   luaZ_init(L, &amp;z, reader, data);</span>
<span class='curline'><a href='../S/1181.html#L998'>L</a>                 998 src/lua/lapi.cpp   status = luaD_protectedparser(L, &amp;z, chunkname, mode);</span>
<span class='curline'><a href='../S/1181.html#L1000'>L</a>                1000 src/lua/lapi.cpp     LClosure *f = clLvalue(L-&gt;top - 1);  /* get newly created function */</span>
<span class='curline'><a href='../S/1181.html#L1003'>L</a>                1003 src/lua/lapi.cpp       Table *reg = hvalue(&amp;G(L)-&gt;l_registry);</span>
<span class='curline'><a href='../S/1181.html#L1006'>L</a>                1006 src/lua/lapi.cpp       setobj(L, f-&gt;upvals[0]-&gt;v, gt);</span>
<span class='curline'><a href='../S/1181.html#L1007'>L</a>                1007 src/lua/lapi.cpp       luaC_upvalbarrier(L, f-&gt;upvals[0]);</span>
<span class='curline'><a href='../S/1181.html#L1010'>L</a>                1010 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1015'>L</a>                1015 src/lua/lapi.cpp LUA_API int lua_dump (lua_State *L, lua_Writer writer, void *data, int strip) {</span>
<span class='curline'><a href='../S/1181.html#L1018'>L</a>                1018 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1019'>L</a>                1019 src/lua/lapi.cpp   api_checknelems(L, 1);</span>
<span class='curline'><a href='../S/1181.html#L1020'>L</a>                1020 src/lua/lapi.cpp   o = L-&gt;top - 1;</span>
<span class='curline'><a href='../S/1181.html#L1022'>L</a>                1022 src/lua/lapi.cpp     status = luaU_dump(L, getproto(o), writer, data, strip);</span>
<span class='curline'><a href='../S/1181.html#L1025'>L</a>                1025 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1030'>L</a>                1030 src/lua/lapi.cpp LUA_API int lua_status (lua_State *L) {</span>
<span class='curline'><a href='../S/1181.html#L1031'>L</a>                1031 src/lua/lapi.cpp   return L-&gt;status;</span>
<span class='curline'><a href='../S/1181.html#L1039'>L</a>                1039 src/lua/lapi.cpp LUA_API int lua_gc (lua_State *L, int what, int data) {</span>
<span class='curline'><a href='../S/1181.html#L1042'>L</a>                1042 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1043'>L</a>                1043 src/lua/lapi.cpp   g = G(L);</span>
<span class='curline'><a href='../S/1181.html#L1055'>L</a>                1055 src/lua/lapi.cpp       luaC_fullgc(L, 0);</span>
<span class='curline'><a href='../S/1181.html#L1073'>L</a>                1073 src/lua/lapi.cpp         luaC_step(L);</span>
<span class='curline'><a href='../S/1181.html#L1078'>L</a>                1078 src/lua/lapi.cpp         luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1181.html#L1102'>L</a>                1102 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1113'>L</a>                1113 src/lua/lapi.cpp LUA_API int lua_error (lua_State *L) {</span>
<span class='curline'><a href='../S/1181.html#L1114'>L</a>                1114 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1115'>L</a>                1115 src/lua/lapi.cpp   api_checknelems(L, 1);</span>
<span class='curline'><a href='../S/1181.html#L1116'>L</a>                1116 src/lua/lapi.cpp   luaG_errormsg(L);</span>
<span class='curline'><a href='../S/1181.html#L1122'>L</a>                1122 src/lua/lapi.cpp LUA_API int lua_next (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L1125'>L</a>                1125 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1126'>L</a>                1126 src/lua/lapi.cpp   t = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L1127'>L</a>                1127 src/lua/lapi.cpp   api_check(L, ttistable(t), "table expected");</span>
<span class='curline'><a href='../S/1181.html#L1128'>L</a>                1128 src/lua/lapi.cpp   more = luaH_next(L, hvalue(t), L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1181.html#L1130'>L</a>                1130 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L1133'>L</a>                1133 src/lua/lapi.cpp     L-&gt;top -= 1;  /* remove key */</span>
<span class='curline'><a href='../S/1181.html#L1134'>L</a>                1134 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1139'>L</a>                1139 src/lua/lapi.cpp LUA_API void lua_concat (lua_State *L, int n) {</span>
<span class='curline'><a href='../S/1181.html#L1140'>L</a>                1140 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1141'>L</a>                1141 src/lua/lapi.cpp   api_checknelems(L, n);</span>
<span class='curline'><a href='../S/1181.html#L1143'>L</a>                1143 src/lua/lapi.cpp     luaV_concat(L, n);</span>
<span class='curline'><a href='../S/1181.html#L1146'>L</a>                1146 src/lua/lapi.cpp     setsvalue2s(L, L-&gt;top, luaS_newlstr(L, "", 0));</span>
<span class='curline'><a href='../S/1181.html#L1147'>L</a>                1147 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L1150'>L</a>                1150 src/lua/lapi.cpp   luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1181.html#L1151'>L</a>                1151 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1155'>L</a>                1155 src/lua/lapi.cpp LUA_API void lua_len (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1181.html#L1157'>L</a>                1157 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1158'>L</a>                1158 src/lua/lapi.cpp   t = index2addr(L, idx);</span>
<span class='curline'><a href='../S/1181.html#L1159'>L</a>                1159 src/lua/lapi.cpp   luaV_objlen(L, L-&gt;top, t);</span>
<span class='curline'><a href='../S/1181.html#L1160'>L</a>                1160 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L1161'>L</a>                1161 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1165'>L</a>                1165 src/lua/lapi.cpp LUA_API lua_Alloc lua_getallocf (lua_State *L, void **ud) {</span>
<span class='curline'><a href='../S/1181.html#L1167'>L</a>                1167 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1168'>L</a>                1168 src/lua/lapi.cpp   if (ud) *ud = G(L)-&gt;ud;</span>
<span class='curline'><a href='../S/1181.html#L1169'>L</a>                1169 src/lua/lapi.cpp   f = G(L)-&gt;frealloc;</span>
<span class='curline'><a href='../S/1181.html#L1170'>L</a>                1170 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1175'>L</a>                1175 src/lua/lapi.cpp LUA_API void lua_setallocf (lua_State *L, lua_Alloc f, void *ud) {</span>
<span class='curline'><a href='../S/1181.html#L1176'>L</a>                1176 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1177'>L</a>                1177 src/lua/lapi.cpp   G(L)-&gt;ud = ud;</span>
<span class='curline'><a href='../S/1181.html#L1178'>L</a>                1178 src/lua/lapi.cpp   G(L)-&gt;frealloc = f;</span>
<span class='curline'><a href='../S/1181.html#L1179'>L</a>                1179 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1183'>L</a>                1183 src/lua/lapi.cpp LUA_API void *lua_newuserdata (lua_State *L, size_t size) {</span>
<span class='curline'><a href='../S/1181.html#L1185'>L</a>                1185 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1186'>L</a>                1186 src/lua/lapi.cpp   u = luaS_newudata(L, size);</span>
<span class='curline'><a href='../S/1181.html#L1187'>L</a>                1187 src/lua/lapi.cpp   setuvalue(L, L-&gt;top, u);</span>
<span class='curline'><a href='../S/1181.html#L1188'>L</a>                1188 src/lua/lapi.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L1189'>L</a>                1189 src/lua/lapi.cpp   luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1181.html#L1190'>L</a>                1190 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1221'>L</a>                1221 src/lua/lapi.cpp LUA_API const char *lua_getupvalue (lua_State *L, int funcindex, int n) {</span>
<span class='curline'><a href='../S/1181.html#L1224'>L</a>                1224 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1225'>L</a>                1225 src/lua/lapi.cpp   name = aux_upvalue(index2addr(L, funcindex), n, &amp;val, NULL, NULL);</span>
<span class='curline'><a href='../S/1181.html#L1227'>L</a>                1227 src/lua/lapi.cpp     setobj2s(L, L-&gt;top, val);</span>
<span class='curline'><a href='../S/1181.html#L1228'>L</a>                1228 src/lua/lapi.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1181.html#L1230'>L</a>                1230 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1235'>L</a>                1235 src/lua/lapi.cpp LUA_API const char *lua_setupvalue (lua_State *L, int funcindex, int n) {</span>
<span class='curline'><a href='../S/1181.html#L1241'>L</a>                1241 src/lua/lapi.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1181.html#L1242'>L</a>                1242 src/lua/lapi.cpp   fi = index2addr(L, funcindex);</span>
<span class='curline'><a href='../S/1181.html#L1243'>L</a>                1243 src/lua/lapi.cpp   api_checknelems(L, 1);</span>
<span class='curline'><a href='../S/1181.html#L1246'>L</a>                1246 src/lua/lapi.cpp     L-&gt;top--;</span>
<span class='curline'><a href='../S/1181.html#L1247'>L</a>                1247 src/lua/lapi.cpp     setobj(L, val, L-&gt;top);</span>
<span class='curline'><a href='../S/1181.html#L1248'>L</a>                1248 src/lua/lapi.cpp     if (owner) { luaC_barrier(L, owner, L-&gt;top); }</span>
<span class='curline'><a href='../S/1181.html#L1249'>L</a>                1249 src/lua/lapi.cpp     else if (uv) { luaC_upvalbarrier(L, uv); }</span>
<span class='curline'><a href='../S/1181.html#L1251'>L</a>                1251 src/lua/lapi.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1181.html#L1256'>L</a>                1256 src/lua/lapi.cpp static UpVal **getupvalref (lua_State *L, int fidx, int n, LClosure **pf) {</span>
<span class='curline'><a href='../S/1181.html#L1258'>L</a>                1258 src/lua/lapi.cpp   StkId fi = index2addr(L, fidx);</span>
<span class='curline'><a href='../S/1181.html#L1259'>L</a>                1259 src/lua/lapi.cpp   api_check(L, ttisLclosure(fi), "Lua function expected");</span>
<span class='curline'><a href='../S/1181.html#L1261'>L</a>                1261 src/lua/lapi.cpp   api_check(L, (1 &lt;= n &amp;&amp; n &lt;= f-&gt;p-&gt;sizeupvalues), "invalid upvalue index");</span>
<span class='curline'><a href='../S/1181.html#L1267'>L</a>                1267 src/lua/lapi.cpp LUA_API void *lua_upvalueid (lua_State *L, int fidx, int n) {</span>
<span class='curline'><a href='../S/1181.html#L1268'>L</a>                1268 src/lua/lapi.cpp   StkId fi = index2addr(L, fidx);</span>
<span class='curline'><a href='../S/1181.html#L1271'>L</a>                1271 src/lua/lapi.cpp       return *getupvalref(L, fidx, n, NULL);</span>
<span class='curline'><a href='../S/1181.html#L1275'>L</a>                1275 src/lua/lapi.cpp       api_check(L, 1 &lt;= n &amp;&amp; n &lt;= f-&gt;nupvalues, "invalid upvalue index");</span>
<span class='curline'><a href='../S/1181.html#L1279'>L</a>                1279 src/lua/lapi.cpp       api_check(L, 0, "closure expected");</span>
<span class='curline'><a href='../S/1181.html#L1286'>L</a>                1286 src/lua/lapi.cpp LUA_API void lua_upvaluejoin (lua_State *L, int fidx1, int n1,</span>
<span class='curline'><a href='../S/1181.html#L1289'>L</a>                1289 src/lua/lapi.cpp   UpVal **up1 = getupvalref(L, fidx1, n1, &amp;f1);</span>
<span class='curline'><a href='../S/1181.html#L1290'>L</a>                1290 src/lua/lapi.cpp   UpVal **up2 = getupvalref(L, fidx2, n2, NULL);</span>
<span class='curline'><a href='../S/1181.html#L1291'>L</a>                1291 src/lua/lapi.cpp   luaC_upvdeccount(L, *up1);</span>
<span class='curline'><a href='../S/1181.html#L1295'>L</a>                1295 src/lua/lapi.cpp   luaC_upvalbarrier(L, *up1);</span>
<span class='curline'><a href='../S/1197.html#L14'>L</a>                  14 src/lua/lapi.h #define api_incr_top(L)   {L-&gt;top++; api_check(L, L-&gt;top &lt;= L-&gt;ci-&gt;top, \</span>
<span class='curline'><a href='../S/1197.html#L17'>L</a>                  17 src/lua/lapi.h #define adjustresults(L,nres) \</span>
<span class='curline'><a href='../S/1197.html#L18'>L</a>                  18 src/lua/lapi.h     { if ((nres) == LUA_MULTRET &amp;&amp; L-&gt;ci-&gt;top &lt; L-&gt;top) L-&gt;ci-&gt;top = L-&gt;top; }</span>
<span class='curline'><a href='../S/1197.html#L20'>L</a>                  20 src/lua/lapi.h #define api_checknelems(L,n)	api_check(L, (n) &lt; (L-&gt;top - L-&gt;ci-&gt;func), \</span>
<span class='curline'><a href='../S/1193.html#L46'>L</a>                  46 src/lua/lauxlib.cpp static int findfield (lua_State *L, int objidx, int level) {</span>
<span class='curline'><a href='../S/1193.html#L47'>L</a>                  47 src/lua/lauxlib.cpp   if (level == 0 || !lua_istable(L, -1))</span>
<span class='curline'><a href='../S/1193.html#L49'>L</a>                  49 src/lua/lauxlib.cpp   lua_pushnil(L);  /* start 'next' loop */</span>
<span class='curline'><a href='../S/1193.html#L50'>L</a>                  50 src/lua/lauxlib.cpp   while (lua_next(L, -2)) {  /* for each pair in table */</span>
<span class='curline'><a href='../S/1193.html#L51'>L</a>                  51 src/lua/lauxlib.cpp     if (lua_type(L, -2) == LUA_TSTRING) {  /* ignore non-string keys */</span>
<span class='curline'><a href='../S/1193.html#L52'>L</a>                  52 src/lua/lauxlib.cpp       if (lua_rawequal(L, objidx, -1)) {  /* found object? */</span>
<span class='curline'><a href='../S/1193.html#L53'>L</a>                  53 src/lua/lauxlib.cpp         lua_pop(L, 1);  /* remove value (but keep name) */</span>
<span class='curline'><a href='../S/1193.html#L56'>L</a>                  56 src/lua/lauxlib.cpp       else if (findfield(L, objidx, level - 1)) {  /* try recursively */</span>
<span class='curline'><a href='../S/1193.html#L57'>L</a>                  57 src/lua/lauxlib.cpp         lua_remove(L, -2);  /* remove table (but keep name) */</span>
<span class='curline'><a href='../S/1193.html#L58'>L</a>                  58 src/lua/lauxlib.cpp         lua_pushliteral(L, ".");</span>
<span class='curline'><a href='../S/1193.html#L59'>L</a>                  59 src/lua/lauxlib.cpp         lua_insert(L, -2);  /* place '.' between the two names */</span>
<span class='curline'><a href='../S/1193.html#L60'>L</a>                  60 src/lua/lauxlib.cpp         lua_concat(L, 3);</span>
<span class='curline'><a href='../S/1193.html#L64'>L</a>                  64 src/lua/lauxlib.cpp     lua_pop(L, 1);  /* remove value */</span>
<span class='curline'><a href='../S/1193.html#L73'>L</a>                  73 src/lua/lauxlib.cpp static int pushglobalfuncname (lua_State *L, lua_Debug *ar) {</span>
<span class='curline'><a href='../S/1193.html#L74'>L</a>                  74 src/lua/lauxlib.cpp   int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/1193.html#L75'>L</a>                  75 src/lua/lauxlib.cpp   lua_getinfo(L, "f", ar);  /* push function */</span>
<span class='curline'><a href='../S/1193.html#L76'>L</a>                  76 src/lua/lauxlib.cpp   lua_getfield(L, LUA_REGISTRYINDEX, LUA_LOADED_TABLE);</span>
<span class='curline'><a href='../S/1193.html#L77'>L</a>                  77 src/lua/lauxlib.cpp   if (findfield(L, top + 1, 2)) {</span>
<span class='curline'><a href='../S/1193.html#L78'>L</a>                  78 src/lua/lauxlib.cpp     const char *name = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/1193.html#L80'>L</a>                  80 src/lua/lauxlib.cpp       lua_pushstring(L, name + 3);  /* push name without prefix */</span>
<span class='curline'><a href='../S/1193.html#L81'>L</a>                  81 src/lua/lauxlib.cpp       lua_remove(L, -2);  /* remove original name */</span>
<span class='curline'><a href='../S/1193.html#L83'>L</a>                  83 src/lua/lauxlib.cpp     lua_copy(L, -1, top + 1);  /* move name to proper place */</span>
<span class='curline'><a href='../S/1193.html#L84'>L</a>                  84 src/lua/lauxlib.cpp     lua_pop(L, 2);  /* remove pushed values */</span>
<span class='curline'><a href='../S/1193.html#L88'>L</a>                  88 src/lua/lauxlib.cpp     lua_settop(L, top);  /* remove function and global table */</span>
<span class='curline'><a href='../S/1193.html#L94'>L</a>                  94 src/lua/lauxlib.cpp static void pushfuncname (lua_State *L, lua_Debug *ar) {</span>
<span class='curline'><a href='../S/1193.html#L95'>L</a>                  95 src/lua/lauxlib.cpp   if (pushglobalfuncname(L, ar)) {  /* try first a global name */</span>
<span class='curline'><a href='../S/1193.html#L96'>L</a>                  96 src/lua/lauxlib.cpp     lua_pushfstring(L, "function '%s'", lua_tostring(L, -1));</span>
<span class='curline'><a href='../S/1193.html#L97'>L</a>                  97 src/lua/lauxlib.cpp     lua_remove(L, -2);  /* remove name */</span>
<span class='curline'><a href='../S/1193.html#L100'>L</a>                 100 src/lua/lauxlib.cpp     lua_pushfstring(L, "%s '%s'", ar-&gt;namewhat, ar-&gt;name);  /* use it */</span>
<span class='curline'><a href='../S/1193.html#L102'>L</a>                 102 src/lua/lauxlib.cpp       lua_pushliteral(L, "main chunk");</span>
<span class='curline'><a href='../S/1193.html#L104'>L</a>                 104 src/lua/lauxlib.cpp     lua_pushfstring(L, "function &lt;%s:%d&gt;", ar-&gt;short_src, ar-&gt;linedefined);</span>
<span class='curline'><a href='../S/1193.html#L106'>L</a>                 106 src/lua/lauxlib.cpp     lua_pushliteral(L, "?");</span>
<span class='curline'><a href='../S/1193.html#L110'>L</a>                 110 src/lua/lauxlib.cpp static int lastlevel (lua_State *L) {</span>
<span class='curline'><a href='../S/1193.html#L114'>L</a>                 114 src/lua/lauxlib.cpp   while (lua_getstack(L, le, &amp;ar)) { li = le; le *= 2; }</span>
<span class='curline'><a href='../S/1193.html#L118'>L</a>                 118 src/lua/lauxlib.cpp     if (lua_getstack(L, m, &amp;ar)) li = m + 1;</span>
<span class='curline'><a href='../S/1193.html#L125'>L</a>                 125 src/lua/lauxlib.cpp LUALIB_API void luaL_traceback (lua_State *L, lua_State *L1,</span>
<span class='curline'><a href='../S/1193.html#L128'>L</a>                 128 src/lua/lauxlib.cpp   int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/1193.html#L132'>L</a>                 132 src/lua/lauxlib.cpp     lua_pushfstring(L, "%s\n", msg);</span>
<span class='curline'><a href='../S/1193.html#L133'>L</a>                 133 src/lua/lauxlib.cpp   luaL_checkstack(L, 10, NULL);</span>
<span class='curline'><a href='../S/1193.html#L134'>L</a>                 134 src/lua/lauxlib.cpp   lua_pushliteral(L, "stack traceback:");</span>
<span class='curline'><a href='../S/1193.html#L137'>L</a>                 137 src/lua/lauxlib.cpp       lua_pushliteral(L, "\n\t...");  /* add a '...' */</span>
<span class='curline'><a href='../S/1193.html#L142'>L</a>                 142 src/lua/lauxlib.cpp       lua_pushfstring(L, "\n\t%s:", ar.short_src);</span>
<span class='curline'><a href='../S/1193.html#L144'>L</a>                 144 src/lua/lauxlib.cpp         lua_pushfstring(L, "%d:", ar.currentline);</span>
<span class='curline'><a href='../S/1193.html#L145'>L</a>                 145 src/lua/lauxlib.cpp       lua_pushliteral(L, " in ");</span>
<span class='curline'><a href='../S/1193.html#L146'>L</a>                 146 src/lua/lauxlib.cpp       pushfuncname(L, &amp;ar);</span>
<span class='curline'><a href='../S/1193.html#L148'>L</a>                 148 src/lua/lauxlib.cpp         lua_pushliteral(L, "\n\t(...tail calls...)");</span>
<span class='curline'><a href='../S/1193.html#L149'>L</a>                 149 src/lua/lauxlib.cpp       lua_concat(L, lua_gettop(L) - top);</span>
<span class='curline'><a href='../S/1193.html#L152'>L</a>                 152 src/lua/lauxlib.cpp   lua_concat(L, lua_gettop(L) - top);</span>
<span class='curline'><a href='../S/1193.html#L164'>L</a>                 164 src/lua/lauxlib.cpp LUALIB_API int luaL_argerror (lua_State *L, int arg, const char *extramsg) {</span>
<span class='curline'><a href='../S/1193.html#L166'>L</a>                 166 src/lua/lauxlib.cpp   if (!lua_getstack(L, 0, &amp;ar))  /* no stack frame? */</span>
<span class='curline'><a href='../S/1193.html#L167'>L</a>                 167 src/lua/lauxlib.cpp     return luaL_error(L, "bad argument #%d (%s)", arg, extramsg);</span>
<span class='curline'><a href='../S/1193.html#L168'>L</a>                 168 src/lua/lauxlib.cpp   lua_getinfo(L, "n", &amp;ar);</span>
<span class='curline'><a href='../S/1193.html#L172'>L</a>                 172 src/lua/lauxlib.cpp       return luaL_error(L, "calling '%s' on bad self (%s)",</span>
<span class='curline'><a href='../S/1193.html#L176'>L</a>                 176 src/lua/lauxlib.cpp     ar.name = (pushglobalfuncname(L, &amp;ar)) ? lua_tostring(L, -1) : "?";</span>
<span class='curline'><a href='../S/1193.html#L177'>L</a>                 177 src/lua/lauxlib.cpp   return luaL_error(L, "bad argument #%d to '%s' (%s)",</span>
<span class='curline'><a href='../S/1193.html#L182'>L</a>                 182 src/lua/lauxlib.cpp static int typeerror (lua_State *L, int arg, const char *tname) {</span>
<span class='curline'><a href='../S/1193.html#L185'>L</a>                 185 src/lua/lauxlib.cpp   if (luaL_getmetafield(L, arg, "__name") == LUA_TSTRING)</span>
<span class='curline'><a href='../S/1193.html#L186'>L</a>                 186 src/lua/lauxlib.cpp     typearg = lua_tostring(L, -1);  /* use the given type name */</span>
<span class='curline'><a href='../S/1193.html#L187'>L</a>                 187 src/lua/lauxlib.cpp   else if (lua_type(L, arg) == LUA_TLIGHTUSERDATA)</span>
<span class='curline'><a href='../S/1193.html#L190'>L</a>                 190 src/lua/lauxlib.cpp     typearg = luaL_typename(L, arg);  /* standard name */</span>
<span class='curline'><a href='../S/1193.html#L191'>L</a>                 191 src/lua/lauxlib.cpp   msg = lua_pushfstring(L, "%s expected, got %s", tname, typearg);</span>
<span class='curline'><a href='../S/1193.html#L192'>L</a>                 192 src/lua/lauxlib.cpp   return luaL_argerror(L, arg, msg);</span>
<span class='curline'><a href='../S/1193.html#L196'>L</a>                 196 src/lua/lauxlib.cpp static void tag_error (lua_State *L, int arg, int tag) {</span>
<span class='curline'><a href='../S/1193.html#L197'>L</a>                 197 src/lua/lauxlib.cpp   typeerror(L, arg, lua_typename(L, tag));</span>
<span class='curline'><a href='../S/1193.html#L205'>L</a>                 205 src/lua/lauxlib.cpp LUALIB_API void luaL_where (lua_State *L, int level) {</span>
<span class='curline'><a href='../S/1193.html#L207'>L</a>                 207 src/lua/lauxlib.cpp   if (lua_getstack(L, level, &amp;ar)) {  /* check function at level */</span>
<span class='curline'><a href='../S/1193.html#L208'>L</a>                 208 src/lua/lauxlib.cpp     lua_getinfo(L, "Sl", &amp;ar);  /* get info about it */</span>
<span class='curline'><a href='../S/1193.html#L210'>L</a>                 210 src/lua/lauxlib.cpp       lua_pushfstring(L, "%s:%d: ", ar.short_src, ar.currentline);</span>
<span class='curline'><a href='../S/1193.html#L214'>L</a>                 214 src/lua/lauxlib.cpp   lua_pushfstring(L, "");  /* else, no information available... */</span>
<span class='curline'><a href='../S/1193.html#L223'>L</a>                 223 src/lua/lauxlib.cpp LUALIB_API int luaL_error (lua_State *L, const char *fmt, ...) {</span>
<span class='curline'><a href='../S/1193.html#L226'>L</a>                 226 src/lua/lauxlib.cpp   luaL_where(L, 1);</span>
<span class='curline'><a href='../S/1193.html#L227'>L</a>                 227 src/lua/lauxlib.cpp   lua_pushvfstring(L, fmt, argp);</span>
<span class='curline'><a href='../S/1193.html#L229'>L</a>                 229 src/lua/lauxlib.cpp   lua_concat(L, 2);</span>
<span class='curline'><a href='../S/1193.html#L230'>L</a>                 230 src/lua/lauxlib.cpp   return lua_error(L);</span>
<span class='curline'><a href='../S/1193.html#L234'>L</a>                 234 src/lua/lauxlib.cpp LUALIB_API int luaL_fileresult (lua_State *L, int stat, const char *fname) {</span>
<span class='curline'><a href='../S/1193.html#L237'>L</a>                 237 src/lua/lauxlib.cpp     lua_pushboolean(L, 1);</span>
<span class='curline'><a href='../S/1193.html#L241'>L</a>                 241 src/lua/lauxlib.cpp     lua_pushnil(L);</span>
<span class='curline'><a href='../S/1193.html#L243'>L</a>                 243 src/lua/lauxlib.cpp       lua_pushfstring(L, "%s: %s", fname, strerror(en));</span>
<span class='curline'><a href='../S/1193.html#L245'>L</a>                 245 src/lua/lauxlib.cpp       lua_pushstring(L, strerror(en));</span>
<span class='curline'><a href='../S/1193.html#L246'>L</a>                 246 src/lua/lauxlib.cpp     lua_pushinteger(L, en);</span>
<span class='curline'><a href='../S/1193.html#L274'>L</a>                 274 src/lua/lauxlib.cpp LUALIB_API int luaL_execresult (lua_State *L, int stat) {</span>
<span class='curline'><a href='../S/1193.html#L277'>L</a>                 277 src/lua/lauxlib.cpp     return luaL_fileresult(L, 0, NULL);</span>
<span class='curline'><a href='../S/1193.html#L281'>L</a>                 281 src/lua/lauxlib.cpp       lua_pushboolean(L, 1);</span>
<span class='curline'><a href='../S/1193.html#L283'>L</a>                 283 src/lua/lauxlib.cpp       lua_pushnil(L);</span>
<span class='curline'><a href='../S/1193.html#L284'>L</a>                 284 src/lua/lauxlib.cpp     lua_pushstring(L, what);</span>
<span class='curline'><a href='../S/1193.html#L285'>L</a>                 285 src/lua/lauxlib.cpp     lua_pushinteger(L, stat);</span>
<span class='curline'><a href='../S/1193.html#L299'>L</a>                 299 src/lua/lauxlib.cpp LUALIB_API int luaL_newmetatable (lua_State *L, const char *tname) {</span>
<span class='curline'><a href='../S/1193.html#L300'>L</a>                 300 src/lua/lauxlib.cpp   if (luaL_getmetatable(L, tname) != LUA_TNIL)  /* name already in use? */</span>
<span class='curline'><a href='../S/1193.html#L302'>L</a>                 302 src/lua/lauxlib.cpp   lua_pop(L, 1);</span>
<span class='curline'><a href='../S/1193.html#L303'>L</a>                 303 src/lua/lauxlib.cpp   lua_createtable(L, 0, 2);  /* create metatable */</span>
<span class='curline'><a href='../S/1193.html#L304'>L</a>                 304 src/lua/lauxlib.cpp   lua_pushstring(L, tname);</span>
<span class='curline'><a href='../S/1193.html#L305'>L</a>                 305 src/lua/lauxlib.cpp   lua_setfield(L, -2, "__name");  /* metatable.__name = tname */</span>
<span class='curline'><a href='../S/1193.html#L306'>L</a>                 306 src/lua/lauxlib.cpp   lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/1193.html#L307'>L</a>                 307 src/lua/lauxlib.cpp   lua_setfield(L, LUA_REGISTRYINDEX, tname);  /* registry.name = metatable */</span>
<span class='curline'><a href='../S/1193.html#L312'>L</a>                 312 src/lua/lauxlib.cpp LUALIB_API void luaL_setmetatable (lua_State *L, const char *tname) {</span>
<span class='curline'><a href='../S/1193.html#L313'>L</a>                 313 src/lua/lauxlib.cpp   luaL_getmetatable(L, tname);</span>
<span class='curline'><a href='../S/1193.html#L314'>L</a>                 314 src/lua/lauxlib.cpp   lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/1193.html#L318'>L</a>                 318 src/lua/lauxlib.cpp LUALIB_API void *luaL_testudata (lua_State *L, int ud, const char *tname) {</span>
<span class='curline'><a href='../S/1193.html#L319'>L</a>                 319 src/lua/lauxlib.cpp   void *p = lua_touserdata(L, ud);</span>
<span class='curline'><a href='../S/1193.html#L321'>L</a>                 321 src/lua/lauxlib.cpp     if (lua_getmetatable(L, ud)) {  /* does it have a metatable? */</span>
<span class='curline'><a href='../S/1193.html#L322'>L</a>                 322 src/lua/lauxlib.cpp       luaL_getmetatable(L, tname);  /* get correct metatable */</span>
<span class='curline'><a href='../S/1193.html#L323'>L</a>                 323 src/lua/lauxlib.cpp       if (!lua_rawequal(L, -1, -2))  /* not the same? */</span>
<span class='curline'><a href='../S/1193.html#L325'>L</a>                 325 src/lua/lauxlib.cpp       lua_pop(L, 2);  /* remove both metatables */</span>
<span class='curline'><a href='../S/1193.html#L333'>L</a>                 333 src/lua/lauxlib.cpp LUALIB_API void *luaL_checkudata (lua_State *L, int ud, const char *tname) {</span>
<span class='curline'><a href='../S/1193.html#L334'>L</a>                 334 src/lua/lauxlib.cpp   void *p = luaL_testudata(L, ud, tname);</span>
<span class='curline'><a href='../S/1193.html#L335'>L</a>                 335 src/lua/lauxlib.cpp   if (p == NULL) typeerror(L, ud, tname);</span>
<span class='curline'><a href='../S/1193.html#L348'>L</a>                 348 src/lua/lauxlib.cpp LUALIB_API int luaL_checkoption (lua_State *L, int arg, const char *def,</span>
<span class='curline'><a href='../S/1193.html#L350'>L</a>                 350 src/lua/lauxlib.cpp   const char *name = (def) ? luaL_optstring(L, arg, def) :</span>
<span class='curline'><a href='../S/1193.html#L351'>L</a>                 351 src/lua/lauxlib.cpp                              luaL_checkstring(L, arg);</span>
<span class='curline'><a href='../S/1193.html#L356'>L</a>                 356 src/lua/lauxlib.cpp   return luaL_argerror(L, arg,</span>
<span class='curline'><a href='../S/1193.html#L357'>L</a>                 357 src/lua/lauxlib.cpp                        lua_pushfstring(L, "invalid option '%s'", name));</span>
<span class='curline'><a href='../S/1193.html#L368'>L</a>                 368 src/lua/lauxlib.cpp LUALIB_API void luaL_checkstack (lua_State *L, int space, const char *msg) {</span>
<span class='curline'><a href='../S/1193.html#L369'>L</a>                 369 src/lua/lauxlib.cpp   if (!lua_checkstack(L, space)) {</span>
<span class='curline'><a href='../S/1193.html#L371'>L</a>                 371 src/lua/lauxlib.cpp       luaL_error(L, "stack overflow (%s)", msg);</span>
<span class='curline'><a href='../S/1193.html#L373'>L</a>                 373 src/lua/lauxlib.cpp       luaL_error(L, "stack overflow");</span>
<span class='curline'><a href='../S/1193.html#L378'>L</a>                 378 src/lua/lauxlib.cpp LUALIB_API void luaL_checktype (lua_State *L, int arg, int t) {</span>
<span class='curline'><a href='../S/1193.html#L379'>L</a>                 379 src/lua/lauxlib.cpp   if (lua_type(L, arg) != t)</span>
<span class='curline'><a href='../S/1193.html#L380'>L</a>                 380 src/lua/lauxlib.cpp     tag_error(L, arg, t);</span>
<span class='curline'><a href='../S/1193.html#L384'>L</a>                 384 src/lua/lauxlib.cpp LUALIB_API void luaL_checkany (lua_State *L, int arg) {</span>
<span class='curline'><a href='../S/1193.html#L385'>L</a>                 385 src/lua/lauxlib.cpp   if (lua_type(L, arg) == LUA_TNONE)</span>
<span class='curline'><a href='../S/1193.html#L386'>L</a>                 386 src/lua/lauxlib.cpp     luaL_argerror(L, arg, "value expected");</span>
<span class='curline'><a href='../S/1193.html#L390'>L</a>                 390 src/lua/lauxlib.cpp LUALIB_API const char *luaL_checklstring (lua_State *L, int arg, size_t *len) {</span>
<span class='curline'><a href='../S/1193.html#L391'>L</a>                 391 src/lua/lauxlib.cpp   const char *s = lua_tolstring(L, arg, len);</span>
<span class='curline'><a href='../S/1193.html#L392'>L</a>                 392 src/lua/lauxlib.cpp   if (!s) tag_error(L, arg, LUA_TSTRING);</span>
<span class='curline'><a href='../S/1193.html#L397'>L</a>                 397 src/lua/lauxlib.cpp LUALIB_API const char *luaL_optlstring (lua_State *L, int arg,</span>
<span class='curline'><a href='../S/1193.html#L399'>L</a>                 399 src/lua/lauxlib.cpp   if (lua_isnoneornil(L, arg)) {</span>
<span class='curline'><a href='../S/1193.html#L404'>L</a>                 404 src/lua/lauxlib.cpp   else return luaL_checklstring(L, arg, len);</span>
<span class='curline'><a href='../S/1193.html#L408'>L</a>                 408 src/lua/lauxlib.cpp LUALIB_API lua_Number luaL_checknumber (lua_State *L, int arg) {</span>
<span class='curline'><a href='../S/1193.html#L410'>L</a>                 410 src/lua/lauxlib.cpp   lua_Number d = lua_tonumberx(L, arg, &amp;isnum);</span>
<span class='curline'><a href='../S/1193.html#L412'>L</a>                 412 src/lua/lauxlib.cpp     tag_error(L, arg, LUA_TNUMBER);</span>
<span class='curline'><a href='../S/1193.html#L417'>L</a>                 417 src/lua/lauxlib.cpp LUALIB_API lua_Number luaL_optnumber (lua_State *L, int arg, lua_Number def) {</span>
<span class='curline'><a href='../S/1193.html#L418'>L</a>                 418 src/lua/lauxlib.cpp   return luaL_opt(L, luaL_checknumber, arg, def);</span>
<span class='curline'><a href='../S/1193.html#L422'>L</a>                 422 src/lua/lauxlib.cpp static void interror (lua_State *L, int arg) {</span>
<span class='curline'><a href='../S/1193.html#L423'>L</a>                 423 src/lua/lauxlib.cpp   if (lua_isnumber(L, arg))</span>
<span class='curline'><a href='../S/1193.html#L424'>L</a>                 424 src/lua/lauxlib.cpp     luaL_argerror(L, arg, "number has no integer representation");</span>
<span class='curline'><a href='../S/1193.html#L426'>L</a>                 426 src/lua/lauxlib.cpp     tag_error(L, arg, LUA_TNUMBER);</span>
<span class='curline'><a href='../S/1193.html#L430'>L</a>                 430 src/lua/lauxlib.cpp LUALIB_API lua_Integer luaL_checkinteger (lua_State *L, int arg) {</span>
<span class='curline'><a href='../S/1193.html#L432'>L</a>                 432 src/lua/lauxlib.cpp   lua_Integer d = lua_tointegerx(L, arg, &amp;isnum);</span>
<span class='curline'><a href='../S/1193.html#L434'>L</a>                 434 src/lua/lauxlib.cpp     interror(L, arg);</span>
<span class='curline'><a href='../S/1193.html#L440'>L</a>                 440 src/lua/lauxlib.cpp LUALIB_API lua_Integer luaL_optinteger (lua_State *L, int arg,</span>
<span class='curline'><a href='../S/1193.html#L442'>L</a>                 442 src/lua/lauxlib.cpp   return luaL_opt(L, luaL_checkinteger, arg, def);</span>
<span class='curline'><a href='../S/1193.html#L461'>L</a>                 461 src/lua/lauxlib.cpp static void *resizebox (lua_State *L, int idx, size_t newsize) {</span>
<span class='curline'><a href='../S/1193.html#L463'>L</a>                 463 src/lua/lauxlib.cpp   lua_Alloc allocf = lua_getallocf(L, &amp;ud);</span>
<span class='curline'><a href='../S/1193.html#L464'>L</a>                 464 src/lua/lauxlib.cpp   UBox *box = (UBox *)lua_touserdata(L, idx);</span>
<span class='curline'><a href='../S/1193.html#L467'>L</a>                 467 src/lua/lauxlib.cpp     resizebox(L, idx, 0);  /* free buffer */</span>
<span class='curline'><a href='../S/1193.html#L468'>L</a>                 468 src/lua/lauxlib.cpp     luaL_error(L, "not enough memory for buffer allocation");</span>
<span class='curline'><a href='../S/1193.html#L476'>L</a>                 476 src/lua/lauxlib.cpp static int boxgc (lua_State *L) {</span>
<span class='curline'><a href='../S/1193.html#L477'>L</a>                 477 src/lua/lauxlib.cpp   resizebox(L, 1, 0);</span>
<span class='curline'><a href='../S/1193.html#L482'>L</a>                 482 src/lua/lauxlib.cpp static void *newbox (lua_State *L, size_t newsize) {</span>
<span class='curline'><a href='../S/1193.html#L483'>L</a>                 483 src/lua/lauxlib.cpp   UBox *box = (UBox *)lua_newuserdata(L, sizeof(UBox));</span>
<span class='curline'><a href='../S/1193.html#L486'>L</a>                 486 src/lua/lauxlib.cpp   if (luaL_newmetatable(L, "LUABOX")) {  /* creating metatable? */</span>
<span class='curline'><a href='../S/1193.html#L487'>L</a>                 487 src/lua/lauxlib.cpp     lua_pushcfunction(L, boxgc);</span>
<span class='curline'><a href='../S/1193.html#L488'>L</a>                 488 src/lua/lauxlib.cpp     lua_setfield(L, -2, "__gc");  /* metatable.__gc = boxgc */</span>
<span class='curline'><a href='../S/1193.html#L490'>L</a>                 490 src/lua/lauxlib.cpp   lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/1193.html#L491'>L</a>                 491 src/lua/lauxlib.cpp   return resizebox(L, -1, newsize);</span>
<span class='curline'><a href='../S/1193.html#L506'>L</a>                 506 src/lua/lauxlib.cpp   lua_State *L = B-&gt;L;</span>
<span class='curline'><a href='../S/1193.html#L513'>L</a>                 513 src/lua/lauxlib.cpp       luaL_error(L, "buffer too large");</span>
<span class='curline'><a href='../S/1193.html#L516'>L</a>                 516 src/lua/lauxlib.cpp       newbuff = (char *)resizebox(L, -1, newsize);</span>
<span class='curline'><a href='../S/1193.html#L518'>L</a>                 518 src/lua/lauxlib.cpp       newbuff = (char *)newbox(L, newsize);</span>
<span class='curline'><a href='../S/1193.html#L543'>L</a>                 543 src/lua/lauxlib.cpp   lua_State *L = B-&gt;L;</span>
<span class='curline'><a href='../S/1193.html#L544'>L</a>                 544 src/lua/lauxlib.cpp   lua_pushlstring(L, B-&gt;b, B-&gt;n);</span>
<span class='curline'><a href='../S/1193.html#L546'>L</a>                 546 src/lua/lauxlib.cpp     resizebox(L, -2, 0);  /* delete old buffer */</span>
<span class='curline'><a href='../S/1193.html#L547'>L</a>                 547 src/lua/lauxlib.cpp     lua_remove(L, -2);  /* remove its header from the stack */</span>
<span class='curline'><a href='../S/1193.html#L559'>L</a>                 559 src/lua/lauxlib.cpp   lua_State *L = B-&gt;L;</span>
<span class='curline'><a href='../S/1193.html#L561'>L</a>                 561 src/lua/lauxlib.cpp   const char *s = lua_tolstring(L, -1, &amp;l);</span>
<span class='curline'><a href='../S/1193.html#L563'>L</a>                 563 src/lua/lauxlib.cpp     lua_insert(L, -2);  /* put value below buffer */</span>
<span class='curline'><a href='../S/1193.html#L565'>L</a>                 565 src/lua/lauxlib.cpp   lua_remove(L, (buffonstack(B)) ? -2 : -1);  /* remove value */</span>
<span class='curline'><a href='../S/1193.html#L569'>L</a>                 569 src/lua/lauxlib.cpp LUALIB_API void luaL_buffinit (lua_State *L, luaL_Buffer *B) {</span>
<span class='curline'><a href='../S/1193.html#L570'>L</a>                 570 src/lua/lauxlib.cpp   B-&gt;L = L;</span>
<span class='curline'><a href='../S/1193.html#L577'>L</a>                 577 src/lua/lauxlib.cpp LUALIB_API char *luaL_buffinitsize (lua_State *L, luaL_Buffer *B, size_t sz) {</span>
<span class='curline'><a href='../S/1193.html#L578'>L</a>                 578 src/lua/lauxlib.cpp   luaL_buffinit(L, B);</span>
<span class='curline'><a href='../S/1193.html#L595'>L</a>                 595 src/lua/lauxlib.cpp LUALIB_API int luaL_ref (lua_State *L, int t) {</span>
<span class='curline'><a href='../S/1193.html#L597'>L</a>                 597 src/lua/lauxlib.cpp   if (lua_isnil(L, -1)) {</span>
<span class='curline'><a href='../S/1193.html#L598'>L</a>                 598 src/lua/lauxlib.cpp     lua_pop(L, 1);  /* remove from stack */</span>
<span class='curline'><a href='../S/1193.html#L601'>L</a>                 601 src/lua/lauxlib.cpp   t = lua_absindex(L, t);</span>
<span class='curline'><a href='../S/1193.html#L602'>L</a>                 602 src/lua/lauxlib.cpp   lua_rawgeti(L, t, freelist);  /* get first free element */</span>
<span class='curline'><a href='../S/1193.html#L603'>L</a>                 603 src/lua/lauxlib.cpp   ref = (int)lua_tointeger(L, -1);  /* ref = t[freelist] */</span>
<span class='curline'><a href='../S/1193.html#L604'>L</a>                 604 src/lua/lauxlib.cpp   lua_pop(L, 1);  /* remove it from stack */</span>
<span class='curline'><a href='../S/1193.html#L606'>L</a>                 606 src/lua/lauxlib.cpp     lua_rawgeti(L, t, ref);  /* remove it from list */</span>
<span class='curline'><a href='../S/1193.html#L607'>L</a>                 607 src/lua/lauxlib.cpp     lua_rawseti(L, t, freelist);  /* (t[freelist] = t[ref]) */</span>
<span class='curline'><a href='../S/1193.html#L610'>L</a>                 610 src/lua/lauxlib.cpp     ref = (int)lua_rawlen(L, t) + 1;  /* get a new reference */</span>
<span class='curline'><a href='../S/1193.html#L611'>L</a>                 611 src/lua/lauxlib.cpp   lua_rawseti(L, t, ref);</span>
<span class='curline'><a href='../S/1193.html#L616'>L</a>                 616 src/lua/lauxlib.cpp LUALIB_API void luaL_unref (lua_State *L, int t, int ref) {</span>
<span class='curline'><a href='../S/1193.html#L618'>L</a>                 618 src/lua/lauxlib.cpp     t = lua_absindex(L, t);</span>
<span class='curline'><a href='../S/1193.html#L619'>L</a>                 619 src/lua/lauxlib.cpp     lua_rawgeti(L, t, freelist);</span>
<span class='curline'><a href='../S/1193.html#L620'>L</a>                 620 src/lua/lauxlib.cpp     lua_rawseti(L, t, ref);  /* t[ref] = t[freelist] */</span>
<span class='curline'><a href='../S/1193.html#L621'>L</a>                 621 src/lua/lauxlib.cpp     lua_pushinteger(L, ref);</span>
<span class='curline'><a href='../S/1193.html#L622'>L</a>                 622 src/lua/lauxlib.cpp     lua_rawseti(L, t, freelist);  /* t[freelist] = ref */</span>
<span class='curline'><a href='../S/1193.html#L642'>L</a>                 642 src/lua/lauxlib.cpp static const char *getF (lua_State *L, void *ud, size_t *size) {</span>
<span class='curline'><a href='../S/1193.html#L644'>L</a>                 644 src/lua/lauxlib.cpp   (void)L;  /* not used */</span>
<span class='curline'><a href='../S/1193.html#L660'>L</a>                 660 src/lua/lauxlib.cpp static int errfile (lua_State *L, const char *what, int fnameindex) {</span>
<span class='curline'><a href='../S/1193.html#L662'>L</a>                 662 src/lua/lauxlib.cpp   const char *filename = lua_tostring(L, fnameindex) + 1;</span>
<span class='curline'><a href='../S/1193.html#L663'>L</a>                 663 src/lua/lauxlib.cpp   lua_pushfstring(L, "cannot %s %s: %s", what, filename, serr);</span>
<span class='curline'><a href='../S/1193.html#L664'>L</a>                 664 src/lua/lauxlib.cpp   lua_remove(L, fnameindex);</span>
<span class='curline'><a href='../S/1193.html#L703'>L</a>                 703 src/lua/lauxlib.cpp LUALIB_API int luaL_loadfilex (lua_State *L, const char *filename,</span>
<span class='curline'><a href='../S/1193.html#L708'>L</a>                 708 src/lua/lauxlib.cpp   int fnameindex = lua_gettop(L) + 1;  /* index of filename on the stack */</span>
<span class='curline'><a href='../S/1193.html#L710'>L</a>                 710 src/lua/lauxlib.cpp     lua_pushliteral(L, "=stdin");</span>
<span class='curline'><a href='../S/1193.html#L714'>L</a>                 714 src/lua/lauxlib.cpp     lua_pushfstring(L, "@%s", filename);</span>
<span class='curline'><a href='../S/1193.html#L716'>L</a>                 716 src/lua/lauxlib.cpp     if (lf.f == NULL) return errfile(L, "open", fnameindex);</span>
<span class='curline'><a href='../S/1193.html#L722'>L</a>                 722 src/lua/lauxlib.cpp     if (lf.f == NULL) return errfile(L, "reopen", fnameindex);</span>
<span class='curline'><a href='../S/1193.html#L727'>L</a>                 727 src/lua/lauxlib.cpp   status = lua_load(L, getF, &amp;lf, lua_tostring(L, -1), mode);</span>
<span class='curline'><a href='../S/1193.html#L731'>L</a>                 731 src/lua/lauxlib.cpp     lua_settop(L, fnameindex);  /* ignore results from 'lua_load' */</span>
<span class='curline'><a href='../S/1193.html#L732'>L</a>                 732 src/lua/lauxlib.cpp     return errfile(L, "read", fnameindex);</span>
<span class='curline'><a href='../S/1193.html#L734'>L</a>                 734 src/lua/lauxlib.cpp   lua_remove(L, fnameindex);</span>
<span class='curline'><a href='../S/1193.html#L745'>L</a>                 745 src/lua/lauxlib.cpp static const char *getS (lua_State *L, void *ud, size_t *size) {</span>
<span class='curline'><a href='../S/1193.html#L747'>L</a>                 747 src/lua/lauxlib.cpp   (void)L;  /* not used */</span>
<span class='curline'><a href='../S/1193.html#L755'>L</a>                 755 src/lua/lauxlib.cpp LUALIB_API int luaL_loadbufferx (lua_State *L, const char *buff, size_t size,</span>
<span class='curline'><a href='../S/1193.html#L760'>L</a>                 760 src/lua/lauxlib.cpp   return lua_load(L, getS, &amp;ls, name, mode);</span>
<span class='curline'><a href='../S/1193.html#L764'>L</a>                 764 src/lua/lauxlib.cpp LUALIB_API int luaL_loadstring (lua_State *L, const char *s) {</span>
<span class='curline'><a href='../S/1193.html#L765'>L</a>                 765 src/lua/lauxlib.cpp   return luaL_loadbuffer(L, s, strlen(s), s);</span>
<span class='curline'><a href='../S/1193.html#L772'>L</a>                 772 src/lua/lauxlib.cpp LUALIB_API int luaL_getmetafield (lua_State *L, int obj, const char *event) {</span>
<span class='curline'><a href='../S/1193.html#L773'>L</a>                 773 src/lua/lauxlib.cpp   if (!lua_getmetatable(L, obj))  /* no metatable? */</span>
<span class='curline'><a href='../S/1193.html#L777'>L</a>                 777 src/lua/lauxlib.cpp     lua_pushstring(L, event);</span>
<span class='curline'><a href='../S/1193.html#L778'>L</a>                 778 src/lua/lauxlib.cpp     tt = lua_rawget(L, -2);</span>
<span class='curline'><a href='../S/1193.html#L780'>L</a>                 780 src/lua/lauxlib.cpp       lua_pop(L, 2);  /* remove metatable and metafield */</span>
<span class='curline'><a href='../S/1193.html#L782'>L</a>                 782 src/lua/lauxlib.cpp       lua_remove(L, -2);  /* remove only metatable */</span>
<span class='curline'><a href='../S/1193.html#L788'>L</a>                 788 src/lua/lauxlib.cpp LUALIB_API int luaL_callmeta (lua_State *L, int obj, const char *event) {</span>
<span class='curline'><a href='../S/1193.html#L789'>L</a>                 789 src/lua/lauxlib.cpp   obj = lua_absindex(L, obj);</span>
<span class='curline'><a href='../S/1193.html#L790'>L</a>                 790 src/lua/lauxlib.cpp   if (luaL_getmetafield(L, obj, event) == LUA_TNIL)  /* no metafield? */</span>
<span class='curline'><a href='../S/1193.html#L792'>L</a>                 792 src/lua/lauxlib.cpp   lua_pushvalue(L, obj);</span>
<span class='curline'><a href='../S/1193.html#L793'>L</a>                 793 src/lua/lauxlib.cpp   lua_call(L, 1, 1);</span>
<span class='curline'><a href='../S/1193.html#L798'>L</a>                 798 src/lua/lauxlib.cpp LUALIB_API lua_Integer luaL_len (lua_State *L, int idx) {</span>
<span class='curline'><a href='../S/1193.html#L801'>L</a>                 801 src/lua/lauxlib.cpp   lua_len(L, idx);</span>
<span class='curline'><a href='../S/1193.html#L802'>L</a>                 802 src/lua/lauxlib.cpp   l = lua_tointegerx(L, -1, &amp;isnum);</span>
<span class='curline'><a href='../S/1193.html#L804'>L</a>                 804 src/lua/lauxlib.cpp     luaL_error(L, "object length is not an integer");</span>
<span class='curline'><a href='../S/1193.html#L805'>L</a>                 805 src/lua/lauxlib.cpp   lua_pop(L, 1);  /* remove object */</span>
<span class='curline'><a href='../S/1193.html#L810'>L</a>                 810 src/lua/lauxlib.cpp LUALIB_API const char *luaL_tolstring (lua_State *L, int idx, size_t *len) {</span>
<span class='curline'><a href='../S/1193.html#L811'>L</a>                 811 src/lua/lauxlib.cpp   if (luaL_callmeta(L, idx, "__tostring")) {  /* metafield? */</span>
<span class='curline'><a href='../S/1193.html#L812'>L</a>                 812 src/lua/lauxlib.cpp     if (!lua_isstring(L, -1))</span>
<span class='curline'><a href='../S/1193.html#L813'>L</a>                 813 src/lua/lauxlib.cpp       luaL_error(L, "'__tostring' must return a string");</span>
<span class='curline'><a href='../S/1193.html#L816'>L</a>                 816 src/lua/lauxlib.cpp     switch (lua_type(L, idx)) {</span>
<span class='curline'><a href='../S/1193.html#L818'>L</a>                 818 src/lua/lauxlib.cpp         if (lua_isinteger(L, idx))</span>
<span class='curline'><a href='../S/1193.html#L819'>L</a>                 819 src/lua/lauxlib.cpp           lua_pushfstring(L, "%I", (LUAI_UACINT)lua_tointeger(L, idx));</span>
<span class='curline'><a href='../S/1193.html#L821'>L</a>                 821 src/lua/lauxlib.cpp           lua_pushfstring(L, "%f", (LUAI_UACNUMBER)lua_tonumber(L, idx));</span>
<span class='curline'><a href='../S/1193.html#L825'>L</a>                 825 src/lua/lauxlib.cpp         lua_pushvalue(L, idx);</span>
<span class='curline'><a href='../S/1193.html#L828'>L</a>                 828 src/lua/lauxlib.cpp         lua_pushstring(L, (lua_toboolean(L, idx) ? "true" : "false"));</span>
<span class='curline'><a href='../S/1193.html#L831'>L</a>                 831 src/lua/lauxlib.cpp         lua_pushliteral(L, "nil");</span>
<span class='curline'><a href='../S/1193.html#L834'>L</a>                 834 src/lua/lauxlib.cpp         int tt = luaL_getmetafield(L, idx, "__name");  /* try name */</span>
<span class='curline'><a href='../S/1193.html#L835'>L</a>                 835 src/lua/lauxlib.cpp         const char *kind = (tt == LUA_TSTRING) ? lua_tostring(L, -1) :</span>
<span class='curline'><a href='../S/1193.html#L836'>L</a>                 836 src/lua/lauxlib.cpp                                                  luaL_typename(L, idx);</span>
<span class='curline'><a href='../S/1193.html#L837'>L</a>                 837 src/lua/lauxlib.cpp         lua_pushfstring(L, "%s: %p", kind, lua_topointer(L, idx));</span>
<span class='curline'><a href='../S/1193.html#L839'>L</a>                 839 src/lua/lauxlib.cpp           lua_remove(L, -2);  /* remove '__name' */</span>
<span class='curline'><a href='../S/1193.html#L844'>L</a>                 844 src/lua/lauxlib.cpp   return lua_tolstring(L, -1, len);</span>
<span class='curline'><a href='../S/1193.html#L855'>L</a>                 855 src/lua/lauxlib.cpp static const char *luaL_findtable (lua_State *L, int idx,</span>
<span class='curline'><a href='../S/1193.html#L858'>L</a>                 858 src/lua/lauxlib.cpp   if (idx) lua_pushvalue(L, idx);</span>
<span class='curline'><a href='../S/1193.html#L862'>L</a>                 862 src/lua/lauxlib.cpp     lua_pushlstring(L, fname, e - fname);</span>
<span class='curline'><a href='../S/1193.html#L863'>L</a>                 863 src/lua/lauxlib.cpp     if (lua_rawget(L, -2) == LUA_TNIL) {  /* no such field? */</span>
<span class='curline'><a href='../S/1193.html#L864'>L</a>                 864 src/lua/lauxlib.cpp       lua_pop(L, 1);  /* remove this nil */</span>
<span class='curline'><a href='../S/1193.html#L865'>L</a>                 865 src/lua/lauxlib.cpp       lua_createtable(L, 0, (*e == '.' ? 1 : szhint)); /* new table for field */</span>
<span class='curline'><a href='../S/1193.html#L866'>L</a>                 866 src/lua/lauxlib.cpp       lua_pushlstring(L, fname, e - fname);</span>
<span class='curline'><a href='../S/1193.html#L867'>L</a>                 867 src/lua/lauxlib.cpp       lua_pushvalue(L, -2);</span>
<span class='curline'><a href='../S/1193.html#L868'>L</a>                 868 src/lua/lauxlib.cpp       lua_settable(L, -4);  /* set new table into field */</span>
<span class='curline'><a href='../S/1193.html#L870'>L</a>                 870 src/lua/lauxlib.cpp     else if (!lua_istable(L, -1)) {  /* field has a non-table value? */</span>
<span class='curline'><a href='../S/1193.html#L871'>L</a>                 871 src/lua/lauxlib.cpp       lua_pop(L, 2);  /* remove table and value */</span>
<span class='curline'><a href='../S/1193.html#L874'>L</a>                 874 src/lua/lauxlib.cpp     lua_remove(L, -2);  /* remove previous table */</span>
<span class='curline'><a href='../S/1193.html#L897'>L</a>                 897 src/lua/lauxlib.cpp LUALIB_API void luaL_pushmodule (lua_State *L, const char *modname,</span>
<span class='curline'><a href='../S/1193.html#L899'>L</a>                 899 src/lua/lauxlib.cpp   luaL_findtable(L, LUA_REGISTRYINDEX, LUA_LOADED_TABLE, 1);</span>
<span class='curline'><a href='../S/1193.html#L900'>L</a>                 900 src/lua/lauxlib.cpp   if (lua_getfield(L, -1, modname) != LUA_TTABLE) {  /* no LOADED[modname]? */</span>
<span class='curline'><a href='../S/1193.html#L901'>L</a>                 901 src/lua/lauxlib.cpp     lua_pop(L, 1);  /* remove previous result */</span>
<span class='curline'><a href='../S/1193.html#L903'>L</a>                 903 src/lua/lauxlib.cpp     lua_pushglobaltable(L);</span>
<span class='curline'><a href='../S/1193.html#L904'>L</a>                 904 src/lua/lauxlib.cpp     if (luaL_findtable(L, 0, modname, sizehint) != NULL)</span>
<span class='curline'><a href='../S/1193.html#L905'>L</a>                 905 src/lua/lauxlib.cpp       luaL_error(L, "name conflict for module '%s'", modname);</span>
<span class='curline'><a href='../S/1193.html#L906'>L</a>                 906 src/lua/lauxlib.cpp     lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/1193.html#L907'>L</a>                 907 src/lua/lauxlib.cpp     lua_setfield(L, -3, modname);  /* LOADED[modname] = new table */</span>
<span class='curline'><a href='../S/1193.html#L909'>L</a>                 909 src/lua/lauxlib.cpp   lua_remove(L, -2);  /* remove LOADED table */</span>
<span class='curline'><a href='../S/1193.html#L913'>L</a>                 913 src/lua/lauxlib.cpp LUALIB_API void luaL_openlib (lua_State *L, const char *libname,</span>
<span class='curline'><a href='../S/1193.html#L915'>L</a>                 915 src/lua/lauxlib.cpp   luaL_checkversion(L);</span>
<span class='curline'><a href='../S/1193.html#L917'>L</a>                 917 src/lua/lauxlib.cpp     luaL_pushmodule(L, libname, libsize(l));  /* get/create library table */</span>
<span class='curline'><a href='../S/1193.html#L918'>L</a>                 918 src/lua/lauxlib.cpp     lua_insert(L, -(nup + 1));  /* move library table to below upvalues */</span>
<span class='curline'><a href='../S/1193.html#L921'>L</a>                 921 src/lua/lauxlib.cpp     luaL_setfuncs(L, l, nup);</span>
<span class='curline'><a href='../S/1193.html#L923'>L</a>                 923 src/lua/lauxlib.cpp     lua_pop(L, nup);  /* remove upvalues */</span>
<span class='curline'><a href='../S/1193.html#L934'>L</a>                 934 src/lua/lauxlib.cpp LUALIB_API void luaL_setfuncs (lua_State *L, const luaL_Reg *l, int nup) {</span>
<span class='curline'><a href='../S/1193.html#L935'>L</a>                 935 src/lua/lauxlib.cpp   luaL_checkstack(L, nup, "too many upvalues");</span>
<span class='curline'><a href='../S/1193.html#L939'>L</a>                 939 src/lua/lauxlib.cpp       lua_pushvalue(L, -nup);</span>
<span class='curline'><a href='../S/1193.html#L940'>L</a>                 940 src/lua/lauxlib.cpp     lua_pushcclosure(L, l-&gt;func, nup);  /* closure with those upvalues */</span>
<span class='curline'><a href='../S/1193.html#L941'>L</a>                 941 src/lua/lauxlib.cpp     lua_setfield(L, -(nup + 2), l-&gt;name);</span>
<span class='curline'><a href='../S/1193.html#L943'>L</a>                 943 src/lua/lauxlib.cpp   lua_pop(L, nup);  /* remove upvalues */</span>
<span class='curline'><a href='../S/1193.html#L951'>L</a>                 951 src/lua/lauxlib.cpp LUALIB_API int luaL_getsubtable (lua_State *L, int idx, const char *fname) {</span>
<span class='curline'><a href='../S/1193.html#L952'>L</a>                 952 src/lua/lauxlib.cpp   if (lua_getfield(L, idx, fname) == LUA_TTABLE)</span>
<span class='curline'><a href='../S/1193.html#L955'>L</a>                 955 src/lua/lauxlib.cpp     lua_pop(L, 1);  /* remove previous result */</span>
<span class='curline'><a href='../S/1193.html#L956'>L</a>                 956 src/lua/lauxlib.cpp     idx = lua_absindex(L, idx);</span>
<span class='curline'><a href='../S/1193.html#L957'>L</a>                 957 src/lua/lauxlib.cpp     lua_newtable(L);</span>
<span class='curline'><a href='../S/1193.html#L958'>L</a>                 958 src/lua/lauxlib.cpp     lua_pushvalue(L, -1);  /* copy to be left at top */</span>
<span class='curline'><a href='../S/1193.html#L959'>L</a>                 959 src/lua/lauxlib.cpp     lua_setfield(L, idx, fname);  /* assign new table to field */</span>
<span class='curline'><a href='../S/1193.html#L971'>L</a>                 971 src/lua/lauxlib.cpp LUALIB_API void luaL_requiref (lua_State *L, const char *modname,</span>
<span class='curline'><a href='../S/1193.html#L973'>L</a>                 973 src/lua/lauxlib.cpp   luaL_getsubtable(L, LUA_REGISTRYINDEX, LUA_LOADED_TABLE);</span>
<span class='curline'><a href='../S/1193.html#L974'>L</a>                 974 src/lua/lauxlib.cpp   lua_getfield(L, -1, modname);  /* LOADED[modname] */</span>
<span class='curline'><a href='../S/1193.html#L975'>L</a>                 975 src/lua/lauxlib.cpp   if (!lua_toboolean(L, -1)) {  /* package not already loaded? */</span>
<span class='curline'><a href='../S/1193.html#L976'>L</a>                 976 src/lua/lauxlib.cpp     lua_pop(L, 1);  /* remove field */</span>
<span class='curline'><a href='../S/1193.html#L977'>L</a>                 977 src/lua/lauxlib.cpp     lua_pushcfunction(L, openf);</span>
<span class='curline'><a href='../S/1193.html#L978'>L</a>                 978 src/lua/lauxlib.cpp     lua_pushstring(L, modname);  /* argument to open function */</span>
<span class='curline'><a href='../S/1193.html#L979'>L</a>                 979 src/lua/lauxlib.cpp     lua_call(L, 1, 1);  /* call 'openf' to open module */</span>
<span class='curline'><a href='../S/1193.html#L980'>L</a>                 980 src/lua/lauxlib.cpp     lua_pushvalue(L, -1);  /* make copy of module (call result) */</span>
<span class='curline'><a href='../S/1193.html#L981'>L</a>                 981 src/lua/lauxlib.cpp     lua_setfield(L, -3, modname);  /* LOADED[modname] = module */</span>
<span class='curline'><a href='../S/1193.html#L983'>L</a>                 983 src/lua/lauxlib.cpp   lua_remove(L, -2);  /* remove LOADED table */</span>
<span class='curline'><a href='../S/1193.html#L985'>L</a>                 985 src/lua/lauxlib.cpp     lua_pushvalue(L, -1);  /* copy of module */</span>
<span class='curline'><a href='../S/1193.html#L986'>L</a>                 986 src/lua/lauxlib.cpp     lua_setglobal(L, modname);  /* _G[modname] = module */</span>
<span class='curline'><a href='../S/1193.html#L991'>L</a>                 991 src/lua/lauxlib.cpp LUALIB_API const char *luaL_gsub (lua_State *L, const char *s, const char *p,</span>
<span class='curline'><a href='../S/1193.html#L996'>L</a>                 996 src/lua/lauxlib.cpp   luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/1193.html#L1004'>L</a>                1004 src/lua/lauxlib.cpp   return lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/1193.html#L1019'>L</a>                1019 src/lua/lauxlib.cpp static int panic (lua_State *L) {</span>
<span class='curline'><a href='../S/1193.html#L1021'>L</a>                1021 src/lua/lauxlib.cpp                         lua_tostring(L, -1));</span>
<span class='curline'><a href='../S/1193.html#L1027'>L</a>                1027 src/lua/lauxlib.cpp   lua_State *L = lua_newstate(l_alloc, NULL);</span>
<span class='curline'><a href='../S/1193.html#L1028'>L</a>                1028 src/lua/lauxlib.cpp   if (L) lua_atpanic(L, &amp;panic);</span>
<span class='curline'><a href='../S/1193.html#L1029'>L</a>                1029 src/lua/lauxlib.cpp   return L;</span>
<span class='curline'><a href='../S/1193.html#L1033'>L</a>                1033 src/lua/lauxlib.cpp LUALIB_API void luaL_checkversion_ (lua_State *L, lua_Number ver, size_t sz) {</span>
<span class='curline'><a href='../S/1193.html#L1034'>L</a>                1034 src/lua/lauxlib.cpp   const lua_Number *v = lua_version(L);</span>
<span class='curline'><a href='../S/1193.html#L1036'>L</a>                1036 src/lua/lauxlib.cpp     luaL_error(L, "core and library have incompatible numeric types");</span>
<span class='curline'><a href='../S/1193.html#L1038'>L</a>                1038 src/lua/lauxlib.cpp     luaL_error(L, "multiple Lua VMs detected");</span>
<span class='curline'><a href='../S/1193.html#L1040'>L</a>                1040 src/lua/lauxlib.cpp     luaL_error(L, "version mismatch: app. needs %f, Lua core provides %f",</span>
<span class='curline'><a href='../S/1173.html#L39'>L</a>                  39 src/lua/lauxlib.h LUALIB_API void (luaL_checkversion_) (lua_State *L, lua_Number ver, size_t sz);</span>
<span class='curline'><a href='../S/1173.html#L40'>L</a>                  40 src/lua/lauxlib.h #define luaL_checkversion(L)  \</span>
<span class='curline'><a href='../S/1173.html#L41'>L</a>                  41 src/lua/lauxlib.h 	  luaL_checkversion_(L, LUA_VERSION_NUM, LUAL_NUMSIZES)</span>
<span class='curline'><a href='../S/1173.html#L43'>L</a>                  43 src/lua/lauxlib.h LUALIB_API int (luaL_getmetafield) (lua_State *L, int obj, const char *e);</span>
<span class='curline'><a href='../S/1173.html#L44'>L</a>                  44 src/lua/lauxlib.h LUALIB_API int (luaL_callmeta) (lua_State *L, int obj, const char *e);</span>
<span class='curline'><a href='../S/1173.html#L45'>L</a>                  45 src/lua/lauxlib.h LUALIB_API const char *(luaL_tolstring) (lua_State *L, int idx, size_t *len);</span>
<span class='curline'><a href='../S/1173.html#L46'>L</a>                  46 src/lua/lauxlib.h LUALIB_API int (luaL_argerror) (lua_State *L, int arg, const char *extramsg);</span>
<span class='curline'><a href='../S/1173.html#L47'>L</a>                  47 src/lua/lauxlib.h LUALIB_API const char *(luaL_checklstring) (lua_State *L, int arg,</span>
<span class='curline'><a href='../S/1173.html#L49'>L</a>                  49 src/lua/lauxlib.h LUALIB_API const char *(luaL_optlstring) (lua_State *L, int arg,</span>
<span class='curline'><a href='../S/1173.html#L51'>L</a>                  51 src/lua/lauxlib.h LUALIB_API lua_Number (luaL_checknumber) (lua_State *L, int arg);</span>
<span class='curline'><a href='../S/1173.html#L52'>L</a>                  52 src/lua/lauxlib.h LUALIB_API lua_Number (luaL_optnumber) (lua_State *L, int arg, lua_Number def);</span>
<span class='curline'><a href='../S/1173.html#L54'>L</a>                  54 src/lua/lauxlib.h LUALIB_API lua_Integer (luaL_checkinteger) (lua_State *L, int arg);</span>
<span class='curline'><a href='../S/1173.html#L55'>L</a>                  55 src/lua/lauxlib.h LUALIB_API lua_Integer (luaL_optinteger) (lua_State *L, int arg,</span>
<span class='curline'><a href='../S/1173.html#L58'>L</a>                  58 src/lua/lauxlib.h LUALIB_API void (luaL_checkstack) (lua_State *L, int sz, const char *msg);</span>
<span class='curline'><a href='../S/1173.html#L59'>L</a>                  59 src/lua/lauxlib.h LUALIB_API void (luaL_checktype) (lua_State *L, int arg, int t);</span>
<span class='curline'><a href='../S/1173.html#L60'>L</a>                  60 src/lua/lauxlib.h LUALIB_API void (luaL_checkany) (lua_State *L, int arg);</span>
<span class='curline'><a href='../S/1173.html#L62'>L</a>                  62 src/lua/lauxlib.h LUALIB_API int   (luaL_newmetatable) (lua_State *L, const char *tname);</span>
<span class='curline'><a href='../S/1173.html#L63'>L</a>                  63 src/lua/lauxlib.h LUALIB_API void  (luaL_setmetatable) (lua_State *L, const char *tname);</span>
<span class='curline'><a href='../S/1173.html#L64'>L</a>                  64 src/lua/lauxlib.h LUALIB_API void *(luaL_testudata) (lua_State *L, int ud, const char *tname);</span>
<span class='curline'><a href='../S/1173.html#L65'>L</a>                  65 src/lua/lauxlib.h LUALIB_API void *(luaL_checkudata) (lua_State *L, int ud, const char *tname);</span>
<span class='curline'><a href='../S/1173.html#L67'>L</a>                  67 src/lua/lauxlib.h LUALIB_API void (luaL_where) (lua_State *L, int lvl);</span>
<span class='curline'><a href='../S/1173.html#L68'>L</a>                  68 src/lua/lauxlib.h LUALIB_API int (luaL_error) (lua_State *L, const char *fmt, ...);</span>
<span class='curline'><a href='../S/1173.html#L70'>L</a>                  70 src/lua/lauxlib.h LUALIB_API int (luaL_checkoption) (lua_State *L, int arg, const char *def,</span>
<span class='curline'><a href='../S/1173.html#L73'>L</a>                  73 src/lua/lauxlib.h LUALIB_API int (luaL_fileresult) (lua_State *L, int stat, const char *fname);</span>
<span class='curline'><a href='../S/1173.html#L74'>L</a>                  74 src/lua/lauxlib.h LUALIB_API int (luaL_execresult) (lua_State *L, int stat);</span>
<span class='curline'><a href='../S/1173.html#L80'>L</a>                  80 src/lua/lauxlib.h LUALIB_API int (luaL_ref) (lua_State *L, int t);</span>
<span class='curline'><a href='../S/1173.html#L81'>L</a>                  81 src/lua/lauxlib.h LUALIB_API void (luaL_unref) (lua_State *L, int t, int ref);</span>
<span class='curline'><a href='../S/1173.html#L83'>L</a>                  83 src/lua/lauxlib.h LUALIB_API int (luaL_loadfilex) (lua_State *L, const char *filename,</span>
<span class='curline'><a href='../S/1173.html#L86'>L</a>                  86 src/lua/lauxlib.h #define luaL_loadfile(L,f)	luaL_loadfilex(L,f,NULL)</span>
<span class='curline'><a href='../S/1173.html#L88'>L</a>                  88 src/lua/lauxlib.h LUALIB_API int (luaL_loadbufferx) (lua_State *L, const char *buff, size_t sz,</span>
<span class='curline'><a href='../S/1173.html#L90'>L</a>                  90 src/lua/lauxlib.h LUALIB_API int (luaL_loadstring) (lua_State *L, const char *s);</span>
<span class='curline'><a href='../S/1173.html#L94'>L</a>                  94 src/lua/lauxlib.h LUALIB_API lua_Integer (luaL_len) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1173.html#L96'>L</a>                  96 src/lua/lauxlib.h LUALIB_API const char *(luaL_gsub) (lua_State *L, const char *s, const char *p,</span>
<span class='curline'><a href='../S/1173.html#L99'>L</a>                  99 src/lua/lauxlib.h LUALIB_API void (luaL_setfuncs) (lua_State *L, const luaL_Reg *l, int nup);</span>
<span class='curline'><a href='../S/1173.html#L101'>L</a>                 101 src/lua/lauxlib.h LUALIB_API int (luaL_getsubtable) (lua_State *L, int idx, const char *fname);</span>
<span class='curline'><a href='../S/1173.html#L103'>L</a>                 103 src/lua/lauxlib.h LUALIB_API void (luaL_traceback) (lua_State *L, lua_State *L1,</span>
<span class='curline'><a href='../S/1173.html#L106'>L</a>                 106 src/lua/lauxlib.h LUALIB_API void (luaL_requiref) (lua_State *L, const char *modname,</span>
<span class='curline'><a href='../S/1173.html#L116'>L</a>                 116 src/lua/lauxlib.h #define luaL_newlibtable(L,l)	\</span>
<span class='curline'><a href='../S/1173.html#L117'>L</a>                 117 src/lua/lauxlib.h   lua_createtable(L, 0, sizeof(l)/sizeof((l)[0]) - 1)</span>
<span class='curline'><a href='../S/1173.html#L119'>L</a>                 119 src/lua/lauxlib.h #define luaL_newlib(L,l)  \</span>
<span class='curline'><a href='../S/1173.html#L120'>L</a>                 120 src/lua/lauxlib.h   (luaL_checkversion(L), luaL_newlibtable(L,l), luaL_setfuncs(L,l,0))</span>
<span class='curline'><a href='../S/1173.html#L122'>L</a>                 122 src/lua/lauxlib.h #define luaL_argcheck(L, cond,arg,extramsg)	\</span>
<span class='curline'><a href='../S/1173.html#L123'>L</a>                 123 src/lua/lauxlib.h 		((void)((cond) || luaL_argerror(L, (arg), (extramsg))))</span>
<span class='curline'><a href='../S/1173.html#L124'>L</a>                 124 src/lua/lauxlib.h #define luaL_checkstring(L,n)	(luaL_checklstring(L, (n), NULL))</span>
<span class='curline'><a href='../S/1173.html#L125'>L</a>                 125 src/lua/lauxlib.h #define luaL_optstring(L,n,d)	(luaL_optlstring(L, (n), (d), NULL))</span>
<span class='curline'><a href='../S/1173.html#L127'>L</a>                 127 src/lua/lauxlib.h #define luaL_typename(L,i)	lua_typename(L, lua_type(L,(i)))</span>
<span class='curline'><a href='../S/1173.html#L129'>L</a>                 129 src/lua/lauxlib.h #define luaL_dofile(L, fn) \</span>
<span class='curline'><a href='../S/1173.html#L130'>L</a>                 130 src/lua/lauxlib.h 	(luaL_loadfile(L, fn) || lua_pcall(L, 0, LUA_MULTRET, 0))</span>
<span class='curline'><a href='../S/1173.html#L132'>L</a>                 132 src/lua/lauxlib.h #define luaL_dostring(L, s) \</span>
<span class='curline'><a href='../S/1173.html#L133'>L</a>                 133 src/lua/lauxlib.h 	(luaL_loadstring(L, s) || lua_pcall(L, 0, LUA_MULTRET, 0))</span>
<span class='curline'><a href='../S/1173.html#L135'>L</a>                 135 src/lua/lauxlib.h #define luaL_getmetatable(L,n)	(lua_getfield(L, LUA_REGISTRYINDEX, (n)))</span>
<span class='curline'><a href='../S/1173.html#L137'>L</a>                 137 src/lua/lauxlib.h #define luaL_opt(L,f,n,d)	(lua_isnoneornil(L,(n)) ? (d) : f(L,(n)))</span>
<span class='curline'><a href='../S/1173.html#L139'>L</a>                 139 src/lua/lauxlib.h #define luaL_loadbuffer(L,s,sz,n)	luaL_loadbufferx(L,s,sz,n,NULL)</span>
<span class='curline'><a href='../S/1173.html#L152'>L</a>                 152 src/lua/lauxlib.h   lua_State *L;</span>
<span class='curline'><a href='../S/1173.html#L163'>L</a>                 163 src/lua/lauxlib.h LUALIB_API void (luaL_buffinit) (lua_State *L, luaL_Buffer *B);</span>
<span class='curline'><a href='../S/1173.html#L170'>L</a>                 170 src/lua/lauxlib.h LUALIB_API char *(luaL_buffinitsize) (lua_State *L, luaL_Buffer *B, size_t sz);</span>
<span class='curline'><a href='../S/1173.html#L205'>L</a>                 205 src/lua/lauxlib.h LUALIB_API void (luaL_pushmodule) (lua_State *L, const char *modname,</span>
<span class='curline'><a href='../S/1173.html#L207'>L</a>                 207 src/lua/lauxlib.h LUALIB_API void (luaL_openlib) (lua_State *L, const char *libname,</span>
<span class='curline'><a href='../S/1173.html#L210'>L</a>                 210 src/lua/lauxlib.h #define luaL_register(L,n,l)	(luaL_openlib(L,(n),(l),0))</span>
<span class='curline'><a href='../S/1173.html#L247'>L</a>                 247 src/lua/lauxlib.h #define luaL_checkunsigned(L,a)	((lua_Unsigned)luaL_checkinteger(L,a))</span>
<span class='curline'><a href='../S/1173.html#L248'>L</a>                 248 src/lua/lauxlib.h #define luaL_optunsigned(L,a,d)	\</span>
<span class='curline'><a href='../S/1173.html#L249'>L</a>                 249 src/lua/lauxlib.h 	((lua_Unsigned)luaL_optinteger(L,a,(lua_Integer)(d)))</span>
<span class='curline'><a href='../S/1173.html#L251'>L</a>                 251 src/lua/lauxlib.h #define luaL_checkint(L,n)	((int)luaL_checkinteger(L, (n)))</span>
<span class='curline'><a href='../S/1173.html#L252'>L</a>                 252 src/lua/lauxlib.h #define luaL_optint(L,n,d)	((int)luaL_optinteger(L, (n), (d)))</span>
<span class='curline'><a href='../S/1173.html#L254'>L</a>                 254 src/lua/lauxlib.h #define luaL_checklong(L,n)	((long)luaL_checkinteger(L, (n)))</span>
<span class='curline'><a href='../S/1173.html#L255'>L</a>                 255 src/lua/lauxlib.h #define luaL_optlong(L,n,d)	((long)luaL_optinteger(L, (n), (d)))</span>
<span class='curline'><a href='../S/1205.html#L24'>L</a>                  24 src/lua/lbaselib.cpp static int luaB_print (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L25'>L</a>                  25 src/lua/lbaselib.cpp   int n = lua_gettop(L);  /* number of arguments */</span>
<span class='curline'><a href='../S/1205.html#L27'>L</a>                  27 src/lua/lbaselib.cpp   lua_getglobal(L, "tostring");</span>
<span class='curline'><a href='../S/1205.html#L31'>L</a>                  31 src/lua/lbaselib.cpp     lua_pushvalue(L, -1);  /* function to be called */</span>
<span class='curline'><a href='../S/1205.html#L32'>L</a>                  32 src/lua/lbaselib.cpp     lua_pushvalue(L, i);   /* value to print */</span>
<span class='curline'><a href='../S/1205.html#L33'>L</a>                  33 src/lua/lbaselib.cpp     lua_call(L, 1, 1);</span>
<span class='curline'><a href='../S/1205.html#L34'>L</a>                  34 src/lua/lbaselib.cpp     s = lua_tolstring(L, -1, &amp;l);  /* get result */</span>
<span class='curline'><a href='../S/1205.html#L36'>L</a>                  36 src/lua/lbaselib.cpp       return luaL_error(L, "'tostring' must return a string to 'print'");</span>
<span class='curline'><a href='../S/1205.html#L39'>L</a>                  39 src/lua/lbaselib.cpp     lua_pop(L, 1);  /* pop result */</span>
<span class='curline'><a href='../S/1205.html#L69'>L</a>                  69 src/lua/lbaselib.cpp static int luaB_tonumber (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L70'>L</a>                  70 src/lua/lbaselib.cpp   if (lua_isnoneornil(L, 2)) {  /* standard conversion? */</span>
<span class='curline'><a href='../S/1205.html#L71'>L</a>                  71 src/lua/lbaselib.cpp     luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L72'>L</a>                  72 src/lua/lbaselib.cpp     if (lua_type(L, 1) == LUA_TNUMBER) {  /* already a number? */</span>
<span class='curline'><a href='../S/1205.html#L73'>L</a>                  73 src/lua/lbaselib.cpp       lua_settop(L, 1);  /* yes; return it */</span>
<span class='curline'><a href='../S/1205.html#L78'>L</a>                  78 src/lua/lbaselib.cpp       const char *s = lua_tolstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/1205.html#L79'>L</a>                  79 src/lua/lbaselib.cpp       if (s != NULL &amp;&amp; lua_stringtonumber(L, s) == l + 1)</span>
<span class='curline'><a href='../S/1205.html#L88'>L</a>                  88 src/lua/lbaselib.cpp     lua_Integer base = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/1205.html#L89'>L</a>                  89 src/lua/lbaselib.cpp     luaL_checktype(L, 1, LUA_TSTRING);  /* no numbers as strings */</span>
<span class='curline'><a href='../S/1205.html#L90'>L</a>                  90 src/lua/lbaselib.cpp     s = lua_tolstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/1205.html#L91'>L</a>                  91 src/lua/lbaselib.cpp     luaL_argcheck(L, 2 &lt;= base &amp;&amp; base &lt;= 36, 2, "base out of range");</span>
<span class='curline'><a href='../S/1205.html#L93'>L</a>                  93 src/lua/lbaselib.cpp       lua_pushinteger(L, n);</span>
<span class='curline'><a href='../S/1205.html#L97'>L</a>                  97 src/lua/lbaselib.cpp   lua_pushnil(L);  /* not a number */</span>
<span class='curline'><a href='../S/1205.html#L102'>L</a>                 102 src/lua/lbaselib.cpp static int luaB_error (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L103'>L</a>                 103 src/lua/lbaselib.cpp   int level = (int)luaL_optinteger(L, 2, 1);</span>
<span class='curline'><a href='../S/1205.html#L104'>L</a>                 104 src/lua/lbaselib.cpp   lua_settop(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L105'>L</a>                 105 src/lua/lbaselib.cpp   if (lua_type(L, 1) == LUA_TSTRING &amp;&amp; level &gt; 0) {</span>
<span class='curline'><a href='../S/1205.html#L106'>L</a>                 106 src/lua/lbaselib.cpp     luaL_where(L, level);   /* add extra information */</span>
<span class='curline'><a href='../S/1205.html#L107'>L</a>                 107 src/lua/lbaselib.cpp     lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L108'>L</a>                 108 src/lua/lbaselib.cpp     lua_concat(L, 2);</span>
<span class='curline'><a href='../S/1205.html#L110'>L</a>                 110 src/lua/lbaselib.cpp   return lua_error(L);</span>
<span class='curline'><a href='../S/1205.html#L114'>L</a>                 114 src/lua/lbaselib.cpp static int luaB_getmetatable (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L115'>L</a>                 115 src/lua/lbaselib.cpp   luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L116'>L</a>                 116 src/lua/lbaselib.cpp   if (!lua_getmetatable(L, 1)) {</span>
<span class='curline'><a href='../S/1205.html#L117'>L</a>                 117 src/lua/lbaselib.cpp     lua_pushnil(L);</span>
<span class='curline'><a href='../S/1205.html#L120'>L</a>                 120 src/lua/lbaselib.cpp   luaL_getmetafield(L, 1, "__metatable");</span>
<span class='curline'><a href='../S/1205.html#L125'>L</a>                 125 src/lua/lbaselib.cpp static int luaB_setmetatable (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L126'>L</a>                 126 src/lua/lbaselib.cpp   int t = lua_type(L, 2);</span>
<span class='curline'><a href='../S/1205.html#L127'>L</a>                 127 src/lua/lbaselib.cpp   luaL_checktype(L, 1, LUA_TTABLE);</span>
<span class='curline'><a href='../S/1205.html#L128'>L</a>                 128 src/lua/lbaselib.cpp   luaL_argcheck(L, t == LUA_TNIL || t == LUA_TTABLE, 2,</span>
<span class='curline'><a href='../S/1205.html#L130'>L</a>                 130 src/lua/lbaselib.cpp   if (luaL_getmetafield(L, 1, "__metatable") != LUA_TNIL)</span>
<span class='curline'><a href='../S/1205.html#L131'>L</a>                 131 src/lua/lbaselib.cpp     return luaL_error(L, "cannot change a protected metatable");</span>
<span class='curline'><a href='../S/1205.html#L132'>L</a>                 132 src/lua/lbaselib.cpp   lua_settop(L, 2);</span>
<span class='curline'><a href='../S/1205.html#L133'>L</a>                 133 src/lua/lbaselib.cpp   lua_setmetatable(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L138'>L</a>                 138 src/lua/lbaselib.cpp static int luaB_rawequal (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L139'>L</a>                 139 src/lua/lbaselib.cpp   luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L140'>L</a>                 140 src/lua/lbaselib.cpp   luaL_checkany(L, 2);</span>
<span class='curline'><a href='../S/1205.html#L141'>L</a>                 141 src/lua/lbaselib.cpp   lua_pushboolean(L, lua_rawequal(L, 1, 2));</span>
<span class='curline'><a href='../S/1205.html#L146'>L</a>                 146 src/lua/lbaselib.cpp static int luaB_rawlen (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L147'>L</a>                 147 src/lua/lbaselib.cpp   int t = lua_type(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L148'>L</a>                 148 src/lua/lbaselib.cpp   luaL_argcheck(L, t == LUA_TTABLE || t == LUA_TSTRING, 1,</span>
<span class='curline'><a href='../S/1205.html#L150'>L</a>                 150 src/lua/lbaselib.cpp   lua_pushinteger(L, lua_rawlen(L, 1));</span>
<span class='curline'><a href='../S/1205.html#L155'>L</a>                 155 src/lua/lbaselib.cpp static int luaB_rawget (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L156'>L</a>                 156 src/lua/lbaselib.cpp   luaL_checktype(L, 1, LUA_TTABLE);</span>
<span class='curline'><a href='../S/1205.html#L157'>L</a>                 157 src/lua/lbaselib.cpp   luaL_checkany(L, 2);</span>
<span class='curline'><a href='../S/1205.html#L158'>L</a>                 158 src/lua/lbaselib.cpp   lua_settop(L, 2);</span>
<span class='curline'><a href='../S/1205.html#L159'>L</a>                 159 src/lua/lbaselib.cpp   lua_rawget(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L163'>L</a>                 163 src/lua/lbaselib.cpp static int luaB_rawset (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L164'>L</a>                 164 src/lua/lbaselib.cpp   luaL_checktype(L, 1, LUA_TTABLE);</span>
<span class='curline'><a href='../S/1205.html#L165'>L</a>                 165 src/lua/lbaselib.cpp   luaL_checkany(L, 2);</span>
<span class='curline'><a href='../S/1205.html#L166'>L</a>                 166 src/lua/lbaselib.cpp   luaL_checkany(L, 3);</span>
<span class='curline'><a href='../S/1205.html#L167'>L</a>                 167 src/lua/lbaselib.cpp   lua_settop(L, 3);</span>
<span class='curline'><a href='../S/1205.html#L168'>L</a>                 168 src/lua/lbaselib.cpp   lua_rawset(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L173'>L</a>                 173 src/lua/lbaselib.cpp static int luaB_collectgarbage (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L180'>L</a>                 180 src/lua/lbaselib.cpp   int o = optsnum[luaL_checkoption(L, 1, "collect", opts)];</span>
<span class='curline'><a href='../S/1205.html#L181'>L</a>                 181 src/lua/lbaselib.cpp   int ex = (int)luaL_optinteger(L, 2, 0);</span>
<span class='curline'><a href='../S/1205.html#L182'>L</a>                 182 src/lua/lbaselib.cpp   int res = lua_gc(L, o, ex);</span>
<span class='curline'><a href='../S/1205.html#L185'>L</a>                 185 src/lua/lbaselib.cpp       int b = lua_gc(L, LUA_GCCOUNTB, 0);</span>
<span class='curline'><a href='../S/1205.html#L186'>L</a>                 186 src/lua/lbaselib.cpp       lua_pushnumber(L, (lua_Number)res + ((lua_Number)b/1024));</span>
<span class='curline'><a href='../S/1205.html#L190'>L</a>                 190 src/lua/lbaselib.cpp       lua_pushboolean(L, res);</span>
<span class='curline'><a href='../S/1205.html#L194'>L</a>                 194 src/lua/lbaselib.cpp       lua_pushinteger(L, res);</span>
<span class='curline'><a href='../S/1205.html#L201'>L</a>                 201 src/lua/lbaselib.cpp static int luaB_type (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L202'>L</a>                 202 src/lua/lbaselib.cpp   int t = lua_type(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L203'>L</a>                 203 src/lua/lbaselib.cpp   luaL_argcheck(L, t != LUA_TNONE, 1, "value expected");</span>
<span class='curline'><a href='../S/1205.html#L204'>L</a>                 204 src/lua/lbaselib.cpp   lua_pushstring(L, lua_typename(L, t));</span>
<span class='curline'><a href='../S/1205.html#L209'>L</a>                 209 src/lua/lbaselib.cpp static int pairsmeta (lua_State *L, const char *method, int iszero,</span>
<span class='curline'><a href='../S/1205.html#L211'>L</a>                 211 src/lua/lbaselib.cpp   luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L212'>L</a>                 212 src/lua/lbaselib.cpp   if (luaL_getmetafield(L, 1, method) == LUA_TNIL) {  /* no metamethod? */</span>
<span class='curline'><a href='../S/1205.html#L213'>L</a>                 213 src/lua/lbaselib.cpp     lua_pushcfunction(L, iter);  /* will return generator, */</span>
<span class='curline'><a href='../S/1205.html#L214'>L</a>                 214 src/lua/lbaselib.cpp     lua_pushvalue(L, 1);  /* state, */</span>
<span class='curline'><a href='../S/1205.html#L215'>L</a>                 215 src/lua/lbaselib.cpp     if (iszero) lua_pushinteger(L, 0);  /* and initial value */</span>
<span class='curline'><a href='../S/1205.html#L216'>L</a>                 216 src/lua/lbaselib.cpp     else lua_pushnil(L);</span>
<span class='curline'><a href='../S/1205.html#L219'>L</a>                 219 src/lua/lbaselib.cpp     lua_pushvalue(L, 1);  /* argument 'self' to metamethod */</span>
<span class='curline'><a href='../S/1205.html#L220'>L</a>                 220 src/lua/lbaselib.cpp     lua_call(L, 1, 3);  /* get 3 values from metamethod */</span>
<span class='curline'><a href='../S/1205.html#L226'>L</a>                 226 src/lua/lbaselib.cpp static int luaB_next (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L227'>L</a>                 227 src/lua/lbaselib.cpp   luaL_checktype(L, 1, LUA_TTABLE);</span>
<span class='curline'><a href='../S/1205.html#L228'>L</a>                 228 src/lua/lbaselib.cpp   lua_settop(L, 2);  /* create a 2nd argument if there isn't one */</span>
<span class='curline'><a href='../S/1205.html#L229'>L</a>                 229 src/lua/lbaselib.cpp   if (lua_next(L, 1))</span>
<span class='curline'><a href='../S/1205.html#L232'>L</a>                 232 src/lua/lbaselib.cpp     lua_pushnil(L);</span>
<span class='curline'><a href='../S/1205.html#L238'>L</a>                 238 src/lua/lbaselib.cpp static int luaB_pairs (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L239'>L</a>                 239 src/lua/lbaselib.cpp   return pairsmeta(L, "__pairs", 0, luaB_next);</span>
<span class='curline'><a href='../S/1205.html#L246'>L</a>                 246 src/lua/lbaselib.cpp static int ipairsaux (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L247'>L</a>                 247 src/lua/lbaselib.cpp   lua_Integer i = luaL_checkinteger(L, 2) + 1;</span>
<span class='curline'><a href='../S/1205.html#L248'>L</a>                 248 src/lua/lbaselib.cpp   lua_pushinteger(L, i);</span>
<span class='curline'><a href='../S/1205.html#L249'>L</a>                 249 src/lua/lbaselib.cpp   return (lua_geti(L, 1, i) == LUA_TNIL) ? 1 : 2;</span>
<span class='curline'><a href='../S/1205.html#L257'>L</a>                 257 src/lua/lbaselib.cpp static int luaB_ipairs (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L259'>L</a>                 259 src/lua/lbaselib.cpp   return pairsmeta(L, "__ipairs", 1, ipairsaux);</span>
<span class='curline'><a href='../S/1205.html#L261'>L</a>                 261 src/lua/lbaselib.cpp   luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L262'>L</a>                 262 src/lua/lbaselib.cpp   lua_pushcfunction(L, ipairsaux);  /* iteration function */</span>
<span class='curline'><a href='../S/1205.html#L263'>L</a>                 263 src/lua/lbaselib.cpp   lua_pushvalue(L, 1);  /* state */</span>
<span class='curline'><a href='../S/1205.html#L264'>L</a>                 264 src/lua/lbaselib.cpp   lua_pushinteger(L, 0);  /* initial value */</span>
<span class='curline'><a href='../S/1205.html#L270'>L</a>                 270 src/lua/lbaselib.cpp static int load_aux (lua_State *L, int status, int envidx) {</span>
<span class='curline'><a href='../S/1205.html#L273'>L</a>                 273 src/lua/lbaselib.cpp       lua_pushvalue(L, envidx);  /* environment for loaded function */</span>
<span class='curline'><a href='../S/1205.html#L274'>L</a>                 274 src/lua/lbaselib.cpp       if (!lua_setupvalue(L, -2, 1))  /* set it as 1st upvalue */</span>
<span class='curline'><a href='../S/1205.html#L275'>L</a>                 275 src/lua/lbaselib.cpp         lua_pop(L, 1);  /* remove 'env' if not used by previous call */</span>
<span class='curline'><a href='../S/1205.html#L280'>L</a>                 280 src/lua/lbaselib.cpp     lua_pushnil(L);</span>
<span class='curline'><a href='../S/1205.html#L281'>L</a>                 281 src/lua/lbaselib.cpp     lua_insert(L, -2);  /* put before error message */</span>
<span class='curline'><a href='../S/1205.html#L287'>L</a>                 287 src/lua/lbaselib.cpp static int luaB_loadfile (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L288'>L</a>                 288 src/lua/lbaselib.cpp   const char *fname = luaL_optstring(L, 1, NULL);</span>
<span class='curline'><a href='../S/1205.html#L289'>L</a>                 289 src/lua/lbaselib.cpp   const char *mode = luaL_optstring(L, 2, NULL);</span>
<span class='curline'><a href='../S/1205.html#L290'>L</a>                 290 src/lua/lbaselib.cpp   int env = (!lua_isnone(L, 3) ? 3 : 0);  /* 'env' index or 0 if no 'env' */</span>
<span class='curline'><a href='../S/1205.html#L291'>L</a>                 291 src/lua/lbaselib.cpp   int status = luaL_loadfilex(L, fname, mode);</span>
<span class='curline'><a href='../S/1205.html#L292'>L</a>                 292 src/lua/lbaselib.cpp   return load_aux(L, status, env);</span>
<span class='curline'><a href='../S/1205.html#L317'>L</a>                 317 src/lua/lbaselib.cpp static const char *generic_reader (lua_State *L, void *ud, size_t *size) {</span>
<span class='curline'><a href='../S/1205.html#L319'>L</a>                 319 src/lua/lbaselib.cpp   luaL_checkstack(L, 2, "too many nested functions");</span>
<span class='curline'><a href='../S/1205.html#L320'>L</a>                 320 src/lua/lbaselib.cpp   lua_pushvalue(L, 1);  /* get function */</span>
<span class='curline'><a href='../S/1205.html#L321'>L</a>                 321 src/lua/lbaselib.cpp   lua_call(L, 0, 1);  /* call it */</span>
<span class='curline'><a href='../S/1205.html#L322'>L</a>                 322 src/lua/lbaselib.cpp   if (lua_isnil(L, -1)) {</span>
<span class='curline'><a href='../S/1205.html#L323'>L</a>                 323 src/lua/lbaselib.cpp     lua_pop(L, 1);  /* pop result */</span>
<span class='curline'><a href='../S/1205.html#L327'>L</a>                 327 src/lua/lbaselib.cpp   else if (!lua_isstring(L, -1))</span>
<span class='curline'><a href='../S/1205.html#L328'>L</a>                 328 src/lua/lbaselib.cpp     luaL_error(L, "reader function must return a string");</span>
<span class='curline'><a href='../S/1205.html#L329'>L</a>                 329 src/lua/lbaselib.cpp   lua_replace(L, RESERVEDSLOT);  /* save string in reserved slot */</span>
<span class='curline'><a href='../S/1205.html#L330'>L</a>                 330 src/lua/lbaselib.cpp   return lua_tolstring(L, RESERVEDSLOT, size);</span>
<span class='curline'><a href='../S/1205.html#L334'>L</a>                 334 src/lua/lbaselib.cpp static int luaB_load (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L337'>L</a>                 337 src/lua/lbaselib.cpp   const char *s = lua_tolstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/1205.html#L338'>L</a>                 338 src/lua/lbaselib.cpp   const char *mode = luaL_optstring(L, 3, "bt");</span>
<span class='curline'><a href='../S/1205.html#L339'>L</a>                 339 src/lua/lbaselib.cpp   int env = (!lua_isnone(L, 4) ? 4 : 0);  /* 'env' index or 0 if no 'env' */</span>
<span class='curline'><a href='../S/1205.html#L341'>L</a>                 341 src/lua/lbaselib.cpp     const char *chunkname = luaL_optstring(L, 2, s);</span>
<span class='curline'><a href='../S/1205.html#L342'>L</a>                 342 src/lua/lbaselib.cpp     status = luaL_loadbufferx(L, s, l, chunkname, mode);</span>
<span class='curline'><a href='../S/1205.html#L345'>L</a>                 345 src/lua/lbaselib.cpp     const char *chunkname = luaL_optstring(L, 2, "=(load)");</span>
<span class='curline'><a href='../S/1205.html#L346'>L</a>                 346 src/lua/lbaselib.cpp     luaL_checktype(L, 1, LUA_TFUNCTION);</span>
<span class='curline'><a href='../S/1205.html#L347'>L</a>                 347 src/lua/lbaselib.cpp     lua_settop(L, RESERVEDSLOT);  /* create reserved slot */</span>
<span class='curline'><a href='../S/1205.html#L348'>L</a>                 348 src/lua/lbaselib.cpp     status = lua_load(L, generic_reader, NULL, chunkname, mode);</span>
<span class='curline'><a href='../S/1205.html#L350'>L</a>                 350 src/lua/lbaselib.cpp   return load_aux(L, status, env);</span>
<span class='curline'><a href='../S/1205.html#L356'>L</a>                 356 src/lua/lbaselib.cpp static int dofilecont (lua_State *L, int d1, lua_KContext d2) {</span>
<span class='curline'><a href='../S/1205.html#L358'>L</a>                 358 src/lua/lbaselib.cpp   return lua_gettop(L) - 1;</span>
<span class='curline'><a href='../S/1205.html#L362'>L</a>                 362 src/lua/lbaselib.cpp static int luaB_dofile (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L363'>L</a>                 363 src/lua/lbaselib.cpp   const char *fname = luaL_optstring(L, 1, NULL);</span>
<span class='curline'><a href='../S/1205.html#L364'>L</a>                 364 src/lua/lbaselib.cpp   lua_settop(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L365'>L</a>                 365 src/lua/lbaselib.cpp   if (luaL_loadfile(L, fname) != LUA_OK)</span>
<span class='curline'><a href='../S/1205.html#L366'>L</a>                 366 src/lua/lbaselib.cpp     return lua_error(L);</span>
<span class='curline'><a href='../S/1205.html#L367'>L</a>                 367 src/lua/lbaselib.cpp   lua_callk(L, 0, LUA_MULTRET, 0, dofilecont);</span>
<span class='curline'><a href='../S/1205.html#L368'>L</a>                 368 src/lua/lbaselib.cpp   return dofilecont(L, 0, 0);</span>
<span class='curline'><a href='../S/1205.html#L372'>L</a>                 372 src/lua/lbaselib.cpp static int luaB_assert (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L373'>L</a>                 373 src/lua/lbaselib.cpp   if (lua_toboolean(L, 1))  /* condition is true? */</span>
<span class='curline'><a href='../S/1205.html#L374'>L</a>                 374 src/lua/lbaselib.cpp     return lua_gettop(L);  /* return all arguments */</span>
<span class='curline'><a href='../S/1205.html#L376'>L</a>                 376 src/lua/lbaselib.cpp     luaL_checkany(L, 1);  /* there must be a condition */</span>
<span class='curline'><a href='../S/1205.html#L377'>L</a>                 377 src/lua/lbaselib.cpp     lua_remove(L, 1);  /* remove it */</span>
<span class='curline'><a href='../S/1205.html#L378'>L</a>                 378 src/lua/lbaselib.cpp     lua_pushliteral(L, "assertion failed!");  /* default message */</span>
<span class='curline'><a href='../S/1205.html#L379'>L</a>                 379 src/lua/lbaselib.cpp     lua_settop(L, 1);  /* leave only message (default if no other one) */</span>
<span class='curline'><a href='../S/1205.html#L380'>L</a>                 380 src/lua/lbaselib.cpp     return luaB_error(L);  /* call 'error' */</span>
<span class='curline'><a href='../S/1205.html#L385'>L</a>                 385 src/lua/lbaselib.cpp static int luaB_select (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L386'>L</a>                 386 src/lua/lbaselib.cpp   int n = lua_gettop(L);</span>
<span class='curline'><a href='../S/1205.html#L387'>L</a>                 387 src/lua/lbaselib.cpp   if (lua_type(L, 1) == LUA_TSTRING &amp;&amp; *lua_tostring(L, 1) == '#') {</span>
<span class='curline'><a href='../S/1205.html#L388'>L</a>                 388 src/lua/lbaselib.cpp     lua_pushinteger(L, n-1);</span>
<span class='curline'><a href='../S/1205.html#L392'>L</a>                 392 src/lua/lbaselib.cpp     lua_Integer i = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L395'>L</a>                 395 src/lua/lbaselib.cpp     luaL_argcheck(L, 1 &lt;= i, 1, "index out of range");</span>
<span class='curline'><a href='../S/1205.html#L408'>L</a>                 408 src/lua/lbaselib.cpp static int finishpcall (lua_State *L, int status, lua_KContext extra) {</span>
<span class='curline'><a href='../S/1205.html#L410'>L</a>                 410 src/lua/lbaselib.cpp     lua_pushboolean(L, 0);  /* first result (false) */</span>
<span class='curline'><a href='../S/1205.html#L411'>L</a>                 411 src/lua/lbaselib.cpp     lua_pushvalue(L, -2);  /* error message */</span>
<span class='curline'><a href='../S/1205.html#L415'>L</a>                 415 src/lua/lbaselib.cpp     return lua_gettop(L) - (int)extra;  /* return all results */</span>
<span class='curline'><a href='../S/1205.html#L419'>L</a>                 419 src/lua/lbaselib.cpp static int luaB_pcall (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L421'>L</a>                 421 src/lua/lbaselib.cpp   luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L422'>L</a>                 422 src/lua/lbaselib.cpp   lua_pushboolean(L, 1);  /* first result if no errors */</span>
<span class='curline'><a href='../S/1205.html#L423'>L</a>                 423 src/lua/lbaselib.cpp   lua_insert(L, 1);  /* put it in place */</span>
<span class='curline'><a href='../S/1205.html#L424'>L</a>                 424 src/lua/lbaselib.cpp   status = lua_pcallk(L, lua_gettop(L) - 2, LUA_MULTRET, 0, 0, finishpcall);</span>
<span class='curline'><a href='../S/1205.html#L425'>L</a>                 425 src/lua/lbaselib.cpp   return finishpcall(L, status, 0);</span>
<span class='curline'><a href='../S/1205.html#L434'>L</a>                 434 src/lua/lbaselib.cpp static int luaB_xpcall (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L436'>L</a>                 436 src/lua/lbaselib.cpp   int n = lua_gettop(L);</span>
<span class='curline'><a href='../S/1205.html#L437'>L</a>                 437 src/lua/lbaselib.cpp   luaL_checktype(L, 2, LUA_TFUNCTION);  /* check error function */</span>
<span class='curline'><a href='../S/1205.html#L438'>L</a>                 438 src/lua/lbaselib.cpp   lua_pushboolean(L, 1);  /* first result */</span>
<span class='curline'><a href='../S/1205.html#L439'>L</a>                 439 src/lua/lbaselib.cpp   lua_pushvalue(L, 1);  /* function */</span>
<span class='curline'><a href='../S/1205.html#L440'>L</a>                 440 src/lua/lbaselib.cpp   lua_rotate(L, 3, 2);  /* move them below function's arguments */</span>
<span class='curline'><a href='../S/1205.html#L441'>L</a>                 441 src/lua/lbaselib.cpp   status = lua_pcallk(L, n - 2, LUA_MULTRET, 2, 2, finishpcall);</span>
<span class='curline'><a href='../S/1205.html#L442'>L</a>                 442 src/lua/lbaselib.cpp   return finishpcall(L, status, 2);</span>
<span class='curline'><a href='../S/1205.html#L446'>L</a>                 446 src/lua/lbaselib.cpp static int luaB_tostring (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L447'>L</a>                 447 src/lua/lbaselib.cpp   luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1205.html#L448'>L</a>                 448 src/lua/lbaselib.cpp   luaL_tolstring(L, 1, NULL);</span>
<span class='curline'><a href='../S/1205.html#L486'>L</a>                 486 src/lua/lbaselib.cpp LUAMOD_API int luaopen_base (lua_State *L) {</span>
<span class='curline'><a href='../S/1205.html#L488'>L</a>                 488 src/lua/lbaselib.cpp   lua_pushglobaltable(L);</span>
<span class='curline'><a href='../S/1205.html#L489'>L</a>                 489 src/lua/lbaselib.cpp   luaL_setfuncs(L, base_funcs, 0);</span>
<span class='curline'><a href='../S/1205.html#L491'>L</a>                 491 src/lua/lbaselib.cpp   lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/1205.html#L492'>L</a>                 492 src/lua/lbaselib.cpp   lua_setfield(L, -2, "_G");</span>
<span class='curline'><a href='../S/1205.html#L494'>L</a>                 494 src/lua/lbaselib.cpp   lua_pushliteral(L, LUA_VERSION);</span>
<span class='curline'><a href='../S/1205.html#L495'>L</a>                 495 src/lua/lbaselib.cpp   lua_setfield(L, -2, "_VERSION");</span>
<span class='curline'><a href='../S/1199.html#L22'>L</a>                  22 src/lua/lbitlib.cpp #define pushunsigned(L,n)	lua_pushinteger(L, (lua_Integer)(n))</span>
<span class='curline'><a href='../S/1199.html#L23'>L</a>                  23 src/lua/lbitlib.cpp #define checkunsigned(L,i)	((lua_Unsigned)luaL_checkinteger(L,i))</span>
<span class='curline'><a href='../S/1199.html#L49'>L</a>                  49 src/lua/lbitlib.cpp static lua_Unsigned andaux (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L50'>L</a>                  50 src/lua/lbitlib.cpp   int i, n = lua_gettop(L);</span>
<span class='curline'><a href='../S/1199.html#L53'>L</a>                  53 src/lua/lbitlib.cpp     r &amp;= checkunsigned(L, i);</span>
<span class='curline'><a href='../S/1199.html#L58'>L</a>                  58 src/lua/lbitlib.cpp static int b_and (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L59'>L</a>                  59 src/lua/lbitlib.cpp   lua_Unsigned r = andaux(L);</span>
<span class='curline'><a href='../S/1199.html#L60'>L</a>                  60 src/lua/lbitlib.cpp   pushunsigned(L, r);</span>
<span class='curline'><a href='../S/1199.html#L65'>L</a>                  65 src/lua/lbitlib.cpp static int b_test (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L66'>L</a>                  66 src/lua/lbitlib.cpp   lua_Unsigned r = andaux(L);</span>
<span class='curline'><a href='../S/1199.html#L67'>L</a>                  67 src/lua/lbitlib.cpp   lua_pushboolean(L, r != 0);</span>
<span class='curline'><a href='../S/1199.html#L72'>L</a>                  72 src/lua/lbitlib.cpp static int b_or (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L73'>L</a>                  73 src/lua/lbitlib.cpp   int i, n = lua_gettop(L);</span>
<span class='curline'><a href='../S/1199.html#L76'>L</a>                  76 src/lua/lbitlib.cpp     r |= checkunsigned(L, i);</span>
<span class='curline'><a href='../S/1199.html#L77'>L</a>                  77 src/lua/lbitlib.cpp   pushunsigned(L, trim(r));</span>
<span class='curline'><a href='../S/1199.html#L82'>L</a>                  82 src/lua/lbitlib.cpp static int b_xor (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L83'>L</a>                  83 src/lua/lbitlib.cpp   int i, n = lua_gettop(L);</span>
<span class='curline'><a href='../S/1199.html#L86'>L</a>                  86 src/lua/lbitlib.cpp     r ^= checkunsigned(L, i);</span>
<span class='curline'><a href='../S/1199.html#L87'>L</a>                  87 src/lua/lbitlib.cpp   pushunsigned(L, trim(r));</span>
<span class='curline'><a href='../S/1199.html#L92'>L</a>                  92 src/lua/lbitlib.cpp static int b_not (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L93'>L</a>                  93 src/lua/lbitlib.cpp   lua_Unsigned r = ~checkunsigned(L, 1);</span>
<span class='curline'><a href='../S/1199.html#L94'>L</a>                  94 src/lua/lbitlib.cpp   pushunsigned(L, trim(r));</span>
<span class='curline'><a href='../S/1199.html#L99'>L</a>                  99 src/lua/lbitlib.cpp static int b_shift (lua_State *L, lua_Unsigned r, lua_Integer i) {</span>
<span class='curline'><a href='../S/1199.html#L111'>L</a>                 111 src/lua/lbitlib.cpp   pushunsigned(L, r);</span>
<span class='curline'><a href='../S/1199.html#L116'>L</a>                 116 src/lua/lbitlib.cpp static int b_lshift (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L117'>L</a>                 117 src/lua/lbitlib.cpp   return b_shift(L, checkunsigned(L, 1), luaL_checkinteger(L, 2));</span>
<span class='curline'><a href='../S/1199.html#L121'>L</a>                 121 src/lua/lbitlib.cpp static int b_rshift (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L122'>L</a>                 122 src/lua/lbitlib.cpp   return b_shift(L, checkunsigned(L, 1), -luaL_checkinteger(L, 2));</span>
<span class='curline'><a href='../S/1199.html#L126'>L</a>                 126 src/lua/lbitlib.cpp static int b_arshift (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L127'>L</a>                 127 src/lua/lbitlib.cpp   lua_Unsigned r = checkunsigned(L, 1);</span>
<span class='curline'><a href='../S/1199.html#L128'>L</a>                 128 src/lua/lbitlib.cpp   lua_Integer i = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/1199.html#L130'>L</a>                 130 src/lua/lbitlib.cpp     return b_shift(L, r, -i);</span>
<span class='curline'><a href='../S/1199.html#L135'>L</a>                 135 src/lua/lbitlib.cpp     pushunsigned(L, r);</span>
<span class='curline'><a href='../S/1199.html#L141'>L</a>                 141 src/lua/lbitlib.cpp static int b_rot (lua_State *L, lua_Integer d) {</span>
<span class='curline'><a href='../S/1199.html#L142'>L</a>                 142 src/lua/lbitlib.cpp   lua_Unsigned r = checkunsigned(L, 1);</span>
<span class='curline'><a href='../S/1199.html#L147'>L</a>                 147 src/lua/lbitlib.cpp   pushunsigned(L, trim(r));</span>
<span class='curline'><a href='../S/1199.html#L152'>L</a>                 152 src/lua/lbitlib.cpp static int b_lrot (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L153'>L</a>                 153 src/lua/lbitlib.cpp   return b_rot(L, luaL_checkinteger(L, 2));</span>
<span class='curline'><a href='../S/1199.html#L157'>L</a>                 157 src/lua/lbitlib.cpp static int b_rrot (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L158'>L</a>                 158 src/lua/lbitlib.cpp   return b_rot(L, -luaL_checkinteger(L, 2));</span>
<span class='curline'><a href='../S/1199.html#L168'>L</a>                 168 src/lua/lbitlib.cpp static int fieldargs (lua_State *L, int farg, int *width) {</span>
<span class='curline'><a href='../S/1199.html#L169'>L</a>                 169 src/lua/lbitlib.cpp   lua_Integer f = luaL_checkinteger(L, farg);</span>
<span class='curline'><a href='../S/1199.html#L170'>L</a>                 170 src/lua/lbitlib.cpp   lua_Integer w = luaL_optinteger(L, farg + 1, 1);</span>
<span class='curline'><a href='../S/1199.html#L171'>L</a>                 171 src/lua/lbitlib.cpp   luaL_argcheck(L, 0 &lt;= f, farg, "field cannot be negative");</span>
<span class='curline'><a href='../S/1199.html#L172'>L</a>                 172 src/lua/lbitlib.cpp   luaL_argcheck(L, 0 &lt; w, farg + 1, "width must be positive");</span>
<span class='curline'><a href='../S/1199.html#L174'>L</a>                 174 src/lua/lbitlib.cpp     luaL_error(L, "trying to access non-existent bits");</span>
<span class='curline'><a href='../S/1199.html#L180'>L</a>                 180 src/lua/lbitlib.cpp static int b_extract (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L182'>L</a>                 182 src/lua/lbitlib.cpp   lua_Unsigned r = trim(checkunsigned(L, 1));</span>
<span class='curline'><a href='../S/1199.html#L183'>L</a>                 183 src/lua/lbitlib.cpp   int f = fieldargs(L, 2, &amp;w);</span>
<span class='curline'><a href='../S/1199.html#L185'>L</a>                 185 src/lua/lbitlib.cpp   pushunsigned(L, r);</span>
<span class='curline'><a href='../S/1199.html#L190'>L</a>                 190 src/lua/lbitlib.cpp static int b_replace (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L192'>L</a>                 192 src/lua/lbitlib.cpp   lua_Unsigned r = trim(checkunsigned(L, 1));</span>
<span class='curline'><a href='../S/1199.html#L193'>L</a>                 193 src/lua/lbitlib.cpp   lua_Unsigned v = trim(checkunsigned(L, 2));</span>
<span class='curline'><a href='../S/1199.html#L194'>L</a>                 194 src/lua/lbitlib.cpp   int f = fieldargs(L, 3, &amp;w);</span>
<span class='curline'><a href='../S/1199.html#L197'>L</a>                 197 src/lua/lbitlib.cpp   pushunsigned(L, r);</span>
<span class='curline'><a href='../S/1199.html#L220'>L</a>                 220 src/lua/lbitlib.cpp LUAMOD_API int luaopen_bit32 (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L221'>L</a>                 221 src/lua/lbitlib.cpp   luaL_newlib(L, bitlib);</span>
<span class='curline'><a href='../S/1199.html#L229'>L</a>                 229 src/lua/lbitlib.cpp LUAMOD_API int luaopen_bit32 (lua_State *L) {</span>
<span class='curline'><a href='../S/1199.html#L230'>L</a>                 230 src/lua/lbitlib.cpp   return luaL_error(L, "library 'bit32' has been deprecated");</span>
<span class='curline'><a href='../S/1185.html#L297'>L</a>                 297 src/lua/lcode.cpp   luaM_growvector(fs-&gt;ls-&gt;L, f-&gt;code, fs-&gt;pc, f-&gt;sizecode, Instruction,</span>
<span class='curline'><a href='../S/1185.html#L301'>L</a>                 301 src/lua/lcode.cpp   luaM_growvector(fs-&gt;ls-&gt;L, f-&gt;lineinfo, fs-&gt;pc, f-&gt;sizelineinfo, int,</span>
<span class='curline'><a href='../S/1185.html#L429'>L</a>                 429 src/lua/lcode.cpp   lua_State *L = fs-&gt;ls-&gt;L;</span>
<span class='curline'><a href='../S/1185.html#L431'>L</a>                 431 src/lua/lcode.cpp   TValue *idx = luaH_set(L, fs-&gt;ls-&gt;h, key);  /* index scanner table */</span>
<span class='curline'><a href='../S/1185.html#L446'>L</a>                 446 src/lua/lcode.cpp   luaM_growvector(L, f-&gt;k, k, f-&gt;sizek, TValue, MAXARG_Ax, "constants");</span>
<span class='curline'><a href='../S/1185.html#L448'>L</a>                 448 src/lua/lcode.cpp   setobj(L, &amp;f-&gt;k[k], v);</span>
<span class='curline'><a href='../S/1185.html#L450'>L</a>                 450 src/lua/lcode.cpp   luaC_barrier(L, f, v);</span>
<span class='curline'><a href='../S/1185.html#L460'>L</a>                 460 src/lua/lcode.cpp   setsvalue(fs-&gt;ls-&gt;L, &amp;o, s);</span>
<span class='curline'><a href='../S/1185.html#L505'>L</a>                 505 src/lua/lcode.cpp   sethvalue(fs-&gt;ls-&gt;L, &amp;k, fs-&gt;ls-&gt;h);</span>
<span class='curline'><a href='../S/1185.html#L983'>L</a>                 983 src/lua/lcode.cpp   luaO_arith(fs-&gt;ls-&gt;L, op, &amp;v1, &amp;v2, &amp;res);  /* does operation */</span>
<span class='curline'><a href='../S/1191.html#L21'>L</a>                  21 src/lua/lcorolib.cpp static lua_State *getco (lua_State *L) {</span>
<span class='curline'><a href='../S/1191.html#L22'>L</a>                  22 src/lua/lcorolib.cpp   lua_State *co = lua_tothread(L, 1);</span>
<span class='curline'><a href='../S/1191.html#L23'>L</a>                  23 src/lua/lcorolib.cpp   luaL_argcheck(L, co, 1, "thread expected");</span>
<span class='curline'><a href='../S/1191.html#L28'>L</a>                  28 src/lua/lcorolib.cpp static int auxresume (lua_State *L, lua_State *co, int narg) {</span>
<span class='curline'><a href='../S/1191.html#L31'>L</a>                  31 src/lua/lcorolib.cpp     lua_pushliteral(L, "too many arguments to resume");</span>
<span class='curline'><a href='../S/1191.html#L35'>L</a>                  35 src/lua/lcorolib.cpp     lua_pushliteral(L, "cannot resume dead coroutine");</span>
<span class='curline'><a href='../S/1191.html#L38'>L</a>                  38 src/lua/lcorolib.cpp   lua_xmove(L, co, narg);</span>
<span class='curline'><a href='../S/1191.html#L39'>L</a>                  39 src/lua/lcorolib.cpp   status = lua_resume(co, L, narg);</span>
<span class='curline'><a href='../S/1191.html#L42'>L</a>                  42 src/lua/lcorolib.cpp     if (!lua_checkstack(L, nres + 1)) {</span>
<span class='curline'><a href='../S/1191.html#L44'>L</a>                  44 src/lua/lcorolib.cpp       lua_pushliteral(L, "too many results to resume");</span>
<span class='curline'><a href='../S/1191.html#L47'>L</a>                  47 src/lua/lcorolib.cpp     lua_xmove(co, L, nres);  /* move yielded values */</span>
<span class='curline'><a href='../S/1191.html#L51'>L</a>                  51 src/lua/lcorolib.cpp     lua_xmove(co, L, 1);  /* move error message */</span>
<span class='curline'><a href='../S/1191.html#L57'>L</a>                  57 src/lua/lcorolib.cpp static int luaB_coresume (lua_State *L) {</span>
<span class='curline'><a href='../S/1191.html#L58'>L</a>                  58 src/lua/lcorolib.cpp   lua_State *co = getco(L);</span>
<span class='curline'><a href='../S/1191.html#L60'>L</a>                  60 src/lua/lcorolib.cpp   r = auxresume(L, co, lua_gettop(L) - 1);</span>
<span class='curline'><a href='../S/1191.html#L62'>L</a>                  62 src/lua/lcorolib.cpp     lua_pushboolean(L, 0);</span>
<span class='curline'><a href='../S/1191.html#L63'>L</a>                  63 src/lua/lcorolib.cpp     lua_insert(L, -2);</span>
<span class='curline'><a href='../S/1191.html#L67'>L</a>                  67 src/lua/lcorolib.cpp     lua_pushboolean(L, 1);</span>
<span class='curline'><a href='../S/1191.html#L68'>L</a>                  68 src/lua/lcorolib.cpp     lua_insert(L, -(r + 1));</span>
<span class='curline'><a href='../S/1191.html#L74'>L</a>                  74 src/lua/lcorolib.cpp static int luaB_auxwrap (lua_State *L) {</span>
<span class='curline'><a href='../S/1191.html#L75'>L</a>                  75 src/lua/lcorolib.cpp   lua_State *co = lua_tothread(L, lua_upvalueindex(1));</span>
<span class='curline'><a href='../S/1191.html#L76'>L</a>                  76 src/lua/lcorolib.cpp   int r = auxresume(L, co, lua_gettop(L));</span>
<span class='curline'><a href='../S/1191.html#L78'>L</a>                  78 src/lua/lcorolib.cpp     if (lua_type(L, -1) == LUA_TSTRING) {  /* error object is a string? */</span>
<span class='curline'><a href='../S/1191.html#L79'>L</a>                  79 src/lua/lcorolib.cpp       luaL_where(L, 1);  /* add extra info */</span>
<span class='curline'><a href='../S/1191.html#L80'>L</a>                  80 src/lua/lcorolib.cpp       lua_insert(L, -2);</span>
<span class='curline'><a href='../S/1191.html#L81'>L</a>                  81 src/lua/lcorolib.cpp       lua_concat(L, 2);</span>
<span class='curline'><a href='../S/1191.html#L83'>L</a>                  83 src/lua/lcorolib.cpp     return lua_error(L);  /* propagate error */</span>
<span class='curline'><a href='../S/1191.html#L89'>L</a>                  89 src/lua/lcorolib.cpp static int luaB_cocreate (lua_State *L) {</span>
<span class='curline'><a href='../S/1191.html#L91'>L</a>                  91 src/lua/lcorolib.cpp   luaL_checktype(L, 1, LUA_TFUNCTION);</span>
<span class='curline'><a href='../S/1191.html#L92'>L</a>                  92 src/lua/lcorolib.cpp   NL = lua_newthread(L);</span>
<span class='curline'><a href='../S/1191.html#L93'>L</a>                  93 src/lua/lcorolib.cpp   lua_pushvalue(L, 1);  /* move function to top */</span>
<span class='curline'><a href='../S/1191.html#L94'>L</a>                  94 src/lua/lcorolib.cpp   lua_xmove(L, NL, 1);  /* move function from L to NL */</span>
<span class='curline'><a href='../S/1191.html#L99'>L</a>                  99 src/lua/lcorolib.cpp static int luaB_cowrap (lua_State *L) {</span>
<span class='curline'><a href='../S/1191.html#L100'>L</a>                 100 src/lua/lcorolib.cpp   luaB_cocreate(L);</span>
<span class='curline'><a href='../S/1191.html#L101'>L</a>                 101 src/lua/lcorolib.cpp   lua_pushcclosure(L, luaB_auxwrap, 1);</span>
<span class='curline'><a href='../S/1191.html#L106'>L</a>                 106 src/lua/lcorolib.cpp static int luaB_yield (lua_State *L) {</span>
<span class='curline'><a href='../S/1191.html#L107'>L</a>                 107 src/lua/lcorolib.cpp   return lua_yield(L, lua_gettop(L));</span>
<span class='curline'><a href='../S/1191.html#L111'>L</a>                 111 src/lua/lcorolib.cpp static int luaB_costatus (lua_State *L) {</span>
<span class='curline'><a href='../S/1191.html#L112'>L</a>                 112 src/lua/lcorolib.cpp   lua_State *co = getco(L);</span>
<span class='curline'><a href='../S/1191.html#L113'>L</a>                 113 src/lua/lcorolib.cpp   if (L == co) lua_pushliteral(L, "running");</span>
<span class='curline'><a href='../S/1191.html#L117'>L</a>                 117 src/lua/lcorolib.cpp         lua_pushliteral(L, "suspended");</span>
<span class='curline'><a href='../S/1191.html#L122'>L</a>                 122 src/lua/lcorolib.cpp           lua_pushliteral(L, "normal");  /* it is running */</span>
<span class='curline'><a href='../S/1191.html#L124'>L</a>                 124 src/lua/lcorolib.cpp             lua_pushliteral(L, "dead");</span>
<span class='curline'><a href='../S/1191.html#L126'>L</a>                 126 src/lua/lcorolib.cpp           lua_pushliteral(L, "suspended");  /* initial state */</span>
<span class='curline'><a href='../S/1191.html#L130'>L</a>                 130 src/lua/lcorolib.cpp         lua_pushliteral(L, "dead");</span>
<span class='curline'><a href='../S/1191.html#L138'>L</a>                 138 src/lua/lcorolib.cpp static int luaB_yieldable (lua_State *L) {</span>
<span class='curline'><a href='../S/1191.html#L139'>L</a>                 139 src/lua/lcorolib.cpp   lua_pushboolean(L, lua_isyieldable(L));</span>
<span class='curline'><a href='../S/1191.html#L144'>L</a>                 144 src/lua/lcorolib.cpp static int luaB_corunning (lua_State *L) {</span>
<span class='curline'><a href='../S/1191.html#L145'>L</a>                 145 src/lua/lcorolib.cpp   int ismain = lua_pushthread(L);</span>
<span class='curline'><a href='../S/1191.html#L146'>L</a>                 146 src/lua/lcorolib.cpp   lua_pushboolean(L, ismain);</span>
<span class='curline'><a href='../S/1191.html#L164'>L</a>                 164 src/lua/lcorolib.cpp LUAMOD_API int luaopen_coroutine (lua_State *L) {</span>
<span class='curline'><a href='../S/1191.html#L165'>L</a>                 165 src/lua/lcorolib.cpp   luaL_newlib(L, co_funcs);</span>
<span class='curline'><a href='../S/1222.html#L35'>L</a>                  35 src/lua/ldblib.cpp static void checkstack (lua_State *L, lua_State *L1, int n) {</span>
<span class='curline'><a href='../S/1222.html#L36'>L</a>                  36 src/lua/ldblib.cpp   if (L != L1 &amp;&amp; !lua_checkstack(L1, n))</span>
<span class='curline'><a href='../S/1222.html#L37'>L</a>                  37 src/lua/ldblib.cpp     luaL_error(L, "stack overflow");</span>
<span class='curline'><a href='../S/1222.html#L41'>L</a>                  41 src/lua/ldblib.cpp static int db_getregistry (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L42'>L</a>                  42 src/lua/ldblib.cpp   lua_pushvalue(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/1222.html#L47'>L</a>                  47 src/lua/ldblib.cpp static int db_getmetatable (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L48'>L</a>                  48 src/lua/ldblib.cpp   luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1222.html#L49'>L</a>                  49 src/lua/ldblib.cpp   if (!lua_getmetatable(L, 1)) {</span>
<span class='curline'><a href='../S/1222.html#L50'>L</a>                  50 src/lua/ldblib.cpp     lua_pushnil(L);  /* no metatable */</span>
<span class='curline'><a href='../S/1222.html#L56'>L</a>                  56 src/lua/ldblib.cpp static int db_setmetatable (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L57'>L</a>                  57 src/lua/ldblib.cpp   int t = lua_type(L, 2);</span>
<span class='curline'><a href='../S/1222.html#L58'>L</a>                  58 src/lua/ldblib.cpp   luaL_argcheck(L, t == LUA_TNIL || t == LUA_TTABLE, 2,</span>
<span class='curline'><a href='../S/1222.html#L60'>L</a>                  60 src/lua/ldblib.cpp   lua_settop(L, 2);</span>
<span class='curline'><a href='../S/1222.html#L61'>L</a>                  61 src/lua/ldblib.cpp   lua_setmetatable(L, 1);</span>
<span class='curline'><a href='../S/1222.html#L66'>L</a>                  66 src/lua/ldblib.cpp static int db_getuservalue (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L67'>L</a>                  67 src/lua/ldblib.cpp   if (lua_type(L, 1) != LUA_TUSERDATA)</span>
<span class='curline'><a href='../S/1222.html#L68'>L</a>                  68 src/lua/ldblib.cpp     lua_pushnil(L);</span>
<span class='curline'><a href='../S/1222.html#L70'>L</a>                  70 src/lua/ldblib.cpp     lua_getuservalue(L, 1);</span>
<span class='curline'><a href='../S/1222.html#L75'>L</a>                  75 src/lua/ldblib.cpp static int db_setuservalue (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L76'>L</a>                  76 src/lua/ldblib.cpp   luaL_checktype(L, 1, LUA_TUSERDATA);</span>
<span class='curline'><a href='../S/1222.html#L77'>L</a>                  77 src/lua/ldblib.cpp   luaL_checkany(L, 2);</span>
<span class='curline'><a href='../S/1222.html#L78'>L</a>                  78 src/lua/ldblib.cpp   lua_settop(L, 2);</span>
<span class='curline'><a href='../S/1222.html#L79'>L</a>                  79 src/lua/ldblib.cpp   lua_setuservalue(L, 1);</span>
<span class='curline'><a href='../S/1222.html#L90'>L</a>                  90 src/lua/ldblib.cpp static lua_State *getthread (lua_State *L, int *arg) {</span>
<span class='curline'><a href='../S/1222.html#L91'>L</a>                  91 src/lua/ldblib.cpp   if (lua_isthread(L, 1)) {</span>
<span class='curline'><a href='../S/1222.html#L93'>L</a>                  93 src/lua/ldblib.cpp     return lua_tothread(L, 1);</span>
<span class='curline'><a href='../S/1222.html#L97'>L</a>                  97 src/lua/ldblib.cpp     return L;  /* function will operate over current thread */</span>
<span class='curline'><a href='../S/1222.html#L107'>L</a>                 107 src/lua/ldblib.cpp static void settabss (lua_State *L, const char *k, const char *v) {</span>
<span class='curline'><a href='../S/1222.html#L108'>L</a>                 108 src/lua/ldblib.cpp   lua_pushstring(L, v);</span>
<span class='curline'><a href='../S/1222.html#L109'>L</a>                 109 src/lua/ldblib.cpp   lua_setfield(L, -2, k);</span>
<span class='curline'><a href='../S/1222.html#L112'>L</a>                 112 src/lua/ldblib.cpp static void settabsi (lua_State *L, const char *k, int v) {</span>
<span class='curline'><a href='../S/1222.html#L113'>L</a>                 113 src/lua/ldblib.cpp   lua_pushinteger(L, v);</span>
<span class='curline'><a href='../S/1222.html#L114'>L</a>                 114 src/lua/ldblib.cpp   lua_setfield(L, -2, k);</span>
<span class='curline'><a href='../S/1222.html#L117'>L</a>                 117 src/lua/ldblib.cpp static void settabsb (lua_State *L, const char *k, int v) {</span>
<span class='curline'><a href='../S/1222.html#L118'>L</a>                 118 src/lua/ldblib.cpp   lua_pushboolean(L, v);</span>
<span class='curline'><a href='../S/1222.html#L119'>L</a>                 119 src/lua/ldblib.cpp   lua_setfield(L, -2, k);</span>
<span class='curline'><a href='../S/1222.html#L130'>L</a>                 130 src/lua/ldblib.cpp static void treatstackoption (lua_State *L, lua_State *L1, const char *fname) {</span>
<span class='curline'><a href='../S/1222.html#L131'>L</a>                 131 src/lua/ldblib.cpp   if (L == L1)</span>
<span class='curline'><a href='../S/1222.html#L132'>L</a>                 132 src/lua/ldblib.cpp     lua_rotate(L, -2, 1);  /* exchange object and table */</span>
<span class='curline'><a href='../S/1222.html#L134'>L</a>                 134 src/lua/ldblib.cpp     lua_xmove(L1, L, 1);  /* move object to the "main" stack */</span>
<span class='curline'><a href='../S/1222.html#L135'>L</a>                 135 src/lua/ldblib.cpp   lua_setfield(L, -2, fname);  /* put object into table */</span>
<span class='curline'><a href='../S/1222.html#L145'>L</a>                 145 src/lua/ldblib.cpp static int db_getinfo (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L148'>L</a>                 148 src/lua/ldblib.cpp   lua_State *L1 = getthread(L, &amp;arg);</span>
<span class='curline'><a href='../S/1222.html#L149'>L</a>                 149 src/lua/ldblib.cpp   const char *options = luaL_optstring(L, arg+2, "flnStu");</span>
<span class='curline'><a href='../S/1222.html#L150'>L</a>                 150 src/lua/ldblib.cpp   checkstack(L, L1, 3);</span>
<span class='curline'><a href='../S/1222.html#L151'>L</a>                 151 src/lua/ldblib.cpp   if (lua_isfunction(L, arg + 1)) {  /* info about a function? */</span>
<span class='curline'><a href='../S/1222.html#L152'>L</a>                 152 src/lua/ldblib.cpp     options = lua_pushfstring(L, "&gt;%s", options);  /* add '&gt;' to 'options' */</span>
<span class='curline'><a href='../S/1222.html#L153'>L</a>                 153 src/lua/ldblib.cpp     lua_pushvalue(L, arg + 1);  /* move function to 'L1' stack */</span>
<span class='curline'><a href='../S/1222.html#L154'>L</a>                 154 src/lua/ldblib.cpp     lua_xmove(L, L1, 1);</span>
<span class='curline'><a href='../S/1222.html#L157'>L</a>                 157 src/lua/ldblib.cpp     if (!lua_getstack(L1, (int)luaL_checkinteger(L, arg + 1), &amp;ar)) {</span>
<span class='curline'><a href='../S/1222.html#L158'>L</a>                 158 src/lua/ldblib.cpp       lua_pushnil(L);  /* level out of range */</span>
<span class='curline'><a href='../S/1222.html#L163'>L</a>                 163 src/lua/ldblib.cpp     return luaL_argerror(L, arg+2, "invalid option");</span>
<span class='curline'><a href='../S/1222.html#L164'>L</a>                 164 src/lua/ldblib.cpp   lua_newtable(L);  /* table to collect results */</span>
<span class='curline'><a href='../S/1222.html#L166'>L</a>                 166 src/lua/ldblib.cpp     settabss(L, "source", ar.source);</span>
<span class='curline'><a href='../S/1222.html#L167'>L</a>                 167 src/lua/ldblib.cpp     settabss(L, "short_src", ar.short_src);</span>
<span class='curline'><a href='../S/1222.html#L168'>L</a>                 168 src/lua/ldblib.cpp     settabsi(L, "linedefined", ar.linedefined);</span>
<span class='curline'><a href='../S/1222.html#L169'>L</a>                 169 src/lua/ldblib.cpp     settabsi(L, "lastlinedefined", ar.lastlinedefined);</span>
<span class='curline'><a href='../S/1222.html#L170'>L</a>                 170 src/lua/ldblib.cpp     settabss(L, "what", ar.what);</span>
<span class='curline'><a href='../S/1222.html#L173'>L</a>                 173 src/lua/ldblib.cpp     settabsi(L, "currentline", ar.currentline);</span>
<span class='curline'><a href='../S/1222.html#L175'>L</a>                 175 src/lua/ldblib.cpp     settabsi(L, "nups", ar.nups);</span>
<span class='curline'><a href='../S/1222.html#L176'>L</a>                 176 src/lua/ldblib.cpp     settabsi(L, "nparams", ar.nparams);</span>
<span class='curline'><a href='../S/1222.html#L177'>L</a>                 177 src/lua/ldblib.cpp     settabsb(L, "isvararg", ar.isvararg);</span>
<span class='curline'><a href='../S/1222.html#L180'>L</a>                 180 src/lua/ldblib.cpp     settabss(L, "name", ar.name);</span>
<span class='curline'><a href='../S/1222.html#L181'>L</a>                 181 src/lua/ldblib.cpp     settabss(L, "namewhat", ar.namewhat);</span>
<span class='curline'><a href='../S/1222.html#L184'>L</a>                 184 src/lua/ldblib.cpp     settabsb(L, "istailcall", ar.istailcall);</span>
<span class='curline'><a href='../S/1222.html#L186'>L</a>                 186 src/lua/ldblib.cpp     treatstackoption(L, L1, "activelines");</span>
<span class='curline'><a href='../S/1222.html#L188'>L</a>                 188 src/lua/ldblib.cpp     treatstackoption(L, L1, "func");</span>
<span class='curline'><a href='../S/1222.html#L193'>L</a>                 193 src/lua/ldblib.cpp static int db_getlocal (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L195'>L</a>                 195 src/lua/ldblib.cpp   lua_State *L1 = getthread(L, &amp;arg);</span>
<span class='curline'><a href='../S/1222.html#L198'>L</a>                 198 src/lua/ldblib.cpp   int nvar = (int)luaL_checkinteger(L, arg + 2);  /* local-variable index */</span>
<span class='curline'><a href='../S/1222.html#L199'>L</a>                 199 src/lua/ldblib.cpp   if (lua_isfunction(L, arg + 1)) {  /* function argument? */</span>
<span class='curline'><a href='../S/1222.html#L200'>L</a>                 200 src/lua/ldblib.cpp     lua_pushvalue(L, arg + 1);  /* push function */</span>
<span class='curline'><a href='../S/1222.html#L201'>L</a>                 201 src/lua/ldblib.cpp     lua_pushstring(L, lua_getlocal(L, NULL, nvar));  /* push local name */</span>
<span class='curline'><a href='../S/1222.html#L205'>L</a>                 205 src/lua/ldblib.cpp     int level = (int)luaL_checkinteger(L, arg + 1);</span>
<span class='curline'><a href='../S/1222.html#L207'>L</a>                 207 src/lua/ldblib.cpp       return luaL_argerror(L, arg+1, "level out of range");</span>
<span class='curline'><a href='../S/1222.html#L208'>L</a>                 208 src/lua/ldblib.cpp     checkstack(L, L1, 1);</span>
<span class='curline'><a href='../S/1222.html#L211'>L</a>                 211 src/lua/ldblib.cpp       lua_xmove(L1, L, 1);  /* move local value */</span>
<span class='curline'><a href='../S/1222.html#L212'>L</a>                 212 src/lua/ldblib.cpp       lua_pushstring(L, name);  /* push name */</span>
<span class='curline'><a href='../S/1222.html#L213'>L</a>                 213 src/lua/ldblib.cpp       lua_rotate(L, -2, 1);  /* re-order */</span>
<span class='curline'><a href='../S/1222.html#L217'>L</a>                 217 src/lua/ldblib.cpp       lua_pushnil(L);  /* no name (nor value) */</span>
<span class='curline'><a href='../S/1222.html#L224'>L</a>                 224 src/lua/ldblib.cpp static int db_setlocal (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L227'>L</a>                 227 src/lua/ldblib.cpp   lua_State *L1 = getthread(L, &amp;arg);</span>
<span class='curline'><a href='../S/1222.html#L229'>L</a>                 229 src/lua/ldblib.cpp   int level = (int)luaL_checkinteger(L, arg + 1);</span>
<span class='curline'><a href='../S/1222.html#L230'>L</a>                 230 src/lua/ldblib.cpp   int nvar = (int)luaL_checkinteger(L, arg + 2);</span>
<span class='curline'><a href='../S/1222.html#L232'>L</a>                 232 src/lua/ldblib.cpp     return luaL_argerror(L, arg+1, "level out of range");</span>
<span class='curline'><a href='../S/1222.html#L233'>L</a>                 233 src/lua/ldblib.cpp   luaL_checkany(L, arg+3);</span>
<span class='curline'><a href='../S/1222.html#L234'>L</a>                 234 src/lua/ldblib.cpp   lua_settop(L, arg+3);</span>
<span class='curline'><a href='../S/1222.html#L235'>L</a>                 235 src/lua/ldblib.cpp   checkstack(L, L1, 1);</span>
<span class='curline'><a href='../S/1222.html#L236'>L</a>                 236 src/lua/ldblib.cpp   lua_xmove(L, L1, 1);</span>
<span class='curline'><a href='../S/1222.html#L240'>L</a>                 240 src/lua/ldblib.cpp   lua_pushstring(L, name);</span>
<span class='curline'><a href='../S/1222.html#L248'>L</a>                 248 src/lua/ldblib.cpp static int auxupvalue (lua_State *L, int get) {</span>
<span class='curline'><a href='../S/1222.html#L250'>L</a>                 250 src/lua/ldblib.cpp   int n = (int)luaL_checkinteger(L, 2);  /* upvalue index */</span>
<span class='curline'><a href='../S/1222.html#L251'>L</a>                 251 src/lua/ldblib.cpp   luaL_checktype(L, 1, LUA_TFUNCTION);  /* closure */</span>
<span class='curline'><a href='../S/1222.html#L252'>L</a>                 252 src/lua/ldblib.cpp   name = get ? lua_getupvalue(L, 1, n) : lua_setupvalue(L, 1, n);</span>
<span class='curline'><a href='../S/1222.html#L254'>L</a>                 254 src/lua/ldblib.cpp   lua_pushstring(L, name);</span>
<span class='curline'><a href='../S/1222.html#L255'>L</a>                 255 src/lua/ldblib.cpp   lua_insert(L, -(get+1));  /* no-op if get is false */</span>
<span class='curline'><a href='../S/1222.html#L260'>L</a>                 260 src/lua/ldblib.cpp static int db_getupvalue (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L261'>L</a>                 261 src/lua/ldblib.cpp   return auxupvalue(L, 1);</span>
<span class='curline'><a href='../S/1222.html#L265'>L</a>                 265 src/lua/ldblib.cpp static int db_setupvalue (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L266'>L</a>                 266 src/lua/ldblib.cpp   luaL_checkany(L, 3);</span>
<span class='curline'><a href='../S/1222.html#L267'>L</a>                 267 src/lua/ldblib.cpp   return auxupvalue(L, 0);</span>
<span class='curline'><a href='../S/1222.html#L275'>L</a>                 275 src/lua/ldblib.cpp static int checkupval (lua_State *L, int argf, int argnup) {</span>
<span class='curline'><a href='../S/1222.html#L276'>L</a>                 276 src/lua/ldblib.cpp   int nup = (int)luaL_checkinteger(L, argnup);  /* upvalue index */</span>
<span class='curline'><a href='../S/1222.html#L277'>L</a>                 277 src/lua/ldblib.cpp   luaL_checktype(L, argf, LUA_TFUNCTION);  /* closure */</span>
<span class='curline'><a href='../S/1222.html#L278'>L</a>                 278 src/lua/ldblib.cpp   luaL_argcheck(L, (lua_getupvalue(L, argf, nup) != NULL), argnup,</span>
<span class='curline'><a href='../S/1222.html#L284'>L</a>                 284 src/lua/ldblib.cpp static int db_upvalueid (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L285'>L</a>                 285 src/lua/ldblib.cpp   int n = checkupval(L, 1, 2);</span>
<span class='curline'><a href='../S/1222.html#L286'>L</a>                 286 src/lua/ldblib.cpp   lua_pushlightuserdata(L, lua_upvalueid(L, 1, n));</span>
<span class='curline'><a href='../S/1222.html#L291'>L</a>                 291 src/lua/ldblib.cpp static int db_upvaluejoin (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L292'>L</a>                 292 src/lua/ldblib.cpp   int n1 = checkupval(L, 1, 2);</span>
<span class='curline'><a href='../S/1222.html#L293'>L</a>                 293 src/lua/ldblib.cpp   int n2 = checkupval(L, 3, 4);</span>
<span class='curline'><a href='../S/1222.html#L294'>L</a>                 294 src/lua/ldblib.cpp   luaL_argcheck(L, !lua_iscfunction(L, 1), 1, "Lua function expected");</span>
<span class='curline'><a href='../S/1222.html#L295'>L</a>                 295 src/lua/ldblib.cpp   luaL_argcheck(L, !lua_iscfunction(L, 3), 3, "Lua function expected");</span>
<span class='curline'><a href='../S/1222.html#L296'>L</a>                 296 src/lua/ldblib.cpp   lua_upvaluejoin(L, 1, n1, 3, n2);</span>
<span class='curline'><a href='../S/1222.html#L305'>L</a>                 305 src/lua/ldblib.cpp static void hookf (lua_State *L, lua_Debug *ar) {</span>
<span class='curline'><a href='../S/1222.html#L308'>L</a>                 308 src/lua/ldblib.cpp   lua_rawgetp(L, LUA_REGISTRYINDEX, &amp;HOOKKEY);</span>
<span class='curline'><a href='../S/1222.html#L309'>L</a>                 309 src/lua/ldblib.cpp   lua_pushthread(L);</span>
<span class='curline'><a href='../S/1222.html#L310'>L</a>                 310 src/lua/ldblib.cpp   if (lua_rawget(L, -2) == LUA_TFUNCTION) {  /* is there a hook function? */</span>
<span class='curline'><a href='../S/1222.html#L311'>L</a>                 311 src/lua/ldblib.cpp     lua_pushstring(L, hooknames[(int)ar-&gt;event]);  /* push event name */</span>
<span class='curline'><a href='../S/1222.html#L313'>L</a>                 313 src/lua/ldblib.cpp       lua_pushinteger(L, ar-&gt;currentline);  /* push current line */</span>
<span class='curline'><a href='../S/1222.html#L314'>L</a>                 314 src/lua/ldblib.cpp     else lua_pushnil(L);</span>
<span class='curline'><a href='../S/1222.html#L315'>L</a>                 315 src/lua/ldblib.cpp     lua_assert(lua_getinfo(L, "lS", ar));</span>
<span class='curline'><a href='../S/1222.html#L316'>L</a>                 316 src/lua/ldblib.cpp     lua_call(L, 2, 0);  /* call hook function */</span>
<span class='curline'><a href='../S/1222.html#L347'>L</a>                 347 src/lua/ldblib.cpp static int db_sethook (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L350'>L</a>                 350 src/lua/ldblib.cpp   lua_State *L1 = getthread(L, &amp;arg);</span>
<span class='curline'><a href='../S/1222.html#L351'>L</a>                 351 src/lua/ldblib.cpp   if (lua_isnoneornil(L, arg+1)) {  /* no hook? */</span>
<span class='curline'><a href='../S/1222.html#L352'>L</a>                 352 src/lua/ldblib.cpp     lua_settop(L, arg+1);</span>
<span class='curline'><a href='../S/1222.html#L356'>L</a>                 356 src/lua/ldblib.cpp     const char *smask = luaL_checkstring(L, arg+2);</span>
<span class='curline'><a href='../S/1222.html#L357'>L</a>                 357 src/lua/ldblib.cpp     luaL_checktype(L, arg+1, LUA_TFUNCTION);</span>
<span class='curline'><a href='../S/1222.html#L358'>L</a>                 358 src/lua/ldblib.cpp     count = (int)luaL_optinteger(L, arg + 3, 0);</span>
<span class='curline'><a href='../S/1222.html#L361'>L</a>                 361 src/lua/ldblib.cpp   if (lua_rawgetp(L, LUA_REGISTRYINDEX, &amp;HOOKKEY) == LUA_TNIL) {</span>
<span class='curline'><a href='../S/1222.html#L362'>L</a>                 362 src/lua/ldblib.cpp     lua_createtable(L, 0, 2);  /* create a hook table */</span>
<span class='curline'><a href='../S/1222.html#L363'>L</a>                 363 src/lua/ldblib.cpp     lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/1222.html#L364'>L</a>                 364 src/lua/ldblib.cpp     lua_rawsetp(L, LUA_REGISTRYINDEX, &amp;HOOKKEY);  /* set it in position */</span>
<span class='curline'><a href='../S/1222.html#L365'>L</a>                 365 src/lua/ldblib.cpp     lua_pushstring(L, "k");</span>
<span class='curline'><a href='../S/1222.html#L366'>L</a>                 366 src/lua/ldblib.cpp     lua_setfield(L, -2, "__mode");  /** hooktable.__mode = "k" */</span>
<span class='curline'><a href='../S/1222.html#L367'>L</a>                 367 src/lua/ldblib.cpp     lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/1222.html#L368'>L</a>                 368 src/lua/ldblib.cpp     lua_setmetatable(L, -2);  /* setmetatable(hooktable) = hooktable */</span>
<span class='curline'><a href='../S/1222.html#L370'>L</a>                 370 src/lua/ldblib.cpp   checkstack(L, L1, 1);</span>
<span class='curline'><a href='../S/1222.html#L371'>L</a>                 371 src/lua/ldblib.cpp   lua_pushthread(L1); lua_xmove(L1, L, 1);  /* key (thread) */</span>
<span class='curline'><a href='../S/1222.html#L372'>L</a>                 372 src/lua/ldblib.cpp   lua_pushvalue(L, arg + 1);  /* value (hook function) */</span>
<span class='curline'><a href='../S/1222.html#L373'>L</a>                 373 src/lua/ldblib.cpp   lua_rawset(L, -3);  /* hooktable[L1] = new Lua hook */</span>
<span class='curline'><a href='../S/1222.html#L379'>L</a>                 379 src/lua/ldblib.cpp static int db_gethook (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L381'>L</a>                 381 src/lua/ldblib.cpp   lua_State *L1 = getthread(L, &amp;arg);</span>
<span class='curline'><a href='../S/1222.html#L386'>L</a>                 386 src/lua/ldblib.cpp     lua_pushnil(L);</span>
<span class='curline'><a href='../S/1222.html#L388'>L</a>                 388 src/lua/ldblib.cpp     lua_pushliteral(L, "external hook");</span>
<span class='curline'><a href='../S/1222.html#L390'>L</a>                 390 src/lua/ldblib.cpp     lua_rawgetp(L, LUA_REGISTRYINDEX, &amp;HOOKKEY);</span>
<span class='curline'><a href='../S/1222.html#L391'>L</a>                 391 src/lua/ldblib.cpp     checkstack(L, L1, 1);</span>
<span class='curline'><a href='../S/1222.html#L392'>L</a>                 392 src/lua/ldblib.cpp     lua_pushthread(L1); lua_xmove(L1, L, 1);</span>
<span class='curline'><a href='../S/1222.html#L393'>L</a>                 393 src/lua/ldblib.cpp     lua_rawget(L, -2);   /* 1st result = hooktable[L1] */</span>
<span class='curline'><a href='../S/1222.html#L394'>L</a>                 394 src/lua/ldblib.cpp     lua_remove(L, -2);  /* remove hook table */</span>
<span class='curline'><a href='../S/1222.html#L396'>L</a>                 396 src/lua/ldblib.cpp   lua_pushstring(L, unmakemask(mask, buff));  /* 2nd result = mask */</span>
<span class='curline'><a href='../S/1222.html#L397'>L</a>                 397 src/lua/ldblib.cpp   lua_pushinteger(L, lua_gethookcount(L1));  /* 3rd result = count */</span>
<span class='curline'><a href='../S/1222.html#L402'>L</a>                 402 src/lua/ldblib.cpp static int db_debug (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L409'>L</a>                 409 src/lua/ldblib.cpp     if (luaL_loadbuffer(L, buffer, strlen(buffer), "=(debug command)") ||</span>
<span class='curline'><a href='../S/1222.html#L410'>L</a>                 410 src/lua/ldblib.cpp         lua_pcall(L, 0, 0, 0))</span>
<span class='curline'><a href='../S/1222.html#L411'>L</a>                 411 src/lua/ldblib.cpp       lua_writestringerror("%s\n", lua_tostring(L, -1));</span>
<span class='curline'><a href='../S/1222.html#L412'>L</a>                 412 src/lua/ldblib.cpp     lua_settop(L, 0);  /* remove eventual returns */</span>
<span class='curline'><a href='../S/1222.html#L417'>L</a>                 417 src/lua/ldblib.cpp static int db_traceback (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L419'>L</a>                 419 src/lua/ldblib.cpp   lua_State *L1 = getthread(L, &amp;arg);</span>
<span class='curline'><a href='../S/1222.html#L420'>L</a>                 420 src/lua/ldblib.cpp   const char *msg = lua_tostring(L, arg + 1);</span>
<span class='curline'><a href='../S/1222.html#L421'>L</a>                 421 src/lua/ldblib.cpp   if (msg == NULL &amp;&amp; !lua_isnoneornil(L, arg + 1))  /* non-string 'msg'? */</span>
<span class='curline'><a href='../S/1222.html#L422'>L</a>                 422 src/lua/ldblib.cpp     lua_pushvalue(L, arg + 1);  /* return it untouched */</span>
<span class='curline'><a href='../S/1222.html#L424'>L</a>                 424 src/lua/ldblib.cpp     int level = (int)luaL_optinteger(L, arg + 2, (L == L1) ? 1 : 0);</span>
<span class='curline'><a href='../S/1222.html#L425'>L</a>                 425 src/lua/ldblib.cpp     luaL_traceback(L, L1, msg, level);</span>
<span class='curline'><a href='../S/1222.html#L452'>L</a>                 452 src/lua/ldblib.cpp LUAMOD_API int luaopen_debug (lua_State *L) {</span>
<span class='curline'><a href='../S/1222.html#L453'>L</a>                 453 src/lua/ldblib.cpp   luaL_newlib(L, dblib);</span>
<span class='curline'><a href='../S/1211.html#L41'>L</a>                  41 src/lua/ldebug.cpp static const char *funcnamefromcode (lua_State *L, CallInfo *ci,</span>
<span class='curline'><a href='../S/1211.html#L62'>L</a>                  62 src/lua/ldebug.cpp static void swapextra (lua_State *L) {</span>
<span class='curline'><a href='../S/1211.html#L63'>L</a>                  63 src/lua/ldebug.cpp   if (L-&gt;status == LUA_YIELD) {</span>
<span class='curline'><a href='../S/1211.html#L64'>L</a>                  64 src/lua/ldebug.cpp     CallInfo *ci = L-&gt;ci;  /* get function that yielded */</span>
<span class='curline'><a href='../S/1211.html#L66'>L</a>                  66 src/lua/ldebug.cpp     ci-&gt;func = restorestack(L, ci-&gt;extra);</span>
<span class='curline'><a href='../S/1211.html#L67'>L</a>                  67 src/lua/ldebug.cpp     ci-&gt;extra = savestack(L, temp);</span>
<span class='curline'><a href='../S/1211.html#L81'>L</a>                  81 src/lua/ldebug.cpp LUA_API void lua_sethook (lua_State *L, lua_Hook func, int mask, int count) {</span>
<span class='curline'><a href='../S/1211.html#L86'>L</a>                  86 src/lua/ldebug.cpp   if (isLua(L-&gt;ci))</span>
<span class='curline'><a href='../S/1211.html#L87'>L</a>                  87 src/lua/ldebug.cpp     L-&gt;oldpc = L-&gt;ci-&gt;u.l.savedpc;</span>
<span class='curline'><a href='../S/1211.html#L88'>L</a>                  88 src/lua/ldebug.cpp   L-&gt;hook = func;</span>
<span class='curline'><a href='../S/1211.html#L89'>L</a>                  89 src/lua/ldebug.cpp   L-&gt;basehookcount = count;</span>
<span class='curline'><a href='../S/1211.html#L90'>L</a>                  90 src/lua/ldebug.cpp   resethookcount(L);</span>
<span class='curline'><a href='../S/1211.html#L91'>L</a>                  91 src/lua/ldebug.cpp   L-&gt;hookmask = cast_byte(mask);</span>
<span class='curline'><a href='../S/1211.html#L95'>L</a>                  95 src/lua/ldebug.cpp LUA_API lua_Hook lua_gethook (lua_State *L) {</span>
<span class='curline'><a href='../S/1211.html#L96'>L</a>                  96 src/lua/ldebug.cpp   return L-&gt;hook;</span>
<span class='curline'><a href='../S/1211.html#L100'>L</a>                 100 src/lua/ldebug.cpp LUA_API int lua_gethookmask (lua_State *L) {</span>
<span class='curline'><a href='../S/1211.html#L101'>L</a>                 101 src/lua/ldebug.cpp   return L-&gt;hookmask;</span>
<span class='curline'><a href='../S/1211.html#L105'>L</a>                 105 src/lua/ldebug.cpp LUA_API int lua_gethookcount (lua_State *L) {</span>
<span class='curline'><a href='../S/1211.html#L106'>L</a>                 106 src/lua/ldebug.cpp   return L-&gt;basehookcount;</span>
<span class='curline'><a href='../S/1211.html#L110'>L</a>                 110 src/lua/ldebug.cpp LUA_API int lua_getstack (lua_State *L, int level, lua_Debug *ar) {</span>
<span class='curline'><a href='../S/1211.html#L114'>L</a>                 114 src/lua/ldebug.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1211.html#L115'>L</a>                 115 src/lua/ldebug.cpp   for (ci = L-&gt;ci; level &gt; 0 &amp;&amp; ci != &amp;L-&gt;base_ci; ci = ci-&gt;previous)</span>
<span class='curline'><a href='../S/1211.html#L117'>L</a>                 117 src/lua/ldebug.cpp   if (level == 0 &amp;&amp; ci != &amp;L-&gt;base_ci) {  /* level found? */</span>
<span class='curline'><a href='../S/1211.html#L122'>L</a>                 122 src/lua/ldebug.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1211.html#L145'>L</a>                 145 src/lua/ldebug.cpp static const char *findlocal (lua_State *L, CallInfo *ci, int n,</span>
<span class='curline'><a href='../S/1211.html#L160'>L</a>                 160 src/lua/ldebug.cpp     StkId limit = (ci == L-&gt;ci) ? L-&gt;top : ci-&gt;next-&gt;func;</span>
<span class='curline'><a href='../S/1211.html#L171'>L</a>                 171 src/lua/ldebug.cpp LUA_API const char *lua_getlocal (lua_State *L, const lua_Debug *ar, int n) {</span>
<span class='curline'><a href='../S/1211.html#L173'>L</a>                 173 src/lua/ldebug.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1211.html#L174'>L</a>                 174 src/lua/ldebug.cpp   swapextra(L);</span>
<span class='curline'><a href='../S/1211.html#L176'>L</a>                 176 src/lua/ldebug.cpp     if (!isLfunction(L-&gt;top - 1))  /* not a Lua function? */</span>
<span class='curline'><a href='../S/1211.html#L179'>L</a>                 179 src/lua/ldebug.cpp       name = luaF_getlocalname(clLvalue(L-&gt;top - 1)-&gt;p, n, 0);</span>
<span class='curline'><a href='../S/1211.html#L183'>L</a>                 183 src/lua/ldebug.cpp     name = findlocal(L, ar-&gt;i_ci, n, &amp;pos);</span>
<span class='curline'><a href='../S/1211.html#L185'>L</a>                 185 src/lua/ldebug.cpp       setobj2s(L, L-&gt;top, pos);</span>
<span class='curline'><a href='../S/1211.html#L186'>L</a>                 186 src/lua/ldebug.cpp       api_incr_top(L);</span>
<span class='curline'><a href='../S/1211.html#L189'>L</a>                 189 src/lua/ldebug.cpp   swapextra(L);</span>
<span class='curline'><a href='../S/1211.html#L190'>L</a>                 190 src/lua/ldebug.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1211.html#L195'>L</a>                 195 src/lua/ldebug.cpp LUA_API const char *lua_setlocal (lua_State *L, const lua_Debug *ar, int n) {</span>
<span class='curline'><a href='../S/1211.html#L198'>L</a>                 198 src/lua/ldebug.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1211.html#L199'>L</a>                 199 src/lua/ldebug.cpp   swapextra(L);</span>
<span class='curline'><a href='../S/1211.html#L200'>L</a>                 200 src/lua/ldebug.cpp   name = findlocal(L, ar-&gt;i_ci, n, &amp;pos);</span>
<span class='curline'><a href='../S/1211.html#L202'>L</a>                 202 src/lua/ldebug.cpp     setobjs2s(L, pos, L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1211.html#L203'>L</a>                 203 src/lua/ldebug.cpp     L-&gt;top--;  /* pop value */</span>
<span class='curline'><a href='../S/1211.html#L205'>L</a>                 205 src/lua/ldebug.cpp   swapextra(L);</span>
<span class='curline'><a href='../S/1211.html#L206'>L</a>                 206 src/lua/ldebug.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1211.html#L229'>L</a>                 229 src/lua/ldebug.cpp static void collectvalidlines (lua_State *L, Closure *f) {</span>
<span class='curline'><a href='../S/1211.html#L231'>L</a>                 231 src/lua/ldebug.cpp     setnilvalue(L-&gt;top);</span>
<span class='curline'><a href='../S/1211.html#L232'>L</a>                 232 src/lua/ldebug.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1211.html#L238'>L</a>                 238 src/lua/ldebug.cpp     Table *t = luaH_new(L);  /* new table to store active lines */</span>
<span class='curline'><a href='../S/1211.html#L239'>L</a>                 239 src/lua/ldebug.cpp     sethvalue(L, L-&gt;top, t);  /* push it on stack */</span>
<span class='curline'><a href='../S/1211.html#L240'>L</a>                 240 src/lua/ldebug.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1211.html#L243'>L</a>                 243 src/lua/ldebug.cpp       luaH_setint(L, t, lineinfo[i], &amp;v);  /* table[line] = true */</span>
<span class='curline'><a href='../S/1211.html#L248'>L</a>                 248 src/lua/ldebug.cpp static const char *getfuncname (lua_State *L, CallInfo *ci, const char **name) {</span>
<span class='curline'><a href='../S/1211.html#L257'>L</a>                 257 src/lua/ldebug.cpp     return funcnamefromcode(L, ci-&gt;previous, name);</span>
<span class='curline'><a href='../S/1211.html#L262'>L</a>                 262 src/lua/ldebug.cpp static int auxgetinfo (lua_State *L, const char *what, lua_Debug *ar,</span>
<span class='curline'><a href='../S/1211.html#L292'>L</a>                 292 src/lua/ldebug.cpp         ar-&gt;namewhat = getfuncname(L, ci, &amp;ar-&gt;name);</span>
<span class='curline'><a href='../S/1211.html#L309'>L</a>                 309 src/lua/ldebug.cpp LUA_API int lua_getinfo (lua_State *L, const char *what, lua_Debug *ar) {</span>
<span class='curline'><a href='../S/1211.html#L314'>L</a>                 314 src/lua/ldebug.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1211.html#L315'>L</a>                 315 src/lua/ldebug.cpp   swapextra(L);</span>
<span class='curline'><a href='../S/1211.html#L318'>L</a>                 318 src/lua/ldebug.cpp     func = L-&gt;top - 1;</span>
<span class='curline'><a href='../S/1211.html#L319'>L</a>                 319 src/lua/ldebug.cpp     api_check(L, ttisfunction(func), "function expected");</span>
<span class='curline'><a href='../S/1211.html#L321'>L</a>                 321 src/lua/ldebug.cpp     L-&gt;top--;  /* pop function */</span>
<span class='curline'><a href='../S/1211.html#L329'>L</a>                 329 src/lua/ldebug.cpp   status = auxgetinfo(L, what, ar, cl, ci);</span>
<span class='curline'><a href='../S/1211.html#L331'>L</a>                 331 src/lua/ldebug.cpp     setobjs2s(L, L-&gt;top, func);</span>
<span class='curline'><a href='../S/1211.html#L332'>L</a>                 332 src/lua/ldebug.cpp     api_incr_top(L);</span>
<span class='curline'><a href='../S/1211.html#L334'>L</a>                 334 src/lua/ldebug.cpp   swapextra(L);  /* correct before option 'L', which can raise a mem. error */</span>
<span class='curline'><a href='../S/1211.html#L336'>L</a>                 336 src/lua/ldebug.cpp     collectvalidlines(L, cl);</span>
<span class='curline'><a href='../S/1211.html#L337'>L</a>                 337 src/lua/ldebug.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1211.html#L491'>L</a>                 491 src/lua/ldebug.cpp static const char *funcnamefromcode (lua_State *L, CallInfo *ci,</span>
<span class='curline'><a href='../S/1211.html#L533'>L</a>                 533 src/lua/ldebug.cpp   *name = getstr(G(L)-&gt;tmname[tm]);</span>
<span class='curline'><a href='../S/1211.html#L571'>L</a>                 571 src/lua/ldebug.cpp static const char *varinfo (lua_State *L, const TValue *o) {</span>
<span class='curline'><a href='../S/1211.html#L573'>L</a>                 573 src/lua/ldebug.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1211.html#L581'>L</a>                 581 src/lua/ldebug.cpp   return (kind) ? luaO_pushfstring(L, " (%s '%s')", kind, name) : "";</span>
<span class='curline'><a href='../S/1211.html#L585'>L</a>                 585 src/lua/ldebug.cpp l_noret luaG_typeerror (lua_State *L, const TValue *o, const char *op) {</span>
<span class='curline'><a href='../S/1211.html#L586'>L</a>                 586 src/lua/ldebug.cpp   const char *t = luaT_objtypename(L, o);</span>
<span class='curline'><a href='../S/1211.html#L587'>L</a>                 587 src/lua/ldebug.cpp   luaG_runerror(L, "attempt to %s a %s value%s", op, t, varinfo(L, o));</span>
<span class='curline'><a href='../S/1211.html#L591'>L</a>                 591 src/lua/ldebug.cpp l_noret luaG_concaterror (lua_State *L, const TValue *p1, const TValue *p2) {</span>
<span class='curline'><a href='../S/1211.html#L593'>L</a>                 593 src/lua/ldebug.cpp   luaG_typeerror(L, p1, "concatenate");</span>
<span class='curline'><a href='../S/1211.html#L597'>L</a>                 597 src/lua/ldebug.cpp l_noret luaG_opinterror (lua_State *L, const TValue *p1,</span>
<span class='curline'><a href='../S/1211.html#L602'>L</a>                 602 src/lua/ldebug.cpp   luaG_typeerror(L, p2, msg);</span>
<span class='curline'><a href='../S/1211.html#L609'>L</a>                 609 src/lua/ldebug.cpp l_noret luaG_tointerror (lua_State *L, const TValue *p1, const TValue *p2) {</span>
<span class='curline'><a href='../S/1211.html#L613'>L</a>                 613 src/lua/ldebug.cpp   luaG_runerror(L, "number%s has no integer representation", varinfo(L, p2));</span>
<span class='curline'><a href='../S/1211.html#L617'>L</a>                 617 src/lua/ldebug.cpp l_noret luaG_ordererror (lua_State *L, const TValue *p1, const TValue *p2) {</span>
<span class='curline'><a href='../S/1211.html#L618'>L</a>                 618 src/lua/ldebug.cpp   const char *t1 = luaT_objtypename(L, p1);</span>
<span class='curline'><a href='../S/1211.html#L619'>L</a>                 619 src/lua/ldebug.cpp   const char *t2 = luaT_objtypename(L, p2);</span>
<span class='curline'><a href='../S/1211.html#L621'>L</a>                 621 src/lua/ldebug.cpp     luaG_runerror(L, "attempt to compare two %s values", t1);</span>
<span class='curline'><a href='../S/1211.html#L623'>L</a>                 623 src/lua/ldebug.cpp     luaG_runerror(L, "attempt to compare %s with %s", t1, t2);</span>
<span class='curline'><a href='../S/1211.html#L628'>L</a>                 628 src/lua/ldebug.cpp const char *luaG_addinfo (lua_State *L, const char *msg, TString *src,</span>
<span class='curline'><a href='../S/1211.html#L636'>L</a>                 636 src/lua/ldebug.cpp   return luaO_pushfstring(L, "%s:%d: %s", buff, line, msg);</span>
<span class='curline'><a href='../S/1211.html#L640'>L</a>                 640 src/lua/ldebug.cpp l_noret luaG_errormsg (lua_State *L) {</span>
<span class='curline'><a href='../S/1211.html#L641'>L</a>                 641 src/lua/ldebug.cpp   if (L-&gt;errfunc != 0) {  /* is there an error handling function? */</span>
<span class='curline'><a href='../S/1211.html#L642'>L</a>                 642 src/lua/ldebug.cpp     StkId errfunc = restorestack(L, L-&gt;errfunc);</span>
<span class='curline'><a href='../S/1211.html#L643'>L</a>                 643 src/lua/ldebug.cpp     setobjs2s(L, L-&gt;top, L-&gt;top - 1);  /* move argument */</span>
<span class='curline'><a href='../S/1211.html#L644'>L</a>                 644 src/lua/ldebug.cpp     setobjs2s(L, L-&gt;top - 1, errfunc);  /* push function */</span>
<span class='curline'><a href='../S/1211.html#L645'>L</a>                 645 src/lua/ldebug.cpp     L-&gt;top++;  /* assume EXTRA_STACK */</span>
<span class='curline'><a href='../S/1211.html#L646'>L</a>                 646 src/lua/ldebug.cpp     luaD_callnoyield(L, L-&gt;top - 2, 1);  /* call it */</span>
<span class='curline'><a href='../S/1211.html#L648'>L</a>                 648 src/lua/ldebug.cpp   luaD_throw(L, LUA_ERRRUN);</span>
<span class='curline'><a href='../S/1211.html#L652'>L</a>                 652 src/lua/ldebug.cpp l_noret luaG_runerror (lua_State *L, const char *fmt, ...) {</span>
<span class='curline'><a href='../S/1211.html#L653'>L</a>                 653 src/lua/ldebug.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1211.html#L656'>L</a>                 656 src/lua/ldebug.cpp   luaC_checkGC(L);  /* error message uses memory */</span>
<span class='curline'><a href='../S/1211.html#L658'>L</a>                 658 src/lua/ldebug.cpp   msg = luaO_pushvfstring(L, fmt, argp);  /* format message */</span>
<span class='curline'><a href='../S/1211.html#L661'>L</a>                 661 src/lua/ldebug.cpp     luaG_addinfo(L, msg, ci_func(ci)-&gt;p-&gt;source, currentline(ci));</span>
<span class='curline'><a href='../S/1211.html#L662'>L</a>                 662 src/lua/ldebug.cpp   luaG_errormsg(L);</span>
<span class='curline'><a href='../S/1211.html#L666'>L</a>                 666 src/lua/ldebug.cpp void luaG_traceexec (lua_State *L) {</span>
<span class='curline'><a href='../S/1211.html#L667'>L</a>                 667 src/lua/ldebug.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1211.html#L668'>L</a>                 668 src/lua/ldebug.cpp   lu_byte mask = L-&gt;hookmask;</span>
<span class='curline'><a href='../S/1211.html#L669'>L</a>                 669 src/lua/ldebug.cpp   int counthook = (--L-&gt;hookcount == 0 &amp;&amp; (mask &amp; LUA_MASKCOUNT));</span>
<span class='curline'><a href='../S/1211.html#L671'>L</a>                 671 src/lua/ldebug.cpp     resethookcount(L);  /* reset count */</span>
<span class='curline'><a href='../S/1211.html#L679'>L</a>                 679 src/lua/ldebug.cpp     luaD_hook(L, LUA_HOOKCOUNT, -1);  /* call count hook */</span>
<span class='curline'><a href='../S/1211.html#L685'>L</a>                 685 src/lua/ldebug.cpp         ci-&gt;u.l.savedpc &lt;= L-&gt;oldpc ||  /* when jump back (loop), or when */</span>
<span class='curline'><a href='../S/1211.html#L686'>L</a>                 686 src/lua/ldebug.cpp         newline != getfuncline(p, pcRel(L-&gt;oldpc, p)))  /* enter a new line */</span>
<span class='curline'><a href='../S/1211.html#L687'>L</a>                 687 src/lua/ldebug.cpp       luaD_hook(L, LUA_HOOKLINE, newline);  /* call line hook */</span>
<span class='curline'><a href='../S/1211.html#L689'>L</a>                 689 src/lua/ldebug.cpp   L-&gt;oldpc = ci-&gt;u.l.savedpc;</span>
<span class='curline'><a href='../S/1211.html#L690'>L</a>                 690 src/lua/ldebug.cpp   if (L-&gt;status == LUA_YIELD) {  /* did hook yield? */</span>
<span class='curline'><a href='../S/1211.html#L692'>L</a>                 692 src/lua/ldebug.cpp       L-&gt;hookcount = 1;  /* undo decrement to zero */</span>
<span class='curline'><a href='../S/1211.html#L695'>L</a>                 695 src/lua/ldebug.cpp     ci-&gt;func = L-&gt;top - 1;  /* protect stack below results */</span>
<span class='curline'><a href='../S/1211.html#L696'>L</a>                 696 src/lua/ldebug.cpp     luaD_throw(L, LUA_YIELD);</span>
<span class='curline'><a href='../S/1217.html#L18'>L</a>                  18 src/lua/ldebug.h #define resethookcount(L)	(L-&gt;hookcount = L-&gt;basehookcount)</span>
<span class='curline'><a href='../S/1217.html#L21'>L</a>                  21 src/lua/ldebug.h LUAI_FUNC l_noret luaG_typeerror (lua_State *L, const TValue *o,</span>
<span class='curline'><a href='../S/1217.html#L23'>L</a>                  23 src/lua/ldebug.h LUAI_FUNC l_noret luaG_concaterror (lua_State *L, const TValue *p1,</span>
<span class='curline'><a href='../S/1217.html#L25'>L</a>                  25 src/lua/ldebug.h LUAI_FUNC l_noret luaG_opinterror (lua_State *L, const TValue *p1,</span>
<span class='curline'><a href='../S/1217.html#L28'>L</a>                  28 src/lua/ldebug.h LUAI_FUNC l_noret luaG_tointerror (lua_State *L, const TValue *p1,</span>
<span class='curline'><a href='../S/1217.html#L30'>L</a>                  30 src/lua/ldebug.h LUAI_FUNC l_noret luaG_ordererror (lua_State *L, const TValue *p1,</span>
<span class='curline'><a href='../S/1217.html#L32'>L</a>                  32 src/lua/ldebug.h LUAI_FUNC l_noret luaG_runerror (lua_State *L, const char *fmt, ...);</span>
<span class='curline'><a href='../S/1217.html#L33'>L</a>                  33 src/lua/ldebug.h LUAI_FUNC const char *luaG_addinfo (lua_State *L, const char *msg,</span>
<span class='curline'><a href='../S/1217.html#L35'>L</a>                  35 src/lua/ldebug.h LUAI_FUNC l_noret luaG_errormsg (lua_State *L);</span>
<span class='curline'><a href='../S/1217.html#L36'>L</a>                  36 src/lua/ldebug.h LUAI_FUNC void luaG_traceexec (lua_State *L);</span>
<span class='curline'><a href='../S/1214.html#L58'>L</a>                  58 src/lua/ldo.cpp #define LUAI_THROW(L,c)		throw(c)</span>
<span class='curline'><a href='../S/1214.html#L59'>L</a>                  59 src/lua/ldo.cpp #define LUAI_TRY(L,c,a) \</span>
<span class='curline'><a href='../S/1214.html#L66'>L</a>                  66 src/lua/ldo.cpp #define LUAI_THROW(L,c)		_longjmp((c)-&gt;b, 1)</span>
<span class='curline'><a href='../S/1214.html#L67'>L</a>                  67 src/lua/ldo.cpp #define LUAI_TRY(L,c,a)		if (_setjmp((c)-&gt;b) == 0) { a }</span>
<span class='curline'><a href='../S/1214.html#L73'>L</a>                  73 src/lua/ldo.cpp #define LUAI_THROW(L,c)		longjmp((c)-&gt;b, 1)</span>
<span class='curline'><a href='../S/1214.html#L74'>L</a>                  74 src/lua/ldo.cpp #define LUAI_TRY(L,c,a)		if (setjmp((c)-&gt;b) == 0) { a }</span>
<span class='curline'><a href='../S/1214.html#L91'>L</a>                  91 src/lua/ldo.cpp static void seterrorobj (lua_State *L, int errcode, StkId oldtop) {</span>
<span class='curline'><a href='../S/1214.html#L94'>L</a>                  94 src/lua/ldo.cpp       setsvalue2s(L, oldtop, G(L)-&gt;memerrmsg); /* reuse preregistered msg. */</span>
<span class='curline'><a href='../S/1214.html#L98'>L</a>                  98 src/lua/ldo.cpp       setsvalue2s(L, oldtop, luaS_newliteral(L, "error in error handling"));</span>
<span class='curline'><a href='../S/1214.html#L102'>L</a>                 102 src/lua/ldo.cpp       setobjs2s(L, oldtop, L-&gt;top - 1);  /* error message on current top */</span>
<span class='curline'><a href='../S/1214.html#L106'>L</a>                 106 src/lua/ldo.cpp   L-&gt;top = oldtop + 1;</span>
<span class='curline'><a href='../S/1214.html#L110'>L</a>                 110 src/lua/ldo.cpp l_noret luaD_throw (lua_State *L, int errcode) {</span>
<span class='curline'><a href='../S/1214.html#L111'>L</a>                 111 src/lua/ldo.cpp   if (L-&gt;errorJmp) {  /* thread has an error handler? */</span>
<span class='curline'><a href='../S/1214.html#L112'>L</a>                 112 src/lua/ldo.cpp     L-&gt;errorJmp-&gt;status = errcode;  /* set status */</span>
<span class='curline'><a href='../S/1214.html#L113'>L</a>                 113 src/lua/ldo.cpp     LUAI_THROW(L, L-&gt;errorJmp);  /* jump to it */</span>
<span class='curline'><a href='../S/1214.html#L116'>L</a>                 116 src/lua/ldo.cpp     global_State *g = G(L);</span>
<span class='curline'><a href='../S/1214.html#L117'>L</a>                 117 src/lua/ldo.cpp     L-&gt;status = cast_byte(errcode);  /* mark it as dead */</span>
<span class='curline'><a href='../S/1214.html#L119'>L</a>                 119 src/lua/ldo.cpp       setobjs2s(L, g-&gt;mainthread-&gt;top++, L-&gt;top - 1);  /* copy error obj. */</span>
<span class='curline'><a href='../S/1214.html#L124'>L</a>                 124 src/lua/ldo.cpp         seterrorobj(L, errcode, L-&gt;top);  /* assume EXTRA_STACK */</span>
<span class='curline'><a href='../S/1214.html#L125'>L</a>                 125 src/lua/ldo.cpp         if (L-&gt;ci-&gt;top &lt; L-&gt;top)</span>
<span class='curline'><a href='../S/1214.html#L126'>L</a>                 126 src/lua/ldo.cpp           L-&gt;ci-&gt;top = L-&gt;top;  /* pushing msg. can break this invariant */</span>
<span class='curline'><a href='../S/1214.html#L127'>L</a>                 127 src/lua/ldo.cpp         lua_unlock(L);</span>
<span class='curline'><a href='../S/1214.html#L128'>L</a>                 128 src/lua/ldo.cpp         g-&gt;panic(L);  /* call panic function (last chance to jump out) */</span>
<span class='curline'><a href='../S/1214.html#L136'>L</a>                 136 src/lua/ldo.cpp int luaD_rawrunprotected (lua_State *L, Pfunc f, void *ud) {</span>
<span class='curline'><a href='../S/1214.html#L137'>L</a>                 137 src/lua/ldo.cpp   unsigned short oldnCcalls = L-&gt;nCcalls;</span>
<span class='curline'><a href='../S/1214.html#L140'>L</a>                 140 src/lua/ldo.cpp   lj.previous = L-&gt;errorJmp;  /* chain new error handler */</span>
<span class='curline'><a href='../S/1214.html#L141'>L</a>                 141 src/lua/ldo.cpp   L-&gt;errorJmp = &amp;lj;</span>
<span class='curline'><a href='../S/1214.html#L142'>L</a>                 142 src/lua/ldo.cpp   LUAI_TRY(L, &amp;lj,</span>
<span class='curline'><a href='../S/1214.html#L143'>L</a>                 143 src/lua/ldo.cpp     (*f)(L, ud);</span>
<span class='curline'><a href='../S/1214.html#L145'>L</a>                 145 src/lua/ldo.cpp   L-&gt;errorJmp = lj.previous;  /* restore old error handler */</span>
<span class='curline'><a href='../S/1214.html#L146'>L</a>                 146 src/lua/ldo.cpp   L-&gt;nCcalls = oldnCcalls;</span>
<span class='curline'><a href='../S/1214.html#L158'>L</a>                 158 src/lua/ldo.cpp static void correctstack (lua_State *L, TValue *oldstack) {</span>
<span class='curline'><a href='../S/1214.html#L161'>L</a>                 161 src/lua/ldo.cpp   L-&gt;top = (L-&gt;top - oldstack) + L-&gt;stack;</span>
<span class='curline'><a href='../S/1214.html#L162'>L</a>                 162 src/lua/ldo.cpp   for (up = L-&gt;openupval; up != NULL; up = up-&gt;u.open.next)</span>
<span class='curline'><a href='../S/1214.html#L163'>L</a>                 163 src/lua/ldo.cpp     up-&gt;v = (up-&gt;v - oldstack) + L-&gt;stack;</span>
<span class='curline'><a href='../S/1214.html#L164'>L</a>                 164 src/lua/ldo.cpp   for (ci = L-&gt;ci; ci != NULL; ci = ci-&gt;previous) {</span>
<span class='curline'><a href='../S/1214.html#L165'>L</a>                 165 src/lua/ldo.cpp     ci-&gt;top = (ci-&gt;top - oldstack) + L-&gt;stack;</span>
<span class='curline'><a href='../S/1214.html#L166'>L</a>                 166 src/lua/ldo.cpp     ci-&gt;func = (ci-&gt;func - oldstack) + L-&gt;stack;</span>
<span class='curline'><a href='../S/1214.html#L168'>L</a>                 168 src/lua/ldo.cpp       ci-&gt;u.l.base = (ci-&gt;u.l.base - oldstack) + L-&gt;stack;</span>
<span class='curline'><a href='../S/1214.html#L177'>L</a>                 177 src/lua/ldo.cpp void luaD_reallocstack (lua_State *L, int newsize) {</span>
<span class='curline'><a href='../S/1214.html#L178'>L</a>                 178 src/lua/ldo.cpp   TValue *oldstack = L-&gt;stack;</span>
<span class='curline'><a href='../S/1214.html#L179'>L</a>                 179 src/lua/ldo.cpp   int lim = L-&gt;stacksize;</span>
<span class='curline'><a href='../S/1214.html#L181'>L</a>                 181 src/lua/ldo.cpp   lua_assert(L-&gt;stack_last - L-&gt;stack == L-&gt;stacksize - EXTRA_STACK);</span>
<span class='curline'><a href='../S/1214.html#L182'>L</a>                 182 src/lua/ldo.cpp   luaM_reallocvector(L, L-&gt;stack, L-&gt;stacksize, newsize, TValue);</span>
<span class='curline'><a href='../S/1214.html#L184'>L</a>                 184 src/lua/ldo.cpp     setnilvalue(L-&gt;stack + lim); /* erase new segment */</span>
<span class='curline'><a href='../S/1214.html#L185'>L</a>                 185 src/lua/ldo.cpp   L-&gt;stacksize = newsize;</span>
<span class='curline'><a href='../S/1214.html#L186'>L</a>                 186 src/lua/ldo.cpp   L-&gt;stack_last = L-&gt;stack + newsize - EXTRA_STACK;</span>
<span class='curline'><a href='../S/1214.html#L187'>L</a>                 187 src/lua/ldo.cpp   correctstack(L, oldstack);</span>
<span class='curline'><a href='../S/1214.html#L191'>L</a>                 191 src/lua/ldo.cpp void luaD_growstack (lua_State *L, int n) {</span>
<span class='curline'><a href='../S/1214.html#L192'>L</a>                 192 src/lua/ldo.cpp   int size = L-&gt;stacksize;</span>
<span class='curline'><a href='../S/1214.html#L194'>L</a>                 194 src/lua/ldo.cpp     luaD_throw(L, LUA_ERRERR);</span>
<span class='curline'><a href='../S/1214.html#L196'>L</a>                 196 src/lua/ldo.cpp     int needed = cast_int(L-&gt;top - L-&gt;stack) + n + EXTRA_STACK;</span>
<span class='curline'><a href='../S/1214.html#L201'>L</a>                 201 src/lua/ldo.cpp       luaD_reallocstack(L, ERRORSTACKSIZE);</span>
<span class='curline'><a href='../S/1214.html#L202'>L</a>                 202 src/lua/ldo.cpp       luaG_runerror(L, "stack overflow");</span>
<span class='curline'><a href='../S/1214.html#L205'>L</a>                 205 src/lua/ldo.cpp       luaD_reallocstack(L, newsize);</span>
<span class='curline'><a href='../S/1214.html#L210'>L</a>                 210 src/lua/ldo.cpp static int stackinuse (lua_State *L) {</span>
<span class='curline'><a href='../S/1214.html#L212'>L</a>                 212 src/lua/ldo.cpp   StkId lim = L-&gt;top;</span>
<span class='curline'><a href='../S/1214.html#L213'>L</a>                 213 src/lua/ldo.cpp   for (ci = L-&gt;ci; ci != NULL; ci = ci-&gt;previous) {</span>
<span class='curline'><a href='../S/1214.html#L216'>L</a>                 216 src/lua/ldo.cpp   lua_assert(lim &lt;= L-&gt;stack_last);</span>
<span class='curline'><a href='../S/1214.html#L217'>L</a>                 217 src/lua/ldo.cpp   return cast_int(lim - L-&gt;stack) + 1;  /* part of stack in use */</span>
<span class='curline'><a href='../S/1214.html#L221'>L</a>                 221 src/lua/ldo.cpp void luaD_shrinkstack (lua_State *L) {</span>
<span class='curline'><a href='../S/1214.html#L222'>L</a>                 222 src/lua/ldo.cpp   int inuse = stackinuse(L);</span>
<span class='curline'><a href='../S/1214.html#L226'>L</a>                 226 src/lua/ldo.cpp   if (L-&gt;stacksize &gt; LUAI_MAXSTACK)  /* had been handling stack overflow? */</span>
<span class='curline'><a href='../S/1214.html#L227'>L</a>                 227 src/lua/ldo.cpp     luaE_freeCI(L);  /* free all CIs (list grew because of an error) */</span>
<span class='curline'><a href='../S/1214.html#L229'>L</a>                 229 src/lua/ldo.cpp     luaE_shrinkCI(L);  /* shrink list */</span>
<span class='curline'><a href='../S/1214.html#L233'>L</a>                 233 src/lua/ldo.cpp       goodsize &lt; L-&gt;stacksize)</span>
<span class='curline'><a href='../S/1214.html#L234'>L</a>                 234 src/lua/ldo.cpp     luaD_reallocstack(L, goodsize);</span>
<span class='curline'><a href='../S/1214.html#L236'>L</a>                 236 src/lua/ldo.cpp     condmovestack(L,{},{});  /* (change only for debugging) */</span>
<span class='curline'><a href='../S/1214.html#L240'>L</a>                 240 src/lua/ldo.cpp void luaD_inctop (lua_State *L) {</span>
<span class='curline'><a href='../S/1214.html#L241'>L</a>                 241 src/lua/ldo.cpp   luaD_checkstack(L, 1);</span>
<span class='curline'><a href='../S/1214.html#L242'>L</a>                 242 src/lua/ldo.cpp   L-&gt;top++;</span>
<span class='curline'><a href='../S/1214.html#L253'>L</a>                 253 src/lua/ldo.cpp void luaD_hook (lua_State *L, int event, int line) {</span>
<span class='curline'><a href='../S/1214.html#L254'>L</a>                 254 src/lua/ldo.cpp   lua_Hook hook = L-&gt;hook;</span>
<span class='curline'><a href='../S/1214.html#L255'>L</a>                 255 src/lua/ldo.cpp   if (hook &amp;&amp; L-&gt;allowhook) {  /* make sure there is a hook */</span>
<span class='curline'><a href='../S/1214.html#L256'>L</a>                 256 src/lua/ldo.cpp     CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1214.html#L257'>L</a>                 257 src/lua/ldo.cpp     ptrdiff_t top = savestack(L, L-&gt;top);</span>
<span class='curline'><a href='../S/1214.html#L258'>L</a>                 258 src/lua/ldo.cpp     ptrdiff_t ci_top = savestack(L, ci-&gt;top);</span>
<span class='curline'><a href='../S/1214.html#L263'>L</a>                 263 src/lua/ldo.cpp     luaD_checkstack(L, LUA_MINSTACK);  /* ensure minimum stack size */</span>
<span class='curline'><a href='../S/1214.html#L264'>L</a>                 264 src/lua/ldo.cpp     ci-&gt;top = L-&gt;top + LUA_MINSTACK;</span>
<span class='curline'><a href='../S/1214.html#L265'>L</a>                 265 src/lua/ldo.cpp     lua_assert(ci-&gt;top &lt;= L-&gt;stack_last);</span>
<span class='curline'><a href='../S/1214.html#L266'>L</a>                 266 src/lua/ldo.cpp     L-&gt;allowhook = 0;  /* cannot call hooks inside a hook */</span>
<span class='curline'><a href='../S/1214.html#L268'>L</a>                 268 src/lua/ldo.cpp     lua_unlock(L);</span>
<span class='curline'><a href='../S/1214.html#L269'>L</a>                 269 src/lua/ldo.cpp     (*hook)(L, &amp;ar);</span>
<span class='curline'><a href='../S/1214.html#L270'>L</a>                 270 src/lua/ldo.cpp     lua_lock(L);</span>
<span class='curline'><a href='../S/1214.html#L271'>L</a>                 271 src/lua/ldo.cpp     lua_assert(!L-&gt;allowhook);</span>
<span class='curline'><a href='../S/1214.html#L272'>L</a>                 272 src/lua/ldo.cpp     L-&gt;allowhook = 1;</span>
<span class='curline'><a href='../S/1214.html#L273'>L</a>                 273 src/lua/ldo.cpp     ci-&gt;top = restorestack(L, ci_top);</span>
<span class='curline'><a href='../S/1214.html#L274'>L</a>                 274 src/lua/ldo.cpp     L-&gt;top = restorestack(L, top);</span>
<span class='curline'><a href='../S/1214.html#L280'>L</a>                 280 src/lua/ldo.cpp static void callhook (lua_State *L, CallInfo *ci) {</span>
<span class='curline'><a href='../S/1214.html#L288'>L</a>                 288 src/lua/ldo.cpp   luaD_hook(L, hook, -1);</span>
<span class='curline'><a href='../S/1214.html#L293'>L</a>                 293 src/lua/ldo.cpp static StkId adjust_varargs (lua_State *L, Proto *p, int actual) {</span>
<span class='curline'><a href='../S/1214.html#L298'>L</a>                 298 src/lua/ldo.cpp   fixed = L-&gt;top - actual;  /* first fixed argument */</span>
<span class='curline'><a href='../S/1214.html#L299'>L</a>                 299 src/lua/ldo.cpp   base = L-&gt;top;  /* final position of first argument */</span>
<span class='curline'><a href='../S/1214.html#L301'>L</a>                 301 src/lua/ldo.cpp     setobjs2s(L, L-&gt;top++, fixed + i);</span>
<span class='curline'><a href='../S/1214.html#L305'>L</a>                 305 src/lua/ldo.cpp     setnilvalue(L-&gt;top++);  /* complete missing arguments */</span>
<span class='curline'><a href='../S/1214.html#L315'>L</a>                 315 src/lua/ldo.cpp static void tryfuncTM (lua_State *L, StkId func) {</span>
<span class='curline'><a href='../S/1214.html#L316'>L</a>                 316 src/lua/ldo.cpp   const TValue *tm = luaT_gettmbyobj(L, func, TM_CALL);</span>
<span class='curline'><a href='../S/1214.html#L319'>L</a>                 319 src/lua/ldo.cpp     luaG_typeerror(L, func, "call");</span>
<span class='curline'><a href='../S/1214.html#L321'>L</a>                 321 src/lua/ldo.cpp   for (p = L-&gt;top; p &gt; func; p--)</span>
<span class='curline'><a href='../S/1214.html#L322'>L</a>                 322 src/lua/ldo.cpp     setobjs2s(L, p, p-1);</span>
<span class='curline'><a href='../S/1214.html#L323'>L</a>                 323 src/lua/ldo.cpp   L-&gt;top++;  /* slot ensured by caller */</span>
<span class='curline'><a href='../S/1214.html#L324'>L</a>                 324 src/lua/ldo.cpp   setobj2s(L, func, tm);  /* tag method is the new function to be called */</span>
<span class='curline'><a href='../S/1214.html#L334'>L</a>                 334 src/lua/ldo.cpp static int moveresults (lua_State *L, const TValue *firstResult, StkId res,</span>
<span class='curline'><a href='../S/1214.html#L341'>L</a>                 341 src/lua/ldo.cpp       setobjs2s(L, res, firstResult);  /* move it to proper place */</span>
<span class='curline'><a href='../S/1214.html#L347'>L</a>                 347 src/lua/ldo.cpp         setobjs2s(L, res + i, firstResult + i);</span>
<span class='curline'><a href='../S/1214.html#L348'>L</a>                 348 src/lua/ldo.cpp       L-&gt;top = res + nres;</span>
<span class='curline'><a href='../S/1214.html#L355'>L</a>                 355 src/lua/ldo.cpp           setobjs2s(L, res + i, firstResult + i);</span>
<span class='curline'><a href='../S/1214.html#L359'>L</a>                 359 src/lua/ldo.cpp           setobjs2s(L, res + i, firstResult + i);</span>
<span class='curline'><a href='../S/1214.html#L366'>L</a>                 366 src/lua/ldo.cpp   L-&gt;top = res + wanted;  /* top points after the last result */</span>
<span class='curline'><a href='../S/1214.html#L376'>L</a>                 376 src/lua/ldo.cpp int luaD_poscall (lua_State *L, CallInfo *ci, StkId firstResult, int nres) {</span>
<span class='curline'><a href='../S/1214.html#L379'>L</a>                 379 src/lua/ldo.cpp   if (L-&gt;hookmask &amp; (LUA_MASKRET | LUA_MASKLINE)) {</span>
<span class='curline'><a href='../S/1214.html#L380'>L</a>                 380 src/lua/ldo.cpp     if (L-&gt;hookmask &amp; LUA_MASKRET) {</span>
<span class='curline'><a href='../S/1214.html#L381'>L</a>                 381 src/lua/ldo.cpp       ptrdiff_t fr = savestack(L, firstResult);  /* hook may change stack */</span>
<span class='curline'><a href='../S/1214.html#L382'>L</a>                 382 src/lua/ldo.cpp       luaD_hook(L, LUA_HOOKRET, -1);</span>
<span class='curline'><a href='../S/1214.html#L383'>L</a>                 383 src/lua/ldo.cpp       firstResult = restorestack(L, fr);</span>
<span class='curline'><a href='../S/1214.html#L385'>L</a>                 385 src/lua/ldo.cpp     L-&gt;oldpc = ci-&gt;previous-&gt;u.l.savedpc;  /* 'oldpc' for caller function */</span>
<span class='curline'><a href='../S/1214.html#L388'>L</a>                 388 src/lua/ldo.cpp   L-&gt;ci = ci-&gt;previous;  /* back to caller */</span>
<span class='curline'><a href='../S/1214.html#L390'>L</a>                 390 src/lua/ldo.cpp   return moveresults(L, firstResult, res, nres, wanted);</span>
<span class='curline'><a href='../S/1214.html#L395'>L</a>                 395 src/lua/ldo.cpp #define next_ci(L) (L-&gt;ci = (L-&gt;ci-&gt;next ? L-&gt;ci-&gt;next : luaE_extendCI(L)))</span>
<span class='curline'><a href='../S/1214.html#L399'>L</a>                 399 src/lua/ldo.cpp #define checkstackp(L,n,p)  \</span>
<span class='curline'><a href='../S/1214.html#L400'>L</a>                 400 src/lua/ldo.cpp   luaD_checkstackaux(L, n, \</span>
<span class='curline'><a href='../S/1214.html#L401'>L</a>                 401 src/lua/ldo.cpp     ptrdiff_t t__ = savestack(L, p);  /* save 'p' */ \</span>
<span class='curline'><a href='../S/1214.html#L402'>L</a>                 402 src/lua/ldo.cpp     luaC_checkGC(L),  /* stack grow uses memory */ \</span>
<span class='curline'><a href='../S/1214.html#L403'>L</a>                 403 src/lua/ldo.cpp     p = restorestack(L, t__))  /* 'pos' part: restore 'p' */</span>
<span class='curline'><a href='../S/1214.html#L413'>L</a>                 413 src/lua/ldo.cpp int luaD_precall (lua_State *L, StkId func, int nresults) {</span>
<span class='curline'><a href='../S/1214.html#L424'>L</a>                 424 src/lua/ldo.cpp       checkstackp(L, LUA_MINSTACK, func);  /* ensure minimum stack size */</span>
<span class='curline'><a href='../S/1214.html#L425'>L</a>                 425 src/lua/ldo.cpp       ci = next_ci(L);  /* now 'enter' new function */</span>
<span class='curline'><a href='../S/1214.html#L428'>L</a>                 428 src/lua/ldo.cpp       ci-&gt;top = L-&gt;top + LUA_MINSTACK;</span>
<span class='curline'><a href='../S/1214.html#L429'>L</a>                 429 src/lua/ldo.cpp       lua_assert(ci-&gt;top &lt;= L-&gt;stack_last);</span>
<span class='curline'><a href='../S/1214.html#L431'>L</a>                 431 src/lua/ldo.cpp       if (L-&gt;hookmask &amp; LUA_MASKCALL)</span>
<span class='curline'><a href='../S/1214.html#L432'>L</a>                 432 src/lua/ldo.cpp         luaD_hook(L, LUA_HOOKCALL, -1);</span>
<span class='curline'><a href='../S/1214.html#L433'>L</a>                 433 src/lua/ldo.cpp       lua_unlock(L);</span>
<span class='curline'><a href='../S/1214.html#L434'>L</a>                 434 src/lua/ldo.cpp       n = (*f)(L);  /* do the actual call */</span>
<span class='curline'><a href='../S/1214.html#L435'>L</a>                 435 src/lua/ldo.cpp       lua_lock(L);</span>
<span class='curline'><a href='../S/1214.html#L436'>L</a>                 436 src/lua/ldo.cpp       api_checknelems(L, n);</span>
<span class='curline'><a href='../S/1214.html#L437'>L</a>                 437 src/lua/ldo.cpp       luaD_poscall(L, ci, L-&gt;top - n, n);</span>
<span class='curline'><a href='../S/1214.html#L443'>L</a>                 443 src/lua/ldo.cpp       int n = cast_int(L-&gt;top - func) - 1;  /* number of real arguments */</span>
<span class='curline'><a href='../S/1214.html#L445'>L</a>                 445 src/lua/ldo.cpp       checkstackp(L, fsize, func);</span>
<span class='curline'><a href='../S/1214.html#L447'>L</a>                 447 src/lua/ldo.cpp         base = adjust_varargs(L, p, n);</span>
<span class='curline'><a href='../S/1214.html#L450'>L</a>                 450 src/lua/ldo.cpp           setnilvalue(L-&gt;top++);  /* complete missing arguments */</span>
<span class='curline'><a href='../S/1214.html#L453'>L</a>                 453 src/lua/ldo.cpp       ci = next_ci(L);  /* now 'enter' new function */</span>
<span class='curline'><a href='../S/1214.html#L457'>L</a>                 457 src/lua/ldo.cpp       L-&gt;top = ci-&gt;top = base + fsize;</span>
<span class='curline'><a href='../S/1214.html#L458'>L</a>                 458 src/lua/ldo.cpp       lua_assert(ci-&gt;top &lt;= L-&gt;stack_last);</span>
<span class='curline'><a href='../S/1214.html#L461'>L</a>                 461 src/lua/ldo.cpp       if (L-&gt;hookmask &amp; LUA_MASKCALL)</span>
<span class='curline'><a href='../S/1214.html#L462'>L</a>                 462 src/lua/ldo.cpp         callhook(L, ci);</span>
<span class='curline'><a href='../S/1214.html#L466'>L</a>                 466 src/lua/ldo.cpp       checkstackp(L, 1, func);  /* ensure space for metamethod */</span>
<span class='curline'><a href='../S/1214.html#L467'>L</a>                 467 src/lua/ldo.cpp       tryfuncTM(L, func);  /* try to get '__call' metamethod */</span>
<span class='curline'><a href='../S/1214.html#L468'>L</a>                 468 src/lua/ldo.cpp       return luaD_precall(L, func, nresults);  /* now it must be a function */</span>
<span class='curline'><a href='../S/1214.html#L481'>L</a>                 481 src/lua/ldo.cpp static void stackerror (lua_State *L) {</span>
<span class='curline'><a href='../S/1214.html#L482'>L</a>                 482 src/lua/ldo.cpp   if (L-&gt;nCcalls == LUAI_MAXCCALLS)</span>
<span class='curline'><a href='../S/1214.html#L483'>L</a>                 483 src/lua/ldo.cpp     luaG_runerror(L, "C stack overflow");</span>
<span class='curline'><a href='../S/1214.html#L484'>L</a>                 484 src/lua/ldo.cpp   else if (L-&gt;nCcalls &gt;= (LUAI_MAXCCALLS + (LUAI_MAXCCALLS&gt;&gt;3)))</span>
<span class='curline'><a href='../S/1214.html#L485'>L</a>                 485 src/lua/ldo.cpp     luaD_throw(L, LUA_ERRERR);  /* error while handing stack error */</span>
<span class='curline'><a href='../S/1214.html#L495'>L</a>                 495 src/lua/ldo.cpp void luaD_call (lua_State *L, StkId func, int nResults) {</span>
<span class='curline'><a href='../S/1214.html#L496'>L</a>                 496 src/lua/ldo.cpp   if (++L-&gt;nCcalls &gt;= LUAI_MAXCCALLS)</span>
<span class='curline'><a href='../S/1214.html#L497'>L</a>                 497 src/lua/ldo.cpp     stackerror(L);</span>
<span class='curline'><a href='../S/1214.html#L498'>L</a>                 498 src/lua/ldo.cpp   if (!luaD_precall(L, func, nResults))  /* is a Lua function? */</span>
<span class='curline'><a href='../S/1214.html#L499'>L</a>                 499 src/lua/ldo.cpp     luaV_execute(L);  /* call it */</span>
<span class='curline'><a href='../S/1214.html#L500'>L</a>                 500 src/lua/ldo.cpp   L-&gt;nCcalls--;</span>
<span class='curline'><a href='../S/1214.html#L507'>L</a>                 507 src/lua/ldo.cpp void luaD_callnoyield (lua_State *L, StkId func, int nResults) {</span>
<span class='curline'><a href='../S/1214.html#L508'>L</a>                 508 src/lua/ldo.cpp   L-&gt;nny++;</span>
<span class='curline'><a href='../S/1214.html#L509'>L</a>                 509 src/lua/ldo.cpp   luaD_call(L, func, nResults);</span>
<span class='curline'><a href='../S/1214.html#L510'>L</a>                 510 src/lua/ldo.cpp   L-&gt;nny--;</span>
<span class='curline'><a href='../S/1214.html#L518'>L</a>                 518 src/lua/ldo.cpp static void finishCcall (lua_State *L, int status) {</span>
<span class='curline'><a href='../S/1214.html#L519'>L</a>                 519 src/lua/ldo.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1214.html#L522'>L</a>                 522 src/lua/ldo.cpp   lua_assert(ci-&gt;u.c.k != NULL &amp;&amp; L-&gt;nny == 0);</span>
<span class='curline'><a href='../S/1214.html#L527'>L</a>                 527 src/lua/ldo.cpp     L-&gt;errfunc = ci-&gt;u.c.old_errfunc;  /* with the same error function */</span>
<span class='curline'><a href='../S/1214.html#L531'>L</a>                 531 src/lua/ldo.cpp   adjustresults(L, ci-&gt;nresults);</span>
<span class='curline'><a href='../S/1214.html#L532'>L</a>                 532 src/lua/ldo.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1214.html#L533'>L</a>                 533 src/lua/ldo.cpp   n = (*ci-&gt;u.c.k)(L, status, ci-&gt;u.c.ctx);  /* call continuation function */</span>
<span class='curline'><a href='../S/1214.html#L534'>L</a>                 534 src/lua/ldo.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1214.html#L535'>L</a>                 535 src/lua/ldo.cpp   api_checknelems(L, n);</span>
<span class='curline'><a href='../S/1214.html#L536'>L</a>                 536 src/lua/ldo.cpp   luaD_poscall(L, ci, L-&gt;top - n, n);  /* finish 'luaD_precall' */</span>
<span class='curline'><a href='../S/1214.html#L548'>L</a>                 548 src/lua/ldo.cpp static void unroll (lua_State *L, void *ud) {</span>
<span class='curline'><a href='../S/1214.html#L550'>L</a>                 550 src/lua/ldo.cpp     finishCcall(L, *(int *)ud);  /* finish 'lua_pcallk' callee */</span>
<span class='curline'><a href='../S/1214.html#L551'>L</a>                 551 src/lua/ldo.cpp   while (L-&gt;ci != &amp;L-&gt;base_ci) {  /* something in the stack */</span>
<span class='curline'><a href='../S/1214.html#L552'>L</a>                 552 src/lua/ldo.cpp     if (!isLua(L-&gt;ci))  /* C function? */</span>
<span class='curline'><a href='../S/1214.html#L553'>L</a>                 553 src/lua/ldo.cpp       finishCcall(L, LUA_YIELD);  /* complete its execution */</span>
<span class='curline'><a href='../S/1214.html#L555'>L</a>                 555 src/lua/ldo.cpp       luaV_finishOp(L);  /* finish interrupted instruction */</span>
<span class='curline'><a href='../S/1214.html#L556'>L</a>                 556 src/lua/ldo.cpp       luaV_execute(L);  /* execute down to higher C 'boundary' */</span>
<span class='curline'><a href='../S/1214.html#L566'>L</a>                 566 src/lua/ldo.cpp static CallInfo *findpcall (lua_State *L) {</span>
<span class='curline'><a href='../S/1214.html#L568'>L</a>                 568 src/lua/ldo.cpp   for (ci = L-&gt;ci; ci != NULL; ci = ci-&gt;previous) {  /* search for a pcall */</span>
<span class='curline'><a href='../S/1214.html#L581'>L</a>                 581 src/lua/ldo.cpp static int recover (lua_State *L, int status) {</span>
<span class='curline'><a href='../S/1214.html#L583'>L</a>                 583 src/lua/ldo.cpp   CallInfo *ci = findpcall(L);</span>
<span class='curline'><a href='../S/1214.html#L586'>L</a>                 586 src/lua/ldo.cpp   oldtop = restorestack(L, ci-&gt;extra);</span>
<span class='curline'><a href='../S/1214.html#L587'>L</a>                 587 src/lua/ldo.cpp   luaF_close(L, oldtop);</span>
<span class='curline'><a href='../S/1214.html#L588'>L</a>                 588 src/lua/ldo.cpp   seterrorobj(L, status, oldtop);</span>
<span class='curline'><a href='../S/1214.html#L589'>L</a>                 589 src/lua/ldo.cpp   L-&gt;ci = ci;</span>
<span class='curline'><a href='../S/1214.html#L590'>L</a>                 590 src/lua/ldo.cpp   L-&gt;allowhook = getoah(ci-&gt;callstatus);  /* restore original 'allowhook' */</span>
<span class='curline'><a href='../S/1214.html#L591'>L</a>                 591 src/lua/ldo.cpp   L-&gt;nny = 0;  /* should be zero to be yieldable */</span>
<span class='curline'><a href='../S/1214.html#L592'>L</a>                 592 src/lua/ldo.cpp   luaD_shrinkstack(L);</span>
<span class='curline'><a href='../S/1214.html#L593'>L</a>                 593 src/lua/ldo.cpp   L-&gt;errfunc = ci-&gt;u.c.old_errfunc;</span>
<span class='curline'><a href='../S/1214.html#L603'>L</a>                 603 src/lua/ldo.cpp static int resume_error (lua_State *L, const char *msg, int narg) {</span>
<span class='curline'><a href='../S/1214.html#L604'>L</a>                 604 src/lua/ldo.cpp   L-&gt;top -= narg;  /* remove args from the stack */</span>
<span class='curline'><a href='../S/1214.html#L605'>L</a>                 605 src/lua/ldo.cpp   setsvalue2s(L, L-&gt;top, luaS_new(L, msg));  /* push error message */</span>
<span class='curline'><a href='../S/1214.html#L606'>L</a>                 606 src/lua/ldo.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1214.html#L607'>L</a>                 607 src/lua/ldo.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1214.html#L619'>L</a>                 619 src/lua/ldo.cpp static void resume (lua_State *L, void *ud) {</span>
<span class='curline'><a href='../S/1214.html#L621'>L</a>                 621 src/lua/ldo.cpp   StkId firstArg = L-&gt;top - n;  /* first argument */</span>
<span class='curline'><a href='../S/1214.html#L622'>L</a>                 622 src/lua/ldo.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1214.html#L623'>L</a>                 623 src/lua/ldo.cpp   if (L-&gt;status == LUA_OK) {  /* starting a coroutine? */</span>
<span class='curline'><a href='../S/1214.html#L624'>L</a>                 624 src/lua/ldo.cpp     if (!luaD_precall(L, firstArg - 1, LUA_MULTRET))  /* Lua function? */</span>
<span class='curline'><a href='../S/1214.html#L625'>L</a>                 625 src/lua/ldo.cpp       luaV_execute(L);  /* call it */</span>
<span class='curline'><a href='../S/1214.html#L628'>L</a>                 628 src/lua/ldo.cpp     lua_assert(L-&gt;status == LUA_YIELD);</span>
<span class='curline'><a href='../S/1214.html#L629'>L</a>                 629 src/lua/ldo.cpp     L-&gt;status = LUA_OK;  /* mark that it is running (again) */</span>
<span class='curline'><a href='../S/1214.html#L630'>L</a>                 630 src/lua/ldo.cpp     ci-&gt;func = restorestack(L, ci-&gt;extra);</span>
<span class='curline'><a href='../S/1214.html#L632'>L</a>                 632 src/lua/ldo.cpp       luaV_execute(L);  /* just continue running Lua code */</span>
<span class='curline'><a href='../S/1214.html#L635'>L</a>                 635 src/lua/ldo.cpp         lua_unlock(L);</span>
<span class='curline'><a href='../S/1214.html#L636'>L</a>                 636 src/lua/ldo.cpp         n = (*ci-&gt;u.c.k)(L, LUA_YIELD, ci-&gt;u.c.ctx); /* call continuation */</span>
<span class='curline'><a href='../S/1214.html#L637'>L</a>                 637 src/lua/ldo.cpp         lua_lock(L);</span>
<span class='curline'><a href='../S/1214.html#L638'>L</a>                 638 src/lua/ldo.cpp         api_checknelems(L, n);</span>
<span class='curline'><a href='../S/1214.html#L639'>L</a>                 639 src/lua/ldo.cpp         firstArg = L-&gt;top - n;  /* yield results come from continuation */</span>
<span class='curline'><a href='../S/1214.html#L641'>L</a>                 641 src/lua/ldo.cpp       luaD_poscall(L, ci, firstArg, n);  /* finish 'luaD_precall' */</span>
<span class='curline'><a href='../S/1214.html#L643'>L</a>                 643 src/lua/ldo.cpp     unroll(L, NULL);  /* run continuation */</span>
<span class='curline'><a href='../S/1214.html#L648'>L</a>                 648 src/lua/ldo.cpp LUA_API int lua_resume (lua_State *L, lua_State *from, int nargs) {</span>
<span class='curline'><a href='../S/1214.html#L650'>L</a>                 650 src/lua/ldo.cpp   unsigned short oldnny = L-&gt;nny;  /* save "number of non-yieldable" calls */</span>
<span class='curline'><a href='../S/1214.html#L651'>L</a>                 651 src/lua/ldo.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1214.html#L652'>L</a>                 652 src/lua/ldo.cpp   if (L-&gt;status == LUA_OK) {  /* may be starting a coroutine */</span>
<span class='curline'><a href='../S/1214.html#L653'>L</a>                 653 src/lua/ldo.cpp     if (L-&gt;ci != &amp;L-&gt;base_ci)  /* not in base level? */</span>
<span class='curline'><a href='../S/1214.html#L654'>L</a>                 654 src/lua/ldo.cpp       return resume_error(L, "cannot resume non-suspended coroutine", nargs);</span>
<span class='curline'><a href='../S/1214.html#L656'>L</a>                 656 src/lua/ldo.cpp   else if (L-&gt;status != LUA_YIELD)</span>
<span class='curline'><a href='../S/1214.html#L657'>L</a>                 657 src/lua/ldo.cpp     return resume_error(L, "cannot resume dead coroutine", nargs);</span>
<span class='curline'><a href='../S/1214.html#L658'>L</a>                 658 src/lua/ldo.cpp   L-&gt;nCcalls = (from) ? from-&gt;nCcalls + 1 : 1;</span>
<span class='curline'><a href='../S/1214.html#L659'>L</a>                 659 src/lua/ldo.cpp   if (L-&gt;nCcalls &gt;= LUAI_MAXCCALLS)</span>
<span class='curline'><a href='../S/1214.html#L660'>L</a>                 660 src/lua/ldo.cpp     return resume_error(L, "C stack overflow", nargs);</span>
<span class='curline'><a href='../S/1214.html#L661'>L</a>                 661 src/lua/ldo.cpp   luai_userstateresume(L, nargs);</span>
<span class='curline'><a href='../S/1214.html#L662'>L</a>                 662 src/lua/ldo.cpp   L-&gt;nny = 0;  /* allow yields */</span>
<span class='curline'><a href='../S/1214.html#L663'>L</a>                 663 src/lua/ldo.cpp   api_checknelems(L, (L-&gt;status == LUA_OK) ? nargs + 1 : nargs);</span>
<span class='curline'><a href='../S/1214.html#L664'>L</a>                 664 src/lua/ldo.cpp   status = luaD_rawrunprotected(L, resume, &amp;nargs);</span>
<span class='curline'><a href='../S/1214.html#L668'>L</a>                 668 src/lua/ldo.cpp     while (errorstatus(status) &amp;&amp; recover(L, status)) {</span>
<span class='curline'><a href='../S/1214.html#L670'>L</a>                 670 src/lua/ldo.cpp       status = luaD_rawrunprotected(L, unroll, &amp;status);</span>
<span class='curline'><a href='../S/1214.html#L673'>L</a>                 673 src/lua/ldo.cpp       L-&gt;status = cast_byte(status);  /* mark thread as 'dead' */</span>
<span class='curline'><a href='../S/1214.html#L674'>L</a>                 674 src/lua/ldo.cpp       seterrorobj(L, status, L-&gt;top);  /* push error message */</span>
<span class='curline'><a href='../S/1214.html#L675'>L</a>                 675 src/lua/ldo.cpp       L-&gt;ci-&gt;top = L-&gt;top;</span>
<span class='curline'><a href='../S/1214.html#L677'>L</a>                 677 src/lua/ldo.cpp     else lua_assert(status == L-&gt;status);  /* normal end or yield */</span>
<span class='curline'><a href='../S/1214.html#L679'>L</a>                 679 src/lua/ldo.cpp   L-&gt;nny = oldnny;  /* restore 'nny' */</span>
<span class='curline'><a href='../S/1214.html#L680'>L</a>                 680 src/lua/ldo.cpp   L-&gt;nCcalls--;</span>
<span class='curline'><a href='../S/1214.html#L681'>L</a>                 681 src/lua/ldo.cpp   lua_assert(L-&gt;nCcalls == ((from) ? from-&gt;nCcalls : 0));</span>
<span class='curline'><a href='../S/1214.html#L682'>L</a>                 682 src/lua/ldo.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1214.html#L687'>L</a>                 687 src/lua/ldo.cpp LUA_API int lua_isyieldable (lua_State *L) {</span>
<span class='curline'><a href='../S/1214.html#L688'>L</a>                 688 src/lua/ldo.cpp   return (L-&gt;nny == 0);</span>
<span class='curline'><a href='../S/1214.html#L692'>L</a>                 692 src/lua/ldo.cpp LUA_API int lua_yieldk (lua_State *L, int nresults, lua_KContext ctx,</span>
<span class='curline'><a href='../S/1214.html#L694'>L</a>                 694 src/lua/ldo.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1214.html#L695'>L</a>                 695 src/lua/ldo.cpp   luai_userstateyield(L, nresults);</span>
<span class='curline'><a href='../S/1214.html#L696'>L</a>                 696 src/lua/ldo.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1214.html#L697'>L</a>                 697 src/lua/ldo.cpp   api_checknelems(L, nresults);</span>
<span class='curline'><a href='../S/1214.html#L698'>L</a>                 698 src/lua/ldo.cpp   if (L-&gt;nny &gt; 0) {</span>
<span class='curline'><a href='../S/1214.html#L699'>L</a>                 699 src/lua/ldo.cpp     if (L != G(L)-&gt;mainthread)</span>
<span class='curline'><a href='../S/1214.html#L700'>L</a>                 700 src/lua/ldo.cpp       luaG_runerror(L, "attempt to yield across a C-call boundary");</span>
<span class='curline'><a href='../S/1214.html#L702'>L</a>                 702 src/lua/ldo.cpp       luaG_runerror(L, "attempt to yield from outside a coroutine");</span>
<span class='curline'><a href='../S/1214.html#L704'>L</a>                 704 src/lua/ldo.cpp   L-&gt;status = LUA_YIELD;</span>
<span class='curline'><a href='../S/1214.html#L705'>L</a>                 705 src/lua/ldo.cpp   ci-&gt;extra = savestack(L, ci-&gt;func);  /* save current 'func' */</span>
<span class='curline'><a href='../S/1214.html#L707'>L</a>                 707 src/lua/ldo.cpp     api_check(L, k == NULL, "hooks cannot continue after yielding");</span>
<span class='curline'><a href='../S/1214.html#L712'>L</a>                 712 src/lua/ldo.cpp     ci-&gt;func = L-&gt;top - nresults - 1;  /* protect stack below results */</span>
<span class='curline'><a href='../S/1214.html#L713'>L</a>                 713 src/lua/ldo.cpp     luaD_throw(L, LUA_YIELD);</span>
<span class='curline'><a href='../S/1214.html#L716'>L</a>                 716 src/lua/ldo.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1214.html#L721'>L</a>                 721 src/lua/ldo.cpp int luaD_pcall (lua_State *L, Pfunc func, void *u,</span>
<span class='curline'><a href='../S/1214.html#L724'>L</a>                 724 src/lua/ldo.cpp   CallInfo *old_ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1214.html#L725'>L</a>                 725 src/lua/ldo.cpp   lu_byte old_allowhooks = L-&gt;allowhook;</span>
<span class='curline'><a href='../S/1214.html#L726'>L</a>                 726 src/lua/ldo.cpp   unsigned short old_nny = L-&gt;nny;</span>
<span class='curline'><a href='../S/1214.html#L727'>L</a>                 727 src/lua/ldo.cpp   ptrdiff_t old_errfunc = L-&gt;errfunc;</span>
<span class='curline'><a href='../S/1214.html#L728'>L</a>                 728 src/lua/ldo.cpp   L-&gt;errfunc = ef;</span>
<span class='curline'><a href='../S/1214.html#L729'>L</a>                 729 src/lua/ldo.cpp   status = luaD_rawrunprotected(L, func, u);</span>
<span class='curline'><a href='../S/1214.html#L731'>L</a>                 731 src/lua/ldo.cpp     StkId oldtop = restorestack(L, old_top);</span>
<span class='curline'><a href='../S/1214.html#L732'>L</a>                 732 src/lua/ldo.cpp     luaF_close(L, oldtop);  /* close possible pending closures */</span>
<span class='curline'><a href='../S/1214.html#L733'>L</a>                 733 src/lua/ldo.cpp     seterrorobj(L, status, oldtop);</span>
<span class='curline'><a href='../S/1214.html#L734'>L</a>                 734 src/lua/ldo.cpp     L-&gt;ci = old_ci;</span>
<span class='curline'><a href='../S/1214.html#L735'>L</a>                 735 src/lua/ldo.cpp     L-&gt;allowhook = old_allowhooks;</span>
<span class='curline'><a href='../S/1214.html#L736'>L</a>                 736 src/lua/ldo.cpp     L-&gt;nny = old_nny;</span>
<span class='curline'><a href='../S/1214.html#L737'>L</a>                 737 src/lua/ldo.cpp     luaD_shrinkstack(L);</span>
<span class='curline'><a href='../S/1214.html#L739'>L</a>                 739 src/lua/ldo.cpp   L-&gt;errfunc = old_errfunc;</span>
<span class='curline'><a href='../S/1214.html#L757'>L</a>                 757 src/lua/ldo.cpp static void checkmode (lua_State *L, const char *mode, const char *x) {</span>
<span class='curline'><a href='../S/1214.html#L759'>L</a>                 759 src/lua/ldo.cpp     luaO_pushfstring(L,</span>
<span class='curline'><a href='../S/1214.html#L761'>L</a>                 761 src/lua/ldo.cpp     luaD_throw(L, LUA_ERRSYNTAX);</span>
<span class='curline'><a href='../S/1214.html#L766'>L</a>                 766 src/lua/ldo.cpp static void f_parser (lua_State *L, void *ud) {</span>
<span class='curline'><a href='../S/1214.html#L771'>L</a>                 771 src/lua/ldo.cpp     checkmode(L, p-&gt;mode, "binary");</span>
<span class='curline'><a href='../S/1214.html#L772'>L</a>                 772 src/lua/ldo.cpp     cl = luaU_undump(L, p-&gt;z, p-&gt;name);</span>
<span class='curline'><a href='../S/1214.html#L775'>L</a>                 775 src/lua/ldo.cpp     checkmode(L, p-&gt;mode, "text");</span>
<span class='curline'><a href='../S/1214.html#L776'>L</a>                 776 src/lua/ldo.cpp     cl = luaY_parser(L, p-&gt;z, &amp;p-&gt;buff, &amp;p-&gt;dyd, p-&gt;name, c);</span>
<span class='curline'><a href='../S/1214.html#L779'>L</a>                 779 src/lua/ldo.cpp   luaF_initupvals(L, cl);</span>
<span class='curline'><a href='../S/1214.html#L783'>L</a>                 783 src/lua/ldo.cpp int luaD_protectedparser (lua_State *L, ZIO *z, const char *name,</span>
<span class='curline'><a href='../S/1214.html#L787'>L</a>                 787 src/lua/ldo.cpp   L-&gt;nny++;  /* cannot yield during parsing */</span>
<span class='curline'><a href='../S/1214.html#L792'>L</a>                 792 src/lua/ldo.cpp   luaZ_initbuffer(L, &amp;p.buff);</span>
<span class='curline'><a href='../S/1214.html#L793'>L</a>                 793 src/lua/ldo.cpp   status = luaD_pcall(L, f_parser, &amp;p, savestack(L, L-&gt;top), L-&gt;errfunc);</span>
<span class='curline'><a href='../S/1214.html#L794'>L</a>                 794 src/lua/ldo.cpp   luaZ_freebuffer(L, &amp;p.buff);</span>
<span class='curline'><a href='../S/1214.html#L795'>L</a>                 795 src/lua/ldo.cpp   luaM_freearray(L, p.dyd.actvar.arr, p.dyd.actvar.size);</span>
<span class='curline'><a href='../S/1214.html#L796'>L</a>                 796 src/lua/ldo.cpp   luaM_freearray(L, p.dyd.gt.arr, p.dyd.gt.size);</span>
<span class='curline'><a href='../S/1214.html#L797'>L</a>                 797 src/lua/ldo.cpp   luaM_freearray(L, p.dyd.label.arr, p.dyd.label.size);</span>
<span class='curline'><a href='../S/1214.html#L798'>L</a>                 798 src/lua/ldo.cpp   L-&gt;nny--;</span>
<span class='curline'><a href='../S/1188.html#L23'>L</a>                  23 src/lua/ldo.h  #define luaD_checkstackaux(L,n,pre,pos)  \</span>
<span class='curline'><a href='../S/1188.html#L24'>L</a>                  24 src/lua/ldo.h  	if (L-&gt;stack_last - L-&gt;top &lt;= (n)) \</span>
<span class='curline'><a href='../S/1188.html#L25'>L</a>                  25 src/lua/ldo.h  	  { pre; luaD_growstack(L, n); pos; } else { condmovestack(L,pre,pos); }</span>
<span class='curline'><a href='../S/1188.html#L28'>L</a>                  28 src/lua/ldo.h  #define luaD_checkstack(L,n)	luaD_checkstackaux(L,n,(void)0,(void)0)</span>
<span class='curline'><a href='../S/1188.html#L32'>L</a>                  32 src/lua/ldo.h  #define savestack(L,p)		((char *)(p) - (char *)L-&gt;stack)</span>
<span class='curline'><a href='../S/1188.html#L33'>L</a>                  33 src/lua/ldo.h  #define restorestack(L,n)	((TValue *)((char *)L-&gt;stack + (n)))</span>
<span class='curline'><a href='../S/1188.html#L37'>L</a>                  37 src/lua/ldo.h  typedef void (*Pfunc) (lua_State *L, void *ud);</span>
<span class='curline'><a href='../S/1188.html#L39'>L</a>                  39 src/lua/ldo.h  LUAI_FUNC int luaD_protectedparser (lua_State *L, ZIO *z, const char *name,</span>
<span class='curline'><a href='../S/1188.html#L41'>L</a>                  41 src/lua/ldo.h  LUAI_FUNC void luaD_hook (lua_State *L, int event, int line);</span>
<span class='curline'><a href='../S/1188.html#L42'>L</a>                  42 src/lua/ldo.h  LUAI_FUNC int luaD_precall (lua_State *L, StkId func, int nresults);</span>
<span class='curline'><a href='../S/1188.html#L43'>L</a>                  43 src/lua/ldo.h  LUAI_FUNC void luaD_call (lua_State *L, StkId func, int nResults);</span>
<span class='curline'><a href='../S/1188.html#L44'>L</a>                  44 src/lua/ldo.h  LUAI_FUNC void luaD_callnoyield (lua_State *L, StkId func, int nResults);</span>
<span class='curline'><a href='../S/1188.html#L45'>L</a>                  45 src/lua/ldo.h  LUAI_FUNC int luaD_pcall (lua_State *L, Pfunc func, void *u,</span>
<span class='curline'><a href='../S/1188.html#L47'>L</a>                  47 src/lua/ldo.h  LUAI_FUNC int luaD_poscall (lua_State *L, CallInfo *ci, StkId firstResult,</span>
<span class='curline'><a href='../S/1188.html#L49'>L</a>                  49 src/lua/ldo.h  LUAI_FUNC void luaD_reallocstack (lua_State *L, int newsize);</span>
<span class='curline'><a href='../S/1188.html#L50'>L</a>                  50 src/lua/ldo.h  LUAI_FUNC void luaD_growstack (lua_State *L, int n);</span>
<span class='curline'><a href='../S/1188.html#L51'>L</a>                  51 src/lua/ldo.h  LUAI_FUNC void luaD_shrinkstack (lua_State *L);</span>
<span class='curline'><a href='../S/1188.html#L52'>L</a>                  52 src/lua/ldo.h  LUAI_FUNC void luaD_inctop (lua_State *L);</span>
<span class='curline'><a href='../S/1188.html#L54'>L</a>                  54 src/lua/ldo.h  LUAI_FUNC l_noret luaD_throw (lua_State *L, int errcode);</span>
<span class='curline'><a href='../S/1188.html#L55'>L</a>                  55 src/lua/ldo.h  LUAI_FUNC int luaD_rawrunprotected (lua_State *L, Pfunc f, void *ud);</span>
<span class='curline'><a href='../S/1208.html#L23'>L</a>                  23 src/lua/ldump.cpp   lua_State *L;</span>
<span class='curline'><a href='../S/1208.html#L42'>L</a>                  42 src/lua/ldump.cpp     lua_unlock(D-&gt;L);</span>
<span class='curline'><a href='../S/1208.html#L43'>L</a>                  43 src/lua/ldump.cpp     D-&gt;status = (*D-&gt;writer)(D-&gt;L, b, size, D-&gt;data);</span>
<span class='curline'><a href='../S/1208.html#L44'>L</a>                  44 src/lua/ldump.cpp     lua_lock(D-&gt;L);</span>
<span class='curline'><a href='../S/1208.html#L202'>L</a>                 202 src/lua/ldump.cpp int luaU_dump(lua_State *L, const Proto *f, lua_Writer w, void *data,</span>
<span class='curline'><a href='../S/1208.html#L205'>L</a>                 205 src/lua/ldump.cpp   D.L = L;</span>
<span class='curline'><a href='../S/1215.html#L25'>L</a>                  25 src/lua/lfunc.cpp CClosure *luaF_newCclosure (lua_State *L, int n) {</span>
<span class='curline'><a href='../S/1215.html#L26'>L</a>                  26 src/lua/lfunc.cpp   GCObject *o = luaC_newobj(L, LUA_TCCL, sizeCclosure(n));</span>
<span class='curline'><a href='../S/1215.html#L33'>L</a>                  33 src/lua/lfunc.cpp LClosure *luaF_newLclosure (lua_State *L, int n) {</span>
<span class='curline'><a href='../S/1215.html#L34'>L</a>                  34 src/lua/lfunc.cpp   GCObject *o = luaC_newobj(L, LUA_TLCL, sizeLclosure(n));</span>
<span class='curline'><a href='../S/1215.html#L45'>L</a>                  45 src/lua/lfunc.cpp void luaF_initupvals (lua_State *L, LClosure *cl) {</span>
<span class='curline'><a href='../S/1215.html#L48'>L</a>                  48 src/lua/lfunc.cpp     UpVal *uv = luaM_new(L, UpVal);</span>
<span class='curline'><a href='../S/1215.html#L57'>L</a>                  57 src/lua/lfunc.cpp UpVal *luaF_findupval (lua_State *L, StkId level) {</span>
<span class='curline'><a href='../S/1215.html#L58'>L</a>                  58 src/lua/lfunc.cpp   UpVal **pp = &amp;L-&gt;openupval;</span>
<span class='curline'><a href='../S/1215.html#L61'>L</a>                  61 src/lua/lfunc.cpp   lua_assert(isintwups(L) || L-&gt;openupval == NULL);</span>
<span class='curline'><a href='../S/1215.html#L69'>L</a>                  69 src/lua/lfunc.cpp   uv = luaM_new(L, UpVal);</span>
<span class='curline'><a href='../S/1215.html#L75'>L</a>                  75 src/lua/lfunc.cpp   if (!isintwups(L)) {  /* thread not in list of threads with upvalues? */</span>
<span class='curline'><a href='../S/1215.html#L76'>L</a>                  76 src/lua/lfunc.cpp     L-&gt;twups = G(L)-&gt;twups;  /* link it to the list */</span>
<span class='curline'><a href='../S/1215.html#L77'>L</a>                  77 src/lua/lfunc.cpp     G(L)-&gt;twups = L;</span>
<span class='curline'><a href='../S/1215.html#L83'>L</a>                  83 src/lua/lfunc.cpp void luaF_close (lua_State *L, StkId level) {</span>
<span class='curline'><a href='../S/1215.html#L85'>L</a>                  85 src/lua/lfunc.cpp   while (L-&gt;openupval != NULL &amp;&amp; (uv = L-&gt;openupval)-&gt;v &gt;= level) {</span>
<span class='curline'><a href='../S/1215.html#L87'>L</a>                  87 src/lua/lfunc.cpp     L-&gt;openupval = uv-&gt;u.open.next;  /* remove from 'open' list */</span>
<span class='curline'><a href='../S/1215.html#L89'>L</a>                  89 src/lua/lfunc.cpp       luaM_free(L, uv);  /* free upvalue */</span>
<span class='curline'><a href='../S/1215.html#L91'>L</a>                  91 src/lua/lfunc.cpp       setobj(L, &amp;uv-&gt;u.value, uv-&gt;v);  /* move value to upvalue slot */</span>
<span class='curline'><a href='../S/1215.html#L93'>L</a>                  93 src/lua/lfunc.cpp       luaC_upvalbarrier(L, uv);</span>
<span class='curline'><a href='../S/1215.html#L99'>L</a>                  99 src/lua/lfunc.cpp Proto *luaF_newproto (lua_State *L) {</span>
<span class='curline'><a href='../S/1215.html#L100'>L</a>                 100 src/lua/lfunc.cpp   GCObject *o = luaC_newobj(L, LUA_TPROTO, sizeof(Proto));</span>
<span class='curline'><a href='../S/1215.html#L125'>L</a>                 125 src/lua/lfunc.cpp void luaF_freeproto (lua_State *L, Proto *f) {</span>
<span class='curline'><a href='../S/1215.html#L126'>L</a>                 126 src/lua/lfunc.cpp   luaM_freearray(L, f-&gt;code, f-&gt;sizecode);</span>
<span class='curline'><a href='../S/1215.html#L127'>L</a>                 127 src/lua/lfunc.cpp   luaM_freearray(L, f-&gt;p, f-&gt;sizep);</span>
<span class='curline'><a href='../S/1215.html#L128'>L</a>                 128 src/lua/lfunc.cpp   luaM_freearray(L, f-&gt;k, f-&gt;sizek);</span>
<span class='curline'><a href='../S/1215.html#L129'>L</a>                 129 src/lua/lfunc.cpp   luaM_freearray(L, f-&gt;lineinfo, f-&gt;sizelineinfo);</span>
<span class='curline'><a href='../S/1215.html#L130'>L</a>                 130 src/lua/lfunc.cpp   luaM_freearray(L, f-&gt;locvars, f-&gt;sizelocvars);</span>
<span class='curline'><a href='../S/1215.html#L131'>L</a>                 131 src/lua/lfunc.cpp   luaM_freearray(L, f-&gt;upvalues, f-&gt;sizeupvalues);</span>
<span class='curline'><a href='../S/1215.html#L132'>L</a>                 132 src/lua/lfunc.cpp   luaM_free(L, f);</span>
<span class='curline'><a href='../S/1212.html#L22'>L</a>                  22 src/lua/lfunc.h #define isintwups(L)	(L-&gt;twups != L)</span>
<span class='curline'><a href='../S/1212.html#L50'>L</a>                  50 src/lua/lfunc.h LUAI_FUNC Proto *luaF_newproto (lua_State *L);</span>
<span class='curline'><a href='../S/1212.html#L51'>L</a>                  51 src/lua/lfunc.h LUAI_FUNC CClosure *luaF_newCclosure (lua_State *L, int nelems);</span>
<span class='curline'><a href='../S/1212.html#L52'>L</a>                  52 src/lua/lfunc.h LUAI_FUNC LClosure *luaF_newLclosure (lua_State *L, int nelems);</span>
<span class='curline'><a href='../S/1212.html#L53'>L</a>                  53 src/lua/lfunc.h LUAI_FUNC void luaF_initupvals (lua_State *L, LClosure *cl);</span>
<span class='curline'><a href='../S/1212.html#L54'>L</a>                  54 src/lua/lfunc.h LUAI_FUNC UpVal *luaF_findupval (lua_State *L, StkId level);</span>
<span class='curline'><a href='../S/1212.html#L55'>L</a>                  55 src/lua/lfunc.h LUAI_FUNC void luaF_close (lua_State *L, StkId level);</span>
<span class='curline'><a href='../S/1212.html#L56'>L</a>                  56 src/lua/lfunc.h LUAI_FUNC void luaF_freeproto (lua_State *L, Proto *f);</span>
<span class='curline'><a href='../S/1209.html#L155'>L</a>                 155 src/lua/lgc.cpp void luaC_barrier_ (lua_State *L, GCObject *o, GCObject *v) {</span>
<span class='curline'><a href='../S/1209.html#L156'>L</a>                 156 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L171'>L</a>                 171 src/lua/lgc.cpp void luaC_barrierback_ (lua_State *L, Table *t) {</span>
<span class='curline'><a href='../S/1209.html#L172'>L</a>                 172 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L185'>L</a>                 185 src/lua/lgc.cpp void luaC_upvalbarrier_ (lua_State *L, UpVal *uv) {</span>
<span class='curline'><a href='../S/1209.html#L186'>L</a>                 186 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L194'>L</a>                 194 src/lua/lgc.cpp void luaC_fix (lua_State *L, GCObject *o) {</span>
<span class='curline'><a href='../S/1209.html#L195'>L</a>                 195 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L208'>L</a>                 208 src/lua/lgc.cpp GCObject *luaC_newobj (lua_State *L, int tt, size_t sz) {</span>
<span class='curline'><a href='../S/1209.html#L209'>L</a>                 209 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L210'>L</a>                 210 src/lua/lgc.cpp   GCObject *o = cast(GCObject *, luaM_newobject(L, novariant(tt), sz));</span>
<span class='curline'><a href='../S/1209.html#L678'>L</a>                 678 src/lua/lgc.cpp void luaC_upvdeccount (lua_State *L, UpVal *uv) {</span>
<span class='curline'><a href='../S/1209.html#L682'>L</a>                 682 src/lua/lgc.cpp     luaM_free(L, uv);</span>
<span class='curline'><a href='../S/1209.html#L686'>L</a>                 686 src/lua/lgc.cpp static void freeLclosure (lua_State *L, LClosure *cl) {</span>
<span class='curline'><a href='../S/1209.html#L691'>L</a>                 691 src/lua/lgc.cpp       luaC_upvdeccount(L, uv);</span>
<span class='curline'><a href='../S/1209.html#L693'>L</a>                 693 src/lua/lgc.cpp   luaM_freemem(L, cl, sizeLclosure(cl-&gt;nupvalues));</span>
<span class='curline'><a href='../S/1209.html#L697'>L</a>                 697 src/lua/lgc.cpp static void freeobj (lua_State *L, GCObject *o) {</span>
<span class='curline'><a href='../S/1209.html#L699'>L</a>                 699 src/lua/lgc.cpp     case LUA_TPROTO: luaF_freeproto(L, gco2p(o)); break;</span>
<span class='curline'><a href='../S/1209.html#L701'>L</a>                 701 src/lua/lgc.cpp       freeLclosure(L, gco2lcl(o));</span>
<span class='curline'><a href='../S/1209.html#L705'>L</a>                 705 src/lua/lgc.cpp       luaM_freemem(L, o, sizeCclosure(gco2ccl(o)-&gt;nupvalues));</span>
<span class='curline'><a href='../S/1209.html#L708'>L</a>                 708 src/lua/lgc.cpp     case LUA_TTABLE: luaH_free(L, gco2t(o)); break;</span>
<span class='curline'><a href='../S/1209.html#L709'>L</a>                 709 src/lua/lgc.cpp     case LUA_TTHREAD: luaE_freethread(L, gco2th(o)); break;</span>
<span class='curline'><a href='../S/1209.html#L710'>L</a>                 710 src/lua/lgc.cpp     case LUA_TUSERDATA: luaM_freemem(L, o, sizeudata(gco2u(o))); break;</span>
<span class='curline'><a href='../S/1209.html#L712'>L</a>                 712 src/lua/lgc.cpp       luaS_remove(L, gco2ts(o));  /* remove it from hash table */</span>
<span class='curline'><a href='../S/1209.html#L713'>L</a>                 713 src/lua/lgc.cpp       luaM_freemem(L, o, sizelstring(gco2ts(o)-&gt;shrlen));</span>
<span class='curline'><a href='../S/1209.html#L716'>L</a>                 716 src/lua/lgc.cpp       luaM_freemem(L, o, sizelstring(gco2ts(o)-&gt;u.lnglen));</span>
<span class='curline'><a href='../S/1209.html#L724'>L</a>                 724 src/lua/lgc.cpp #define sweepwholelist(L,p)	sweeplist(L,p,MAX_LUMEM)</span>
<span class='curline'><a href='../S/1209.html#L725'>L</a>                 725 src/lua/lgc.cpp static GCObject **sweeplist (lua_State *L, GCObject **p, lu_mem count);</span>
<span class='curline'><a href='../S/1209.html#L735'>L</a>                 735 src/lua/lgc.cpp static GCObject **sweeplist (lua_State *L, GCObject **p, lu_mem count) {</span>
<span class='curline'><a href='../S/1209.html#L736'>L</a>                 736 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L744'>L</a>                 744 src/lua/lgc.cpp       freeobj(L, curr);  /* erase 'curr' */</span>
<span class='curline'><a href='../S/1209.html#L758'>L</a>                 758 src/lua/lgc.cpp static GCObject **sweeptolive (lua_State *L, GCObject **p) {</span>
<span class='curline'><a href='../S/1209.html#L761'>L</a>                 761 src/lua/lgc.cpp     p = sweeplist(L, p, 1);</span>
<span class='curline'><a href='../S/1209.html#L778'>L</a>                 778 src/lua/lgc.cpp static void checkSizes (lua_State *L, global_State *g) {</span>
<span class='curline'><a href='../S/1209.html#L782'>L</a>                 782 src/lua/lgc.cpp       luaS_resize(L, g-&gt;strt.size / 2);  /* shrink it a little */</span>
<span class='curline'><a href='../S/1209.html#L801'>L</a>                 801 src/lua/lgc.cpp static void dothecall (lua_State *L, void *ud) {</span>
<span class='curline'><a href='../S/1209.html#L803'>L</a>                 803 src/lua/lgc.cpp   luaD_callnoyield(L, L-&gt;top - 2, 0);</span>
<span class='curline'><a href='../S/1209.html#L807'>L</a>                 807 src/lua/lgc.cpp static void GCTM (lua_State *L, int propagateerrors) {</span>
<span class='curline'><a href='../S/1209.html#L808'>L</a>                 808 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L811'>L</a>                 811 src/lua/lgc.cpp   setgcovalue(L, &amp;v, udata2finalize(g));</span>
<span class='curline'><a href='../S/1209.html#L812'>L</a>                 812 src/lua/lgc.cpp   tm = luaT_gettmbyobj(L, &amp;v, TM_GC);</span>
<span class='curline'><a href='../S/1209.html#L815'>L</a>                 815 src/lua/lgc.cpp     lu_byte oldah = L-&gt;allowhook;</span>
<span class='curline'><a href='../S/1209.html#L817'>L</a>                 817 src/lua/lgc.cpp     L-&gt;allowhook = 0;  /* stop debug hooks during GC metamethod */</span>
<span class='curline'><a href='../S/1209.html#L819'>L</a>                 819 src/lua/lgc.cpp     setobj2s(L, L-&gt;top, tm);  /* push finalizer... */</span>
<span class='curline'><a href='../S/1209.html#L820'>L</a>                 820 src/lua/lgc.cpp     setobj2s(L, L-&gt;top + 1, &amp;v);  /* ... and its argument */</span>
<span class='curline'><a href='../S/1209.html#L821'>L</a>                 821 src/lua/lgc.cpp     L-&gt;top += 2;  /* and (next line) call the finalizer */</span>
<span class='curline'><a href='../S/1209.html#L822'>L</a>                 822 src/lua/lgc.cpp     L-&gt;ci-&gt;callstatus |= CIST_FIN;  /* will run a finalizer */</span>
<span class='curline'><a href='../S/1209.html#L823'>L</a>                 823 src/lua/lgc.cpp     status = luaD_pcall(L, dothecall, NULL, savestack(L, L-&gt;top - 2), 0);</span>
<span class='curline'><a href='../S/1209.html#L824'>L</a>                 824 src/lua/lgc.cpp     L-&gt;ci-&gt;callstatus &amp;= ~CIST_FIN;  /* not running a finalizer anymore */</span>
<span class='curline'><a href='../S/1209.html#L825'>L</a>                 825 src/lua/lgc.cpp     L-&gt;allowhook = oldah;  /* restore hooks */</span>
<span class='curline'><a href='../S/1209.html#L829'>L</a>                 829 src/lua/lgc.cpp         const char *msg = (ttisstring(L-&gt;top - 1))</span>
<span class='curline'><a href='../S/1209.html#L830'>L</a>                 830 src/lua/lgc.cpp                             ? svalue(L-&gt;top - 1)</span>
<span class='curline'><a href='../S/1209.html#L832'>L</a>                 832 src/lua/lgc.cpp         luaO_pushfstring(L, "error in __gc metamethod (%s)", msg);</span>
<span class='curline'><a href='../S/1209.html#L835'>L</a>                 835 src/lua/lgc.cpp       luaD_throw(L, status);  /* re-throw error */</span>
<span class='curline'><a href='../S/1209.html#L844'>L</a>                 844 src/lua/lgc.cpp static int runafewfinalizers (lua_State *L) {</span>
<span class='curline'><a href='../S/1209.html#L845'>L</a>                 845 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L849'>L</a>                 849 src/lua/lgc.cpp     GCTM(L, 1);  /* call one finalizer */</span>
<span class='curline'><a href='../S/1209.html#L859'>L</a>                 859 src/lua/lgc.cpp static void callallpendingfinalizers (lua_State *L) {</span>
<span class='curline'><a href='../S/1209.html#L860'>L</a>                 860 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L862'>L</a>                 862 src/lua/lgc.cpp     GCTM(L, 0);</span>
<span class='curline'><a href='../S/1209.html#L902'>L</a>                 902 src/lua/lgc.cpp void luaC_checkfinalizer (lua_State *L, GCObject *o, Table *mt) {</span>
<span class='curline'><a href='../S/1209.html#L903'>L</a>                 903 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L912'>L</a>                 912 src/lua/lgc.cpp         g-&gt;sweepgc = sweeptolive(L, g-&gt;sweepgc);  /* change 'sweepgc' */</span>
<span class='curline'><a href='../S/1209.html#L959'>L</a>                 959 src/lua/lgc.cpp static void entersweep (lua_State *L) {</span>
<span class='curline'><a href='../S/1209.html#L960'>L</a>                 960 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L963'>L</a>                 963 src/lua/lgc.cpp   g-&gt;sweepgc = sweeplist(L, &amp;g-&gt;allgc, 1);</span>
<span class='curline'><a href='../S/1209.html#L967'>L</a>                 967 src/lua/lgc.cpp void luaC_freeallobjects (lua_State *L) {</span>
<span class='curline'><a href='../S/1209.html#L968'>L</a>                 968 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L971'>L</a>                 971 src/lua/lgc.cpp   callallpendingfinalizers(L);</span>
<span class='curline'><a href='../S/1209.html#L975'>L</a>                 975 src/lua/lgc.cpp   sweepwholelist(L, &amp;g-&gt;finobj);</span>
<span class='curline'><a href='../S/1209.html#L976'>L</a>                 976 src/lua/lgc.cpp   sweepwholelist(L, &amp;g-&gt;allgc);</span>
<span class='curline'><a href='../S/1209.html#L977'>L</a>                 977 src/lua/lgc.cpp   sweepwholelist(L, &amp;g-&gt;fixedgc);  /* collect fixed objects */</span>
<span class='curline'><a href='../S/1209.html#L982'>L</a>                 982 src/lua/lgc.cpp static l_mem atomic (lua_State *L) {</span>
<span class='curline'><a href='../S/1209.html#L983'>L</a>                 983 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L991'>L</a>                 991 src/lua/lgc.cpp   markobject(g, L);  /* mark running thread */</span>
<span class='curline'><a href='../S/1209.html#L1029'>L</a>                1029 src/lua/lgc.cpp static lu_mem sweepstep (lua_State *L, global_State *g,</span>
<span class='curline'><a href='../S/1209.html#L1033'>L</a>                1033 src/lua/lgc.cpp     g-&gt;sweepgc = sweeplist(L, g-&gt;sweepgc, GCSWEEPMAX);</span>
<span class='curline'><a href='../S/1209.html#L1045'>L</a>                1045 src/lua/lgc.cpp static lu_mem singlestep (lua_State *L) {</span>
<span class='curline'><a href='../S/1209.html#L1046'>L</a>                1046 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L1065'>L</a>                1065 src/lua/lgc.cpp       work = atomic(L);  /* work is what was traversed by 'atomic' */</span>
<span class='curline'><a href='../S/1209.html#L1066'>L</a>                1066 src/lua/lgc.cpp       entersweep(L);</span>
<span class='curline'><a href='../S/1209.html#L1071'>L</a>                1071 src/lua/lgc.cpp       return sweepstep(L, g, GCSswpfinobj, &amp;g-&gt;finobj);</span>
<span class='curline'><a href='../S/1209.html#L1074'>L</a>                1074 src/lua/lgc.cpp       return sweepstep(L, g, GCSswptobefnz, &amp;g-&gt;tobefnz);</span>
<span class='curline'><a href='../S/1209.html#L1077'>L</a>                1077 src/lua/lgc.cpp       return sweepstep(L, g, GCSswpend, NULL);</span>
<span class='curline'><a href='../S/1209.html#L1081'>L</a>                1081 src/lua/lgc.cpp       checkSizes(L, g);</span>
<span class='curline'><a href='../S/1209.html#L1087'>L</a>                1087 src/lua/lgc.cpp         int n = runafewfinalizers(L);</span>
<span class='curline'><a href='../S/1209.html#L1104'>L</a>                1104 src/lua/lgc.cpp void luaC_runtilstate (lua_State *L, int statesmask) {</span>
<span class='curline'><a href='../S/1209.html#L1105'>L</a>                1105 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L1107'>L</a>                1107 src/lua/lgc.cpp     singlestep(L);</span>
<span class='curline'><a href='../S/1209.html#L1129'>L</a>                1129 src/lua/lgc.cpp void luaC_step (lua_State *L) {</span>
<span class='curline'><a href='../S/1209.html#L1130'>L</a>                1130 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L1137'>L</a>                1137 src/lua/lgc.cpp     lu_mem work = singlestep(L);  /* perform one single step */</span>
<span class='curline'><a href='../S/1209.html#L1145'>L</a>                1145 src/lua/lgc.cpp     runafewfinalizers(L);</span>
<span class='curline'><a href='../S/1209.html#L1159'>L</a>                1159 src/lua/lgc.cpp void luaC_fullgc (lua_State *L, int isemergency) {</span>
<span class='curline'><a href='../S/1209.html#L1160'>L</a>                1160 src/lua/lgc.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1209.html#L1164'>L</a>                1164 src/lua/lgc.cpp     entersweep(L); /* sweep everything to turn them back to white */</span>
<span class='curline'><a href='../S/1209.html#L1167'>L</a>                1167 src/lua/lgc.cpp   luaC_runtilstate(L, bitmask(GCSpause));</span>
<span class='curline'><a href='../S/1209.html#L1168'>L</a>                1168 src/lua/lgc.cpp   luaC_runtilstate(L, ~bitmask(GCSpause));  /* start new collection */</span>
<span class='curline'><a href='../S/1209.html#L1169'>L</a>                1169 src/lua/lgc.cpp   luaC_runtilstate(L, bitmask(GCScallfin));  /* run up to finalizers */</span>
<span class='curline'><a href='../S/1209.html#L1172'>L</a>                1172 src/lua/lgc.cpp   luaC_runtilstate(L, bitmask(GCSpause));  /* finish collection */</span>
<span class='curline'><a href='../S/1204.html#L110'>L</a>                 110 src/lua/lgc.h  #define luaC_condGC(L,pre,pos) \</span>
<span class='curline'><a href='../S/1204.html#L111'>L</a>                 111 src/lua/lgc.h  	{ if (G(L)-&gt;GCdebt &gt; 0) { pre; luaC_step(L); pos;}; \</span>
<span class='curline'><a href='../S/1204.html#L112'>L</a>                 112 src/lua/lgc.h  	  condchangemem(L,pre,pos); }</span>
<span class='curline'><a href='../S/1204.html#L115'>L</a>                 115 src/lua/lgc.h  #define luaC_checkGC(L)		luaC_condGC(L,(void)0,(void)0)</span>
<span class='curline'><a href='../S/1204.html#L118'>L</a>                 118 src/lua/lgc.h  #define luaC_barrier(L,p,v) (  \</span>
<span class='curline'><a href='../S/1204.html#L120'>L</a>                 120 src/lua/lgc.h  	luaC_barrier_(L,obj2gco(p),gcvalue(v)) : cast_void(0))</span>
<span class='curline'><a href='../S/1204.html#L122'>L</a>                 122 src/lua/lgc.h  #define luaC_barrierback(L,p,v) (  \</span>
<span class='curline'><a href='../S/1204.html#L124'>L</a>                 124 src/lua/lgc.h  	luaC_barrierback_(L,p) : cast_void(0))</span>
<span class='curline'><a href='../S/1204.html#L126'>L</a>                 126 src/lua/lgc.h  #define luaC_objbarrier(L,p,o) (  \</span>
<span class='curline'><a href='../S/1204.html#L128'>L</a>                 128 src/lua/lgc.h  	luaC_barrier_(L,obj2gco(p),obj2gco(o)) : cast_void(0))</span>
<span class='curline'><a href='../S/1204.html#L130'>L</a>                 130 src/lua/lgc.h  #define luaC_upvalbarrier(L,uv) ( \</span>
<span class='curline'><a href='../S/1204.html#L132'>L</a>                 132 src/lua/lgc.h           luaC_upvalbarrier_(L,uv) : cast_void(0))</span>
<span class='curline'><a href='../S/1204.html#L134'>L</a>                 134 src/lua/lgc.h  LUAI_FUNC void luaC_fix (lua_State *L, GCObject *o);</span>
<span class='curline'><a href='../S/1204.html#L135'>L</a>                 135 src/lua/lgc.h  LUAI_FUNC void luaC_freeallobjects (lua_State *L);</span>
<span class='curline'><a href='../S/1204.html#L136'>L</a>                 136 src/lua/lgc.h  LUAI_FUNC void luaC_step (lua_State *L);</span>
<span class='curline'><a href='../S/1204.html#L137'>L</a>                 137 src/lua/lgc.h  LUAI_FUNC void luaC_runtilstate (lua_State *L, int statesmask);</span>
<span class='curline'><a href='../S/1204.html#L138'>L</a>                 138 src/lua/lgc.h  LUAI_FUNC void luaC_fullgc (lua_State *L, int isemergency);</span>
<span class='curline'><a href='../S/1204.html#L139'>L</a>                 139 src/lua/lgc.h  LUAI_FUNC GCObject *luaC_newobj (lua_State *L, int tt, size_t sz);</span>
<span class='curline'><a href='../S/1204.html#L140'>L</a>                 140 src/lua/lgc.h  LUAI_FUNC void luaC_barrier_ (lua_State *L, GCObject *o, GCObject *v);</span>
<span class='curline'><a href='../S/1204.html#L141'>L</a>                 141 src/lua/lgc.h  LUAI_FUNC void luaC_barrierback_ (lua_State *L, Table *o);</span>
<span class='curline'><a href='../S/1204.html#L142'>L</a>                 142 src/lua/lgc.h  LUAI_FUNC void luaC_upvalbarrier_ (lua_State *L, UpVal *uv);</span>
<span class='curline'><a href='../S/1204.html#L143'>L</a>                 143 src/lua/lgc.h  LUAI_FUNC void luaC_checkfinalizer (lua_State *L, GCObject *o, Table *mt);</span>
<span class='curline'><a href='../S/1204.html#L144'>L</a>                 144 src/lua/lgc.h  LUAI_FUNC void luaC_upvdeccount (lua_State *L, UpVal *uv);</span>
<span class='curline'><a href='../S/1201.html#L59'>L</a>                  59 src/lua/liolib.cpp #define l_popen(L,c,m)		(fflush(NULL), popen(c,m))</span>
<span class='curline'><a href='../S/1201.html#L60'>L</a>                  60 src/lua/liolib.cpp #define l_pclose(L,file)	(pclose(file))</span>
<span class='curline'><a href='../S/1201.html#L64'>L</a>                  64 src/lua/liolib.cpp #define l_popen(L,c,m)		(_popen(c,m))</span>
<span class='curline'><a href='../S/1201.html#L65'>L</a>                  65 src/lua/liolib.cpp #define l_pclose(L,file)	(_pclose(file))</span>
<span class='curline'><a href='../S/1201.html#L70'>L</a>                  70 src/lua/liolib.cpp #define l_popen(L,c,m)  \</span>
<span class='curline'><a href='../S/1201.html#L72'>L</a>                  72 src/lua/liolib.cpp 	  luaL_error(L, "'popen' not supported"), \</span>
<span class='curline'><a href='../S/1201.html#L74'>L</a>                  74 src/lua/liolib.cpp #define l_pclose(L,file)		((void)L, (void)file, -1)</span>
<span class='curline'><a href='../S/1201.html#L145'>L</a>                 145 src/lua/liolib.cpp #define tolstream(L)	((LStream *)luaL_checkudata(L, 1, LUA_FILEHANDLE))</span>
<span class='curline'><a href='../S/1201.html#L150'>L</a>                 150 src/lua/liolib.cpp static int io_type (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L152'>L</a>                 152 src/lua/liolib.cpp   luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1201.html#L153'>L</a>                 153 src/lua/liolib.cpp   p = (LStream *)luaL_testudata(L, 1, LUA_FILEHANDLE);</span>
<span class='curline'><a href='../S/1201.html#L155'>L</a>                 155 src/lua/liolib.cpp     lua_pushnil(L);  /* not a file */</span>
<span class='curline'><a href='../S/1201.html#L157'>L</a>                 157 src/lua/liolib.cpp     lua_pushliteral(L, "closed file");</span>
<span class='curline'><a href='../S/1201.html#L159'>L</a>                 159 src/lua/liolib.cpp     lua_pushliteral(L, "file");</span>
<span class='curline'><a href='../S/1201.html#L164'>L</a>                 164 src/lua/liolib.cpp static int f_tostring (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L165'>L</a>                 165 src/lua/liolib.cpp   LStream *p = tolstream(L);</span>
<span class='curline'><a href='../S/1201.html#L167'>L</a>                 167 src/lua/liolib.cpp     lua_pushliteral(L, "file (closed)");</span>
<span class='curline'><a href='../S/1201.html#L169'>L</a>                 169 src/lua/liolib.cpp     lua_pushfstring(L, "file (%p)", p-&gt;f);</span>
<span class='curline'><a href='../S/1201.html#L174'>L</a>                 174 src/lua/liolib.cpp static FILE *tofile (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L175'>L</a>                 175 src/lua/liolib.cpp   LStream *p = tolstream(L);</span>
<span class='curline'><a href='../S/1201.html#L177'>L</a>                 177 src/lua/liolib.cpp     luaL_error(L, "attempt to use a closed file");</span>
<span class='curline'><a href='../S/1201.html#L188'>L</a>                 188 src/lua/liolib.cpp static LStream *newprefile (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L189'>L</a>                 189 src/lua/liolib.cpp   LStream *p = (LStream *)lua_newuserdata(L, sizeof(LStream));</span>
<span class='curline'><a href='../S/1201.html#L191'>L</a>                 191 src/lua/liolib.cpp   luaL_setmetatable(L, LUA_FILEHANDLE);</span>
<span class='curline'><a href='../S/1201.html#L201'>L</a>                 201 src/lua/liolib.cpp static int aux_close (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L202'>L</a>                 202 src/lua/liolib.cpp   LStream *p = tolstream(L);</span>
<span class='curline'><a href='../S/1201.html#L205'>L</a>                 205 src/lua/liolib.cpp   return (*cf)(L);  /* close it */</span>
<span class='curline'><a href='../S/1201.html#L209'>L</a>                 209 src/lua/liolib.cpp static int io_close (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L210'>L</a>                 210 src/lua/liolib.cpp   if (lua_isnone(L, 1))  /* no argument? */</span>
<span class='curline'><a href='../S/1201.html#L211'>L</a>                 211 src/lua/liolib.cpp     lua_getfield(L, LUA_REGISTRYINDEX, IO_OUTPUT);  /* use standard output */</span>
<span class='curline'><a href='../S/1201.html#L212'>L</a>                 212 src/lua/liolib.cpp   tofile(L);  /* make sure argument is an open stream */</span>
<span class='curline'><a href='../S/1201.html#L213'>L</a>                 213 src/lua/liolib.cpp   return aux_close(L);</span>
<span class='curline'><a href='../S/1201.html#L217'>L</a>                 217 src/lua/liolib.cpp static int f_gc (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L218'>L</a>                 218 src/lua/liolib.cpp   LStream *p = tolstream(L);</span>
<span class='curline'><a href='../S/1201.html#L220'>L</a>                 220 src/lua/liolib.cpp     aux_close(L);  /* ignore closed and incompletely open files */</span>
<span class='curline'><a href='../S/1201.html#L228'>L</a>                 228 src/lua/liolib.cpp static int io_fclose (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L229'>L</a>                 229 src/lua/liolib.cpp   LStream *p = tolstream(L);</span>
<span class='curline'><a href='../S/1201.html#L231'>L</a>                 231 src/lua/liolib.cpp   return luaL_fileresult(L, (res == 0), NULL);</span>
<span class='curline'><a href='../S/1201.html#L235'>L</a>                 235 src/lua/liolib.cpp static LStream *newfile (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L236'>L</a>                 236 src/lua/liolib.cpp   LStream *p = newprefile(L);</span>
<span class='curline'><a href='../S/1201.html#L243'>L</a>                 243 src/lua/liolib.cpp static void opencheck (lua_State *L, const char *fname, const char *mode) {</span>
<span class='curline'><a href='../S/1201.html#L244'>L</a>                 244 src/lua/liolib.cpp   LStream *p = newfile(L);</span>
<span class='curline'><a href='../S/1201.html#L247'>L</a>                 247 src/lua/liolib.cpp     luaL_error(L, "cannot open file '%s' (%s)", fname, strerror(errno));</span>
<span class='curline'><a href='../S/1201.html#L251'>L</a>                 251 src/lua/liolib.cpp static int io_open (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L252'>L</a>                 252 src/lua/liolib.cpp   const char *filename = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1201.html#L253'>L</a>                 253 src/lua/liolib.cpp   const char *mode = luaL_optstring(L, 2, "r");</span>
<span class='curline'><a href='../S/1201.html#L254'>L</a>                 254 src/lua/liolib.cpp   LStream *p = newfile(L);</span>
<span class='curline'><a href='../S/1201.html#L256'>L</a>                 256 src/lua/liolib.cpp   luaL_argcheck(L, l_checkmode(md), 2, "invalid mode");</span>
<span class='curline'><a href='../S/1201.html#L258'>L</a>                 258 src/lua/liolib.cpp   return (p-&gt;f == NULL) ? luaL_fileresult(L, 0, filename) : 1;</span>
<span class='curline'><a href='../S/1201.html#L265'>L</a>                 265 src/lua/liolib.cpp static int io_pclose (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L266'>L</a>                 266 src/lua/liolib.cpp   LStream *p = tolstream(L);</span>
<span class='curline'><a href='../S/1201.html#L267'>L</a>                 267 src/lua/liolib.cpp   return luaL_execresult(L, l_pclose(L, p-&gt;f));</span>
<span class='curline'><a href='../S/1201.html#L271'>L</a>                 271 src/lua/liolib.cpp static int io_popen (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L272'>L</a>                 272 src/lua/liolib.cpp   const char *filename = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1201.html#L273'>L</a>                 273 src/lua/liolib.cpp   const char *mode = luaL_optstring(L, 2, "r");</span>
<span class='curline'><a href='../S/1201.html#L274'>L</a>                 274 src/lua/liolib.cpp   LStream *p = newprefile(L);</span>
<span class='curline'><a href='../S/1201.html#L275'>L</a>                 275 src/lua/liolib.cpp   p-&gt;f = l_popen(L, filename, mode);</span>
<span class='curline'><a href='../S/1201.html#L277'>L</a>                 277 src/lua/liolib.cpp   return (p-&gt;f == NULL) ? luaL_fileresult(L, 0, filename) : 1;</span>
<span class='curline'><a href='../S/1201.html#L281'>L</a>                 281 src/lua/liolib.cpp static int io_tmpfile (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L282'>L</a>                 282 src/lua/liolib.cpp   LStream *p = newfile(L);</span>
<span class='curline'><a href='../S/1201.html#L284'>L</a>                 284 src/lua/liolib.cpp   return (p-&gt;f == NULL) ? luaL_fileresult(L, 0, NULL) : 1;</span>
<span class='curline'><a href='../S/1201.html#L288'>L</a>                 288 src/lua/liolib.cpp static FILE *getiofile (lua_State *L, const char *findex) {</span>
<span class='curline'><a href='../S/1201.html#L290'>L</a>                 290 src/lua/liolib.cpp   lua_getfield(L, LUA_REGISTRYINDEX, findex);</span>
<span class='curline'><a href='../S/1201.html#L291'>L</a>                 291 src/lua/liolib.cpp   p = (LStream *)lua_touserdata(L, -1);</span>
<span class='curline'><a href='../S/1201.html#L293'>L</a>                 293 src/lua/liolib.cpp     luaL_error(L, "standard %s file is closed", findex + IOPREF_LEN);</span>
<span class='curline'><a href='../S/1201.html#L298'>L</a>                 298 src/lua/liolib.cpp static int g_iofile (lua_State *L, const char *f, const char *mode) {</span>
<span class='curline'><a href='../S/1201.html#L299'>L</a>                 299 src/lua/liolib.cpp   if (!lua_isnoneornil(L, 1)) {</span>
<span class='curline'><a href='../S/1201.html#L300'>L</a>                 300 src/lua/liolib.cpp     const char *filename = lua_tostring(L, 1);</span>
<span class='curline'><a href='../S/1201.html#L302'>L</a>                 302 src/lua/liolib.cpp       opencheck(L, filename, mode);</span>
<span class='curline'><a href='../S/1201.html#L304'>L</a>                 304 src/lua/liolib.cpp       tofile(L);  /* check that it's a valid file handle */</span>
<span class='curline'><a href='../S/1201.html#L305'>L</a>                 305 src/lua/liolib.cpp       lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/1201.html#L307'>L</a>                 307 src/lua/liolib.cpp     lua_setfield(L, LUA_REGISTRYINDEX, f);</span>
<span class='curline'><a href='../S/1201.html#L310'>L</a>                 310 src/lua/liolib.cpp   lua_getfield(L, LUA_REGISTRYINDEX, f);</span>
<span class='curline'><a href='../S/1201.html#L315'>L</a>                 315 src/lua/liolib.cpp static int io_input (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L316'>L</a>                 316 src/lua/liolib.cpp   return g_iofile(L, IO_INPUT, "r");</span>
<span class='curline'><a href='../S/1201.html#L320'>L</a>                 320 src/lua/liolib.cpp static int io_output (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L321'>L</a>                 321 src/lua/liolib.cpp   return g_iofile(L, IO_OUTPUT, "w");</span>
<span class='curline'><a href='../S/1201.html#L325'>L</a>                 325 src/lua/liolib.cpp static int io_readline (lua_State *L);</span>
<span class='curline'><a href='../S/1201.html#L334'>L</a>                 334 src/lua/liolib.cpp static void aux_lines (lua_State *L, int toclose) {</span>
<span class='curline'><a href='../S/1201.html#L335'>L</a>                 335 src/lua/liolib.cpp   int n = lua_gettop(L) - 1;  /* number of arguments to read */</span>
<span class='curline'><a href='../S/1201.html#L336'>L</a>                 336 src/lua/liolib.cpp   luaL_argcheck(L, n &lt;= MAXARGLINE, MAXARGLINE + 2, "too many arguments");</span>
<span class='curline'><a href='../S/1201.html#L337'>L</a>                 337 src/lua/liolib.cpp   lua_pushinteger(L, n);  /* number of arguments to read */</span>
<span class='curline'><a href='../S/1201.html#L338'>L</a>                 338 src/lua/liolib.cpp   lua_pushboolean(L, toclose);  /* close/not close file when finished */</span>
<span class='curline'><a href='../S/1201.html#L339'>L</a>                 339 src/lua/liolib.cpp   lua_rotate(L, 2, 2);  /* move 'n' and 'toclose' to their positions */</span>
<span class='curline'><a href='../S/1201.html#L340'>L</a>                 340 src/lua/liolib.cpp   lua_pushcclosure(L, io_readline, 3 + n);</span>
<span class='curline'><a href='../S/1201.html#L344'>L</a>                 344 src/lua/liolib.cpp static int f_lines (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L345'>L</a>                 345 src/lua/liolib.cpp   tofile(L);  /* check that it's a valid file handle */</span>
<span class='curline'><a href='../S/1201.html#L346'>L</a>                 346 src/lua/liolib.cpp   aux_lines(L, 0);</span>
<span class='curline'><a href='../S/1201.html#L351'>L</a>                 351 src/lua/liolib.cpp static int io_lines (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L353'>L</a>                 353 src/lua/liolib.cpp   if (lua_isnone(L, 1)) lua_pushnil(L);  /* at least one argument */</span>
<span class='curline'><a href='../S/1201.html#L354'>L</a>                 354 src/lua/liolib.cpp   if (lua_isnil(L, 1)) {  /* no file name? */</span>
<span class='curline'><a href='../S/1201.html#L355'>L</a>                 355 src/lua/liolib.cpp     lua_getfield(L, LUA_REGISTRYINDEX, IO_INPUT);  /* get default input */</span>
<span class='curline'><a href='../S/1201.html#L356'>L</a>                 356 src/lua/liolib.cpp     lua_replace(L, 1);  /* put it at index 1 */</span>
<span class='curline'><a href='../S/1201.html#L357'>L</a>                 357 src/lua/liolib.cpp     tofile(L);  /* check that it's a valid file handle */</span>
<span class='curline'><a href='../S/1201.html#L361'>L</a>                 361 src/lua/liolib.cpp     const char *filename = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1201.html#L362'>L</a>                 362 src/lua/liolib.cpp     opencheck(L, filename, "r");</span>
<span class='curline'><a href='../S/1201.html#L363'>L</a>                 363 src/lua/liolib.cpp     lua_replace(L, 1);  /* put file at index 1 */</span>
<span class='curline'><a href='../S/1201.html#L366'>L</a>                 366 src/lua/liolib.cpp   aux_lines(L, toclose);</span>
<span class='curline'><a href='../S/1201.html#L435'>L</a>                 435 src/lua/liolib.cpp static int read_number (lua_State *L, FILE *f) {</span>
<span class='curline'><a href='../S/1201.html#L460'>L</a>                 460 src/lua/liolib.cpp   if (lua_stringtonumber(L, rn.buff))  /* is this a valid number? */</span>
<span class='curline'><a href='../S/1201.html#L463'>L</a>                 463 src/lua/liolib.cpp    lua_pushnil(L);  /* "result" to be removed */</span>
<span class='curline'><a href='../S/1201.html#L469'>L</a>                 469 src/lua/liolib.cpp static int test_eof (lua_State *L, FILE *f) {</span>
<span class='curline'><a href='../S/1201.html#L472'>L</a>                 472 src/lua/liolib.cpp   lua_pushliteral(L, "");</span>
<span class='curline'><a href='../S/1201.html#L477'>L</a>                 477 src/lua/liolib.cpp static int read_line (lua_State *L, FILE *f, int chop) {</span>
<span class='curline'><a href='../S/1201.html#L480'>L</a>                 480 src/lua/liolib.cpp   luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/1201.html#L494'>L</a>                 494 src/lua/liolib.cpp   return (c == '\n' || lua_rawlen(L, -1) &gt; 0);</span>
<span class='curline'><a href='../S/1201.html#L498'>L</a>                 498 src/lua/liolib.cpp static void read_all (lua_State *L, FILE *f) {</span>
<span class='curline'><a href='../S/1201.html#L501'>L</a>                 501 src/lua/liolib.cpp   luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/1201.html#L511'>L</a>                 511 src/lua/liolib.cpp static int read_chars (lua_State *L, FILE *f, size_t n) {</span>
<span class='curline'><a href='../S/1201.html#L515'>L</a>                 515 src/lua/liolib.cpp   luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/1201.html#L524'>L</a>                 524 src/lua/liolib.cpp static int g_read (lua_State *L, FILE *f, int first) {</span>
<span class='curline'><a href='../S/1201.html#L525'>L</a>                 525 src/lua/liolib.cpp   int nargs = lua_gettop(L) - 1;</span>
<span class='curline'><a href='../S/1201.html#L530'>L</a>                 530 src/lua/liolib.cpp     success = read_line(L, f, 1);</span>
<span class='curline'><a href='../S/1201.html#L534'>L</a>                 534 src/lua/liolib.cpp     luaL_checkstack(L, nargs+LUA_MINSTACK, "too many arguments");</span>
<span class='curline'><a href='../S/1201.html#L537'>L</a>                 537 src/lua/liolib.cpp       if (lua_type(L, n) == LUA_TNUMBER) {</span>
<span class='curline'><a href='../S/1201.html#L538'>L</a>                 538 src/lua/liolib.cpp         size_t l = (size_t)luaL_checkinteger(L, n);</span>
<span class='curline'><a href='../S/1201.html#L539'>L</a>                 539 src/lua/liolib.cpp         success = (l == 0) ? test_eof(L, f) : read_chars(L, f, l);</span>
<span class='curline'><a href='../S/1201.html#L542'>L</a>                 542 src/lua/liolib.cpp         const char *p = luaL_checkstring(L, n);</span>
<span class='curline'><a href='../S/1201.html#L546'>L</a>                 546 src/lua/liolib.cpp             success = read_number(L, f);</span>
<span class='curline'><a href='../S/1201.html#L549'>L</a>                 549 src/lua/liolib.cpp             success = read_line(L, f, 1);</span>
<span class='curline'><a href='../S/1201.html#L552'>L</a>                 552 src/lua/liolib.cpp             success = read_line(L, f, 0);</span>
<span class='curline'><a href='../S/1201.html#L555'>L</a>                 555 src/lua/liolib.cpp             read_all(L, f);  /* read entire file */</span>
<span class='curline'><a href='../S/1201.html#L559'>L</a>                 559 src/lua/liolib.cpp             return luaL_argerror(L, n, "invalid format");</span>
<span class='curline'><a href='../S/1201.html#L565'>L</a>                 565 src/lua/liolib.cpp     return luaL_fileresult(L, 0, NULL);</span>
<span class='curline'><a href='../S/1201.html#L567'>L</a>                 567 src/lua/liolib.cpp     lua_pop(L, 1);  /* remove last result */</span>
<span class='curline'><a href='../S/1201.html#L568'>L</a>                 568 src/lua/liolib.cpp     lua_pushnil(L);  /* push nil instead */</span>
<span class='curline'><a href='../S/1201.html#L574'>L</a>                 574 src/lua/liolib.cpp static int io_read (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L575'>L</a>                 575 src/lua/liolib.cpp   return g_read(L, getiofile(L, IO_INPUT), 1);</span>
<span class='curline'><a href='../S/1201.html#L579'>L</a>                 579 src/lua/liolib.cpp static int f_read (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L580'>L</a>                 580 src/lua/liolib.cpp   return g_read(L, tofile(L), 2);</span>
<span class='curline'><a href='../S/1201.html#L584'>L</a>                 584 src/lua/liolib.cpp static int io_readline (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L585'>L</a>                 585 src/lua/liolib.cpp   LStream *p = (LStream *)lua_touserdata(L, lua_upvalueindex(1));</span>
<span class='curline'><a href='../S/1201.html#L587'>L</a>                 587 src/lua/liolib.cpp   int n = (int)lua_tointeger(L, lua_upvalueindex(2));</span>
<span class='curline'><a href='../S/1201.html#L589'>L</a>                 589 src/lua/liolib.cpp     return luaL_error(L, "file is already closed");</span>
<span class='curline'><a href='../S/1201.html#L590'>L</a>                 590 src/lua/liolib.cpp   lua_settop(L , 1);</span>
<span class='curline'><a href='../S/1201.html#L591'>L</a>                 591 src/lua/liolib.cpp   luaL_checkstack(L, n, "too many arguments");</span>
<span class='curline'><a href='../S/1201.html#L593'>L</a>                 593 src/lua/liolib.cpp     lua_pushvalue(L, lua_upvalueindex(3 + i));</span>
<span class='curline'><a href='../S/1201.html#L594'>L</a>                 594 src/lua/liolib.cpp   n = g_read(L, p-&gt;f, 2);  /* 'n' is number of results */</span>
<span class='curline'><a href='../S/1201.html#L596'>L</a>                 596 src/lua/liolib.cpp   if (lua_toboolean(L, -n))  /* read at least one value? */</span>
<span class='curline'><a href='../S/1201.html#L601'>L</a>                 601 src/lua/liolib.cpp       return luaL_error(L, "%s", lua_tostring(L, -n + 1));</span>
<span class='curline'><a href='../S/1201.html#L603'>L</a>                 603 src/lua/liolib.cpp     if (lua_toboolean(L, lua_upvalueindex(3))) {  /* generator created file? */</span>
<span class='curline'><a href='../S/1201.html#L604'>L</a>                 604 src/lua/liolib.cpp       lua_settop(L, 0);</span>
<span class='curline'><a href='../S/1201.html#L605'>L</a>                 605 src/lua/liolib.cpp       lua_pushvalue(L, lua_upvalueindex(1));</span>
<span class='curline'><a href='../S/1201.html#L606'>L</a>                 606 src/lua/liolib.cpp       aux_close(L);  /* close it */</span>
<span class='curline'><a href='../S/1201.html#L615'>L</a>                 615 src/lua/liolib.cpp static int g_write (lua_State *L, FILE *f, int arg) {</span>
<span class='curline'><a href='../S/1201.html#L616'>L</a>                 616 src/lua/liolib.cpp   int nargs = lua_gettop(L) - arg;</span>
<span class='curline'><a href='../S/1201.html#L619'>L</a>                 619 src/lua/liolib.cpp     if (lua_type(L, arg) == LUA_TNUMBER) {</span>
<span class='curline'><a href='../S/1201.html#L621'>L</a>                 621 src/lua/liolib.cpp       int len = lua_isinteger(L, arg)</span>
<span class='curline'><a href='../S/1201.html#L623'>L</a>                 623 src/lua/liolib.cpp                              (LUAI_UACINT)lua_tointeger(L, arg))</span>
<span class='curline'><a href='../S/1201.html#L625'>L</a>                 625 src/lua/liolib.cpp                              (LUAI_UACNUMBER)lua_tonumber(L, arg));</span>
<span class='curline'><a href='../S/1201.html#L630'>L</a>                 630 src/lua/liolib.cpp       const char *s = luaL_checklstring(L, arg, &amp;l);</span>
<span class='curline'><a href='../S/1201.html#L635'>L</a>                 635 src/lua/liolib.cpp   else return luaL_fileresult(L, status, NULL);</span>
<span class='curline'><a href='../S/1201.html#L639'>L</a>                 639 src/lua/liolib.cpp static int io_write (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L640'>L</a>                 640 src/lua/liolib.cpp   return g_write(L, getiofile(L, IO_OUTPUT), 1);</span>
<span class='curline'><a href='../S/1201.html#L644'>L</a>                 644 src/lua/liolib.cpp static int f_write (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L645'>L</a>                 645 src/lua/liolib.cpp   FILE *f = tofile(L);</span>
<span class='curline'><a href='../S/1201.html#L646'>L</a>                 646 src/lua/liolib.cpp   lua_pushvalue(L, 1);  /* push file at the stack top (to be returned) */</span>
<span class='curline'><a href='../S/1201.html#L647'>L</a>                 647 src/lua/liolib.cpp   return g_write(L, f, 2);</span>
<span class='curline'><a href='../S/1201.html#L651'>L</a>                 651 src/lua/liolib.cpp static int f_seek (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L654'>L</a>                 654 src/lua/liolib.cpp   FILE *f = tofile(L);</span>
<span class='curline'><a href='../S/1201.html#L655'>L</a>                 655 src/lua/liolib.cpp   int op = luaL_checkoption(L, 2, "cur", modenames);</span>
<span class='curline'><a href='../S/1201.html#L656'>L</a>                 656 src/lua/liolib.cpp   lua_Integer p3 = luaL_optinteger(L, 3, 0);</span>
<span class='curline'><a href='../S/1201.html#L658'>L</a>                 658 src/lua/liolib.cpp   luaL_argcheck(L, (lua_Integer)offset == p3, 3,</span>
<span class='curline'><a href='../S/1201.html#L662'>L</a>                 662 src/lua/liolib.cpp     return luaL_fileresult(L, 0, NULL);  /* error */</span>
<span class='curline'><a href='../S/1201.html#L664'>L</a>                 664 src/lua/liolib.cpp     lua_pushinteger(L, (lua_Integer)l_ftell(f));</span>
<span class='curline'><a href='../S/1201.html#L670'>L</a>                 670 src/lua/liolib.cpp static int f_setvbuf (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L673'>L</a>                 673 src/lua/liolib.cpp   FILE *f = tofile(L);</span>
<span class='curline'><a href='../S/1201.html#L674'>L</a>                 674 src/lua/liolib.cpp   int op = luaL_checkoption(L, 2, NULL, modenames);</span>
<span class='curline'><a href='../S/1201.html#L675'>L</a>                 675 src/lua/liolib.cpp   lua_Integer sz = luaL_optinteger(L, 3, LUAL_BUFFERSIZE);</span>
<span class='curline'><a href='../S/1201.html#L677'>L</a>                 677 src/lua/liolib.cpp   return luaL_fileresult(L, res == 0, NULL);</span>
<span class='curline'><a href='../S/1201.html#L682'>L</a>                 682 src/lua/liolib.cpp static int io_flush (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L683'>L</a>                 683 src/lua/liolib.cpp   return luaL_fileresult(L, fflush(getiofile(L, IO_OUTPUT)) == 0, NULL);</span>
<span class='curline'><a href='../S/1201.html#L687'>L</a>                 687 src/lua/liolib.cpp static int f_flush (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L688'>L</a>                 688 src/lua/liolib.cpp   return luaL_fileresult(L, fflush(tofile(L)) == 0, NULL);</span>
<span class='curline'><a href='../S/1201.html#L728'>L</a>                 728 src/lua/liolib.cpp static void createmeta (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L729'>L</a>                 729 src/lua/liolib.cpp   luaL_newmetatable(L, LUA_FILEHANDLE);  /* create metatable for file handles */</span>
<span class='curline'><a href='../S/1201.html#L730'>L</a>                 730 src/lua/liolib.cpp   lua_pushvalue(L, -1);  /* push metatable */</span>
<span class='curline'><a href='../S/1201.html#L731'>L</a>                 731 src/lua/liolib.cpp   lua_setfield(L, -2, "__index");  /* metatable.__index = metatable */</span>
<span class='curline'><a href='../S/1201.html#L732'>L</a>                 732 src/lua/liolib.cpp   luaL_setfuncs(L, flib, 0);  /* add file methods to new metatable */</span>
<span class='curline'><a href='../S/1201.html#L733'>L</a>                 733 src/lua/liolib.cpp   lua_pop(L, 1);  /* pop new metatable */</span>
<span class='curline'><a href='../S/1201.html#L740'>L</a>                 740 src/lua/liolib.cpp static int io_noclose (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L741'>L</a>                 741 src/lua/liolib.cpp   LStream *p = tolstream(L);</span>
<span class='curline'><a href='../S/1201.html#L743'>L</a>                 743 src/lua/liolib.cpp   lua_pushnil(L);</span>
<span class='curline'><a href='../S/1201.html#L744'>L</a>                 744 src/lua/liolib.cpp   lua_pushliteral(L, "cannot close standard file");</span>
<span class='curline'><a href='../S/1201.html#L749'>L</a>                 749 src/lua/liolib.cpp static void createstdfile (lua_State *L, FILE *f, const char *k,</span>
<span class='curline'><a href='../S/1201.html#L751'>L</a>                 751 src/lua/liolib.cpp   LStream *p = newprefile(L);</span>
<span class='curline'><a href='../S/1201.html#L755'>L</a>                 755 src/lua/liolib.cpp     lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/1201.html#L756'>L</a>                 756 src/lua/liolib.cpp     lua_setfield(L, LUA_REGISTRYINDEX, k);  /* add file to registry */</span>
<span class='curline'><a href='../S/1201.html#L758'>L</a>                 758 src/lua/liolib.cpp   lua_setfield(L, -2, fname);  /* add file to module */</span>
<span class='curline'><a href='../S/1201.html#L762'>L</a>                 762 src/lua/liolib.cpp LUAMOD_API int luaopen_io (lua_State *L) {</span>
<span class='curline'><a href='../S/1201.html#L763'>L</a>                 763 src/lua/liolib.cpp   luaL_newlib(L, iolib);  /* new module */</span>
<span class='curline'><a href='../S/1201.html#L764'>L</a>                 764 src/lua/liolib.cpp   createmeta(L);</span>
<span class='curline'><a href='../S/1201.html#L766'>L</a>                 766 src/lua/liolib.cpp   createstdfile(L, stdin, IO_INPUT, "stdin");</span>
<span class='curline'><a href='../S/1201.html#L767'>L</a>                 767 src/lua/liolib.cpp   createstdfile(L, stdout, IO_OUTPUT, "stdout");</span>
<span class='curline'><a href='../S/1201.html#L768'>L</a>                 768 src/lua/liolib.cpp   createstdfile(L, stderr, NULL, "stderr");</span>
<span class='curline'><a href='../S/1177.html#L64'>L</a>                  64 src/lua/llex.cpp     luaZ_resizebuffer(ls-&gt;L, b, newsize);</span>
<span class='curline'><a href='../S/1177.html#L70'>L</a>                  70 src/lua/llex.cpp void luaX_init (lua_State *L) {</span>
<span class='curline'><a href='../S/1177.html#L72'>L</a>                  72 src/lua/llex.cpp   TString *e = luaS_newliteral(L, LUA_ENV);  /* create env name */</span>
<span class='curline'><a href='../S/1177.html#L73'>L</a>                  73 src/lua/llex.cpp   luaC_fix(L, obj2gco(e));  /* never collect this name */</span>
<span class='curline'><a href='../S/1177.html#L75'>L</a>                  75 src/lua/llex.cpp     TString *ts = luaS_new(L, luaX_tokens[i]);</span>
<span class='curline'><a href='../S/1177.html#L76'>L</a>                  76 src/lua/llex.cpp     luaC_fix(L, obj2gco(ts));  /* reserved words are never collected */</span>
<span class='curline'><a href='../S/1177.html#L85'>L</a>                  85 src/lua/llex.cpp     return luaO_pushfstring(ls-&gt;L, "'%c'", token);</span>
<span class='curline'><a href='../S/1177.html#L90'>L</a>                  90 src/lua/llex.cpp       return luaO_pushfstring(ls-&gt;L, "'%s'", s);</span>
<span class='curline'><a href='../S/1177.html#L102'>L</a>                 102 src/lua/llex.cpp       return luaO_pushfstring(ls-&gt;L, "'%s'", luaZ_buffer(ls-&gt;buff));</span>
<span class='curline'><a href='../S/1177.html#L110'>L</a>                 110 src/lua/llex.cpp   msg = luaG_addinfo(ls-&gt;L, msg, ls-&gt;source, ls-&gt;linenumber);</span>
<span class='curline'><a href='../S/1177.html#L112'>L</a>                 112 src/lua/llex.cpp     luaO_pushfstring(ls-&gt;L, "%s near %s", msg, txtToken(ls, token));</span>
<span class='curline'><a href='../S/1177.html#L113'>L</a>                 113 src/lua/llex.cpp   luaD_throw(ls-&gt;L, LUA_ERRSYNTAX);</span>
<span class='curline'><a href='../S/1177.html#L128'>L</a>                 128 src/lua/llex.cpp   lua_State *L = ls-&gt;L;</span>
<span class='curline'><a href='../S/1177.html#L130'>L</a>                 130 src/lua/llex.cpp   TString *ts = luaS_newlstr(L, str, l);  /* create new string */</span>
<span class='curline'><a href='../S/1177.html#L131'>L</a>                 131 src/lua/llex.cpp   setsvalue2s(L, L-&gt;top++, ts);  /* temporarily anchor it in stack */</span>
<span class='curline'><a href='../S/1177.html#L132'>L</a>                 132 src/lua/llex.cpp   o = luaH_set(L, ls-&gt;h, L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1177.html#L137'>L</a>                 137 src/lua/llex.cpp     luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1177.html#L142'>L</a>                 142 src/lua/llex.cpp   L-&gt;top--;  /* remove string from stack */</span>
<span class='curline'><a href='../S/1177.html#L162'>L</a>                 162 src/lua/llex.cpp void luaX_setinput (lua_State *L, LexState *ls, ZIO *z, TString *source,</span>
<span class='curline'><a href='../S/1177.html#L165'>L</a>                 165 src/lua/llex.cpp   ls-&gt;L = L;</span>
<span class='curline'><a href='../S/1177.html#L173'>L</a>                 173 src/lua/llex.cpp   ls-&gt;envn = luaS_newliteral(L, LUA_ENV);  /* get env name */</span>
<span class='curline'><a href='../S/1177.html#L174'>L</a>                 174 src/lua/llex.cpp   luaZ_resizebuffer(ls-&gt;L, ls-&gt;buff, LUA_MINBUFFER);  /* initialize buffer */</span>
<span class='curline'><a href='../S/1177.html#L273'>L</a>                 273 src/lua/llex.cpp         const char *msg = luaO_pushfstring(ls-&gt;L,</span>
<span class='curline'><a href='../S/1176.html#L65'>L</a>                  65 src/lua/llex.h   struct lua_State *L;</span>
<span class='curline'><a href='../S/1176.html#L75'>L</a>                  75 src/lua/llex.h LUAI_FUNC void luaX_init (lua_State *L);</span>
<span class='curline'><a href='../S/1176.html#L76'>L</a>                  76 src/lua/llex.h LUAI_FUNC void luaX_setinput (lua_State *L, LexState *ls, ZIO *z,</span>
<span class='curline'><a href='../S/1198.html#L214'>L</a>                 214 src/lua/llimits.h #define lua_lock(L)	((void) 0)</span>
<span class='curline'><a href='../S/1198.html#L215'>L</a>                 215 src/lua/llimits.h #define lua_unlock(L)	((void) 0)</span>
<span class='curline'><a href='../S/1198.html#L223'>L</a>                 223 src/lua/llimits.h #define luai_threadyield(L)	{lua_unlock(L); lua_lock(L);}</span>
<span class='curline'><a href='../S/1198.html#L233'>L</a>                 233 src/lua/llimits.h #define luai_userstateopen(L)		((void)L)</span>
<span class='curline'><a href='../S/1198.html#L237'>L</a>                 237 src/lua/llimits.h #define luai_userstateclose(L)		((void)L)</span>
<span class='curline'><a href='../S/1198.html#L241'>L</a>                 241 src/lua/llimits.h #define luai_userstatethread(L,L1)	((void)L)</span>
<span class='curline'><a href='../S/1198.html#L245'>L</a>                 245 src/lua/llimits.h #define luai_userstatefree(L,L1)	((void)L)</span>
<span class='curline'><a href='../S/1198.html#L249'>L</a>                 249 src/lua/llimits.h #define luai_userstateresume(L,n)	((void)L)</span>
<span class='curline'><a href='../S/1198.html#L253'>L</a>                 253 src/lua/llimits.h #define luai_userstateyield(L,n)	((void)L)</span>
<span class='curline'><a href='../S/1198.html#L264'>L</a>                 264 src/lua/llimits.h #define luai_numidiv(L,a,b)     ((void)L, l_floor(luai_numdiv(L,a,b)))</span>
<span class='curline'><a href='../S/1198.html#L269'>L</a>                 269 src/lua/llimits.h #define luai_numdiv(L,a,b)      ((a)/(b))</span>
<span class='curline'><a href='../S/1198.html#L280'>L</a>                 280 src/lua/llimits.h #define luai_nummod(L,a,b,m)  \</span>
<span class='curline'><a href='../S/1198.html#L286'>L</a>                 286 src/lua/llimits.h #define luai_numpow(L,a,b)      ((void)L, l_mathop(pow)(a,b))</span>
<span class='curline'><a href='../S/1198.html#L291'>L</a>                 291 src/lua/llimits.h #define luai_numadd(L,a,b)      ((a)+(b))</span>
<span class='curline'><a href='../S/1198.html#L292'>L</a>                 292 src/lua/llimits.h #define luai_numsub(L,a,b)      ((a)-(b))</span>
<span class='curline'><a href='../S/1198.html#L293'>L</a>                 293 src/lua/llimits.h #define luai_nummul(L,a,b)      ((a)*(b))</span>
<span class='curline'><a href='../S/1198.html#L294'>L</a>                 294 src/lua/llimits.h #define luai_numunm(L,a)        (-(a))</span>
<span class='curline'><a href='../S/1198.html#L309'>L</a>                 309 src/lua/llimits.h #define condmovestack(L,pre,pos)	((void)0)</span>
<span class='curline'><a href='../S/1198.html#L312'>L</a>                 312 src/lua/llimits.h #define condmovestack(L,pre,pos)  \</span>
<span class='curline'><a href='../S/1198.html#L313'>L</a>                 313 src/lua/llimits.h 	{ int sz_ = (L)-&gt;stacksize; pre; luaD_reallocstack((L), sz_); pos; }</span>
<span class='curline'><a href='../S/1198.html#L317'>L</a>                 317 src/lua/llimits.h #define condchangemem(L,pre,pos)	((void)0)</span>
<span class='curline'><a href='../S/1198.html#L319'>L</a>                 319 src/lua/llimits.h #define condchangemem(L,pre,pos)  \</span>
<span class='curline'><a href='../S/1198.html#L320'>L</a>                 320 src/lua/llimits.h 	{ if (G(L)-&gt;gcrunning) { pre; luaC_fullgc(L, 0); pos; } }</span>
<span class='curline'><a href='../S/1216.html#L39'>L</a>                  39 src/lua/lmathlib.cpp static int math_abs (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L40'>L</a>                  40 src/lua/lmathlib.cpp   if (lua_isinteger(L, 1)) {</span>
<span class='curline'><a href='../S/1216.html#L41'>L</a>                  41 src/lua/lmathlib.cpp     lua_Integer n = lua_tointeger(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L43'>L</a>                  43 src/lua/lmathlib.cpp     lua_pushinteger(L, n);</span>
<span class='curline'><a href='../S/1216.html#L46'>L</a>                  46 src/lua/lmathlib.cpp     lua_pushnumber(L, l_mathop(fabs)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L50'>L</a>                  50 src/lua/lmathlib.cpp static int math_sin (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L51'>L</a>                  51 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(sin)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L55'>L</a>                  55 src/lua/lmathlib.cpp static int math_cos (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L56'>L</a>                  56 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(cos)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L60'>L</a>                  60 src/lua/lmathlib.cpp static int math_tan (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L61'>L</a>                  61 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(tan)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L65'>L</a>                  65 src/lua/lmathlib.cpp static int math_asin (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L66'>L</a>                  66 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(asin)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L70'>L</a>                  70 src/lua/lmathlib.cpp static int math_acos (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L71'>L</a>                  71 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(acos)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L75'>L</a>                  75 src/lua/lmathlib.cpp static int math_atan (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L76'>L</a>                  76 src/lua/lmathlib.cpp   lua_Number y = luaL_checknumber(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L77'>L</a>                  77 src/lua/lmathlib.cpp   lua_Number x = luaL_optnumber(L, 2, 1);</span>
<span class='curline'><a href='../S/1216.html#L78'>L</a>                  78 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(atan2)(y, x));</span>
<span class='curline'><a href='../S/1216.html#L83'>L</a>                  83 src/lua/lmathlib.cpp static int math_toint (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L85'>L</a>                  85 src/lua/lmathlib.cpp   lua_Integer n = lua_tointegerx(L, 1, &amp;valid);</span>
<span class='curline'><a href='../S/1216.html#L87'>L</a>                  87 src/lua/lmathlib.cpp     lua_pushinteger(L, n);</span>
<span class='curline'><a href='../S/1216.html#L89'>L</a>                  89 src/lua/lmathlib.cpp     luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L90'>L</a>                  90 src/lua/lmathlib.cpp     lua_pushnil(L);  /* value is not convertible to integer */</span>
<span class='curline'><a href='../S/1216.html#L96'>L</a>                  96 src/lua/lmathlib.cpp static void pushnumint (lua_State *L, lua_Number d) {</span>
<span class='curline'><a href='../S/1216.html#L99'>L</a>                  99 src/lua/lmathlib.cpp     lua_pushinteger(L, n);  /* result is integer */</span>
<span class='curline'><a href='../S/1216.html#L101'>L</a>                 101 src/lua/lmathlib.cpp     lua_pushnumber(L, d);  /* result is float */</span>
<span class='curline'><a href='../S/1216.html#L105'>L</a>                 105 src/lua/lmathlib.cpp static int math_floor (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L106'>L</a>                 106 src/lua/lmathlib.cpp   if (lua_isinteger(L, 1))</span>
<span class='curline'><a href='../S/1216.html#L107'>L</a>                 107 src/lua/lmathlib.cpp     lua_settop(L, 1);  /* integer is its own floor */</span>
<span class='curline'><a href='../S/1216.html#L109'>L</a>                 109 src/lua/lmathlib.cpp     lua_Number d = l_mathop(floor)(luaL_checknumber(L, 1));</span>
<span class='curline'><a href='../S/1216.html#L110'>L</a>                 110 src/lua/lmathlib.cpp     pushnumint(L, d);</span>
<span class='curline'><a href='../S/1216.html#L116'>L</a>                 116 src/lua/lmathlib.cpp static int math_ceil (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L117'>L</a>                 117 src/lua/lmathlib.cpp   if (lua_isinteger(L, 1))</span>
<span class='curline'><a href='../S/1216.html#L118'>L</a>                 118 src/lua/lmathlib.cpp     lua_settop(L, 1);  /* integer is its own ceil */</span>
<span class='curline'><a href='../S/1216.html#L120'>L</a>                 120 src/lua/lmathlib.cpp     lua_Number d = l_mathop(ceil)(luaL_checknumber(L, 1));</span>
<span class='curline'><a href='../S/1216.html#L121'>L</a>                 121 src/lua/lmathlib.cpp     pushnumint(L, d);</span>
<span class='curline'><a href='../S/1216.html#L127'>L</a>                 127 src/lua/lmathlib.cpp static int math_fmod (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L128'>L</a>                 128 src/lua/lmathlib.cpp   if (lua_isinteger(L, 1) &amp;&amp; lua_isinteger(L, 2)) {</span>
<span class='curline'><a href='../S/1216.html#L129'>L</a>                 129 src/lua/lmathlib.cpp     lua_Integer d = lua_tointeger(L, 2);</span>
<span class='curline'><a href='../S/1216.html#L131'>L</a>                 131 src/lua/lmathlib.cpp       luaL_argcheck(L, d != 0, 2, "zero");</span>
<span class='curline'><a href='../S/1216.html#L132'>L</a>                 132 src/lua/lmathlib.cpp       lua_pushinteger(L, 0);  /* avoid overflow with 0x80000... / -1 */</span>
<span class='curline'><a href='../S/1216.html#L135'>L</a>                 135 src/lua/lmathlib.cpp       lua_pushinteger(L, lua_tointeger(L, 1) % d);</span>
<span class='curline'><a href='../S/1216.html#L138'>L</a>                 138 src/lua/lmathlib.cpp     lua_pushnumber(L, l_mathop(fmod)(luaL_checknumber(L, 1),</span>
<span class='curline'><a href='../S/1216.html#L139'>L</a>                 139 src/lua/lmathlib.cpp                                      luaL_checknumber(L, 2)));</span>
<span class='curline'><a href='../S/1216.html#L149'>L</a>                 149 src/lua/lmathlib.cpp static int math_modf (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L150'>L</a>                 150 src/lua/lmathlib.cpp   if (lua_isinteger(L ,1)) {</span>
<span class='curline'><a href='../S/1216.html#L151'>L</a>                 151 src/lua/lmathlib.cpp     lua_settop(L, 1);  /* number is its own integer part */</span>
<span class='curline'><a href='../S/1216.html#L152'>L</a>                 152 src/lua/lmathlib.cpp     lua_pushnumber(L, 0);  /* no fractional part */</span>
<span class='curline'><a href='../S/1216.html#L155'>L</a>                 155 src/lua/lmathlib.cpp     lua_Number n = luaL_checknumber(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L158'>L</a>                 158 src/lua/lmathlib.cpp     pushnumint(L, ip);</span>
<span class='curline'><a href='../S/1216.html#L160'>L</a>                 160 src/lua/lmathlib.cpp     lua_pushnumber(L, (n == ip) ? l_mathop(0.0) : (n - ip));</span>
<span class='curline'><a href='../S/1216.html#L166'>L</a>                 166 src/lua/lmathlib.cpp static int math_sqrt (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L167'>L</a>                 167 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(sqrt)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L172'>L</a>                 172 src/lua/lmathlib.cpp static int math_ult (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L173'>L</a>                 173 src/lua/lmathlib.cpp   lua_Integer a = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L174'>L</a>                 174 src/lua/lmathlib.cpp   lua_Integer b = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/1216.html#L175'>L</a>                 175 src/lua/lmathlib.cpp   lua_pushboolean(L, (lua_Unsigned)a &lt; (lua_Unsigned)b);</span>
<span class='curline'><a href='../S/1216.html#L179'>L</a>                 179 src/lua/lmathlib.cpp static int math_log (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L180'>L</a>                 180 src/lua/lmathlib.cpp   lua_Number x = luaL_checknumber(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L182'>L</a>                 182 src/lua/lmathlib.cpp   if (lua_isnoneornil(L, 2))</span>
<span class='curline'><a href='../S/1216.html#L185'>L</a>                 185 src/lua/lmathlib.cpp     lua_Number base = luaL_checknumber(L, 2);</span>
<span class='curline'><a href='../S/1216.html#L195'>L</a>                 195 src/lua/lmathlib.cpp   lua_pushnumber(L, res);</span>
<span class='curline'><a href='../S/1216.html#L199'>L</a>                 199 src/lua/lmathlib.cpp static int math_exp (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L200'>L</a>                 200 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(exp)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L204'>L</a>                 204 src/lua/lmathlib.cpp static int math_deg (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L205'>L</a>                 205 src/lua/lmathlib.cpp   lua_pushnumber(L, luaL_checknumber(L, 1) * (l_mathop(180.0) / PI));</span>
<span class='curline'><a href='../S/1216.html#L209'>L</a>                 209 src/lua/lmathlib.cpp static int math_rad (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L210'>L</a>                 210 src/lua/lmathlib.cpp   lua_pushnumber(L, luaL_checknumber(L, 1) * (PI / l_mathop(180.0)));</span>
<span class='curline'><a href='../S/1216.html#L215'>L</a>                 215 src/lua/lmathlib.cpp static int math_min (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L216'>L</a>                 216 src/lua/lmathlib.cpp   int n = lua_gettop(L);  /* number of arguments */</span>
<span class='curline'><a href='../S/1216.html#L219'>L</a>                 219 src/lua/lmathlib.cpp   luaL_argcheck(L, n &gt;= 1, 1, "value expected");</span>
<span class='curline'><a href='../S/1216.html#L221'>L</a>                 221 src/lua/lmathlib.cpp     if (lua_compare(L, i, imin, LUA_OPLT))</span>
<span class='curline'><a href='../S/1216.html#L224'>L</a>                 224 src/lua/lmathlib.cpp   lua_pushvalue(L, imin);</span>
<span class='curline'><a href='../S/1216.html#L229'>L</a>                 229 src/lua/lmathlib.cpp static int math_max (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L230'>L</a>                 230 src/lua/lmathlib.cpp   int n = lua_gettop(L);  /* number of arguments */</span>
<span class='curline'><a href='../S/1216.html#L233'>L</a>                 233 src/lua/lmathlib.cpp   luaL_argcheck(L, n &gt;= 1, 1, "value expected");</span>
<span class='curline'><a href='../S/1216.html#L235'>L</a>                 235 src/lua/lmathlib.cpp     if (lua_compare(L, imax, i, LUA_OPLT))</span>
<span class='curline'><a href='../S/1216.html#L238'>L</a>                 238 src/lua/lmathlib.cpp   lua_pushvalue(L, imax);</span>
<span class='curline'><a href='../S/1216.html#L247'>L</a>                 247 src/lua/lmathlib.cpp static int math_random (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L250'>L</a>                 250 src/lua/lmathlib.cpp   switch (lua_gettop(L)) {  /* check number of arguments */</span>
<span class='curline'><a href='../S/1216.html#L252'>L</a>                 252 src/lua/lmathlib.cpp       lua_pushnumber(L, (lua_Number)r);  /* Number between 0 and 1 */</span>
<span class='curline'><a href='../S/1216.html#L257'>L</a>                 257 src/lua/lmathlib.cpp       up = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L261'>L</a>                 261 src/lua/lmathlib.cpp       low = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L262'>L</a>                 262 src/lua/lmathlib.cpp       up = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/1216.html#L265'>L</a>                 265 src/lua/lmathlib.cpp     default: return luaL_error(L, "wrong number of arguments");</span>
<span class='curline'><a href='../S/1216.html#L268'>L</a>                 268 src/lua/lmathlib.cpp   luaL_argcheck(L, low &lt;= up, 1, "interval is empty");</span>
<span class='curline'><a href='../S/1216.html#L269'>L</a>                 269 src/lua/lmathlib.cpp   luaL_argcheck(L, low &gt;= 0 || up &lt;= LUA_MAXINTEGER + low, 1,</span>
<span class='curline'><a href='../S/1216.html#L272'>L</a>                 272 src/lua/lmathlib.cpp   lua_pushinteger(L, (lua_Integer)r + low);</span>
<span class='curline'><a href='../S/1216.html#L277'>L</a>                 277 src/lua/lmathlib.cpp static int math_randomseed (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L278'>L</a>                 278 src/lua/lmathlib.cpp   l_srand((unsigned int)(lua_Integer)luaL_checknumber(L, 1));</span>
<span class='curline'><a href='../S/1216.html#L284'>L</a>                 284 src/lua/lmathlib.cpp static int math_type (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L285'>L</a>                 285 src/lua/lmathlib.cpp   if (lua_type(L, 1) == LUA_TNUMBER) {</span>
<span class='curline'><a href='../S/1216.html#L286'>L</a>                 286 src/lua/lmathlib.cpp       if (lua_isinteger(L, 1))</span>
<span class='curline'><a href='../S/1216.html#L287'>L</a>                 287 src/lua/lmathlib.cpp         lua_pushliteral(L, "integer");</span>
<span class='curline'><a href='../S/1216.html#L289'>L</a>                 289 src/lua/lmathlib.cpp         lua_pushliteral(L, "float");</span>
<span class='curline'><a href='../S/1216.html#L292'>L</a>                 292 src/lua/lmathlib.cpp     luaL_checkany(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L293'>L</a>                 293 src/lua/lmathlib.cpp     lua_pushnil(L);</span>
<span class='curline'><a href='../S/1216.html#L306'>L</a>                 306 src/lua/lmathlib.cpp static int math_cosh (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L307'>L</a>                 307 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(cosh)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L311'>L</a>                 311 src/lua/lmathlib.cpp static int math_sinh (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L312'>L</a>                 312 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(sinh)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L316'>L</a>                 316 src/lua/lmathlib.cpp static int math_tanh (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L317'>L</a>                 317 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(tanh)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L321'>L</a>                 321 src/lua/lmathlib.cpp static int math_pow (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L322'>L</a>                 322 src/lua/lmathlib.cpp   lua_Number x = luaL_checknumber(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L323'>L</a>                 323 src/lua/lmathlib.cpp   lua_Number y = luaL_checknumber(L, 2);</span>
<span class='curline'><a href='../S/1216.html#L324'>L</a>                 324 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(pow)(x, y));</span>
<span class='curline'><a href='../S/1216.html#L328'>L</a>                 328 src/lua/lmathlib.cpp static int math_frexp (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L330'>L</a>                 330 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(frexp)(luaL_checknumber(L, 1), &amp;e));</span>
<span class='curline'><a href='../S/1216.html#L331'>L</a>                 331 src/lua/lmathlib.cpp   lua_pushinteger(L, e);</span>
<span class='curline'><a href='../S/1216.html#L335'>L</a>                 335 src/lua/lmathlib.cpp static int math_ldexp (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L336'>L</a>                 336 src/lua/lmathlib.cpp   lua_Number x = luaL_checknumber(L, 1);</span>
<span class='curline'><a href='../S/1216.html#L337'>L</a>                 337 src/lua/lmathlib.cpp   int ep = (int)luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/1216.html#L338'>L</a>                 338 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(ldexp)(x, ep));</span>
<span class='curline'><a href='../S/1216.html#L342'>L</a>                 342 src/lua/lmathlib.cpp static int math_log10 (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L343'>L</a>                 343 src/lua/lmathlib.cpp   lua_pushnumber(L, l_mathop(log10)(luaL_checknumber(L, 1)));</span>
<span class='curline'><a href='../S/1216.html#L398'>L</a>                 398 src/lua/lmathlib.cpp LUAMOD_API int luaopen_math (lua_State *L) {</span>
<span class='curline'><a href='../S/1216.html#L399'>L</a>                 399 src/lua/lmathlib.cpp   luaL_newlib(L, mathlib);</span>
<span class='curline'><a href='../S/1216.html#L400'>L</a>                 400 src/lua/lmathlib.cpp   lua_pushnumber(L, PI);</span>
<span class='curline'><a href='../S/1216.html#L401'>L</a>                 401 src/lua/lmathlib.cpp   lua_setfield(L, -2, "pi");</span>
<span class='curline'><a href='../S/1216.html#L402'>L</a>                 402 src/lua/lmathlib.cpp   lua_pushnumber(L, (lua_Number)HUGE_VAL);</span>
<span class='curline'><a href='../S/1216.html#L403'>L</a>                 403 src/lua/lmathlib.cpp   lua_setfield(L, -2, "huge");</span>
<span class='curline'><a href='../S/1216.html#L404'>L</a>                 404 src/lua/lmathlib.cpp   lua_pushinteger(L, LUA_MAXINTEGER);</span>
<span class='curline'><a href='../S/1216.html#L405'>L</a>                 405 src/lua/lmathlib.cpp   lua_setfield(L, -2, "maxinteger");</span>
<span class='curline'><a href='../S/1216.html#L406'>L</a>                 406 src/lua/lmathlib.cpp   lua_pushinteger(L, LUA_MININTEGER);</span>
<span class='curline'><a href='../S/1216.html#L407'>L</a>                 407 src/lua/lmathlib.cpp   lua_setfield(L, -2, "mininteger");</span>
<span class='curline'><a href='../S/1174.html#L48'>L</a>                  48 src/lua/lmem.cpp void *luaM_growaux_ (lua_State *L, void *block, int *size, size_t size_elems,</span>
<span class='curline'><a href='../S/1174.html#L54'>L</a>                  54 src/lua/lmem.cpp       luaG_runerror(L, "too many %s (limit is %d)", what, limit);</span>
<span class='curline'><a href='../S/1174.html#L62'>L</a>                  62 src/lua/lmem.cpp   newblock = luaM_reallocv(L, block, *size, newsize, size_elems);</span>
<span class='curline'><a href='../S/1174.html#L68'>L</a>                  68 src/lua/lmem.cpp l_noret luaM_toobig (lua_State *L) {</span>
<span class='curline'><a href='../S/1174.html#L69'>L</a>                  69 src/lua/lmem.cpp   luaG_runerror(L, "memory allocation error: block too big");</span>
<span class='curline'><a href='../S/1174.html#L77'>L</a>                  77 src/lua/lmem.cpp void *luaM_realloc_ (lua_State *L, void *block, size_t osize, size_t nsize) {</span>
<span class='curline'><a href='../S/1174.html#L79'>L</a>                  79 src/lua/lmem.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1174.html#L84'>L</a>                  84 src/lua/lmem.cpp     luaC_fullgc(L, 1);  /* force a GC whenever possible */</span>
<span class='curline'><a href='../S/1174.html#L90'>L</a>                  90 src/lua/lmem.cpp       luaC_fullgc(L, 1);  /* try to free some memory... */</span>
<span class='curline'><a href='../S/1174.html#L94'>L</a>                  94 src/lua/lmem.cpp       luaD_throw(L, LUA_ERRMEM);</span>
<span class='curline'><a href='../S/1196.html#L30'>L</a>                  30 src/lua/lmem.h #define luaM_reallocv(L,b,on,n,e) \</span>
<span class='curline'><a href='../S/1196.html#L32'>L</a>                  32 src/lua/lmem.h       ? luaM_toobig(L) : cast_void(0)) , \</span>
<span class='curline'><a href='../S/1196.html#L33'>L</a>                  33 src/lua/lmem.h    luaM_realloc_(L, (b), (on)*(e), (n)*(e)))</span>
<span class='curline'><a href='../S/1196.html#L38'>L</a>                  38 src/lua/lmem.h #define luaM_reallocvchar(L,b,on,n)  \</span>
<span class='curline'><a href='../S/1196.html#L39'>L</a>                  39 src/lua/lmem.h     cast(char *, luaM_realloc_(L, (b), (on)*sizeof(char), (n)*sizeof(char)))</span>
<span class='curline'><a href='../S/1196.html#L41'>L</a>                  41 src/lua/lmem.h #define luaM_freemem(L, b, s)	luaM_realloc_(L, (b), (s), 0)</span>
<span class='curline'><a href='../S/1196.html#L42'>L</a>                  42 src/lua/lmem.h #define luaM_free(L, b)		luaM_realloc_(L, (b), sizeof(*(b)), 0)</span>
<span class='curline'><a href='../S/1196.html#L43'>L</a>                  43 src/lua/lmem.h #define luaM_freearray(L, b, n)   luaM_realloc_(L, (b), (n)*sizeof(*(b)), 0)</span>
<span class='curline'><a href='../S/1196.html#L45'>L</a>                  45 src/lua/lmem.h #define luaM_malloc(L,s)	luaM_realloc_(L, NULL, 0, (s))</span>
<span class='curline'><a href='../S/1196.html#L46'>L</a>                  46 src/lua/lmem.h #define luaM_new(L,t)		cast(t *, luaM_malloc(L, sizeof(t)))</span>
<span class='curline'><a href='../S/1196.html#L47'>L</a>                  47 src/lua/lmem.h #define luaM_newvector(L,n,t) \</span>
<span class='curline'><a href='../S/1196.html#L48'>L</a>                  48 src/lua/lmem.h 		cast(t *, luaM_reallocv(L, NULL, 0, n, sizeof(t)))</span>
<span class='curline'><a href='../S/1196.html#L50'>L</a>                  50 src/lua/lmem.h #define luaM_newobject(L,tag,s)	luaM_realloc_(L, NULL, tag, (s))</span>
<span class='curline'><a href='../S/1196.html#L52'>L</a>                  52 src/lua/lmem.h #define luaM_growvector(L,v,nelems,size,t,limit,e) \</span>
<span class='curline'><a href='../S/1196.html#L54'>L</a>                  54 src/lua/lmem.h             ((v)=cast(t *, luaM_growaux_(L,v,&amp;(size),sizeof(t),limit,e)))</span>
<span class='curline'><a href='../S/1196.html#L56'>L</a>                  56 src/lua/lmem.h #define luaM_reallocvector(L, v,oldn,n,t) \</span>
<span class='curline'><a href='../S/1196.html#L57'>L</a>                  57 src/lua/lmem.h    ((v)=cast(t *, luaM_reallocv(L, v, oldn, n, sizeof(t))))</span>
<span class='curline'><a href='../S/1196.html#L59'>L</a>                  59 src/lua/lmem.h LUAI_FUNC l_noret luaM_toobig (lua_State *L);</span>
<span class='curline'><a href='../S/1196.html#L62'>L</a>                  62 src/lua/lmem.h LUAI_FUNC void *luaM_realloc_ (lua_State *L, void *block, size_t oldsize,</span>
<span class='curline'><a href='../S/1196.html#L64'>L</a>                  64 src/lua/lmem.h LUAI_FUNC void *luaM_growaux_ (lua_State *L, void *block, int *size,</span>
<span class='curline'><a href='../S/1194.html#L67'>L</a>                  67 src/lua/loadlib.cpp #define setprogdir(L)           ((void)0)</span>
<span class='curline'><a href='../S/1194.html#L85'>L</a>                  85 src/lua/loadlib.cpp static void *lsys_load (lua_State *L, const char *path, int seeglb);</span>
<span class='curline'><a href='../S/1194.html#L92'>L</a>                  92 src/lua/loadlib.cpp static lua_CFunction lsys_sym (lua_State *L, void *lib, const char *sym);</span>
<span class='curline'><a href='../S/1194.html#L126'>L</a>                 126 src/lua/loadlib.cpp static void *lsys_load (lua_State *L, const char *path, int seeglb) {</span>
<span class='curline'><a href='../S/1194.html#L128'>L</a>                 128 src/lua/loadlib.cpp   if (lib == NULL) lua_pushstring(L, dlerror());</span>
<span class='curline'><a href='../S/1194.html#L133'>L</a>                 133 src/lua/loadlib.cpp static lua_CFunction lsys_sym (lua_State *L, void *lib, const char *sym) {</span>
<span class='curline'><a href='../S/1194.html#L135'>L</a>                 135 src/lua/loadlib.cpp   if (f == NULL) lua_pushstring(L, dlerror());</span>
<span class='curline'><a href='../S/1194.html#L168'>L</a>                 168 src/lua/loadlib.cpp static void setprogdir (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L174'>L</a>                 174 src/lua/loadlib.cpp     luaL_error(L, "unable to get ModuleFileName");</span>
<span class='curline'><a href='../S/1194.html#L177'>L</a>                 177 src/lua/loadlib.cpp     luaL_gsub(L, lua_tostring(L, -1), LUA_EXEC_DIR, buff);</span>
<span class='curline'><a href='../S/1194.html#L178'>L</a>                 178 src/lua/loadlib.cpp     lua_remove(L, -2);  /* remove original string */</span>
<span class='curline'><a href='../S/1194.html#L185'>L</a>                 185 src/lua/loadlib.cpp static void pusherror (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L190'>L</a>                 190 src/lua/loadlib.cpp     lua_pushstring(L, buffer);</span>
<span class='curline'><a href='../S/1194.html#L192'>L</a>                 192 src/lua/loadlib.cpp     lua_pushfstring(L, "system error %d\n", error);</span>
<span class='curline'><a href='../S/1194.html#L200'>L</a>                 200 src/lua/loadlib.cpp static void *lsys_load (lua_State *L, const char *path, int seeglb) {</span>
<span class='curline'><a href='../S/1194.html#L203'>L</a>                 203 src/lua/loadlib.cpp   if (lib == NULL) pusherror(L);</span>
<span class='curline'><a href='../S/1194.html#L208'>L</a>                 208 src/lua/loadlib.cpp static lua_CFunction lsys_sym (lua_State *L, void *lib, const char *sym) {</span>
<span class='curline'><a href='../S/1194.html#L210'>L</a>                 210 src/lua/loadlib.cpp   if (f == NULL) pusherror(L);</span>
<span class='curline'><a href='../S/1194.html#L236'>L</a>                 236 src/lua/loadlib.cpp static void *lsys_load (lua_State *L, const char *path, int seeglb) {</span>
<span class='curline'><a href='../S/1194.html#L238'>L</a>                 238 src/lua/loadlib.cpp   lua_pushliteral(L, DLMSG);</span>
<span class='curline'><a href='../S/1194.html#L243'>L</a>                 243 src/lua/loadlib.cpp static lua_CFunction lsys_sym (lua_State *L, void *lib, const char *sym) {</span>
<span class='curline'><a href='../S/1194.html#L245'>L</a>                 245 src/lua/loadlib.cpp   lua_pushliteral(L, DLMSG);</span>
<span class='curline'><a href='../S/1194.html#L278'>L</a>                 278 src/lua/loadlib.cpp static int noenv (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L280'>L</a>                 280 src/lua/loadlib.cpp   lua_getfield(L, LUA_REGISTRYINDEX, "LUA_NOENV");</span>
<span class='curline'><a href='../S/1194.html#L281'>L</a>                 281 src/lua/loadlib.cpp   b = lua_toboolean(L, -1);</span>
<span class='curline'><a href='../S/1194.html#L282'>L</a>                 282 src/lua/loadlib.cpp   lua_pop(L, 1);  /* remove value */</span>
<span class='curline'><a href='../S/1194.html#L290'>L</a>                 290 src/lua/loadlib.cpp static void setpath (lua_State *L, const char *fieldname,</span>
<span class='curline'><a href='../S/1194.html#L293'>L</a>                 293 src/lua/loadlib.cpp   const char *nver = lua_pushfstring(L, "%s%s", envname, LUA_VERSUFFIX);</span>
<span class='curline'><a href='../S/1194.html#L297'>L</a>                 297 src/lua/loadlib.cpp   if (path == NULL || noenv(L))  /* no environment variable? */</span>
<span class='curline'><a href='../S/1194.html#L298'>L</a>                 298 src/lua/loadlib.cpp     lua_pushstring(L, dft);  /* use default */</span>
<span class='curline'><a href='../S/1194.html#L301'>L</a>                 301 src/lua/loadlib.cpp     path = luaL_gsub(L, path, LUA_PATH_SEP LUA_PATH_SEP,</span>
<span class='curline'><a href='../S/1194.html#L303'>L</a>                 303 src/lua/loadlib.cpp     luaL_gsub(L, path, AUXMARK, dft);</span>
<span class='curline'><a href='../S/1194.html#L304'>L</a>                 304 src/lua/loadlib.cpp     lua_remove(L, -2); /* remove result from 1st 'gsub' */</span>
<span class='curline'><a href='../S/1194.html#L306'>L</a>                 306 src/lua/loadlib.cpp   setprogdir(L);</span>
<span class='curline'><a href='../S/1194.html#L307'>L</a>                 307 src/lua/loadlib.cpp   lua_setfield(L, -3, fieldname);  /* package[fieldname] = path value */</span>
<span class='curline'><a href='../S/1194.html#L308'>L</a>                 308 src/lua/loadlib.cpp   lua_pop(L, 1);  /* pop versioned variable name */</span>
<span class='curline'><a href='../S/1194.html#L317'>L</a>                 317 src/lua/loadlib.cpp static void *checkclib (lua_State *L, const char *path) {</span>
<span class='curline'><a href='../S/1194.html#L319'>L</a>                 319 src/lua/loadlib.cpp   lua_rawgetp(L, LUA_REGISTRYINDEX, &amp;CLIBS);</span>
<span class='curline'><a href='../S/1194.html#L320'>L</a>                 320 src/lua/loadlib.cpp   lua_getfield(L, -1, path);</span>
<span class='curline'><a href='../S/1194.html#L321'>L</a>                 321 src/lua/loadlib.cpp   plib = lua_touserdata(L, -1);  /* plib = CLIBS[path] */</span>
<span class='curline'><a href='../S/1194.html#L322'>L</a>                 322 src/lua/loadlib.cpp   lua_pop(L, 2);  /* pop CLIBS table and 'plib' */</span>
<span class='curline'><a href='../S/1194.html#L331'>L</a>                 331 src/lua/loadlib.cpp static void addtoclib (lua_State *L, const char *path, void *plib) {</span>
<span class='curline'><a href='../S/1194.html#L332'>L</a>                 332 src/lua/loadlib.cpp   lua_rawgetp(L, LUA_REGISTRYINDEX, &amp;CLIBS);</span>
<span class='curline'><a href='../S/1194.html#L333'>L</a>                 333 src/lua/loadlib.cpp   lua_pushlightuserdata(L, plib);</span>
<span class='curline'><a href='../S/1194.html#L334'>L</a>                 334 src/lua/loadlib.cpp   lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/1194.html#L335'>L</a>                 335 src/lua/loadlib.cpp   lua_setfield(L, -3, path);  /* CLIBS[path] = plib */</span>
<span class='curline'><a href='../S/1194.html#L336'>L</a>                 336 src/lua/loadlib.cpp   lua_rawseti(L, -2, luaL_len(L, -2) + 1);  /* CLIBS[#CLIBS + 1] = plib */</span>
<span class='curline'><a href='../S/1194.html#L337'>L</a>                 337 src/lua/loadlib.cpp   lua_pop(L, 1);  /* pop CLIBS table */</span>
<span class='curline'><a href='../S/1194.html#L345'>L</a>                 345 src/lua/loadlib.cpp static int gctm (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L346'>L</a>                 346 src/lua/loadlib.cpp   lua_Integer n = luaL_len(L, 1);</span>
<span class='curline'><a href='../S/1194.html#L348'>L</a>                 348 src/lua/loadlib.cpp     lua_rawgeti(L, 1, n);  /* get handle CLIBS[n] */</span>
<span class='curline'><a href='../S/1194.html#L349'>L</a>                 349 src/lua/loadlib.cpp     lsys_unloadlib(lua_touserdata(L, -1));</span>
<span class='curline'><a href='../S/1194.html#L350'>L</a>                 350 src/lua/loadlib.cpp     lua_pop(L, 1);  /* pop handle */</span>
<span class='curline'><a href='../S/1194.html#L372'>L</a>                 372 src/lua/loadlib.cpp static int lookforfunc (lua_State *L, const char *path, const char *sym) {</span>
<span class='curline'><a href='../S/1194.html#L373'>L</a>                 373 src/lua/loadlib.cpp   void *reg = checkclib(L, path);  /* check loaded C libraries */</span>
<span class='curline'><a href='../S/1194.html#L375'>L</a>                 375 src/lua/loadlib.cpp     reg = lsys_load(L, path, *sym == '*');  /* global symbols if 'sym'=='*' */</span>
<span class='curline'><a href='../S/1194.html#L377'>L</a>                 377 src/lua/loadlib.cpp     addtoclib(L, path, reg);</span>
<span class='curline'><a href='../S/1194.html#L380'>L</a>                 380 src/lua/loadlib.cpp     lua_pushboolean(L, 1);  /* return 'true' */</span>
<span class='curline'><a href='../S/1194.html#L384'>L</a>                 384 src/lua/loadlib.cpp     lua_CFunction f = lsys_sym(L, reg, sym);</span>
<span class='curline'><a href='../S/1194.html#L387'>L</a>                 387 src/lua/loadlib.cpp     lua_pushcfunction(L, f);  /* else create new function */</span>
<span class='curline'><a href='../S/1194.html#L393'>L</a>                 393 src/lua/loadlib.cpp static int ll_loadlib (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L394'>L</a>                 394 src/lua/loadlib.cpp   const char *path = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1194.html#L395'>L</a>                 395 src/lua/loadlib.cpp   const char *init = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/1194.html#L396'>L</a>                 396 src/lua/loadlib.cpp   int stat = lookforfunc(L, path, init);</span>
<span class='curline'><a href='../S/1194.html#L400'>L</a>                 400 src/lua/loadlib.cpp     lua_pushnil(L);</span>
<span class='curline'><a href='../S/1194.html#L401'>L</a>                 401 src/lua/loadlib.cpp     lua_insert(L, -2);</span>
<span class='curline'><a href='../S/1194.html#L402'>L</a>                 402 src/lua/loadlib.cpp     lua_pushstring(L, (stat == ERRLIB) ?  LIB_FAIL : "init");</span>
<span class='curline'><a href='../S/1194.html#L424'>L</a>                 424 src/lua/loadlib.cpp static const char *pushnexttemplate (lua_State *L, const char *path) {</span>
<span class='curline'><a href='../S/1194.html#L430'>L</a>                 430 src/lua/loadlib.cpp   lua_pushlstring(L, path, l - path);  /* template */</span>
<span class='curline'><a href='../S/1194.html#L435'>L</a>                 435 src/lua/loadlib.cpp static const char *searchpath (lua_State *L, const char *name,</span>
<span class='curline'><a href='../S/1194.html#L440'>L</a>                 440 src/lua/loadlib.cpp   luaL_buffinit(L, &amp;msg);</span>
<span class='curline'><a href='../S/1194.html#L442'>L</a>                 442 src/lua/loadlib.cpp     name = luaL_gsub(L, name, sep, dirsep);  /* replace it by 'dirsep' */</span>
<span class='curline'><a href='../S/1194.html#L443'>L</a>                 443 src/lua/loadlib.cpp   while ((path = pushnexttemplate(L, path)) != NULL) {</span>
<span class='curline'><a href='../S/1194.html#L444'>L</a>                 444 src/lua/loadlib.cpp     const char *filename = luaL_gsub(L, lua_tostring(L, -1),</span>
<span class='curline'><a href='../S/1194.html#L446'>L</a>                 446 src/lua/loadlib.cpp     lua_remove(L, -2);  /* remove path template */</span>
<span class='curline'><a href='../S/1194.html#L449'>L</a>                 449 src/lua/loadlib.cpp     lua_pushfstring(L, "\n\tno file '%s'", filename);</span>
<span class='curline'><a href='../S/1194.html#L450'>L</a>                 450 src/lua/loadlib.cpp     lua_remove(L, -2);  /* remove file name */</span>
<span class='curline'><a href='../S/1194.html#L458'>L</a>                 458 src/lua/loadlib.cpp static int ll_searchpath (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L459'>L</a>                 459 src/lua/loadlib.cpp   const char *f = searchpath(L, luaL_checkstring(L, 1),</span>
<span class='curline'><a href='../S/1194.html#L460'>L</a>                 460 src/lua/loadlib.cpp                                 luaL_checkstring(L, 2),</span>
<span class='curline'><a href='../S/1194.html#L461'>L</a>                 461 src/lua/loadlib.cpp                                 luaL_optstring(L, 3, "."),</span>
<span class='curline'><a href='../S/1194.html#L462'>L</a>                 462 src/lua/loadlib.cpp                                 luaL_optstring(L, 4, LUA_DIRSEP));</span>
<span class='curline'><a href='../S/1194.html#L465'>L</a>                 465 src/lua/loadlib.cpp     lua_pushnil(L);</span>
<span class='curline'><a href='../S/1194.html#L466'>L</a>                 466 src/lua/loadlib.cpp     lua_insert(L, -2);</span>
<span class='curline'><a href='../S/1194.html#L472'>L</a>                 472 src/lua/loadlib.cpp static const char *findfile (lua_State *L, const char *name,</span>
<span class='curline'><a href='../S/1194.html#L476'>L</a>                 476 src/lua/loadlib.cpp   lua_getfield(L, lua_upvalueindex(1), pname);</span>
<span class='curline'><a href='../S/1194.html#L477'>L</a>                 477 src/lua/loadlib.cpp   path = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/1194.html#L479'>L</a>                 479 src/lua/loadlib.cpp     luaL_error(L, "'package.%s' must be a string", pname);</span>
<span class='curline'><a href='../S/1194.html#L480'>L</a>                 480 src/lua/loadlib.cpp   return searchpath(L, name, path, ".", dirsep);</span>
<span class='curline'><a href='../S/1194.html#L484'>L</a>                 484 src/lua/loadlib.cpp static int checkload (lua_State *L, int stat, const char *filename) {</span>
<span class='curline'><a href='../S/1194.html#L486'>L</a>                 486 src/lua/loadlib.cpp     lua_pushstring(L, filename);  /* will be 2nd argument to module */</span>
<span class='curline'><a href='../S/1194.html#L490'>L</a>                 490 src/lua/loadlib.cpp     return luaL_error(L, "error loading module '%s' from file '%s':\n\t%s",</span>
<span class='curline'><a href='../S/1194.html#L491'>L</a>                 491 src/lua/loadlib.cpp                           lua_tostring(L, 1), filename, lua_tostring(L, -1));</span>
<span class='curline'><a href='../S/1194.html#L495'>L</a>                 495 src/lua/loadlib.cpp static int searcher_Lua (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L497'>L</a>                 497 src/lua/loadlib.cpp   const char *name = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1194.html#L498'>L</a>                 498 src/lua/loadlib.cpp   filename = findfile(L, name, "path", LUA_LSUBSEP);</span>
<span class='curline'><a href='../S/1194.html#L500'>L</a>                 500 src/lua/loadlib.cpp   return checkload(L, (luaL_loadfile(L, filename) == LUA_OK), filename);</span>
<span class='curline'><a href='../S/1194.html#L512'>L</a>                 512 src/lua/loadlib.cpp static int loadfunc (lua_State *L, const char *filename, const char *modname) {</span>
<span class='curline'><a href='../S/1194.html#L515'>L</a>                 515 src/lua/loadlib.cpp   modname = luaL_gsub(L, modname, ".", LUA_OFSEP);</span>
<span class='curline'><a href='../S/1194.html#L519'>L</a>                 519 src/lua/loadlib.cpp     openfunc = lua_pushlstring(L, modname, mark - modname);</span>
<span class='curline'><a href='../S/1194.html#L520'>L</a>                 520 src/lua/loadlib.cpp     openfunc = lua_pushfstring(L, LUA_POF"%s", openfunc);</span>
<span class='curline'><a href='../S/1194.html#L521'>L</a>                 521 src/lua/loadlib.cpp     stat = lookforfunc(L, filename, openfunc);</span>
<span class='curline'><a href='../S/1194.html#L525'>L</a>                 525 src/lua/loadlib.cpp   openfunc = lua_pushfstring(L, LUA_POF"%s", modname);</span>
<span class='curline'><a href='../S/1194.html#L526'>L</a>                 526 src/lua/loadlib.cpp   return lookforfunc(L, filename, openfunc);</span>
<span class='curline'><a href='../S/1194.html#L530'>L</a>                 530 src/lua/loadlib.cpp static int searcher_C (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L531'>L</a>                 531 src/lua/loadlib.cpp   const char *name = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1194.html#L532'>L</a>                 532 src/lua/loadlib.cpp   const char *filename = findfile(L, name, "cpath", LUA_CSUBSEP);</span>
<span class='curline'><a href='../S/1194.html#L534'>L</a>                 534 src/lua/loadlib.cpp   return checkload(L, (loadfunc(L, filename, name) == 0), filename);</span>
<span class='curline'><a href='../S/1194.html#L538'>L</a>                 538 src/lua/loadlib.cpp static int searcher_Croot (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L540'>L</a>                 540 src/lua/loadlib.cpp   const char *name = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1194.html#L544'>L</a>                 544 src/lua/loadlib.cpp   lua_pushlstring(L, name, p - name);</span>
<span class='curline'><a href='../S/1194.html#L545'>L</a>                 545 src/lua/loadlib.cpp   filename = findfile(L, lua_tostring(L, -1), "cpath", LUA_CSUBSEP);</span>
<span class='curline'><a href='../S/1194.html#L547'>L</a>                 547 src/lua/loadlib.cpp   if ((stat = loadfunc(L, filename, name)) != 0) {</span>
<span class='curline'><a href='../S/1194.html#L549'>L</a>                 549 src/lua/loadlib.cpp       return checkload(L, 0, filename);  /* real error */</span>
<span class='curline'><a href='../S/1194.html#L551'>L</a>                 551 src/lua/loadlib.cpp       lua_pushfstring(L, "\n\tno module '%s' in file '%s'", name, filename);</span>
<span class='curline'><a href='../S/1194.html#L555'>L</a>                 555 src/lua/loadlib.cpp   lua_pushstring(L, filename);  /* will be 2nd argument to module */</span>
<span class='curline'><a href='../S/1194.html#L560'>L</a>                 560 src/lua/loadlib.cpp static int searcher_preload (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L561'>L</a>                 561 src/lua/loadlib.cpp   const char *name = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1194.html#L562'>L</a>                 562 src/lua/loadlib.cpp   lua_getfield(L, LUA_REGISTRYINDEX, LUA_PRELOAD_TABLE);</span>
<span class='curline'><a href='../S/1194.html#L563'>L</a>                 563 src/lua/loadlib.cpp   if (lua_getfield(L, -1, name) == LUA_TNIL)  /* not found? */</span>
<span class='curline'><a href='../S/1194.html#L564'>L</a>                 564 src/lua/loadlib.cpp     lua_pushfstring(L, "\n\tno field package.preload['%s']", name);</span>
<span class='curline'><a href='../S/1194.html#L569'>L</a>                 569 src/lua/loadlib.cpp static void findloader (lua_State *L, const char *name) {</span>
<span class='curline'><a href='../S/1194.html#L572'>L</a>                 572 src/lua/loadlib.cpp   luaL_buffinit(L, &amp;msg);</span>
<span class='curline'><a href='../S/1194.html#L574'>L</a>                 574 src/lua/loadlib.cpp   if (lua_getfield(L, lua_upvalueindex(1), "searchers") != LUA_TTABLE)</span>
<span class='curline'><a href='../S/1194.html#L575'>L</a>                 575 src/lua/loadlib.cpp     luaL_error(L, "'package.searchers' must be a table");</span>
<span class='curline'><a href='../S/1194.html#L578'>L</a>                 578 src/lua/loadlib.cpp     if (lua_rawgeti(L, 3, i) == LUA_TNIL) {  /* no more searchers? */</span>
<span class='curline'><a href='../S/1194.html#L579'>L</a>                 579 src/lua/loadlib.cpp       lua_pop(L, 1);  /* remove nil */</span>
<span class='curline'><a href='../S/1194.html#L581'>L</a>                 581 src/lua/loadlib.cpp       luaL_error(L, "module '%s' not found:%s", name, lua_tostring(L, -1));</span>
<span class='curline'><a href='../S/1194.html#L583'>L</a>                 583 src/lua/loadlib.cpp     lua_pushstring(L, name);</span>
<span class='curline'><a href='../S/1194.html#L584'>L</a>                 584 src/lua/loadlib.cpp     lua_call(L, 1, 2);  /* call it */</span>
<span class='curline'><a href='../S/1194.html#L585'>L</a>                 585 src/lua/loadlib.cpp     if (lua_isfunction(L, -2))  /* did it find a loader? */</span>
<span class='curline'><a href='../S/1194.html#L587'>L</a>                 587 src/lua/loadlib.cpp     else if (lua_isstring(L, -2)) {  /* searcher returned error message? */</span>
<span class='curline'><a href='../S/1194.html#L588'>L</a>                 588 src/lua/loadlib.cpp       lua_pop(L, 1);  /* remove extra return */</span>
<span class='curline'><a href='../S/1194.html#L592'>L</a>                 592 src/lua/loadlib.cpp       lua_pop(L, 2);  /* remove both returns */</span>
<span class='curline'><a href='../S/1194.html#L597'>L</a>                 597 src/lua/loadlib.cpp static int ll_require (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L598'>L</a>                 598 src/lua/loadlib.cpp   const char *name = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1194.html#L599'>L</a>                 599 src/lua/loadlib.cpp   lua_settop(L, 1);  /* LOADED table will be at index 2 */</span>
<span class='curline'><a href='../S/1194.html#L600'>L</a>                 600 src/lua/loadlib.cpp   lua_getfield(L, LUA_REGISTRYINDEX, LUA_LOADED_TABLE);</span>
<span class='curline'><a href='../S/1194.html#L601'>L</a>                 601 src/lua/loadlib.cpp   lua_getfield(L, 2, name);  /* LOADED[name] */</span>
<span class='curline'><a href='../S/1194.html#L602'>L</a>                 602 src/lua/loadlib.cpp   if (lua_toboolean(L, -1))  /* is it there? */</span>
<span class='curline'><a href='../S/1194.html#L605'>L</a>                 605 src/lua/loadlib.cpp   lua_pop(L, 1);  /* remove 'getfield' result */</span>
<span class='curline'><a href='../S/1194.html#L606'>L</a>                 606 src/lua/loadlib.cpp   findloader(L, name);</span>
<span class='curline'><a href='../S/1194.html#L607'>L</a>                 607 src/lua/loadlib.cpp   lua_pushstring(L, name);  /* pass name as argument to module loader */</span>
<span class='curline'><a href='../S/1194.html#L608'>L</a>                 608 src/lua/loadlib.cpp   lua_insert(L, -2);  /* name is 1st argument (before search data) */</span>
<span class='curline'><a href='../S/1194.html#L609'>L</a>                 609 src/lua/loadlib.cpp   lua_call(L, 2, 1);  /* run loader to load module */</span>
<span class='curline'><a href='../S/1194.html#L610'>L</a>                 610 src/lua/loadlib.cpp   if (!lua_isnil(L, -1))  /* non-nil return? */</span>
<span class='curline'><a href='../S/1194.html#L611'>L</a>                 611 src/lua/loadlib.cpp     lua_setfield(L, 2, name);  /* LOADED[name] = returned value */</span>
<span class='curline'><a href='../S/1194.html#L612'>L</a>                 612 src/lua/loadlib.cpp   if (lua_getfield(L, 2, name) == LUA_TNIL) {   /* module set no value? */</span>
<span class='curline'><a href='../S/1194.html#L613'>L</a>                 613 src/lua/loadlib.cpp     lua_pushboolean(L, 1);  /* use true as result */</span>
<span class='curline'><a href='../S/1194.html#L614'>L</a>                 614 src/lua/loadlib.cpp     lua_pushvalue(L, -1);  /* extra copy to be returned */</span>
<span class='curline'><a href='../S/1194.html#L615'>L</a>                 615 src/lua/loadlib.cpp     lua_setfield(L, 2, name);  /* LOADED[name] = true */</span>
<span class='curline'><a href='../S/1194.html#L634'>L</a>                 634 src/lua/loadlib.cpp static void set_env (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L636'>L</a>                 636 src/lua/loadlib.cpp   if (lua_getstack(L, 1, &amp;ar) == 0 ||</span>
<span class='curline'><a href='../S/1194.html#L637'>L</a>                 637 src/lua/loadlib.cpp       lua_getinfo(L, "f", &amp;ar) == 0 ||  /* get calling function */</span>
<span class='curline'><a href='../S/1194.html#L638'>L</a>                 638 src/lua/loadlib.cpp       lua_iscfunction(L, -1))</span>
<span class='curline'><a href='../S/1194.html#L639'>L</a>                 639 src/lua/loadlib.cpp     luaL_error(L, "'module' not called from a Lua function");</span>
<span class='curline'><a href='../S/1194.html#L640'>L</a>                 640 src/lua/loadlib.cpp   lua_pushvalue(L, -2);  /* copy new environment table to top */</span>
<span class='curline'><a href='../S/1194.html#L641'>L</a>                 641 src/lua/loadlib.cpp   lua_setupvalue(L, -2, 1);</span>
<span class='curline'><a href='../S/1194.html#L642'>L</a>                 642 src/lua/loadlib.cpp   lua_pop(L, 1);  /* remove function */</span>
<span class='curline'><a href='../S/1194.html#L646'>L</a>                 646 src/lua/loadlib.cpp static void dooptions (lua_State *L, int n) {</span>
<span class='curline'><a href='../S/1194.html#L649'>L</a>                 649 src/lua/loadlib.cpp     if (lua_isfunction(L, i)) {  /* avoid 'calling' extra info. */</span>
<span class='curline'><a href='../S/1194.html#L650'>L</a>                 650 src/lua/loadlib.cpp       lua_pushvalue(L, i);  /* get option (a function) */</span>
<span class='curline'><a href='../S/1194.html#L651'>L</a>                 651 src/lua/loadlib.cpp       lua_pushvalue(L, -2);  /* module */</span>
<span class='curline'><a href='../S/1194.html#L652'>L</a>                 652 src/lua/loadlib.cpp       lua_call(L, 1, 0);</span>
<span class='curline'><a href='../S/1194.html#L658'>L</a>                 658 src/lua/loadlib.cpp static void modinit (lua_State *L, const char *modname) {</span>
<span class='curline'><a href='../S/1194.html#L660'>L</a>                 660 src/lua/loadlib.cpp   lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/1194.html#L661'>L</a>                 661 src/lua/loadlib.cpp   lua_setfield(L, -2, "_M");  /* module._M = module */</span>
<span class='curline'><a href='../S/1194.html#L662'>L</a>                 662 src/lua/loadlib.cpp   lua_pushstring(L, modname);</span>
<span class='curline'><a href='../S/1194.html#L663'>L</a>                 663 src/lua/loadlib.cpp   lua_setfield(L, -2, "_NAME");</span>
<span class='curline'><a href='../S/1194.html#L668'>L</a>                 668 src/lua/loadlib.cpp   lua_pushlstring(L, modname, dot - modname);</span>
<span class='curline'><a href='../S/1194.html#L669'>L</a>                 669 src/lua/loadlib.cpp   lua_setfield(L, -2, "_PACKAGE");</span>
<span class='curline'><a href='../S/1194.html#L673'>L</a>                 673 src/lua/loadlib.cpp static int ll_module (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L674'>L</a>                 674 src/lua/loadlib.cpp   const char *modname = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1194.html#L675'>L</a>                 675 src/lua/loadlib.cpp   int lastarg = lua_gettop(L);  /* last parameter */</span>
<span class='curline'><a href='../S/1194.html#L676'>L</a>                 676 src/lua/loadlib.cpp   luaL_pushmodule(L, modname, 1);  /* get/create module table */</span>
<span class='curline'><a href='../S/1194.html#L678'>L</a>                 678 src/lua/loadlib.cpp   if (lua_getfield(L, -1, "_NAME") != LUA_TNIL)</span>
<span class='curline'><a href='../S/1194.html#L679'>L</a>                 679 src/lua/loadlib.cpp     lua_pop(L, 1);  /* table is an initialized module */</span>
<span class='curline'><a href='../S/1194.html#L681'>L</a>                 681 src/lua/loadlib.cpp     lua_pop(L, 1);</span>
<span class='curline'><a href='../S/1194.html#L682'>L</a>                 682 src/lua/loadlib.cpp     modinit(L, modname);</span>
<span class='curline'><a href='../S/1194.html#L684'>L</a>                 684 src/lua/loadlib.cpp   lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/1194.html#L685'>L</a>                 685 src/lua/loadlib.cpp   set_env(L);</span>
<span class='curline'><a href='../S/1194.html#L686'>L</a>                 686 src/lua/loadlib.cpp   dooptions(L, lastarg);</span>
<span class='curline'><a href='../S/1194.html#L691'>L</a>                 691 src/lua/loadlib.cpp static int ll_seeall (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L692'>L</a>                 692 src/lua/loadlib.cpp   luaL_checktype(L, 1, LUA_TTABLE);</span>
<span class='curline'><a href='../S/1194.html#L693'>L</a>                 693 src/lua/loadlib.cpp   if (!lua_getmetatable(L, 1)) {</span>
<span class='curline'><a href='../S/1194.html#L694'>L</a>                 694 src/lua/loadlib.cpp     lua_createtable(L, 0, 1); /* create new metatable */</span>
<span class='curline'><a href='../S/1194.html#L695'>L</a>                 695 src/lua/loadlib.cpp     lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/1194.html#L696'>L</a>                 696 src/lua/loadlib.cpp     lua_setmetatable(L, 1);</span>
<span class='curline'><a href='../S/1194.html#L698'>L</a>                 698 src/lua/loadlib.cpp   lua_pushglobaltable(L);</span>
<span class='curline'><a href='../S/1194.html#L699'>L</a>                 699 src/lua/loadlib.cpp   lua_setfield(L, -2, "__index");  /* mt.__index = _G */</span>
<span class='curline'><a href='../S/1194.html#L733'>L</a>                 733 src/lua/loadlib.cpp static void createsearcherstable (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L738'>L</a>                 738 src/lua/loadlib.cpp   lua_createtable(L, sizeof(searchers)/sizeof(searchers[0]) - 1, 0);</span>
<span class='curline'><a href='../S/1194.html#L741'>L</a>                 741 src/lua/loadlib.cpp     lua_pushvalue(L, -2);  /* set 'package' as upvalue for all searchers */</span>
<span class='curline'><a href='../S/1194.html#L742'>L</a>                 742 src/lua/loadlib.cpp     lua_pushcclosure(L, searchers[i], 1);</span>
<span class='curline'><a href='../S/1194.html#L743'>L</a>                 743 src/lua/loadlib.cpp     lua_rawseti(L, -2, i+1);</span>
<span class='curline'><a href='../S/1194.html#L746'>L</a>                 746 src/lua/loadlib.cpp   lua_pushvalue(L, -1);  /* make a copy of 'searchers' table */</span>
<span class='curline'><a href='../S/1194.html#L747'>L</a>                 747 src/lua/loadlib.cpp   lua_setfield(L, -3, "loaders");  /* put it in field 'loaders' */</span>
<span class='curline'><a href='../S/1194.html#L749'>L</a>                 749 src/lua/loadlib.cpp   lua_setfield(L, -2, "searchers");  /* put it in field 'searchers' */</span>
<span class='curline'><a href='../S/1194.html#L757'>L</a>                 757 src/lua/loadlib.cpp static void createclibstable (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L758'>L</a>                 758 src/lua/loadlib.cpp   lua_newtable(L);  /* create CLIBS table */</span>
<span class='curline'><a href='../S/1194.html#L759'>L</a>                 759 src/lua/loadlib.cpp   lua_createtable(L, 0, 1);  /* create metatable for CLIBS */</span>
<span class='curline'><a href='../S/1194.html#L760'>L</a>                 760 src/lua/loadlib.cpp   lua_pushcfunction(L, gctm);</span>
<span class='curline'><a href='../S/1194.html#L761'>L</a>                 761 src/lua/loadlib.cpp   lua_setfield(L, -2, "__gc");  /* set finalizer for CLIBS table */</span>
<span class='curline'><a href='../S/1194.html#L762'>L</a>                 762 src/lua/loadlib.cpp   lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/1194.html#L763'>L</a>                 763 src/lua/loadlib.cpp   lua_rawsetp(L, LUA_REGISTRYINDEX, &amp;CLIBS);  /* set CLIBS table in registry */</span>
<span class='curline'><a href='../S/1194.html#L767'>L</a>                 767 src/lua/loadlib.cpp LUAMOD_API int luaopen_package (lua_State *L) {</span>
<span class='curline'><a href='../S/1194.html#L768'>L</a>                 768 src/lua/loadlib.cpp   createclibstable(L);</span>
<span class='curline'><a href='../S/1194.html#L769'>L</a>                 769 src/lua/loadlib.cpp   luaL_newlib(L, pk_funcs);  /* create 'package' table */</span>
<span class='curline'><a href='../S/1194.html#L770'>L</a>                 770 src/lua/loadlib.cpp   createsearcherstable(L);</span>
<span class='curline'><a href='../S/1194.html#L772'>L</a>                 772 src/lua/loadlib.cpp   setpath(L, "path", LUA_PATH_VAR, LUA_PATH_DEFAULT);</span>
<span class='curline'><a href='../S/1194.html#L773'>L</a>                 773 src/lua/loadlib.cpp   setpath(L, "cpath", LUA_CPATH_VAR, LUA_CPATH_DEFAULT);</span>
<span class='curline'><a href='../S/1194.html#L775'>L</a>                 775 src/lua/loadlib.cpp   lua_pushliteral(L, LUA_DIRSEP "\n" LUA_PATH_SEP "\n" LUA_PATH_MARK "\n"</span>
<span class='curline'><a href='../S/1194.html#L777'>L</a>                 777 src/lua/loadlib.cpp   lua_setfield(L, -2, "config");</span>
<span class='curline'><a href='../S/1194.html#L779'>L</a>                 779 src/lua/loadlib.cpp   luaL_getsubtable(L, LUA_REGISTRYINDEX, LUA_LOADED_TABLE);</span>
<span class='curline'><a href='../S/1194.html#L780'>L</a>                 780 src/lua/loadlib.cpp   lua_setfield(L, -2, "loaded");</span>
<span class='curline'><a href='../S/1194.html#L782'>L</a>                 782 src/lua/loadlib.cpp   luaL_getsubtable(L, LUA_REGISTRYINDEX, LUA_PRELOAD_TABLE);</span>
<span class='curline'><a href='../S/1194.html#L783'>L</a>                 783 src/lua/loadlib.cpp   lua_setfield(L, -2, "preload");</span>
<span class='curline'><a href='../S/1194.html#L784'>L</a>                 784 src/lua/loadlib.cpp   lua_pushglobaltable(L);</span>
<span class='curline'><a href='../S/1194.html#L785'>L</a>                 785 src/lua/loadlib.cpp   lua_pushvalue(L, -2);  /* set 'package' as upvalue for next lib */</span>
<span class='curline'><a href='../S/1194.html#L786'>L</a>                 786 src/lua/loadlib.cpp   luaL_setfuncs(L, ll_funcs, 1);  /* open lib into global table */</span>
<span class='curline'><a href='../S/1194.html#L787'>L</a>                 787 src/lua/loadlib.cpp   lua_pop(L, 1);  /* pop global table */</span>
<span class='curline'><a href='../S/1189.html#L83'>L</a>                  83 src/lua/lobject.cpp static lua_Integer intarith (lua_State *L, int op, lua_Integer v1,</span>
<span class='curline'><a href='../S/1189.html#L89'>L</a>                  89 src/lua/lobject.cpp     case LUA_OPMOD: return luaV_mod(L, v1, v2);</span>
<span class='curline'><a href='../S/1189.html#L90'>L</a>                  90 src/lua/lobject.cpp     case LUA_OPIDIV: return luaV_div(L, v1, v2);</span>
<span class='curline'><a href='../S/1189.html#L103'>L</a>                 103 src/lua/lobject.cpp static lua_Number numarith (lua_State *L, int op, lua_Number v1,</span>
<span class='curline'><a href='../S/1189.html#L106'>L</a>                 106 src/lua/lobject.cpp     case LUA_OPADD: return luai_numadd(L, v1, v2);</span>
<span class='curline'><a href='../S/1189.html#L107'>L</a>                 107 src/lua/lobject.cpp     case LUA_OPSUB: return luai_numsub(L, v1, v2);</span>
<span class='curline'><a href='../S/1189.html#L108'>L</a>                 108 src/lua/lobject.cpp     case LUA_OPMUL: return luai_nummul(L, v1, v2);</span>
<span class='curline'><a href='../S/1189.html#L109'>L</a>                 109 src/lua/lobject.cpp     case LUA_OPDIV: return luai_numdiv(L, v1, v2);</span>
<span class='curline'><a href='../S/1189.html#L110'>L</a>                 110 src/lua/lobject.cpp     case LUA_OPPOW: return luai_numpow(L, v1, v2);</span>
<span class='curline'><a href='../S/1189.html#L111'>L</a>                 111 src/lua/lobject.cpp     case LUA_OPIDIV: return luai_numidiv(L, v1, v2);</span>
<span class='curline'><a href='../S/1189.html#L112'>L</a>                 112 src/lua/lobject.cpp     case LUA_OPUNM: return luai_numunm(L, v1);</span>
<span class='curline'><a href='../S/1189.html#L115'>L</a>                 115 src/lua/lobject.cpp       luai_nummod(L, v1, v2, m);</span>
<span class='curline'><a href='../S/1189.html#L123'>L</a>                 123 src/lua/lobject.cpp void luaO_arith (lua_State *L, int op, const TValue *p1, const TValue *p2,</span>
<span class='curline'><a href='../S/1189.html#L131'>L</a>                 131 src/lua/lobject.cpp         setivalue(res, intarith(L, op, i1, i2));</span>
<span class='curline'><a href='../S/1189.html#L139'>L</a>                 139 src/lua/lobject.cpp         setfltvalue(res, numarith(L, op, n1, n2));</span>
<span class='curline'><a href='../S/1189.html#L147'>L</a>                 147 src/lua/lobject.cpp         setivalue(res, intarith(L, op, ivalue(p1), ivalue(p2)));</span>
<span class='curline'><a href='../S/1189.html#L151'>L</a>                 151 src/lua/lobject.cpp         setfltvalue(res, numarith(L, op, n1, n2));</span>
<span class='curline'><a href='../S/1189.html#L158'>L</a>                 158 src/lua/lobject.cpp   lua_assert(L != NULL);  /* should not fail when folding (compile time) */</span>
<span class='curline'><a href='../S/1189.html#L159'>L</a>                 159 src/lua/lobject.cpp   luaT_trybinTM(L, p1, p2, res, cast(TMS, (op - LUA_OPADD) + TM_ADD));</span>
<span class='curline'><a href='../S/1189.html#L371'>L</a>                 371 src/lua/lobject.cpp void luaO_tostring (lua_State *L, StkId obj) {</span>
<span class='curline'><a href='../S/1189.html#L386'>L</a>                 386 src/lua/lobject.cpp   setsvalue2s(L, obj, luaS_newlstr(L, buff, len));</span>
<span class='curline'><a href='../S/1189.html#L390'>L</a>                 390 src/lua/lobject.cpp static void pushstr (lua_State *L, const char *str, size_t l) {</span>
<span class='curline'><a href='../S/1189.html#L391'>L</a>                 391 src/lua/lobject.cpp   setsvalue2s(L, L-&gt;top, luaS_newlstr(L, str, l));</span>
<span class='curline'><a href='../S/1189.html#L392'>L</a>                 392 src/lua/lobject.cpp   luaD_inctop(L);</span>
<span class='curline'><a href='../S/1189.html#L400'>L</a>                 400 src/lua/lobject.cpp const char *luaO_pushvfstring (lua_State *L, const char *fmt, va_list argp) {</span>
<span class='curline'><a href='../S/1189.html#L405'>L</a>                 405 src/lua/lobject.cpp     pushstr(L, fmt, e - fmt);</span>
<span class='curline'><a href='../S/1189.html#L410'>L</a>                 410 src/lua/lobject.cpp         pushstr(L, s, strlen(s));</span>
<span class='curline'><a href='../S/1189.html#L416'>L</a>                 416 src/lua/lobject.cpp           pushstr(L, &amp;buff, 1);</span>
<span class='curline'><a href='../S/1189.html#L418'>L</a>                 418 src/lua/lobject.cpp           luaO_pushfstring(L, "&lt;\\%d&gt;", cast_uchar(buff));</span>
<span class='curline'><a href='../S/1189.html#L422'>L</a>                 422 src/lua/lobject.cpp         setivalue(L-&gt;top, va_arg(argp, int));</span>
<span class='curline'><a href='../S/1189.html#L426'>L</a>                 426 src/lua/lobject.cpp         setivalue(L-&gt;top, cast(lua_Integer, va_arg(argp, l_uacInt)));</span>
<span class='curline'><a href='../S/1189.html#L430'>L</a>                 430 src/lua/lobject.cpp         setfltvalue(L-&gt;top, cast_num(va_arg(argp, l_uacNumber)));</span>
<span class='curline'><a href='../S/1189.html#L432'>L</a>                 432 src/lua/lobject.cpp         luaD_inctop(L);</span>
<span class='curline'><a href='../S/1189.html#L433'>L</a>                 433 src/lua/lobject.cpp         luaO_tostring(L, L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1189.html#L439'>L</a>                 439 src/lua/lobject.cpp         pushstr(L, buff, l);</span>
<span class='curline'><a href='../S/1189.html#L445'>L</a>                 445 src/lua/lobject.cpp         pushstr(L, buff + UTF8BUFFSZ - l, l);</span>
<span class='curline'><a href='../S/1189.html#L449'>L</a>                 449 src/lua/lobject.cpp         pushstr(L, "%", 1);</span>
<span class='curline'><a href='../S/1189.html#L453'>L</a>                 453 src/lua/lobject.cpp         luaG_runerror(L, "invalid option '%%%c' to 'lua_pushfstring'",</span>
<span class='curline'><a href='../S/1189.html#L460'>L</a>                 460 src/lua/lobject.cpp   luaD_checkstack(L, 1);</span>
<span class='curline'><a href='../S/1189.html#L461'>L</a>                 461 src/lua/lobject.cpp   pushstr(L, fmt, strlen(fmt));</span>
<span class='curline'><a href='../S/1189.html#L462'>L</a>                 462 src/lua/lobject.cpp   if (n &gt; 0) luaV_concat(L, n + 1);</span>
<span class='curline'><a href='../S/1189.html#L463'>L</a>                 463 src/lua/lobject.cpp   return svalue(L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1189.html#L467'>L</a>                 467 src/lua/lobject.cpp const char *luaO_pushfstring (lua_State *L, const char *fmt, ...) {</span>
<span class='curline'><a href='../S/1189.html#L471'>L</a>                 471 src/lua/lobject.cpp   msg = luaO_pushvfstring(L, fmt, argp);</span>
<span class='curline'><a href='../S/1203.html#L190'>L</a>                 190 src/lua/lobject.h #define checkliveness(L,obj) \</span>
<span class='curline'><a href='../S/1203.html#L192'>L</a>                 192 src/lua/lobject.h 		(righttt(obj) &amp;&amp; (L == NULL || !isdead(G(L),gcvalue(obj)))))</span>
<span class='curline'><a href='../S/1203.html#L221'>L</a>                 221 src/lua/lobject.h #define setgcovalue(L,obj,x) \</span>
<span class='curline'><a href='../S/1203.html#L225'>L</a>                 225 src/lua/lobject.h #define setsvalue(L,obj,x) \</span>
<span class='curline'><a href='../S/1203.html#L228'>L</a>                 228 src/lua/lobject.h     checkliveness(L,io); }</span>
<span class='curline'><a href='../S/1203.html#L230'>L</a>                 230 src/lua/lobject.h #define setuvalue(L,obj,x) \</span>
<span class='curline'><a href='../S/1203.html#L233'>L</a>                 233 src/lua/lobject.h     checkliveness(L,io); }</span>
<span class='curline'><a href='../S/1203.html#L235'>L</a>                 235 src/lua/lobject.h #define setthvalue(L,obj,x) \</span>
<span class='curline'><a href='../S/1203.html#L238'>L</a>                 238 src/lua/lobject.h     checkliveness(L,io); }</span>
<span class='curline'><a href='../S/1203.html#L240'>L</a>                 240 src/lua/lobject.h #define setclLvalue(L,obj,x) \</span>
<span class='curline'><a href='../S/1203.html#L243'>L</a>                 243 src/lua/lobject.h     checkliveness(L,io); }</span>
<span class='curline'><a href='../S/1203.html#L245'>L</a>                 245 src/lua/lobject.h #define setclCvalue(L,obj,x) \</span>
<span class='curline'><a href='../S/1203.html#L248'>L</a>                 248 src/lua/lobject.h     checkliveness(L,io); }</span>
<span class='curline'><a href='../S/1203.html#L250'>L</a>                 250 src/lua/lobject.h #define sethvalue(L,obj,x) \</span>
<span class='curline'><a href='../S/1203.html#L253'>L</a>                 253 src/lua/lobject.h     checkliveness(L,io); }</span>
<span class='curline'><a href='../S/1203.html#L259'>L</a>                 259 src/lua/lobject.h #define setobj(L,obj1,obj2) \</span>
<span class='curline'><a href='../S/1203.html#L261'>L</a>                 261 src/lua/lobject.h 	  (void)L; checkliveness(L,io1); }</span>
<span class='curline'><a href='../S/1203.html#L282'>L</a>                 282 src/lua/lobject.h #define setobj2t(L,o1,o2)  ((void)L, *(o1)=*(o2), checkliveness(L,(o1)))</span>
<span class='curline'><a href='../S/1203.html#L371'>L</a>                 371 src/lua/lobject.h #define setuservalue(L,u,o) \</span>
<span class='curline'><a href='../S/1203.html#L374'>L</a>                 374 src/lua/lobject.h 	  checkliveness(L,io); }</span>
<span class='curline'><a href='../S/1203.html#L377'>L</a>                 377 src/lua/lobject.h #define getuservalue(L,u,o) \</span>
<span class='curline'><a href='../S/1203.html#L380'>L</a>                 380 src/lua/lobject.h 	  checkliveness(L,io); }</span>
<span class='curline'><a href='../S/1203.html#L485'>L</a>                 485 src/lua/lobject.h #define setnodekey(L,key,obj) \</span>
<span class='curline'><a href='../S/1203.html#L488'>L</a>                 488 src/lua/lobject.h 	  (void)L; checkliveness(L,io_); }</span>
<span class='curline'><a href='../S/1203.html#L537'>L</a>                 537 src/lua/lobject.h LUAI_FUNC void luaO_arith (lua_State *L, int op, const TValue *p1,</span>
<span class='curline'><a href='../S/1203.html#L541'>L</a>                 541 src/lua/lobject.h LUAI_FUNC void luaO_tostring (lua_State *L, StkId obj);</span>
<span class='curline'><a href='../S/1203.html#L542'>L</a>                 542 src/lua/lobject.h LUAI_FUNC const char *luaO_pushvfstring (lua_State *L, const char *fmt,</span>
<span class='curline'><a href='../S/1203.html#L544'>L</a>                 544 src/lua/lobject.h LUAI_FUNC const char *luaO_pushfstring (lua_State *L, const char *fmt, ...);</span>
<span class='curline'><a href='../S/1172.html#L67'>L</a>                  67 src/lua/loslib.cpp #define l_pushtime(L,t)		lua_pushinteger(L,(lua_Integer)(t))</span>
<span class='curline'><a href='../S/1172.html#L69'>L</a>                  69 src/lua/loslib.cpp static time_t l_checktime (lua_State *L, int arg) {</span>
<span class='curline'><a href='../S/1172.html#L70'>L</a>                  70 src/lua/loslib.cpp   lua_Integer t = luaL_checkinteger(L, arg);</span>
<span class='curline'><a href='../S/1172.html#L71'>L</a>                  71 src/lua/loslib.cpp   luaL_argcheck(L, (time_t)t == t, arg, "time out-of-bounds");</span>
<span class='curline'><a href='../S/1172.html#L141'>L</a>                 141 src/lua/loslib.cpp static int os_execute (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L142'>L</a>                 142 src/lua/loslib.cpp   const char *cmd = luaL_optstring(L, 1, NULL);</span>
<span class='curline'><a href='../S/1172.html#L145'>L</a>                 145 src/lua/loslib.cpp     return luaL_execresult(L, stat);</span>
<span class='curline'><a href='../S/1172.html#L147'>L</a>                 147 src/lua/loslib.cpp     lua_pushboolean(L, stat);  /* true if there is a shell */</span>
<span class='curline'><a href='../S/1172.html#L153'>L</a>                 153 src/lua/loslib.cpp static int os_remove (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L154'>L</a>                 154 src/lua/loslib.cpp   const char *filename = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1172.html#L155'>L</a>                 155 src/lua/loslib.cpp   return luaL_fileresult(L, remove(filename) == 0, filename);</span>
<span class='curline'><a href='../S/1172.html#L159'>L</a>                 159 src/lua/loslib.cpp static int os_rename (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L160'>L</a>                 160 src/lua/loslib.cpp   const char *fromname = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1172.html#L161'>L</a>                 161 src/lua/loslib.cpp   const char *toname = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/1172.html#L162'>L</a>                 162 src/lua/loslib.cpp   return luaL_fileresult(L, rename(fromname, toname) == 0, NULL);</span>
<span class='curline'><a href='../S/1172.html#L166'>L</a>                 166 src/lua/loslib.cpp static int os_tmpname (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L171'>L</a>                 171 src/lua/loslib.cpp     return luaL_error(L, "unable to generate a unique filename");</span>
<span class='curline'><a href='../S/1172.html#L172'>L</a>                 172 src/lua/loslib.cpp   lua_pushstring(L, buff);</span>
<span class='curline'><a href='../S/1172.html#L177'>L</a>                 177 src/lua/loslib.cpp static int os_getenv (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L178'>L</a>                 178 src/lua/loslib.cpp   lua_pushstring(L, getenv(luaL_checkstring(L, 1)));  /* if NULL push nil */</span>
<span class='curline'><a href='../S/1172.html#L183'>L</a>                 183 src/lua/loslib.cpp static int os_clock (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L184'>L</a>                 184 src/lua/loslib.cpp   lua_pushnumber(L, ((lua_Number)clock())/(lua_Number)CLOCKS_PER_SEC);</span>
<span class='curline'><a href='../S/1172.html#L197'>L</a>                 197 src/lua/loslib.cpp static void setfield (lua_State *L, const char *key, int value) {</span>
<span class='curline'><a href='../S/1172.html#L198'>L</a>                 198 src/lua/loslib.cpp   lua_pushinteger(L, value);</span>
<span class='curline'><a href='../S/1172.html#L199'>L</a>                 199 src/lua/loslib.cpp   lua_setfield(L, -2, key);</span>
<span class='curline'><a href='../S/1172.html#L202'>L</a>                 202 src/lua/loslib.cpp static void setboolfield (lua_State *L, const char *key, int value) {</span>
<span class='curline'><a href='../S/1172.html#L205'>L</a>                 205 src/lua/loslib.cpp   lua_pushboolean(L, value);</span>
<span class='curline'><a href='../S/1172.html#L206'>L</a>                 206 src/lua/loslib.cpp   lua_setfield(L, -2, key);</span>
<span class='curline'><a href='../S/1172.html#L213'>L</a>                 213 src/lua/loslib.cpp static void setallfields (lua_State *L, struct tm *stm) {</span>
<span class='curline'><a href='../S/1172.html#L214'>L</a>                 214 src/lua/loslib.cpp   setfield(L, "sec", stm-&gt;tm_sec);</span>
<span class='curline'><a href='../S/1172.html#L215'>L</a>                 215 src/lua/loslib.cpp   setfield(L, "min", stm-&gt;tm_min);</span>
<span class='curline'><a href='../S/1172.html#L216'>L</a>                 216 src/lua/loslib.cpp   setfield(L, "hour", stm-&gt;tm_hour);</span>
<span class='curline'><a href='../S/1172.html#L217'>L</a>                 217 src/lua/loslib.cpp   setfield(L, "day", stm-&gt;tm_mday);</span>
<span class='curline'><a href='../S/1172.html#L218'>L</a>                 218 src/lua/loslib.cpp   setfield(L, "month", stm-&gt;tm_mon + 1);</span>
<span class='curline'><a href='../S/1172.html#L219'>L</a>                 219 src/lua/loslib.cpp   setfield(L, "year", stm-&gt;tm_year + 1900);</span>
<span class='curline'><a href='../S/1172.html#L220'>L</a>                 220 src/lua/loslib.cpp   setfield(L, "wday", stm-&gt;tm_wday + 1);</span>
<span class='curline'><a href='../S/1172.html#L221'>L</a>                 221 src/lua/loslib.cpp   setfield(L, "yday", stm-&gt;tm_yday + 1);</span>
<span class='curline'><a href='../S/1172.html#L222'>L</a>                 222 src/lua/loslib.cpp   setboolfield(L, "isdst", stm-&gt;tm_isdst);</span>
<span class='curline'><a href='../S/1172.html#L226'>L</a>                 226 src/lua/loslib.cpp static int getboolfield (lua_State *L, const char *key) {</span>
<span class='curline'><a href='../S/1172.html#L228'>L</a>                 228 src/lua/loslib.cpp   res = (lua_getfield(L, -1, key) == LUA_TNIL) ? -1 : lua_toboolean(L, -1);</span>
<span class='curline'><a href='../S/1172.html#L229'>L</a>                 229 src/lua/loslib.cpp   lua_pop(L, 1);</span>
<span class='curline'><a href='../S/1172.html#L239'>L</a>                 239 src/lua/loslib.cpp static int getfield (lua_State *L, const char *key, int d, int delta) {</span>
<span class='curline'><a href='../S/1172.html#L241'>L</a>                 241 src/lua/loslib.cpp   int t = lua_getfield(L, -1, key);  /* get field and its type */</span>
<span class='curline'><a href='../S/1172.html#L242'>L</a>                 242 src/lua/loslib.cpp   lua_Integer res = lua_tointegerx(L, -1, &amp;isnum);</span>
<span class='curline'><a href='../S/1172.html#L245'>L</a>                 245 src/lua/loslib.cpp       return luaL_error(L, "field '%s' is not an integer", key);</span>
<span class='curline'><a href='../S/1172.html#L247'>L</a>                 247 src/lua/loslib.cpp       return luaL_error(L, "field '%s' missing in date table", key);</span>
<span class='curline'><a href='../S/1172.html#L252'>L</a>                 252 src/lua/loslib.cpp       return luaL_error(L, "field '%s' is out-of-bound", key);</span>
<span class='curline'><a href='../S/1172.html#L255'>L</a>                 255 src/lua/loslib.cpp   lua_pop(L, 1);</span>
<span class='curline'><a href='../S/1172.html#L260'>L</a>                 260 src/lua/loslib.cpp static const char *checkoption (lua_State *L, const char *conv,</span>
<span class='curline'><a href='../S/1172.html#L273'>L</a>                 273 src/lua/loslib.cpp   luaL_argerror(L, 1,</span>
<span class='curline'><a href='../S/1172.html#L274'>L</a>                 274 src/lua/loslib.cpp     lua_pushfstring(L, "invalid conversion specifier '%%%s'", conv));</span>
<span class='curline'><a href='../S/1172.html#L283'>L</a>                 283 src/lua/loslib.cpp static int os_date (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L285'>L</a>                 285 src/lua/loslib.cpp   const char *s = luaL_optlstring(L, 1, "%c", &amp;slen);</span>
<span class='curline'><a href='../S/1172.html#L286'>L</a>                 286 src/lua/loslib.cpp   time_t t = luaL_opt(L, l_checktime, 2, time(NULL));</span>
<span class='curline'><a href='../S/1172.html#L296'>L</a>                 296 src/lua/loslib.cpp     luaL_error(L, "time result cannot be represented in this installation");</span>
<span class='curline'><a href='../S/1172.html#L298'>L</a>                 298 src/lua/loslib.cpp     lua_createtable(L, 0, 9);  /* 9 = number of fields */</span>
<span class='curline'><a href='../S/1172.html#L299'>L</a>                 299 src/lua/loslib.cpp     setallfields(L, stm);</span>
<span class='curline'><a href='../S/1172.html#L305'>L</a>                 305 src/lua/loslib.cpp     luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/1172.html#L313'>L</a>                 313 src/lua/loslib.cpp         s = checkoption(L, s, se - s, cc + 1);  /* copy specifier to 'cc' */</span>
<span class='curline'><a href='../S/1172.html#L324'>L</a>                 324 src/lua/loslib.cpp static int os_time (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L326'>L</a>                 326 src/lua/loslib.cpp   if (lua_isnoneornil(L, 1))  /* called without args? */</span>
<span class='curline'><a href='../S/1172.html#L330'>L</a>                 330 src/lua/loslib.cpp     luaL_checktype(L, 1, LUA_TTABLE);</span>
<span class='curline'><a href='../S/1172.html#L331'>L</a>                 331 src/lua/loslib.cpp     lua_settop(L, 1);  /* make sure table is at the top */</span>
<span class='curline'><a href='../S/1172.html#L332'>L</a>                 332 src/lua/loslib.cpp     ts.tm_sec = getfield(L, "sec", 0, 0);</span>
<span class='curline'><a href='../S/1172.html#L333'>L</a>                 333 src/lua/loslib.cpp     ts.tm_min = getfield(L, "min", 0, 0);</span>
<span class='curline'><a href='../S/1172.html#L334'>L</a>                 334 src/lua/loslib.cpp     ts.tm_hour = getfield(L, "hour", 12, 0);</span>
<span class='curline'><a href='../S/1172.html#L335'>L</a>                 335 src/lua/loslib.cpp     ts.tm_mday = getfield(L, "day", -1, 0);</span>
<span class='curline'><a href='../S/1172.html#L336'>L</a>                 336 src/lua/loslib.cpp     ts.tm_mon = getfield(L, "month", -1, 1);</span>
<span class='curline'><a href='../S/1172.html#L337'>L</a>                 337 src/lua/loslib.cpp     ts.tm_year = getfield(L, "year", -1, 1900);</span>
<span class='curline'><a href='../S/1172.html#L338'>L</a>                 338 src/lua/loslib.cpp     ts.tm_isdst = getboolfield(L, "isdst");</span>
<span class='curline'><a href='../S/1172.html#L340'>L</a>                 340 src/lua/loslib.cpp     setallfields(L, &amp;ts);  /* update fields with normalized values */</span>
<span class='curline'><a href='../S/1172.html#L343'>L</a>                 343 src/lua/loslib.cpp     luaL_error(L, "time result cannot be represented in this installation");</span>
<span class='curline'><a href='../S/1172.html#L344'>L</a>                 344 src/lua/loslib.cpp   l_pushtime(L, t);</span>
<span class='curline'><a href='../S/1172.html#L349'>L</a>                 349 src/lua/loslib.cpp static int os_difftime (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L350'>L</a>                 350 src/lua/loslib.cpp   time_t t1 = l_checktime(L, 1);</span>
<span class='curline'><a href='../S/1172.html#L351'>L</a>                 351 src/lua/loslib.cpp   time_t t2 = l_checktime(L, 2);</span>
<span class='curline'><a href='../S/1172.html#L352'>L</a>                 352 src/lua/loslib.cpp   lua_pushnumber(L, (lua_Number)difftime(t1, t2));</span>
<span class='curline'><a href='../S/1172.html#L359'>L</a>                 359 src/lua/loslib.cpp static int os_setlocale (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L364'>L</a>                 364 src/lua/loslib.cpp   const char *l = luaL_optstring(L, 1, NULL);</span>
<span class='curline'><a href='../S/1172.html#L365'>L</a>                 365 src/lua/loslib.cpp   int op = luaL_checkoption(L, 2, "all", catnames);</span>
<span class='curline'><a href='../S/1172.html#L366'>L</a>                 366 src/lua/loslib.cpp   lua_pushstring(L, setlocale(cat[op], l));</span>
<span class='curline'><a href='../S/1172.html#L371'>L</a>                 371 src/lua/loslib.cpp static int os_exit (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L373'>L</a>                 373 src/lua/loslib.cpp   if (lua_isboolean(L, 1))</span>
<span class='curline'><a href='../S/1172.html#L374'>L</a>                 374 src/lua/loslib.cpp     status = (lua_toboolean(L, 1) ? EXIT_SUCCESS : EXIT_FAILURE);</span>
<span class='curline'><a href='../S/1172.html#L376'>L</a>                 376 src/lua/loslib.cpp     status = (int)luaL_optinteger(L, 1, EXIT_SUCCESS);</span>
<span class='curline'><a href='../S/1172.html#L377'>L</a>                 377 src/lua/loslib.cpp   if (lua_toboolean(L, 2))</span>
<span class='curline'><a href='../S/1172.html#L378'>L</a>                 378 src/lua/loslib.cpp     lua_close(L);</span>
<span class='curline'><a href='../S/1172.html#L379'>L</a>                 379 src/lua/loslib.cpp   if (L) exit(status);  /* 'if' to avoid warnings for unreachable 'return' */</span>
<span class='curline'><a href='../S/1172.html#L403'>L</a>                 403 src/lua/loslib.cpp LUAMOD_API int luaopen_os (lua_State *L) {</span>
<span class='curline'><a href='../S/1172.html#L404'>L</a>                 404 src/lua/loslib.cpp   luaL_newlib(L, syslib);</span>
<span class='curline'><a href='../S/1226.html#L75'>L</a>                  75 src/lua/lparser.cpp       luaO_pushfstring(ls-&gt;L, "%s expected", luaX_token2str(ls, token)));</span>
<span class='curline'><a href='../S/1226.html#L80'>L</a>                  80 src/lua/lparser.cpp   lua_State *L = fs-&gt;ls-&gt;L;</span>
<span class='curline'><a href='../S/1226.html#L85'>L</a>                  85 src/lua/lparser.cpp                       : luaO_pushfstring(L, "function at line %d", line);</span>
<span class='curline'><a href='../S/1226.html#L86'>L</a>                  86 src/lua/lparser.cpp   msg = luaO_pushfstring(L, "too many %s (limit is %d) in %s",</span>
<span class='curline'><a href='../S/1226.html#L127'>L</a>                 127 src/lua/lparser.cpp       luaX_syntaxerror(ls, luaO_pushfstring(ls-&gt;L,</span>
<span class='curline'><a href='../S/1226.html#L165'>L</a>                 165 src/lua/lparser.cpp   luaM_growvector(ls-&gt;L, f-&gt;locvars, fs-&gt;nlocvars, f-&gt;sizelocvars,</span>
<span class='curline'><a href='../S/1226.html#L170'>L</a>                 170 src/lua/lparser.cpp   luaC_objbarrier(ls-&gt;L, f, varname);</span>
<span class='curline'><a href='../S/1226.html#L181'>L</a>                 181 src/lua/lparser.cpp   luaM_growvector(ls-&gt;L, dyd-&gt;actvar.arr, dyd-&gt;actvar.n + 1,</span>
<span class='curline'><a href='../S/1226.html#L232'>L</a>                 232 src/lua/lparser.cpp   luaM_growvector(fs-&gt;ls-&gt;L, f-&gt;upvalues, fs-&gt;nups, f-&gt;sizeupvalues,</span>
<span class='curline'><a href='../S/1226.html#L239'>L</a>                 239 src/lua/lparser.cpp   luaC_objbarrier(fs-&gt;ls-&gt;L, f, name);</span>
<span class='curline'><a href='../S/1226.html#L332'>L</a>                 332 src/lua/lparser.cpp   lua_State *L = ls-&gt;L;</span>
<span class='curline'><a href='../S/1226.html#L333'>L</a>                 333 src/lua/lparser.cpp   ++L-&gt;nCcalls;</span>
<span class='curline'><a href='../S/1226.html#L334'>L</a>                 334 src/lua/lparser.cpp   checklimit(ls-&gt;fs, L-&gt;nCcalls, LUAI_MAXCCALLS, "C levels");</span>
<span class='curline'><a href='../S/1226.html#L338'>L</a>                 338 src/lua/lparser.cpp #define leavelevel(ls)	((ls)-&gt;L-&gt;nCcalls--)</span>
<span class='curline'><a href='../S/1226.html#L349'>L</a>                 349 src/lua/lparser.cpp     const char *msg = luaO_pushfstring(ls-&gt;L,</span>
<span class='curline'><a href='../S/1226.html#L388'>L</a>                 388 src/lua/lparser.cpp   luaM_growvector(ls-&gt;L, l-&gt;arr, n, l-&gt;size,</span>
<span class='curline'><a href='../S/1226.html#L455'>L</a>                 455 src/lua/lparser.cpp   TString *n = luaS_new(ls-&gt;L, "break");</span>
<span class='curline'><a href='../S/1226.html#L468'>L</a>                 468 src/lua/lparser.cpp   msg = luaO_pushfstring(ls-&gt;L, msg, getstr(gt-&gt;name), gt-&gt;line);</span>
<span class='curline'><a href='../S/1226.html#L501'>L</a>                 501 src/lua/lparser.cpp   lua_State *L = ls-&gt;L;</span>
<span class='curline'><a href='../S/1226.html#L506'>L</a>                 506 src/lua/lparser.cpp     luaM_growvector(L, f-&gt;p, fs-&gt;np, f-&gt;sizep, Proto *, MAXARG_Bx, "functions");</span>
<span class='curline'><a href='../S/1226.html#L510'>L</a>                 510 src/lua/lparser.cpp   f-&gt;p[fs-&gt;np++] = clp = luaF_newproto(L);</span>
<span class='curline'><a href='../S/1226.html#L511'>L</a>                 511 src/lua/lparser.cpp   luaC_objbarrier(L, f, clp);</span>
<span class='curline'><a href='../S/1226.html#L553'>L</a>                 553 src/lua/lparser.cpp   lua_State *L = ls-&gt;L;</span>
<span class='curline'><a href='../S/1226.html#L558'>L</a>                 558 src/lua/lparser.cpp   luaM_reallocvector(L, f-&gt;code, f-&gt;sizecode, fs-&gt;pc, Instruction);</span>
<span class='curline'><a href='../S/1226.html#L560'>L</a>                 560 src/lua/lparser.cpp   luaM_reallocvector(L, f-&gt;lineinfo, f-&gt;sizelineinfo, fs-&gt;pc, int);</span>
<span class='curline'><a href='../S/1226.html#L562'>L</a>                 562 src/lua/lparser.cpp   luaM_reallocvector(L, f-&gt;k, f-&gt;sizek, fs-&gt;nk, TValue);</span>
<span class='curline'><a href='../S/1226.html#L564'>L</a>                 564 src/lua/lparser.cpp   luaM_reallocvector(L, f-&gt;p, f-&gt;sizep, fs-&gt;np, Proto *);</span>
<span class='curline'><a href='../S/1226.html#L566'>L</a>                 566 src/lua/lparser.cpp   luaM_reallocvector(L, f-&gt;locvars, f-&gt;sizelocvars, fs-&gt;nlocvars, LocVar);</span>
<span class='curline'><a href='../S/1226.html#L568'>L</a>                 568 src/lua/lparser.cpp   luaM_reallocvector(L, f-&gt;upvalues, f-&gt;sizeupvalues, fs-&gt;nups, Upvaldesc);</span>
<span class='curline'><a href='../S/1226.html#L572'>L</a>                 572 src/lua/lparser.cpp   luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1226.html#L1156'>L</a>                1156 src/lua/lparser.cpp     checklimit(ls-&gt;fs, nvars + ls-&gt;L-&gt;nCcalls, LUAI_MAXCCALLS,</span>
<span class='curline'><a href='../S/1226.html#L1195'>L</a>                1195 src/lua/lparser.cpp     label = luaS_new(ls-&gt;L, "break");</span>
<span class='curline'><a href='../S/1226.html#L1207'>L</a>                1207 src/lua/lparser.cpp       const char *msg = luaO_pushfstring(fs-&gt;ls-&gt;L,</span>
<span class='curline'><a href='../S/1226.html#L1626'>L</a>                1626 src/lua/lparser.cpp LClosure *luaY_parser (lua_State *L, ZIO *z, Mbuffer *buff,</span>
<span class='curline'><a href='../S/1226.html#L1630'>L</a>                1630 src/lua/lparser.cpp   LClosure *cl = luaF_newLclosure(L, 1);  /* create main closure */</span>
<span class='curline'><a href='../S/1226.html#L1631'>L</a>                1631 src/lua/lparser.cpp   setclLvalue(L, L-&gt;top, cl);  /* anchor it (to avoid being collected) */</span>
<span class='curline'><a href='../S/1226.html#L1632'>L</a>                1632 src/lua/lparser.cpp   luaD_inctop(L);</span>
<span class='curline'><a href='../S/1226.html#L1633'>L</a>                1633 src/lua/lparser.cpp   lexstate.h = luaH_new(L);  /* create table for scanner */</span>
<span class='curline'><a href='../S/1226.html#L1634'>L</a>                1634 src/lua/lparser.cpp   sethvalue(L, L-&gt;top, lexstate.h);  /* anchor it */</span>
<span class='curline'><a href='../S/1226.html#L1635'>L</a>                1635 src/lua/lparser.cpp   luaD_inctop(L);</span>
<span class='curline'><a href='../S/1226.html#L1636'>L</a>                1636 src/lua/lparser.cpp   funcstate.f = cl-&gt;p = luaF_newproto(L);</span>
<span class='curline'><a href='../S/1226.html#L1637'>L</a>                1637 src/lua/lparser.cpp   funcstate.f-&gt;source = luaS_new(L, name);  /* create and anchor TString */</span>
<span class='curline'><a href='../S/1226.html#L1642'>L</a>                1642 src/lua/lparser.cpp   luaX_setinput(L, &amp;lexstate, z, funcstate.f-&gt;source, firstchar);</span>
<span class='curline'><a href='../S/1226.html#L1647'>L</a>                1647 src/lua/lparser.cpp   L-&gt;top--;  /* remove scanner's table */</span>
<span class='curline'><a href='../S/1183.html#L129'>L</a>                 129 src/lua/lparser.h LUAI_FUNC LClosure *luaY_parser (lua_State *L, ZIO *z, Mbuffer *buff,</span>
<span class='curline'><a href='../S/1190.html#L70'>L</a>                  70 src/lua/lstate.cpp #define fromstate(L)	(cast(LX *, cast(lu_byte *, (L)) - offsetof(LX, l)))</span>
<span class='curline'><a href='../S/1190.html#L81'>L</a>                  81 src/lua/lstate.cpp static unsigned int makeseed (lua_State *L) {</span>
<span class='curline'><a href='../S/1190.html#L85'>L</a>                  85 src/lua/lstate.cpp   addbuff(buff, p, L);  /* heap variable */</span>
<span class='curline'><a href='../S/1190.html#L108'>L</a>                 108 src/lua/lstate.cpp CallInfo *luaE_extendCI (lua_State *L) {</span>
<span class='curline'><a href='../S/1190.html#L109'>L</a>                 109 src/lua/lstate.cpp   CallInfo *ci = luaM_new(L, CallInfo);</span>
<span class='curline'><a href='../S/1190.html#L110'>L</a>                 110 src/lua/lstate.cpp   lua_assert(L-&gt;ci-&gt;next == NULL);</span>
<span class='curline'><a href='../S/1190.html#L111'>L</a>                 111 src/lua/lstate.cpp   L-&gt;ci-&gt;next = ci;</span>
<span class='curline'><a href='../S/1190.html#L112'>L</a>                 112 src/lua/lstate.cpp   ci-&gt;previous = L-&gt;ci;</span>
<span class='curline'><a href='../S/1190.html#L114'>L</a>                 114 src/lua/lstate.cpp   L-&gt;nci++;</span>
<span class='curline'><a href='../S/1190.html#L122'>L</a>                 122 src/lua/lstate.cpp void luaE_freeCI (lua_State *L) {</span>
<span class='curline'><a href='../S/1190.html#L123'>L</a>                 123 src/lua/lstate.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1190.html#L128'>L</a>                 128 src/lua/lstate.cpp     luaM_free(L, ci);</span>
<span class='curline'><a href='../S/1190.html#L129'>L</a>                 129 src/lua/lstate.cpp     L-&gt;nci--;</span>
<span class='curline'><a href='../S/1190.html#L137'>L</a>                 137 src/lua/lstate.cpp void luaE_shrinkCI (lua_State *L) {</span>
<span class='curline'><a href='../S/1190.html#L138'>L</a>                 138 src/lua/lstate.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1190.html#L142'>L</a>                 142 src/lua/lstate.cpp     luaM_free(L, ci-&gt;next);  /* free next */</span>
<span class='curline'><a href='../S/1190.html#L143'>L</a>                 143 src/lua/lstate.cpp     L-&gt;nci--;</span>
<span class='curline'><a href='../S/1190.html#L151'>L</a>                 151 src/lua/lstate.cpp static void stack_init (lua_State *L1, lua_State *L) {</span>
<span class='curline'><a href='../S/1190.html#L154'>L</a>                 154 src/lua/lstate.cpp   L1-&gt;stack = luaM_newvector(L, BASIC_STACK_SIZE, TValue);</span>
<span class='curline'><a href='../S/1190.html#L171'>L</a>                 171 src/lua/lstate.cpp static void freestack (lua_State *L) {</span>
<span class='curline'><a href='../S/1190.html#L172'>L</a>                 172 src/lua/lstate.cpp   if (L-&gt;stack == NULL)</span>
<span class='curline'><a href='../S/1190.html#L174'>L</a>                 174 src/lua/lstate.cpp   L-&gt;ci = &amp;L-&gt;base_ci;  /* free the entire 'ci' list */</span>
<span class='curline'><a href='../S/1190.html#L175'>L</a>                 175 src/lua/lstate.cpp   luaE_freeCI(L);</span>
<span class='curline'><a href='../S/1190.html#L176'>L</a>                 176 src/lua/lstate.cpp   lua_assert(L-&gt;nci == 0);</span>
<span class='curline'><a href='../S/1190.html#L177'>L</a>                 177 src/lua/lstate.cpp   luaM_freearray(L, L-&gt;stack, L-&gt;stacksize);  /* free stack array */</span>
<span class='curline'><a href='../S/1190.html#L184'>L</a>                 184 src/lua/lstate.cpp static void init_registry (lua_State *L, global_State *g) {</span>
<span class='curline'><a href='../S/1190.html#L187'>L</a>                 187 src/lua/lstate.cpp   Table *registry = luaH_new(L);</span>
<span class='curline'><a href='../S/1190.html#L188'>L</a>                 188 src/lua/lstate.cpp   sethvalue(L, &amp;g-&gt;l_registry, registry);</span>
<span class='curline'><a href='../S/1190.html#L189'>L</a>                 189 src/lua/lstate.cpp   luaH_resize(L, registry, LUA_RIDX_LAST, 0);</span>
<span class='curline'><a href='../S/1190.html#L191'>L</a>                 191 src/lua/lstate.cpp   setthvalue(L, &amp;temp, L);  /* temp = L */</span>
<span class='curline'><a href='../S/1190.html#L192'>L</a>                 192 src/lua/lstate.cpp   luaH_setint(L, registry, LUA_RIDX_MAINTHREAD, &amp;temp);</span>
<span class='curline'><a href='../S/1190.html#L194'>L</a>                 194 src/lua/lstate.cpp   sethvalue(L, &amp;temp, luaH_new(L));  /* temp = new table (global table) */</span>
<span class='curline'><a href='../S/1190.html#L195'>L</a>                 195 src/lua/lstate.cpp   luaH_setint(L, registry, LUA_RIDX_GLOBALS, &amp;temp);</span>
<span class='curline'><a href='../S/1190.html#L203'>L</a>                 203 src/lua/lstate.cpp static void f_luaopen (lua_State *L, void *ud) {</span>
<span class='curline'><a href='../S/1190.html#L204'>L</a>                 204 src/lua/lstate.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1190.html#L206'>L</a>                 206 src/lua/lstate.cpp   stack_init(L, L);  /* init stack */</span>
<span class='curline'><a href='../S/1190.html#L207'>L</a>                 207 src/lua/lstate.cpp   init_registry(L, g);</span>
<span class='curline'><a href='../S/1190.html#L208'>L</a>                 208 src/lua/lstate.cpp   luaS_init(L);</span>
<span class='curline'><a href='../S/1190.html#L209'>L</a>                 209 src/lua/lstate.cpp   luaT_init(L);</span>
<span class='curline'><a href='../S/1190.html#L210'>L</a>                 210 src/lua/lstate.cpp   luaX_init(L);</span>
<span class='curline'><a href='../S/1190.html#L213'>L</a>                 213 src/lua/lstate.cpp   luai_userstateopen(L);</span>
<span class='curline'><a href='../S/1190.html#L221'>L</a>                 221 src/lua/lstate.cpp static void preinit_thread (lua_State *L, global_State *g) {</span>
<span class='curline'><a href='../S/1190.html#L222'>L</a>                 222 src/lua/lstate.cpp   G(L) = g;</span>
<span class='curline'><a href='../S/1190.html#L223'>L</a>                 223 src/lua/lstate.cpp   L-&gt;stack = NULL;</span>
<span class='curline'><a href='../S/1190.html#L224'>L</a>                 224 src/lua/lstate.cpp   L-&gt;ci = NULL;</span>
<span class='curline'><a href='../S/1190.html#L225'>L</a>                 225 src/lua/lstate.cpp   L-&gt;nci = 0;</span>
<span class='curline'><a href='../S/1190.html#L226'>L</a>                 226 src/lua/lstate.cpp   L-&gt;stacksize = 0;</span>
<span class='curline'><a href='../S/1190.html#L227'>L</a>                 227 src/lua/lstate.cpp   L-&gt;twups = L;  /* thread has no upvalues */</span>
<span class='curline'><a href='../S/1190.html#L228'>L</a>                 228 src/lua/lstate.cpp   L-&gt;errorJmp = NULL;</span>
<span class='curline'><a href='../S/1190.html#L229'>L</a>                 229 src/lua/lstate.cpp   L-&gt;nCcalls = 0;</span>
<span class='curline'><a href='../S/1190.html#L230'>L</a>                 230 src/lua/lstate.cpp   L-&gt;hook = NULL;</span>
<span class='curline'><a href='../S/1190.html#L231'>L</a>                 231 src/lua/lstate.cpp   L-&gt;hookmask = 0;</span>
<span class='curline'><a href='../S/1190.html#L232'>L</a>                 232 src/lua/lstate.cpp   L-&gt;basehookcount = 0;</span>
<span class='curline'><a href='../S/1190.html#L233'>L</a>                 233 src/lua/lstate.cpp   L-&gt;allowhook = 1;</span>
<span class='curline'><a href='../S/1190.html#L234'>L</a>                 234 src/lua/lstate.cpp   resethookcount(L);</span>
<span class='curline'><a href='../S/1190.html#L235'>L</a>                 235 src/lua/lstate.cpp   L-&gt;openupval = NULL;</span>
<span class='curline'><a href='../S/1190.html#L236'>L</a>                 236 src/lua/lstate.cpp   L-&gt;nny = 1;</span>
<span class='curline'><a href='../S/1190.html#L237'>L</a>                 237 src/lua/lstate.cpp   L-&gt;status = LUA_OK;</span>
<span class='curline'><a href='../S/1190.html#L238'>L</a>                 238 src/lua/lstate.cpp   L-&gt;errfunc = 0;</span>
<span class='curline'><a href='../S/1190.html#L242'>L</a>                 242 src/lua/lstate.cpp static void close_state (lua_State *L) {</span>
<span class='curline'><a href='../S/1190.html#L243'>L</a>                 243 src/lua/lstate.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1190.html#L244'>L</a>                 244 src/lua/lstate.cpp   luaF_close(L, L-&gt;stack);  /* close all upvalues for this thread */</span>
<span class='curline'><a href='../S/1190.html#L245'>L</a>                 245 src/lua/lstate.cpp   luaC_freeallobjects(L);  /* collect all objects */</span>
<span class='curline'><a href='../S/1190.html#L247'>L</a>                 247 src/lua/lstate.cpp     luai_userstateclose(L);</span>
<span class='curline'><a href='../S/1190.html#L248'>L</a>                 248 src/lua/lstate.cpp   luaM_freearray(L, G(L)-&gt;strt.hash, G(L)-&gt;strt.size);</span>
<span class='curline'><a href='../S/1190.html#L249'>L</a>                 249 src/lua/lstate.cpp   freestack(L);</span>
<span class='curline'><a href='../S/1190.html#L251'>L</a>                 251 src/lua/lstate.cpp   (*g-&gt;frealloc)(g-&gt;ud, fromstate(L), sizeof(LG), 0);  /* free main block */</span>
<span class='curline'><a href='../S/1190.html#L255'>L</a>                 255 src/lua/lstate.cpp LUA_API lua_State *lua_newthread (lua_State *L) {</span>
<span class='curline'><a href='../S/1190.html#L256'>L</a>                 256 src/lua/lstate.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1190.html#L258'>L</a>                 258 src/lua/lstate.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1190.html#L259'>L</a>                 259 src/lua/lstate.cpp   luaC_checkGC(L);</span>
<span class='curline'><a href='../S/1190.html#L261'>L</a>                 261 src/lua/lstate.cpp   L1 = &amp;cast(LX *, luaM_newobject(L, LUA_TTHREAD, sizeof(LX)))-&gt;l;</span>
<span class='curline'><a href='../S/1190.html#L268'>L</a>                 268 src/lua/lstate.cpp   setthvalue(L, L-&gt;top, L1);</span>
<span class='curline'><a href='../S/1190.html#L269'>L</a>                 269 src/lua/lstate.cpp   api_incr_top(L);</span>
<span class='curline'><a href='../S/1190.html#L271'>L</a>                 271 src/lua/lstate.cpp   L1-&gt;hookmask = L-&gt;hookmask;</span>
<span class='curline'><a href='../S/1190.html#L272'>L</a>                 272 src/lua/lstate.cpp   L1-&gt;basehookcount = L-&gt;basehookcount;</span>
<span class='curline'><a href='../S/1190.html#L273'>L</a>                 273 src/lua/lstate.cpp   L1-&gt;hook = L-&gt;hook;</span>
<span class='curline'><a href='../S/1190.html#L278'>L</a>                 278 src/lua/lstate.cpp   luai_userstatethread(L, L1);</span>
<span class='curline'><a href='../S/1190.html#L279'>L</a>                 279 src/lua/lstate.cpp   stack_init(L1, L);  /* init stack */</span>
<span class='curline'><a href='../S/1190.html#L280'>L</a>                 280 src/lua/lstate.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1190.html#L285'>L</a>                 285 src/lua/lstate.cpp void luaE_freethread (lua_State *L, lua_State *L1) {</span>
<span class='curline'><a href='../S/1190.html#L289'>L</a>                 289 src/lua/lstate.cpp   luai_userstatefree(L, L1);</span>
<span class='curline'><a href='../S/1190.html#L291'>L</a>                 291 src/lua/lstate.cpp   luaM_free(L, l);</span>
<span class='curline'><a href='../S/1190.html#L297'>L</a>                 297 src/lua/lstate.cpp   lua_State *L;</span>
<span class='curline'><a href='../S/1190.html#L301'>L</a>                 301 src/lua/lstate.cpp   L = &amp;l-&gt;l.l;</span>
<span class='curline'><a href='../S/1190.html#L303'>L</a>                 303 src/lua/lstate.cpp   L-&gt;next = NULL;</span>
<span class='curline'><a href='../S/1190.html#L304'>L</a>                 304 src/lua/lstate.cpp   L-&gt;tt = LUA_TTHREAD;</span>
<span class='curline'><a href='../S/1190.html#L306'>L</a>                 306 src/lua/lstate.cpp   L-&gt;marked = luaC_white(g);</span>
<span class='curline'><a href='../S/1190.html#L307'>L</a>                 307 src/lua/lstate.cpp   preinit_thread(L, g);</span>
<span class='curline'><a href='../S/1190.html#L310'>L</a>                 310 src/lua/lstate.cpp   g-&gt;mainthread = L;</span>
<span class='curline'><a href='../S/1190.html#L311'>L</a>                 311 src/lua/lstate.cpp   g-&gt;seed = makeseed(L);</span>
<span class='curline'><a href='../S/1190.html#L332'>L</a>                 332 src/lua/lstate.cpp   if (luaD_rawrunprotected(L, f_luaopen, NULL) != LUA_OK) {</span>
<span class='curline'><a href='../S/1190.html#L334'>L</a>                 334 src/lua/lstate.cpp     close_state(L);</span>
<span class='curline'><a href='../S/1190.html#L335'>L</a>                 335 src/lua/lstate.cpp     L = NULL;</span>
<span class='curline'><a href='../S/1190.html#L337'>L</a>                 337 src/lua/lstate.cpp   return L;</span>
<span class='curline'><a href='../S/1190.html#L341'>L</a>                 341 src/lua/lstate.cpp LUA_API void lua_close (lua_State *L) {</span>
<span class='curline'><a href='../S/1190.html#L342'>L</a>                 342 src/lua/lstate.cpp   L = G(L)-&gt;mainthread;  /* only the main thread can be closed */</span>
<span class='curline'><a href='../S/1190.html#L343'>L</a>                 343 src/lua/lstate.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1190.html#L344'>L</a>                 344 src/lua/lstate.cpp   close_state(L);</span>
<span class='curline'><a href='../S/1184.html#L187'>L</a>                 187 src/lua/lstate.h #define G(L)	(L-&gt;l_G)</span>
<span class='curline'><a href='../S/1184.html#L228'>L</a>                 228 src/lua/lstate.h LUAI_FUNC void luaE_freethread (lua_State *L, lua_State *L1);</span>
<span class='curline'><a href='../S/1184.html#L229'>L</a>                 229 src/lua/lstate.h LUAI_FUNC CallInfo *luaE_extendCI (lua_State *L);</span>
<span class='curline'><a href='../S/1184.html#L230'>L</a>                 230 src/lua/lstate.h LUAI_FUNC void luaE_freeCI (lua_State *L);</span>
<span class='curline'><a href='../S/1184.html#L231'>L</a>                 231 src/lua/lstate.h LUAI_FUNC void luaE_shrinkCI (lua_State *L);</span>
<span class='curline'><a href='../S/1186.html#L71'>L</a>                  71 src/lua/lstring.cpp void luaS_resize (lua_State *L, int newsize) {</span>
<span class='curline'><a href='../S/1186.html#L73'>L</a>                  73 src/lua/lstring.cpp   stringtable *tb = &amp;G(L)-&gt;strt;</span>
<span class='curline'><a href='../S/1186.html#L75'>L</a>                  75 src/lua/lstring.cpp     luaM_reallocvector(L, tb-&gt;hash, tb-&gt;size, newsize, TString *);</span>
<span class='curline'><a href='../S/1186.html#L93'>L</a>                  93 src/lua/lstring.cpp     luaM_reallocvector(L, tb-&gt;hash, tb-&gt;size, newsize, TString *);</span>
<span class='curline'><a href='../S/1186.html#L116'>L</a>                 116 src/lua/lstring.cpp void luaS_init (lua_State *L) {</span>
<span class='curline'><a href='../S/1186.html#L117'>L</a>                 117 src/lua/lstring.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1186.html#L119'>L</a>                 119 src/lua/lstring.cpp   luaS_resize(L, MINSTRTABSIZE);  /* initial size of string table */</span>
<span class='curline'><a href='../S/1186.html#L121'>L</a>                 121 src/lua/lstring.cpp   g-&gt;memerrmsg = luaS_newliteral(L, MEMERRMSG);</span>
<span class='curline'><a href='../S/1186.html#L122'>L</a>                 122 src/lua/lstring.cpp   luaC_fix(L, obj2gco(g-&gt;memerrmsg));  /* it should never be collected */</span>
<span class='curline'><a href='../S/1186.html#L133'>L</a>                 133 src/lua/lstring.cpp static TString *createstrobj (lua_State *L, size_t l, int tag, unsigned int h) {</span>
<span class='curline'><a href='../S/1186.html#L138'>L</a>                 138 src/lua/lstring.cpp   o = luaC_newobj(L, tag, totalsize);</span>
<span class='curline'><a href='../S/1186.html#L147'>L</a>                 147 src/lua/lstring.cpp TString *luaS_createlngstrobj (lua_State *L, size_t l) {</span>
<span class='curline'><a href='../S/1186.html#L148'>L</a>                 148 src/lua/lstring.cpp   TString *ts = createstrobj(L, l, LUA_TLNGSTR, G(L)-&gt;seed);</span>
<span class='curline'><a href='../S/1186.html#L154'>L</a>                 154 src/lua/lstring.cpp void luaS_remove (lua_State *L, TString *ts) {</span>
<span class='curline'><a href='../S/1186.html#L155'>L</a>                 155 src/lua/lstring.cpp   stringtable *tb = &amp;G(L)-&gt;strt;</span>
<span class='curline'><a href='../S/1186.html#L167'>L</a>                 167 src/lua/lstring.cpp static TString *internshrstr (lua_State *L, const char *str, size_t l) {</span>
<span class='curline'><a href='../S/1186.html#L169'>L</a>                 169 src/lua/lstring.cpp   global_State *g = G(L);</span>
<span class='curline'><a href='../S/1186.html#L183'>L</a>                 183 src/lua/lstring.cpp     luaS_resize(L, g-&gt;strt.size * 2);</span>
<span class='curline'><a href='../S/1186.html#L186'>L</a>                 186 src/lua/lstring.cpp   ts = createstrobj(L, l, LUA_TSHRSTR, h);</span>
<span class='curline'><a href='../S/1186.html#L199'>L</a>                 199 src/lua/lstring.cpp TString *luaS_newlstr (lua_State *L, const char *str, size_t l) {</span>
<span class='curline'><a href='../S/1186.html#L201'>L</a>                 201 src/lua/lstring.cpp     return internshrstr(L, str, l);</span>
<span class='curline'><a href='../S/1186.html#L205'>L</a>                 205 src/lua/lstring.cpp       luaM_toobig(L);</span>
<span class='curline'><a href='../S/1186.html#L206'>L</a>                 206 src/lua/lstring.cpp     ts = luaS_createlngstrobj(L, l);</span>
<span class='curline'><a href='../S/1186.html#L219'>L</a>                 219 src/lua/lstring.cpp TString *luaS_new (lua_State *L, const char *str) {</span>
<span class='curline'><a href='../S/1186.html#L222'>L</a>                 222 src/lua/lstring.cpp   TString **p = G(L)-&gt;strcache[i];</span>
<span class='curline'><a href='../S/1186.html#L231'>L</a>                 231 src/lua/lstring.cpp   p[0] = luaS_newlstr(L, str, strlen(str));</span>
<span class='curline'><a href='../S/1186.html#L236'>L</a>                 236 src/lua/lstring.cpp Udata *luaS_newudata (lua_State *L, size_t s) {</span>
<span class='curline'><a href='../S/1186.html#L240'>L</a>                 240 src/lua/lstring.cpp     luaM_toobig(L);</span>
<span class='curline'><a href='../S/1186.html#L241'>L</a>                 241 src/lua/lstring.cpp   o = luaC_newobj(L, LUA_TUSERDATA, sizeludata(s));</span>
<span class='curline'><a href='../S/1186.html#L245'>L</a>                 245 src/lua/lstring.cpp   setuservalue(L, u, luaO_nilobject);</span>
<span class='curline'><a href='../S/1219.html#L20'>L</a>                  20 src/lua/lstring.h #define luaS_newliteral(L, s)	(luaS_newlstr(L, "" s, \</span>
<span class='curline'><a href='../S/1219.html#L39'>L</a>                  39 src/lua/lstring.h LUAI_FUNC void luaS_resize (lua_State *L, int newsize);</span>
<span class='curline'><a href='../S/1219.html#L41'>L</a>                  41 src/lua/lstring.h LUAI_FUNC void luaS_init (lua_State *L);</span>
<span class='curline'><a href='../S/1219.html#L42'>L</a>                  42 src/lua/lstring.h LUAI_FUNC void luaS_remove (lua_State *L, TString *ts);</span>
<span class='curline'><a href='../S/1219.html#L43'>L</a>                  43 src/lua/lstring.h LUAI_FUNC Udata *luaS_newudata (lua_State *L, size_t s);</span>
<span class='curline'><a href='../S/1219.html#L44'>L</a>                  44 src/lua/lstring.h LUAI_FUNC TString *luaS_newlstr (lua_State *L, const char *str, size_t l);</span>
<span class='curline'><a href='../S/1219.html#L45'>L</a>                  45 src/lua/lstring.h LUAI_FUNC TString *luaS_new (lua_State *L, const char *str);</span>
<span class='curline'><a href='../S/1219.html#L46'>L</a>                  46 src/lua/lstring.h LUAI_FUNC TString *luaS_createlngstrobj (lua_State *L, size_t l);</span>
<span class='curline'><a href='../S/1225.html#L54'>L</a>                  54 src/lua/lstrlib.cpp static int str_len (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L56'>L</a>                  56 src/lua/lstrlib.cpp   luaL_checklstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/1225.html#L57'>L</a>                  57 src/lua/lstrlib.cpp   lua_pushinteger(L, (lua_Integer)l);</span>
<span class='curline'><a href='../S/1225.html#L70'>L</a>                  70 src/lua/lstrlib.cpp static int str_sub (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L72'>L</a>                  72 src/lua/lstrlib.cpp   const char *s = luaL_checklstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/1225.html#L73'>L</a>                  73 src/lua/lstrlib.cpp   lua_Integer start = posrelat(luaL_checkinteger(L, 2), l);</span>
<span class='curline'><a href='../S/1225.html#L74'>L</a>                  74 src/lua/lstrlib.cpp   lua_Integer end = posrelat(luaL_optinteger(L, 3, -1), l);</span>
<span class='curline'><a href='../S/1225.html#L78'>L</a>                  78 src/lua/lstrlib.cpp     lua_pushlstring(L, s + start - 1, (size_t)(end - start) + 1);</span>
<span class='curline'><a href='../S/1225.html#L79'>L</a>                  79 src/lua/lstrlib.cpp   else lua_pushliteral(L, "");</span>
<span class='curline'><a href='../S/1225.html#L84'>L</a>                  84 src/lua/lstrlib.cpp static int str_reverse (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L87'>L</a>                  87 src/lua/lstrlib.cpp   const char *s = luaL_checklstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/1225.html#L88'>L</a>                  88 src/lua/lstrlib.cpp   char *p = luaL_buffinitsize(L, &amp;b, l);</span>
<span class='curline'><a href='../S/1225.html#L96'>L</a>                  96 src/lua/lstrlib.cpp static int str_lower (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L100'>L</a>                 100 src/lua/lstrlib.cpp   const char *s = luaL_checklstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/1225.html#L101'>L</a>                 101 src/lua/lstrlib.cpp   char *p = luaL_buffinitsize(L, &amp;b, l);</span>
<span class='curline'><a href='../S/1225.html#L109'>L</a>                 109 src/lua/lstrlib.cpp static int str_upper (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L113'>L</a>                 113 src/lua/lstrlib.cpp   const char *s = luaL_checklstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/1225.html#L114'>L</a>                 114 src/lua/lstrlib.cpp   char *p = luaL_buffinitsize(L, &amp;b, l);</span>
<span class='curline'><a href='../S/1225.html#L122'>L</a>                 122 src/lua/lstrlib.cpp static int str_rep (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L124'>L</a>                 124 src/lua/lstrlib.cpp   const char *s = luaL_checklstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/1225.html#L125'>L</a>                 125 src/lua/lstrlib.cpp   lua_Integer n = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/1225.html#L126'>L</a>                 126 src/lua/lstrlib.cpp   const char *sep = luaL_optlstring(L, 3, "", &amp;lsep);</span>
<span class='curline'><a href='../S/1225.html#L127'>L</a>                 127 src/lua/lstrlib.cpp   if (n &lt;= 0) lua_pushliteral(L, "");</span>
<span class='curline'><a href='../S/1225.html#L129'>L</a>                 129 src/lua/lstrlib.cpp     return luaL_error(L, "resulting string too large");</span>
<span class='curline'><a href='../S/1225.html#L133'>L</a>                 133 src/lua/lstrlib.cpp     char *p = luaL_buffinitsize(L, &amp;b, totallen);</span>
<span class='curline'><a href='../S/1225.html#L148'>L</a>                 148 src/lua/lstrlib.cpp static int str_byte (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L150'>L</a>                 150 src/lua/lstrlib.cpp   const char *s = luaL_checklstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/1225.html#L151'>L</a>                 151 src/lua/lstrlib.cpp   lua_Integer posi = posrelat(luaL_optinteger(L, 2, 1), l);</span>
<span class='curline'><a href='../S/1225.html#L152'>L</a>                 152 src/lua/lstrlib.cpp   lua_Integer pose = posrelat(luaL_optinteger(L, 3, posi), l);</span>
<span class='curline'><a href='../S/1225.html#L158'>L</a>                 158 src/lua/lstrlib.cpp     return luaL_error(L, "string slice too long");</span>
<span class='curline'><a href='../S/1225.html#L160'>L</a>                 160 src/lua/lstrlib.cpp   luaL_checkstack(L, n, "string slice too long");</span>
<span class='curline'><a href='../S/1225.html#L162'>L</a>                 162 src/lua/lstrlib.cpp     lua_pushinteger(L, uchar(s[posi+i-1]));</span>
<span class='curline'><a href='../S/1225.html#L167'>L</a>                 167 src/lua/lstrlib.cpp static int str_char (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L168'>L</a>                 168 src/lua/lstrlib.cpp   int n = lua_gettop(L);  /* number of arguments */</span>
<span class='curline'><a href='../S/1225.html#L171'>L</a>                 171 src/lua/lstrlib.cpp   char *p = luaL_buffinitsize(L, &amp;b, n);</span>
<span class='curline'><a href='../S/1225.html#L173'>L</a>                 173 src/lua/lstrlib.cpp     lua_Integer c = luaL_checkinteger(L, i);</span>
<span class='curline'><a href='../S/1225.html#L174'>L</a>                 174 src/lua/lstrlib.cpp     luaL_argcheck(L, uchar(c) == c, i, "value out of range");</span>
<span class='curline'><a href='../S/1225.html#L182'>L</a>                 182 src/lua/lstrlib.cpp static int writer (lua_State *L, const void *b, size_t size, void *B) {</span>
<span class='curline'><a href='../S/1225.html#L183'>L</a>                 183 src/lua/lstrlib.cpp   (void)L;</span>
<span class='curline'><a href='../S/1225.html#L189'>L</a>                 189 src/lua/lstrlib.cpp static int str_dump (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L191'>L</a>                 191 src/lua/lstrlib.cpp   int strip = lua_toboolean(L, 2);</span>
<span class='curline'><a href='../S/1225.html#L192'>L</a>                 192 src/lua/lstrlib.cpp   luaL_checktype(L, 1, LUA_TFUNCTION);</span>
<span class='curline'><a href='../S/1225.html#L193'>L</a>                 193 src/lua/lstrlib.cpp   lua_settop(L, 1);</span>
<span class='curline'><a href='../S/1225.html#L194'>L</a>                 194 src/lua/lstrlib.cpp   luaL_buffinit(L,&amp;b);</span>
<span class='curline'><a href='../S/1225.html#L195'>L</a>                 195 src/lua/lstrlib.cpp   if (lua_dump(L, writer, &amp;b, strip) != 0)</span>
<span class='curline'><a href='../S/1225.html#L196'>L</a>                 196 src/lua/lstrlib.cpp     return luaL_error(L, "unable to dump given function");</span>
<span class='curline'><a href='../S/1225.html#L218'>L</a>                 218 src/lua/lstrlib.cpp   lua_State *L;</span>
<span class='curline'><a href='../S/1225.html#L245'>L</a>                 245 src/lua/lstrlib.cpp     return luaL_error(ms-&gt;L, "invalid capture index %%%d", l + 1);</span>
<span class='curline'><a href='../S/1225.html#L254'>L</a>                 254 src/lua/lstrlib.cpp   return luaL_error(ms-&gt;L, "invalid pattern capture");</span>
<span class='curline'><a href='../S/1225.html#L262'>L</a>                 262 src/lua/lstrlib.cpp         luaL_error(ms-&gt;L, "malformed pattern (ends with '%%')");</span>
<span class='curline'><a href='../S/1225.html#L269'>L</a>                 269 src/lua/lstrlib.cpp           luaL_error(ms-&gt;L, "malformed pattern (missing ']')");</span>
<span class='curline'><a href='../S/1225.html#L344'>L</a>                 344 src/lua/lstrlib.cpp     luaL_error(ms-&gt;L, "malformed pattern (missing arguments to '%%b')");</span>
<span class='curline'><a href='../S/1225.html#L393'>L</a>                 393 src/lua/lstrlib.cpp   if (level &gt;= LUA_MAXCAPTURES) luaL_error(ms-&gt;L, "too many captures");</span>
<span class='curline'><a href='../S/1225.html#L427'>L</a>                 427 src/lua/lstrlib.cpp     luaL_error(ms-&gt;L, "pattern too complex");</span>
<span class='curline'><a href='../S/1225.html#L461'>L</a>                 461 src/lua/lstrlib.cpp               luaL_error(ms-&gt;L, "missing '[' after '%%f' in pattern");</span>
<span class='curline'><a href='../S/1225.html#L554'>L</a>                 554 src/lua/lstrlib.cpp       lua_pushlstring(ms-&gt;L, s, e - s);  /* add whole match */</span>
<span class='curline'><a href='../S/1225.html#L556'>L</a>                 556 src/lua/lstrlib.cpp       luaL_error(ms-&gt;L, "invalid capture index %%%d", i + 1);</span>
<span class='curline'><a href='../S/1225.html#L560'>L</a>                 560 src/lua/lstrlib.cpp     if (l == CAP_UNFINISHED) luaL_error(ms-&gt;L, "unfinished capture");</span>
<span class='curline'><a href='../S/1225.html#L562'>L</a>                 562 src/lua/lstrlib.cpp       lua_pushinteger(ms-&gt;L, (ms-&gt;capture[i].init - ms-&gt;src_init) + 1);</span>
<span class='curline'><a href='../S/1225.html#L564'>L</a>                 564 src/lua/lstrlib.cpp       lua_pushlstring(ms-&gt;L, ms-&gt;capture[i].init, l);</span>
<span class='curline'><a href='../S/1225.html#L572'>L</a>                 572 src/lua/lstrlib.cpp   luaL_checkstack(ms-&gt;L, nlevels, "too many captures");</span>
<span class='curline'><a href='../S/1225.html#L591'>L</a>                 591 src/lua/lstrlib.cpp static void prepstate (MatchState *ms, lua_State *L,</span>
<span class='curline'><a href='../S/1225.html#L593'>L</a>                 593 src/lua/lstrlib.cpp   ms-&gt;L = L;</span>
<span class='curline'><a href='../S/1225.html#L607'>L</a>                 607 src/lua/lstrlib.cpp static int str_find_aux (lua_State *L, int find) {</span>
<span class='curline'><a href='../S/1225.html#L609'>L</a>                 609 src/lua/lstrlib.cpp   const char *s = luaL_checklstring(L, 1, &amp;ls);</span>
<span class='curline'><a href='../S/1225.html#L610'>L</a>                 610 src/lua/lstrlib.cpp   const char *p = luaL_checklstring(L, 2, &amp;lp);</span>
<span class='curline'><a href='../S/1225.html#L611'>L</a>                 611 src/lua/lstrlib.cpp   lua_Integer init = posrelat(luaL_optinteger(L, 3, 1), ls);</span>
<span class='curline'><a href='../S/1225.html#L614'>L</a>                 614 src/lua/lstrlib.cpp     lua_pushnil(L);  /* cannot find anything */</span>
<span class='curline'><a href='../S/1225.html#L618'>L</a>                 618 src/lua/lstrlib.cpp   if (find &amp;&amp; (lua_toboolean(L, 4) || nospecials(p, lp))) {</span>
<span class='curline'><a href='../S/1225.html#L622'>L</a>                 622 src/lua/lstrlib.cpp       lua_pushinteger(L, (s2 - s) + 1);</span>
<span class='curline'><a href='../S/1225.html#L623'>L</a>                 623 src/lua/lstrlib.cpp       lua_pushinteger(L, (s2 - s) + lp);</span>
<span class='curline'><a href='../S/1225.html#L634'>L</a>                 634 src/lua/lstrlib.cpp     prepstate(&amp;ms, L, s, ls, p, lp);</span>
<span class='curline'><a href='../S/1225.html#L640'>L</a>                 640 src/lua/lstrlib.cpp           lua_pushinteger(L, (s1 - s) + 1);  /* start */</span>
<span class='curline'><a href='../S/1225.html#L641'>L</a>                 641 src/lua/lstrlib.cpp           lua_pushinteger(L, res - s);   /* end */</span>
<span class='curline'><a href='../S/1225.html#L649'>L</a>                 649 src/lua/lstrlib.cpp   lua_pushnil(L);  /* not found */</span>
<span class='curline'><a href='../S/1225.html#L654'>L</a>                 654 src/lua/lstrlib.cpp static int str_find (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L655'>L</a>                 655 src/lua/lstrlib.cpp   return str_find_aux(L, 1);</span>
<span class='curline'><a href='../S/1225.html#L659'>L</a>                 659 src/lua/lstrlib.cpp static int str_match (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L660'>L</a>                 660 src/lua/lstrlib.cpp   return str_find_aux(L, 0);</span>
<span class='curline'><a href='../S/1225.html#L673'>L</a>                 673 src/lua/lstrlib.cpp static int gmatch_aux (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L674'>L</a>                 674 src/lua/lstrlib.cpp   GMatchState *gm = (GMatchState *)lua_touserdata(L, lua_upvalueindex(3));</span>
<span class='curline'><a href='../S/1225.html#L676'>L</a>                 676 src/lua/lstrlib.cpp   gm-&gt;ms.L = L;</span>
<span class='curline'><a href='../S/1225.html#L689'>L</a>                 689 src/lua/lstrlib.cpp static int gmatch (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L691'>L</a>                 691 src/lua/lstrlib.cpp   const char *s = luaL_checklstring(L, 1, &amp;ls);</span>
<span class='curline'><a href='../S/1225.html#L692'>L</a>                 692 src/lua/lstrlib.cpp   const char *p = luaL_checklstring(L, 2, &amp;lp);</span>
<span class='curline'><a href='../S/1225.html#L694'>L</a>                 694 src/lua/lstrlib.cpp   lua_settop(L, 2);  /* keep them on closure to avoid being collected */</span>
<span class='curline'><a href='../S/1225.html#L695'>L</a>                 695 src/lua/lstrlib.cpp   gm = (GMatchState *)lua_newuserdata(L, sizeof(GMatchState));</span>
<span class='curline'><a href='../S/1225.html#L696'>L</a>                 696 src/lua/lstrlib.cpp   prepstate(&amp;gm-&gt;ms, L, s, ls, p, lp);</span>
<span class='curline'><a href='../S/1225.html#L698'>L</a>                 698 src/lua/lstrlib.cpp   lua_pushcclosure(L, gmatch_aux, 3);</span>
<span class='curline'><a href='../S/1225.html#L706'>L</a>                 706 src/lua/lstrlib.cpp   lua_State *L = ms-&gt;L;</span>
<span class='curline'><a href='../S/1225.html#L707'>L</a>                 707 src/lua/lstrlib.cpp   const char *news = lua_tolstring(L, 3, &amp;l);</span>
<span class='curline'><a href='../S/1225.html#L715'>L</a>                 715 src/lua/lstrlib.cpp           luaL_error(L, "invalid use of '%c' in replacement string", L_ESC);</span>
<span class='curline'><a href='../S/1225.html#L722'>L</a>                 722 src/lua/lstrlib.cpp         luaL_tolstring(L, -1, NULL);  /* if number, convert it to string */</span>
<span class='curline'><a href='../S/1225.html#L723'>L</a>                 723 src/lua/lstrlib.cpp         lua_remove(L, -2);  /* remove original value */</span>
<span class='curline'><a href='../S/1225.html#L733'>L</a>                 733 src/lua/lstrlib.cpp   lua_State *L = ms-&gt;L;</span>
<span class='curline'><a href='../S/1225.html#L737'>L</a>                 737 src/lua/lstrlib.cpp       lua_pushvalue(L, 3);</span>
<span class='curline'><a href='../S/1225.html#L739'>L</a>                 739 src/lua/lstrlib.cpp       lua_call(L, n, 1);</span>
<span class='curline'><a href='../S/1225.html#L744'>L</a>                 744 src/lua/lstrlib.cpp       lua_gettable(L, 3);</span>
<span class='curline'><a href='../S/1225.html#L752'>L</a>                 752 src/lua/lstrlib.cpp   if (!lua_toboolean(L, -1)) {  /* nil or false? */</span>
<span class='curline'><a href='../S/1225.html#L753'>L</a>                 753 src/lua/lstrlib.cpp     lua_pop(L, 1);</span>
<span class='curline'><a href='../S/1225.html#L754'>L</a>                 754 src/lua/lstrlib.cpp     lua_pushlstring(L, s, e - s);  /* keep original text */</span>
<span class='curline'><a href='../S/1225.html#L756'>L</a>                 756 src/lua/lstrlib.cpp   else if (!lua_isstring(L, -1))</span>
<span class='curline'><a href='../S/1225.html#L757'>L</a>                 757 src/lua/lstrlib.cpp     luaL_error(L, "invalid replacement value (a %s)", luaL_typename(L, -1));</span>
<span class='curline'><a href='../S/1225.html#L762'>L</a>                 762 src/lua/lstrlib.cpp static int str_gsub (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L764'>L</a>                 764 src/lua/lstrlib.cpp   const char *src = luaL_checklstring(L, 1, &amp;srcl);  /* subject */</span>
<span class='curline'><a href='../S/1225.html#L765'>L</a>                 765 src/lua/lstrlib.cpp   const char *p = luaL_checklstring(L, 2, &amp;lp);  /* pattern */</span>
<span class='curline'><a href='../S/1225.html#L767'>L</a>                 767 src/lua/lstrlib.cpp   int tr = lua_type(L, 3);  /* replacement type */</span>
<span class='curline'><a href='../S/1225.html#L768'>L</a>                 768 src/lua/lstrlib.cpp   lua_Integer max_s = luaL_optinteger(L, 4, srcl + 1);  /* max replacements */</span>
<span class='curline'><a href='../S/1225.html#L773'>L</a>                 773 src/lua/lstrlib.cpp   luaL_argcheck(L, tr == LUA_TNUMBER || tr == LUA_TSTRING ||</span>
<span class='curline'><a href='../S/1225.html#L776'>L</a>                 776 src/lua/lstrlib.cpp   luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/1225.html#L780'>L</a>                 780 src/lua/lstrlib.cpp   prepstate(&amp;ms, L, src, srcl, p, lp);</span>
<span class='curline'><a href='../S/1225.html#L796'>L</a>                 796 src/lua/lstrlib.cpp   lua_pushinteger(L, n);  /* number of substitutions */</span>
<span class='curline'><a href='../S/1225.html#L873'>L</a>                 873 src/lua/lstrlib.cpp static int lua_number2strx (lua_State *L, char *buff, int sz,</span>
<span class='curline'><a href='../S/1225.html#L882'>L</a>                 882 src/lua/lstrlib.cpp     luaL_error(L, "modifiers for format '%%a'/'%%A' not implemented");</span>
<span class='curline'><a href='../S/1225.html#L943'>L</a>                 943 src/lua/lstrlib.cpp static void addliteral (lua_State *L, luaL_Buffer *b, int arg) {</span>
<span class='curline'><a href='../S/1225.html#L944'>L</a>                 944 src/lua/lstrlib.cpp   switch (lua_type(L, arg)) {</span>
<span class='curline'><a href='../S/1225.html#L947'>L</a>                 947 src/lua/lstrlib.cpp       const char *s = lua_tolstring(L, arg, &amp;len);</span>
<span class='curline'><a href='../S/1225.html#L954'>L</a>                 954 src/lua/lstrlib.cpp       if (!lua_isinteger(L, arg)) {  /* float? */</span>
<span class='curline'><a href='../S/1225.html#L955'>L</a>                 955 src/lua/lstrlib.cpp         lua_Number n = lua_tonumber(L, arg);  /* write as hexa ('%a') */</span>
<span class='curline'><a href='../S/1225.html#L956'>L</a>                 956 src/lua/lstrlib.cpp         nb = lua_number2strx(L, buff, MAX_ITEM, "%" LUA_NUMBER_FRMLEN "a", n);</span>
<span class='curline'><a href='../S/1225.html#L960'>L</a>                 960 src/lua/lstrlib.cpp         lua_Integer n = lua_tointeger(L, arg);</span>
<span class='curline'><a href='../S/1225.html#L970'>L</a>                 970 src/lua/lstrlib.cpp       luaL_tolstring(L, arg, NULL);</span>
<span class='curline'><a href='../S/1225.html#L975'>L</a>                 975 src/lua/lstrlib.cpp       luaL_argerror(L, arg, "value has no literal form");</span>
<span class='curline'><a href='../S/1225.html#L981'>L</a>                 981 src/lua/lstrlib.cpp static const char *scanformat (lua_State *L, const char *strfrmt, char *form) {</span>
<span class='curline'><a href='../S/1225.html#L985'>L</a>                 985 src/lua/lstrlib.cpp     luaL_error(L, "invalid format (repeated flags)");</span>
<span class='curline'><a href='../S/1225.html#L994'>L</a>                 994 src/lua/lstrlib.cpp     luaL_error(L, "invalid format (width or precision too long)");</span>
<span class='curline'><a href='../S/1225.html#L1016'>L</a>                1016 src/lua/lstrlib.cpp static int str_format (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L1017'>L</a>                1017 src/lua/lstrlib.cpp   int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/1225.html#L1020'>L</a>                1020 src/lua/lstrlib.cpp   const char *strfrmt = luaL_checklstring(L, arg, &amp;sfl);</span>
<span class='curline'><a href='../S/1225.html#L1023'>L</a>                1023 src/lua/lstrlib.cpp   luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/1225.html#L1034'>L</a>                1034 src/lua/lstrlib.cpp         luaL_argerror(L, arg, "no value");</span>
<span class='curline'><a href='../S/1225.html#L1035'>L</a>                1035 src/lua/lstrlib.cpp       strfrmt = scanformat(L, strfrmt, form);</span>
<span class='curline'><a href='../S/1225.html#L1038'>L</a>                1038 src/lua/lstrlib.cpp           nb = l_sprintf(buff, MAX_ITEM, form, (int)luaL_checkinteger(L, arg));</span>
<span class='curline'><a href='../S/1225.html#L1043'>L</a>                1043 src/lua/lstrlib.cpp           lua_Integer n = luaL_checkinteger(L, arg);</span>
<span class='curline'><a href='../S/1225.html#L1050'>L</a>                1050 src/lua/lstrlib.cpp           nb = lua_number2strx(L, buff, MAX_ITEM, form,</span>
<span class='curline'><a href='../S/1225.html#L1051'>L</a>                1051 src/lua/lstrlib.cpp                                   luaL_checknumber(L, arg));</span>
<span class='curline'><a href='../S/1225.html#L1055'>L</a>                1055 src/lua/lstrlib.cpp           lua_Number n = luaL_checknumber(L, arg);</span>
<span class='curline'><a href='../S/1225.html#L1061'>L</a>                1061 src/lua/lstrlib.cpp           addliteral(L, &amp;b, arg);</span>
<span class='curline'><a href='../S/1225.html#L1066'>L</a>                1066 src/lua/lstrlib.cpp           const char *s = luaL_tolstring(L, arg, &amp;l);</span>
<span class='curline'><a href='../S/1225.html#L1070'>L</a>                1070 src/lua/lstrlib.cpp             luaL_argcheck(L, l == strlen(s), arg, "string contains zeros");</span>
<span class='curline'><a href='../S/1225.html#L1077'>L</a>                1077 src/lua/lstrlib.cpp               lua_pop(L, 1);  /* remove result from 'luaL_tolstring' */</span>
<span class='curline'><a href='../S/1225.html#L1083'>L</a>                1083 src/lua/lstrlib.cpp           return luaL_error(L, "invalid option '%%%c' to 'format'",</span>
<span class='curline'><a href='../S/1225.html#L1154'>L</a>                1154 src/lua/lstrlib.cpp   lua_State *L;</span>
<span class='curline'><a href='../S/1225.html#L1202'>L</a>                1202 src/lua/lstrlib.cpp     luaL_error(h-&gt;L, "integral size (%d) out of limits [1,%d]",</span>
<span class='curline'><a href='../S/1225.html#L1211'>L</a>                1211 src/lua/lstrlib.cpp static void initheader (lua_State *L, Header *h) {</span>
<span class='curline'><a href='../S/1225.html#L1212'>L</a>                1212 src/lua/lstrlib.cpp   h-&gt;L = L;</span>
<span class='curline'><a href='../S/1225.html#L1243'>L</a>                1243 src/lua/lstrlib.cpp         luaL_error(h-&gt;L, "missing size for format option 'c'");</span>
<span class='curline'><a href='../S/1225.html#L1253'>L</a>                1253 src/lua/lstrlib.cpp     default: luaL_error(h-&gt;L, "invalid format option '%c'", opt);</span>
<span class='curline'><a href='../S/1225.html#L1274'>L</a>                1274 src/lua/lstrlib.cpp       luaL_argerror(h-&gt;L, 1, "invalid next option for option 'X'");</span>
<span class='curline'><a href='../S/1225.html#L1282'>L</a>                1282 src/lua/lstrlib.cpp       luaL_argerror(h-&gt;L, 1, "format asks for alignment not power of 2");</span>
<span class='curline'><a href='../S/1225.html#L1330'>L</a>                1330 src/lua/lstrlib.cpp static int str_pack (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L1333'>L</a>                1333 src/lua/lstrlib.cpp   const char *fmt = luaL_checkstring(L, 1);  /* format string */</span>
<span class='curline'><a href='../S/1225.html#L1336'>L</a>                1336 src/lua/lstrlib.cpp   initheader(L, &amp;h);</span>
<span class='curline'><a href='../S/1225.html#L1337'>L</a>                1337 src/lua/lstrlib.cpp   lua_pushnil(L);  /* mark to separate arguments from string buffer */</span>
<span class='curline'><a href='../S/1225.html#L1338'>L</a>                1338 src/lua/lstrlib.cpp   luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/1225.html#L1348'>L</a>                1348 src/lua/lstrlib.cpp         lua_Integer n = luaL_checkinteger(L, arg);</span>
<span class='curline'><a href='../S/1225.html#L1351'>L</a>                1351 src/lua/lstrlib.cpp           luaL_argcheck(L, -lim &lt;= n &amp;&amp; n &lt; lim, arg, "integer overflow");</span>
<span class='curline'><a href='../S/1225.html#L1357'>L</a>                1357 src/lua/lstrlib.cpp         lua_Integer n = luaL_checkinteger(L, arg);</span>
<span class='curline'><a href='../S/1225.html#L1359'>L</a>                1359 src/lua/lstrlib.cpp           luaL_argcheck(L, (lua_Unsigned)n &lt; ((lua_Unsigned)1 &lt;&lt; (size * NB)),</span>
<span class='curline'><a href='../S/1225.html#L1367'>L</a>                1367 src/lua/lstrlib.cpp         lua_Number n = luaL_checknumber(L, arg);  /* get argument */</span>
<span class='curline'><a href='../S/1225.html#L1378'>L</a>                1378 src/lua/lstrlib.cpp         const char *s = luaL_checklstring(L, arg, &amp;len);</span>
<span class='curline'><a href='../S/1225.html#L1379'>L</a>                1379 src/lua/lstrlib.cpp         luaL_argcheck(L, len &lt;= (size_t)size, arg,</span>
<span class='curline'><a href='../S/1225.html#L1388'>L</a>                1388 src/lua/lstrlib.cpp         const char *s = luaL_checklstring(L, arg, &amp;len);</span>
<span class='curline'><a href='../S/1225.html#L1389'>L</a>                1389 src/lua/lstrlib.cpp         luaL_argcheck(L, size &gt;= (int)sizeof(size_t) ||</span>
<span class='curline'><a href='../S/1225.html#L1399'>L</a>                1399 src/lua/lstrlib.cpp         const char *s = luaL_checklstring(L, arg, &amp;len);</span>
<span class='curline'><a href='../S/1225.html#L1400'>L</a>                1400 src/lua/lstrlib.cpp         luaL_argcheck(L, strlen(s) == len, arg, "string contains zeros");</span>
<span class='curline'><a href='../S/1225.html#L1417'>L</a>                1417 src/lua/lstrlib.cpp static int str_packsize (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L1419'>L</a>                1419 src/lua/lstrlib.cpp   const char *fmt = luaL_checkstring(L, 1);  /* format string */</span>
<span class='curline'><a href='../S/1225.html#L1421'>L</a>                1421 src/lua/lstrlib.cpp   initheader(L, &amp;h);</span>
<span class='curline'><a href='../S/1225.html#L1426'>L</a>                1426 src/lua/lstrlib.cpp     luaL_argcheck(L, totalsize &lt;= MAXSIZE - size, 1,</span>
<span class='curline'><a href='../S/1225.html#L1432'>L</a>                1432 src/lua/lstrlib.cpp         luaL_argerror(L, 1, "variable-length format");</span>
<span class='curline'><a href='../S/1225.html#L1437'>L</a>                1437 src/lua/lstrlib.cpp   lua_pushinteger(L, (lua_Integer)totalsize);</span>
<span class='curline'><a href='../S/1225.html#L1450'>L</a>                1450 src/lua/lstrlib.cpp static lua_Integer unpackint (lua_State *L, const char *str,</span>
<span class='curline'><a href='../S/1225.html#L1469'>L</a>                1469 src/lua/lstrlib.cpp         luaL_error(L, "%d-byte integer does not fit into Lua Integer", size);</span>
<span class='curline'><a href='../S/1225.html#L1476'>L</a>                1476 src/lua/lstrlib.cpp static int str_unpack (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L1478'>L</a>                1478 src/lua/lstrlib.cpp   const char *fmt = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1225.html#L1480'>L</a>                1480 src/lua/lstrlib.cpp   const char *data = luaL_checklstring(L, 2, &amp;ld);</span>
<span class='curline'><a href='../S/1225.html#L1481'>L</a>                1481 src/lua/lstrlib.cpp   size_t pos = (size_t)posrelat(luaL_optinteger(L, 3, 1), ld) - 1;</span>
<span class='curline'><a href='../S/1225.html#L1483'>L</a>                1483 src/lua/lstrlib.cpp   luaL_argcheck(L, pos &lt;= ld, 3, "initial position out of string");</span>
<span class='curline'><a href='../S/1225.html#L1484'>L</a>                1484 src/lua/lstrlib.cpp   initheader(L, &amp;h);</span>
<span class='curline'><a href='../S/1225.html#L1489'>L</a>                1489 src/lua/lstrlib.cpp       luaL_argerror(L, 2, "data string too short");</span>
<span class='curline'><a href='../S/1225.html#L1492'>L</a>                1492 src/lua/lstrlib.cpp     luaL_checkstack(L, 2, "too many results");</span>
<span class='curline'><a href='../S/1225.html#L1497'>L</a>                1497 src/lua/lstrlib.cpp         lua_Integer res = unpackint(L, data + pos, h.islittle, size,</span>
<span class='curline'><a href='../S/1225.html#L1499'>L</a>                1499 src/lua/lstrlib.cpp         lua_pushinteger(L, res);</span>
<span class='curline'><a href='../S/1225.html#L1509'>L</a>                1509 src/lua/lstrlib.cpp         lua_pushnumber(L, num);</span>
<span class='curline'><a href='../S/1225.html#L1513'>L</a>                1513 src/lua/lstrlib.cpp         lua_pushlstring(L, data + pos, size);</span>
<span class='curline'><a href='../S/1225.html#L1517'>L</a>                1517 src/lua/lstrlib.cpp         size_t len = (size_t)unpackint(L, data + pos, h.islittle, size, 0);</span>
<span class='curline'><a href='../S/1225.html#L1518'>L</a>                1518 src/lua/lstrlib.cpp         luaL_argcheck(L, pos + len + size &lt;= ld, 2, "data string too short");</span>
<span class='curline'><a href='../S/1225.html#L1519'>L</a>                1519 src/lua/lstrlib.cpp         lua_pushlstring(L, data + pos + size, len);</span>
<span class='curline'><a href='../S/1225.html#L1525'>L</a>                1525 src/lua/lstrlib.cpp         lua_pushlstring(L, data + pos, len);</span>
<span class='curline'><a href='../S/1225.html#L1535'>L</a>                1535 src/lua/lstrlib.cpp   lua_pushinteger(L, pos + 1);  /* next position */</span>
<span class='curline'><a href='../S/1225.html#L1564'>L</a>                1564 src/lua/lstrlib.cpp static void createmetatable (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L1565'>L</a>                1565 src/lua/lstrlib.cpp   lua_createtable(L, 0, 1);  /* table to be metatable for strings */</span>
<span class='curline'><a href='../S/1225.html#L1566'>L</a>                1566 src/lua/lstrlib.cpp   lua_pushliteral(L, "");  /* dummy string */</span>
<span class='curline'><a href='../S/1225.html#L1567'>L</a>                1567 src/lua/lstrlib.cpp   lua_pushvalue(L, -2);  /* copy table */</span>
<span class='curline'><a href='../S/1225.html#L1568'>L</a>                1568 src/lua/lstrlib.cpp   lua_setmetatable(L, -2);  /* set table as metatable for strings */</span>
<span class='curline'><a href='../S/1225.html#L1569'>L</a>                1569 src/lua/lstrlib.cpp   lua_pop(L, 1);  /* pop dummy string */</span>
<span class='curline'><a href='../S/1225.html#L1570'>L</a>                1570 src/lua/lstrlib.cpp   lua_pushvalue(L, -2);  /* get string library */</span>
<span class='curline'><a href='../S/1225.html#L1571'>L</a>                1571 src/lua/lstrlib.cpp   lua_setfield(L, -2, "__index");  /* metatable.__index = string */</span>
<span class='curline'><a href='../S/1225.html#L1572'>L</a>                1572 src/lua/lstrlib.cpp   lua_pop(L, 1);  /* pop metatable */</span>
<span class='curline'><a href='../S/1225.html#L1579'>L</a>                1579 src/lua/lstrlib.cpp LUAMOD_API int luaopen_string (lua_State *L) {</span>
<span class='curline'><a href='../S/1225.html#L1580'>L</a>                1580 src/lua/lstrlib.cpp   luaL_newlib(L, strlib);</span>
<span class='curline'><a href='../S/1225.html#L1581'>L</a>                1581 src/lua/lstrlib.cpp   createmetatable(L);</span>
<span class='curline'><a href='../S/1192.html#L159'>L</a>                 159 src/lua/ltable.cpp static unsigned int findindex (lua_State *L, Table *t, StkId key) {</span>
<span class='curline'><a href='../S/1192.html#L179'>L</a>                 179 src/lua/ltable.cpp         luaG_runerror(L, "invalid key to 'next'");  /* key not found */</span>
<span class='curline'><a href='../S/1192.html#L186'>L</a>                 186 src/lua/ltable.cpp int luaH_next (lua_State *L, Table *t, StkId key) {</span>
<span class='curline'><a href='../S/1192.html#L187'>L</a>                 187 src/lua/ltable.cpp   unsigned int i = findindex(L, t, key);  /* find original element */</span>
<span class='curline'><a href='../S/1192.html#L191'>L</a>                 191 src/lua/ltable.cpp       setobj2s(L, key+1, &amp;t-&gt;array[i]);</span>
<span class='curline'><a href='../S/1192.html#L197'>L</a>                 197 src/lua/ltable.cpp       setobj2s(L, key, gkey(gnode(t, i)));</span>
<span class='curline'><a href='../S/1192.html#L198'>L</a>                 198 src/lua/ltable.cpp       setobj2s(L, key+1, gval(gnode(t, i)));</span>
<span class='curline'><a href='../S/1192.html#L299'>L</a>                 299 src/lua/ltable.cpp static void setarrayvector (lua_State *L, Table *t, unsigned int size) {</span>
<span class='curline'><a href='../S/1192.html#L301'>L</a>                 301 src/lua/ltable.cpp   luaM_reallocvector(L, t-&gt;array, t-&gt;sizearray, size, TValue);</span>
<span class='curline'><a href='../S/1192.html#L308'>L</a>                 308 src/lua/ltable.cpp static void setnodevector (lua_State *L, Table *t, unsigned int size) {</span>
<span class='curline'><a href='../S/1192.html#L318'>L</a>                 318 src/lua/ltable.cpp       luaG_runerror(L, "table overflow");</span>
<span class='curline'><a href='../S/1192.html#L320'>L</a>                 320 src/lua/ltable.cpp     t-&gt;node = luaM_newvector(L, size, Node);</span>
<span class='curline'><a href='../S/1192.html#L333'>L</a>                 333 src/lua/ltable.cpp void luaH_resize (lua_State *L, Table *t, unsigned int nasize,</span>
<span class='curline'><a href='../S/1192.html#L341'>L</a>                 341 src/lua/ltable.cpp     setarrayvector(L, t, nasize);</span>
<span class='curline'><a href='../S/1192.html#L343'>L</a>                 343 src/lua/ltable.cpp   setnodevector(L, t, nhsize);</span>
<span class='curline'><a href='../S/1192.html#L349'>L</a>                 349 src/lua/ltable.cpp         luaH_setint(L, t, i + 1, &amp;t-&gt;array[i]);</span>
<span class='curline'><a href='../S/1192.html#L352'>L</a>                 352 src/lua/ltable.cpp     luaM_reallocvector(L, t-&gt;array, oldasize, nasize, TValue);</span>
<span class='curline'><a href='../S/1192.html#L360'>L</a>                 360 src/lua/ltable.cpp       setobjt2t(L, luaH_set(L, t, gkey(old)), gval(old));</span>
<span class='curline'><a href='../S/1192.html#L364'>L</a>                 364 src/lua/ltable.cpp     luaM_freearray(L, nold, cast(size_t, oldhsize)); /* free old hash */</span>
<span class='curline'><a href='../S/1192.html#L368'>L</a>                 368 src/lua/ltable.cpp void luaH_resizearray (lua_State *L, Table *t, unsigned int nasize) {</span>
<span class='curline'><a href='../S/1192.html#L370'>L</a>                 370 src/lua/ltable.cpp   luaH_resize(L, t, nasize, nsize);</span>
<span class='curline'><a href='../S/1192.html#L376'>L</a>                 376 src/lua/ltable.cpp static void rehash (lua_State *L, Table *t, const TValue *ek) {</span>
<span class='curline'><a href='../S/1192.html#L392'>L</a>                 392 src/lua/ltable.cpp   luaH_resize(L, t, asize, totaluse - na);</span>
<span class='curline'><a href='../S/1192.html#L402'>L</a>                 402 src/lua/ltable.cpp Table *luaH_new (lua_State *L) {</span>
<span class='curline'><a href='../S/1192.html#L403'>L</a>                 403 src/lua/ltable.cpp   GCObject *o = luaC_newobj(L, LUA_TTABLE, sizeof(Table));</span>
<span class='curline'><a href='../S/1192.html#L409'>L</a>                 409 src/lua/ltable.cpp   setnodevector(L, t, 0);</span>
<span class='curline'><a href='../S/1192.html#L414'>L</a>                 414 src/lua/ltable.cpp void luaH_free (lua_State *L, Table *t) {</span>
<span class='curline'><a href='../S/1192.html#L416'>L</a>                 416 src/lua/ltable.cpp     luaM_freearray(L, t-&gt;node, cast(size_t, sizenode(t)));</span>
<span class='curline'><a href='../S/1192.html#L417'>L</a>                 417 src/lua/ltable.cpp   luaM_freearray(L, t-&gt;array, t-&gt;sizearray);</span>
<span class='curline'><a href='../S/1192.html#L418'>L</a>                 418 src/lua/ltable.cpp   luaM_free(L, t);</span>
<span class='curline'><a href='../S/1192.html#L442'>L</a>                 442 src/lua/ltable.cpp TValue *luaH_newkey (lua_State *L, Table *t, const TValue *key) {</span>
<span class='curline'><a href='../S/1192.html#L445'>L</a>                 445 src/lua/ltable.cpp   if (ttisnil(key)) luaG_runerror(L, "table index is nil");</span>
<span class='curline'><a href='../S/1192.html#L453'>L</a>                 453 src/lua/ltable.cpp       luaG_runerror(L, "table index is NaN");</span>
<span class='curline'><a href='../S/1192.html#L460'>L</a>                 460 src/lua/ltable.cpp       rehash(L, t, key);  /* grow table */</span>
<span class='curline'><a href='../S/1192.html#L462'>L</a>                 462 src/lua/ltable.cpp       return luaH_set(L, t, key);  /* insert key into grown table */</span>
<span class='curline'><a href='../S/1192.html#L487'>L</a>                 487 src/lua/ltable.cpp   setnodekey(L, &amp;mp-&gt;i_key, key);</span>
<span class='curline'><a href='../S/1192.html#L488'>L</a>                 488 src/lua/ltable.cpp   luaC_barrierback(L, t, key);</span>
<span class='curline'><a href='../S/1192.html#L591'>L</a>                 591 src/lua/ltable.cpp TValue *luaH_set (lua_State *L, Table *t, const TValue *key) {</span>
<span class='curline'><a href='../S/1192.html#L595'>L</a>                 595 src/lua/ltable.cpp   else return luaH_newkey(L, t, key);</span>
<span class='curline'><a href='../S/1192.html#L599'>L</a>                 599 src/lua/ltable.cpp void luaH_setint (lua_State *L, Table *t, lua_Integer key, TValue *value) {</span>
<span class='curline'><a href='../S/1192.html#L607'>L</a>                 607 src/lua/ltable.cpp     cell = luaH_newkey(L, t, &amp;k);</span>
<span class='curline'><a href='../S/1192.html#L609'>L</a>                 609 src/lua/ltable.cpp   setobj2t(L, cell, value);</span>
<span class='curline'><a href='../S/1187.html#L44'>L</a>                  44 src/lua/ltable.h LUAI_FUNC void luaH_setint (lua_State *L, Table *t, lua_Integer key,</span>
<span class='curline'><a href='../S/1187.html#L49'>L</a>                  49 src/lua/ltable.h LUAI_FUNC TValue *luaH_newkey (lua_State *L, Table *t, const TValue *key);</span>
<span class='curline'><a href='../S/1187.html#L50'>L</a>                  50 src/lua/ltable.h LUAI_FUNC TValue *luaH_set (lua_State *L, Table *t, const TValue *key);</span>
<span class='curline'><a href='../S/1187.html#L51'>L</a>                  51 src/lua/ltable.h LUAI_FUNC Table *luaH_new (lua_State *L);</span>
<span class='curline'><a href='../S/1187.html#L52'>L</a>                  52 src/lua/ltable.h LUAI_FUNC void luaH_resize (lua_State *L, Table *t, unsigned int nasize,</span>
<span class='curline'><a href='../S/1187.html#L54'>L</a>                  54 src/lua/ltable.h LUAI_FUNC void luaH_resizearray (lua_State *L, Table *t, unsigned int nasize);</span>
<span class='curline'><a href='../S/1187.html#L55'>L</a>                  55 src/lua/ltable.h LUAI_FUNC void luaH_free (lua_State *L, Table *t);</span>
<span class='curline'><a href='../S/1187.html#L56'>L</a>                  56 src/lua/ltable.h LUAI_FUNC int luaH_next (lua_State *L, Table *t, StkId key);</span>
<span class='curline'><a href='../S/1223.html#L33'>L</a>                  33 src/lua/ltablib.cpp #define aux_getn(L,n,w)	(checktab(L, n, (w) | TAB_L), luaL_len(L, n))</span>
<span class='curline'><a href='../S/1223.html#L36'>L</a>                  36 src/lua/ltablib.cpp static int checkfield (lua_State *L, const char *key, int n) {</span>
<span class='curline'><a href='../S/1223.html#L37'>L</a>                  37 src/lua/ltablib.cpp   lua_pushstring(L, key);</span>
<span class='curline'><a href='../S/1223.html#L38'>L</a>                  38 src/lua/ltablib.cpp   return (lua_rawget(L, -n) != LUA_TNIL);</span>
<span class='curline'><a href='../S/1223.html#L46'>L</a>                  46 src/lua/ltablib.cpp static void checktab (lua_State *L, int arg, int what) {</span>
<span class='curline'><a href='../S/1223.html#L47'>L</a>                  47 src/lua/ltablib.cpp   if (lua_type(L, arg) != LUA_TTABLE) {  /* is it not a table? */</span>
<span class='curline'><a href='../S/1223.html#L49'>L</a>                  49 src/lua/ltablib.cpp     if (lua_getmetatable(L, arg) &amp;&amp;  /* must have metatable */</span>
<span class='curline'><a href='../S/1223.html#L50'>L</a>                  50 src/lua/ltablib.cpp         (!(what &amp; TAB_R) || checkfield(L, "__index", ++n)) &amp;&amp;</span>
<span class='curline'><a href='../S/1223.html#L51'>L</a>                  51 src/lua/ltablib.cpp         (!(what &amp; TAB_W) || checkfield(L, "__newindex", ++n)) &amp;&amp;</span>
<span class='curline'><a href='../S/1223.html#L52'>L</a>                  52 src/lua/ltablib.cpp         (!(what &amp; TAB_L) || checkfield(L, "__len", ++n))) {</span>
<span class='curline'><a href='../S/1223.html#L53'>L</a>                  53 src/lua/ltablib.cpp       lua_pop(L, n);  /* pop metatable and tested metamethods */</span>
<span class='curline'><a href='../S/1223.html#L56'>L</a>                  56 src/lua/ltablib.cpp       luaL_checktype(L, arg, LUA_TTABLE);  /* force an error */</span>
<span class='curline'><a href='../S/1223.html#L62'>L</a>                  62 src/lua/ltablib.cpp static int maxn (lua_State *L) {</span>
<span class='curline'><a href='../S/1223.html#L64'>L</a>                  64 src/lua/ltablib.cpp   luaL_checktype(L, 1, LUA_TTABLE);</span>
<span class='curline'><a href='../S/1223.html#L65'>L</a>                  65 src/lua/ltablib.cpp   lua_pushnil(L);  /* first key */</span>
<span class='curline'><a href='../S/1223.html#L66'>L</a>                  66 src/lua/ltablib.cpp   while (lua_next(L, 1)) {</span>
<span class='curline'><a href='../S/1223.html#L67'>L</a>                  67 src/lua/ltablib.cpp     lua_pop(L, 1);  /* remove value */</span>
<span class='curline'><a href='../S/1223.html#L68'>L</a>                  68 src/lua/ltablib.cpp     if (lua_type(L, -1) == LUA_TNUMBER) {</span>
<span class='curline'><a href='../S/1223.html#L69'>L</a>                  69 src/lua/ltablib.cpp       lua_Number v = lua_tonumber(L, -1);</span>
<span class='curline'><a href='../S/1223.html#L73'>L</a>                  73 src/lua/ltablib.cpp   lua_pushnumber(L, max);</span>
<span class='curline'><a href='../S/1223.html#L79'>L</a>                  79 src/lua/ltablib.cpp static int tinsert (lua_State *L) {</span>
<span class='curline'><a href='../S/1223.html#L80'>L</a>                  80 src/lua/ltablib.cpp   lua_Integer e = aux_getn(L, 1, TAB_RW) + 1;  /* first empty element */</span>
<span class='curline'><a href='../S/1223.html#L82'>L</a>                  82 src/lua/ltablib.cpp   switch (lua_gettop(L)) {</span>
<span class='curline'><a href='../S/1223.html#L89'>L</a>                  89 src/lua/ltablib.cpp       pos = luaL_checkinteger(L, 2);  /* 2nd argument is the position */</span>
<span class='curline'><a href='../S/1223.html#L90'>L</a>                  90 src/lua/ltablib.cpp       luaL_argcheck(L, 1 &lt;= pos &amp;&amp; pos &lt;= e, 2, "position out of bounds");</span>
<span class='curline'><a href='../S/1223.html#L92'>L</a>                  92 src/lua/ltablib.cpp         lua_geti(L, 1, i - 1);</span>
<span class='curline'><a href='../S/1223.html#L93'>L</a>                  93 src/lua/ltablib.cpp         lua_seti(L, 1, i);  /* t[i] = t[i - 1] */</span>
<span class='curline'><a href='../S/1223.html#L98'>L</a>                  98 src/lua/ltablib.cpp       return luaL_error(L, "wrong number of arguments to 'insert'");</span>
<span class='curline'><a href='../S/1223.html#L101'>L</a>                 101 src/lua/ltablib.cpp   lua_seti(L, 1, pos);  /* t[pos] = v */</span>
<span class='curline'><a href='../S/1223.html#L106'>L</a>                 106 src/lua/ltablib.cpp static int tremove (lua_State *L) {</span>
<span class='curline'><a href='../S/1223.html#L107'>L</a>                 107 src/lua/ltablib.cpp   lua_Integer size = aux_getn(L, 1, TAB_RW);</span>
<span class='curline'><a href='../S/1223.html#L108'>L</a>                 108 src/lua/ltablib.cpp   lua_Integer pos = luaL_optinteger(L, 2, size);</span>
<span class='curline'><a href='../S/1223.html#L110'>L</a>                 110 src/lua/ltablib.cpp     luaL_argcheck(L, 1 &lt;= pos &amp;&amp; pos &lt;= size + 1, 1, "position out of bounds");</span>
<span class='curline'><a href='../S/1223.html#L111'>L</a>                 111 src/lua/ltablib.cpp   lua_geti(L, 1, pos);  /* result = t[pos] */</span>
<span class='curline'><a href='../S/1223.html#L113'>L</a>                 113 src/lua/ltablib.cpp     lua_geti(L, 1, pos + 1);</span>
<span class='curline'><a href='../S/1223.html#L114'>L</a>                 114 src/lua/ltablib.cpp     lua_seti(L, 1, pos);  /* t[pos] = t[pos + 1] */</span>
<span class='curline'><a href='../S/1223.html#L116'>L</a>                 116 src/lua/ltablib.cpp   lua_pushnil(L);</span>
<span class='curline'><a href='../S/1223.html#L117'>L</a>                 117 src/lua/ltablib.cpp   lua_seti(L, 1, pos);  /* t[pos] = nil */</span>
<span class='curline'><a href='../S/1223.html#L128'>L</a>                 128 src/lua/ltablib.cpp static int tmove (lua_State *L) {</span>
<span class='curline'><a href='../S/1223.html#L129'>L</a>                 129 src/lua/ltablib.cpp   lua_Integer f = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/1223.html#L130'>L</a>                 130 src/lua/ltablib.cpp   lua_Integer e = luaL_checkinteger(L, 3);</span>
<span class='curline'><a href='../S/1223.html#L131'>L</a>                 131 src/lua/ltablib.cpp   lua_Integer t = luaL_checkinteger(L, 4);</span>
<span class='curline'><a href='../S/1223.html#L132'>L</a>                 132 src/lua/ltablib.cpp   int tt = !lua_isnoneornil(L, 5) ? 5 : 1;  /* destination table */</span>
<span class='curline'><a href='../S/1223.html#L133'>L</a>                 133 src/lua/ltablib.cpp   checktab(L, 1, TAB_R);</span>
<span class='curline'><a href='../S/1223.html#L134'>L</a>                 134 src/lua/ltablib.cpp   checktab(L, tt, TAB_W);</span>
<span class='curline'><a href='../S/1223.html#L137'>L</a>                 137 src/lua/ltablib.cpp     luaL_argcheck(L, f &gt; 0 || e &lt; LUA_MAXINTEGER + f, 3,</span>
<span class='curline'><a href='../S/1223.html#L140'>L</a>                 140 src/lua/ltablib.cpp     luaL_argcheck(L, t &lt;= LUA_MAXINTEGER - n + 1, 4,</span>
<span class='curline'><a href='../S/1223.html#L142'>L</a>                 142 src/lua/ltablib.cpp     if (t &gt; e || t &lt;= f || (tt != 1 &amp;&amp; !lua_compare(L, 1, tt, LUA_OPEQ))) {</span>
<span class='curline'><a href='../S/1223.html#L144'>L</a>                 144 src/lua/ltablib.cpp         lua_geti(L, 1, f + i);</span>
<span class='curline'><a href='../S/1223.html#L145'>L</a>                 145 src/lua/ltablib.cpp         lua_seti(L, tt, t + i);</span>
<span class='curline'><a href='../S/1223.html#L150'>L</a>                 150 src/lua/ltablib.cpp         lua_geti(L, 1, f + i);</span>
<span class='curline'><a href='../S/1223.html#L151'>L</a>                 151 src/lua/ltablib.cpp         lua_seti(L, tt, t + i);</span>
<span class='curline'><a href='../S/1223.html#L155'>L</a>                 155 src/lua/ltablib.cpp   lua_pushvalue(L, tt);  /* return destination table */</span>
<span class='curline'><a href='../S/1223.html#L160'>L</a>                 160 src/lua/ltablib.cpp static void addfield (lua_State *L, luaL_Buffer *b, lua_Integer i) {</span>
<span class='curline'><a href='../S/1223.html#L161'>L</a>                 161 src/lua/ltablib.cpp   lua_geti(L, 1, i);</span>
<span class='curline'><a href='../S/1223.html#L162'>L</a>                 162 src/lua/ltablib.cpp   if (!lua_isstring(L, -1))</span>
<span class='curline'><a href='../S/1223.html#L163'>L</a>                 163 src/lua/ltablib.cpp     luaL_error(L, "invalid value (%s) at index %d in table for 'concat'",</span>
<span class='curline'><a href='../S/1223.html#L164'>L</a>                 164 src/lua/ltablib.cpp                   luaL_typename(L, -1), i);</span>
<span class='curline'><a href='../S/1223.html#L169'>L</a>                 169 src/lua/ltablib.cpp static int tconcat (lua_State *L) {</span>
<span class='curline'><a href='../S/1223.html#L171'>L</a>                 171 src/lua/ltablib.cpp   lua_Integer last = aux_getn(L, 1, TAB_R);</span>
<span class='curline'><a href='../S/1223.html#L173'>L</a>                 173 src/lua/ltablib.cpp   const char *sep = luaL_optlstring(L, 2, "", &amp;lsep);</span>
<span class='curline'><a href='../S/1223.html#L174'>L</a>                 174 src/lua/ltablib.cpp   lua_Integer i = luaL_optinteger(L, 3, 1);</span>
<span class='curline'><a href='../S/1223.html#L175'>L</a>                 175 src/lua/ltablib.cpp   last = luaL_optinteger(L, 4, last);</span>
<span class='curline'><a href='../S/1223.html#L176'>L</a>                 176 src/lua/ltablib.cpp   luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/1223.html#L178'>L</a>                 178 src/lua/ltablib.cpp     addfield(L, &amp;b, i);</span>
<span class='curline'><a href='../S/1223.html#L182'>L</a>                 182 src/lua/ltablib.cpp     addfield(L, &amp;b, i);</span>
<span class='curline'><a href='../S/1223.html#L194'>L</a>                 194 src/lua/ltablib.cpp static int pack (lua_State *L) {</span>
<span class='curline'><a href='../S/1223.html#L196'>L</a>                 196 src/lua/ltablib.cpp   int n = lua_gettop(L);  /* number of elements to pack */</span>
<span class='curline'><a href='../S/1223.html#L197'>L</a>                 197 src/lua/ltablib.cpp   lua_createtable(L, n, 1);  /* create result table */</span>
<span class='curline'><a href='../S/1223.html#L198'>L</a>                 198 src/lua/ltablib.cpp   lua_insert(L, 1);  /* put it at index 1 */</span>
<span class='curline'><a href='../S/1223.html#L200'>L</a>                 200 src/lua/ltablib.cpp     lua_seti(L, 1, i);</span>
<span class='curline'><a href='../S/1223.html#L201'>L</a>                 201 src/lua/ltablib.cpp   lua_pushinteger(L, n);</span>
<span class='curline'><a href='../S/1223.html#L202'>L</a>                 202 src/lua/ltablib.cpp   lua_setfield(L, 1, "n");  /* t.n = number of elements */</span>
<span class='curline'><a href='../S/1223.html#L207'>L</a>                 207 src/lua/ltablib.cpp static int unpack (lua_State *L) {</span>
<span class='curline'><a href='../S/1223.html#L209'>L</a>                 209 src/lua/ltablib.cpp   lua_Integer i = luaL_optinteger(L, 2, 1);</span>
<span class='curline'><a href='../S/1223.html#L210'>L</a>                 210 src/lua/ltablib.cpp   lua_Integer e = luaL_opt(L, luaL_checkinteger, 3, luaL_len(L, 1));</span>
<span class='curline'><a href='../S/1223.html#L213'>L</a>                 213 src/lua/ltablib.cpp   if (n &gt;= (unsigned int)INT_MAX  || !lua_checkstack(L, (int)(++n)))</span>
<span class='curline'><a href='../S/1223.html#L214'>L</a>                 214 src/lua/ltablib.cpp     return luaL_error(L, "too many results to unpack");</span>
<span class='curline'><a href='../S/1223.html#L216'>L</a>                 216 src/lua/ltablib.cpp     lua_geti(L, 1, i);</span>
<span class='curline'><a href='../S/1223.html#L218'>L</a>                 218 src/lua/ltablib.cpp   lua_geti(L, 1, e);  /* push last element */</span>
<span class='curline'><a href='../S/1223.html#L277'>L</a>                 277 src/lua/ltablib.cpp static void set2 (lua_State *L, IdxT i, IdxT j) {</span>
<span class='curline'><a href='../S/1223.html#L278'>L</a>                 278 src/lua/ltablib.cpp   lua_seti(L, 1, i);</span>
<span class='curline'><a href='../S/1223.html#L279'>L</a>                 279 src/lua/ltablib.cpp   lua_seti(L, 1, j);</span>
<span class='curline'><a href='../S/1223.html#L287'>L</a>                 287 src/lua/ltablib.cpp static int sort_comp (lua_State *L, int a, int b) {</span>
<span class='curline'><a href='../S/1223.html#L288'>L</a>                 288 src/lua/ltablib.cpp   if (lua_isnil(L, 2))  /* no function? */</span>
<span class='curline'><a href='../S/1223.html#L289'>L</a>                 289 src/lua/ltablib.cpp     return lua_compare(L, a, b, LUA_OPLT);  /* a &lt; b */</span>
<span class='curline'><a href='../S/1223.html#L292'>L</a>                 292 src/lua/ltablib.cpp     lua_pushvalue(L, 2);    /* push function */</span>
<span class='curline'><a href='../S/1223.html#L293'>L</a>                 293 src/lua/ltablib.cpp     lua_pushvalue(L, a-1);  /* -1 to compensate function */</span>
<span class='curline'><a href='../S/1223.html#L294'>L</a>                 294 src/lua/ltablib.cpp     lua_pushvalue(L, b-2);  /* -2 to compensate function and 'a' */</span>
<span class='curline'><a href='../S/1223.html#L295'>L</a>                 295 src/lua/ltablib.cpp     lua_call(L, 2, 1);      /* call function */</span>
<span class='curline'><a href='../S/1223.html#L296'>L</a>                 296 src/lua/ltablib.cpp     res = lua_toboolean(L, -1);  /* get result */</span>
<span class='curline'><a href='../S/1223.html#L297'>L</a>                 297 src/lua/ltablib.cpp     lua_pop(L, 1);          /* pop result */</span>
<span class='curline'><a href='../S/1223.html#L310'>L</a>                 310 src/lua/ltablib.cpp static IdxT partition (lua_State *L, IdxT lo, IdxT up) {</span>
<span class='curline'><a href='../S/1223.html#L316'>L</a>                 316 src/lua/ltablib.cpp     while (lua_geti(L, 1, ++i), sort_comp(L, -1, -2)) {</span>
<span class='curline'><a href='../S/1223.html#L318'>L</a>                 318 src/lua/ltablib.cpp         luaL_error(L, "invalid order function for sorting");</span>
<span class='curline'><a href='../S/1223.html#L319'>L</a>                 319 src/lua/ltablib.cpp       lua_pop(L, 1);  /* remove a[i] */</span>
<span class='curline'><a href='../S/1223.html#L323'>L</a>                 323 src/lua/ltablib.cpp     while (lua_geti(L, 1, --j), sort_comp(L, -3, -1)) {</span>
<span class='curline'><a href='../S/1223.html#L325'>L</a>                 325 src/lua/ltablib.cpp         luaL_error(L, "invalid order function for sorting");</span>
<span class='curline'><a href='../S/1223.html#L326'>L</a>                 326 src/lua/ltablib.cpp       lua_pop(L, 1);  /* remove a[j] */</span>
<span class='curline'><a href='../S/1223.html#L331'>L</a>                 331 src/lua/ltablib.cpp       lua_pop(L, 1);  /* pop a[j] */</span>
<span class='curline'><a href='../S/1223.html#L333'>L</a>                 333 src/lua/ltablib.cpp       set2(L, up - 1, i);</span>
<span class='curline'><a href='../S/1223.html#L337'>L</a>                 337 src/lua/ltablib.cpp     set2(L, i, j);</span>
<span class='curline'><a href='../S/1223.html#L357'>L</a>                 357 src/lua/ltablib.cpp static void auxsort (lua_State *L, IdxT lo, IdxT up,</span>
<span class='curline'><a href='../S/1223.html#L363'>L</a>                 363 src/lua/ltablib.cpp     lua_geti(L, 1, lo);</span>
<span class='curline'><a href='../S/1223.html#L364'>L</a>                 364 src/lua/ltablib.cpp     lua_geti(L, 1, up);</span>
<span class='curline'><a href='../S/1223.html#L365'>L</a>                 365 src/lua/ltablib.cpp     if (sort_comp(L, -1, -2))  /* a[up] &lt; a[lo]? */</span>
<span class='curline'><a href='../S/1223.html#L366'>L</a>                 366 src/lua/ltablib.cpp       set2(L, lo, up);  /* swap a[lo] - a[up] */</span>
<span class='curline'><a href='../S/1223.html#L368'>L</a>                 368 src/lua/ltablib.cpp       lua_pop(L, 2);  /* remove both values */</span>
<span class='curline'><a href='../S/1223.html#L375'>L</a>                 375 src/lua/ltablib.cpp     lua_geti(L, 1, p);</span>
<span class='curline'><a href='../S/1223.html#L376'>L</a>                 376 src/lua/ltablib.cpp     lua_geti(L, 1, lo);</span>
<span class='curline'><a href='../S/1223.html#L377'>L</a>                 377 src/lua/ltablib.cpp     if (sort_comp(L, -2, -1))  /* a[p] &lt; a[lo]? */</span>
<span class='curline'><a href='../S/1223.html#L378'>L</a>                 378 src/lua/ltablib.cpp       set2(L, p, lo);  /* swap a[p] - a[lo] */</span>
<span class='curline'><a href='../S/1223.html#L380'>L</a>                 380 src/lua/ltablib.cpp       lua_pop(L, 1);  /* remove a[lo] */</span>
<span class='curline'><a href='../S/1223.html#L381'>L</a>                 381 src/lua/ltablib.cpp       lua_geti(L, 1, up);</span>
<span class='curline'><a href='../S/1223.html#L382'>L</a>                 382 src/lua/ltablib.cpp       if (sort_comp(L, -1, -2))  /* a[up] &lt; a[p]? */</span>
<span class='curline'><a href='../S/1223.html#L383'>L</a>                 383 src/lua/ltablib.cpp         set2(L, p, up);  /* swap a[up] - a[p] */</span>
<span class='curline'><a href='../S/1223.html#L385'>L</a>                 385 src/lua/ltablib.cpp         lua_pop(L, 2);</span>
<span class='curline'><a href='../S/1223.html#L389'>L</a>                 389 src/lua/ltablib.cpp     lua_geti(L, 1, p);  /* get middle element (Pivot) */</span>
<span class='curline'><a href='../S/1223.html#L390'>L</a>                 390 src/lua/ltablib.cpp     lua_pushvalue(L, -1);  /* push Pivot */</span>
<span class='curline'><a href='../S/1223.html#L391'>L</a>                 391 src/lua/ltablib.cpp     lua_geti(L, 1, up - 1);  /* push a[up - 1] */</span>
<span class='curline'><a href='../S/1223.html#L392'>L</a>                 392 src/lua/ltablib.cpp     set2(L, p, up - 1);  /* swap Pivot (a[p]) with a[up - 1] */</span>
<span class='curline'><a href='../S/1223.html#L393'>L</a>                 393 src/lua/ltablib.cpp     p = partition(L, lo, up);</span>
<span class='curline'><a href='../S/1223.html#L396'>L</a>                 396 src/lua/ltablib.cpp       auxsort(L, lo, p - 1, rnd);  /* call recursively for lower interval */</span>
<span class='curline'><a href='../S/1223.html#L401'>L</a>                 401 src/lua/ltablib.cpp       auxsort(L, p + 1, up, rnd);  /* call recursively for upper interval */</span>
<span class='curline'><a href='../S/1223.html#L411'>L</a>                 411 src/lua/ltablib.cpp static int sort (lua_State *L) {</span>
<span class='curline'><a href='../S/1223.html#L412'>L</a>                 412 src/lua/ltablib.cpp   lua_Integer n = aux_getn(L, 1, TAB_RW);</span>
<span class='curline'><a href='../S/1223.html#L414'>L</a>                 414 src/lua/ltablib.cpp     luaL_argcheck(L, n &lt; INT_MAX, 1, "array too big");</span>
<span class='curline'><a href='../S/1223.html#L415'>L</a>                 415 src/lua/ltablib.cpp     if (!lua_isnoneornil(L, 2))  /* is there a 2nd argument? */</span>
<span class='curline'><a href='../S/1223.html#L416'>L</a>                 416 src/lua/ltablib.cpp       luaL_checktype(L, 2, LUA_TFUNCTION);  /* must be a function */</span>
<span class='curline'><a href='../S/1223.html#L417'>L</a>                 417 src/lua/ltablib.cpp     lua_settop(L, 2);  /* make sure there are two arguments */</span>
<span class='curline'><a href='../S/1223.html#L418'>L</a>                 418 src/lua/ltablib.cpp     auxsort(L, 1, (IdxT)n, 0);</span>
<span class='curline'><a href='../S/1223.html#L441'>L</a>                 441 src/lua/ltablib.cpp LUAMOD_API int luaopen_table (lua_State *L) {</span>
<span class='curline'><a href='../S/1223.html#L442'>L</a>                 442 src/lua/ltablib.cpp   luaL_newlib(L, tab_funcs);</span>
<span class='curline'><a href='../S/1223.html#L445'>L</a>                 445 src/lua/ltablib.cpp   lua_getfield(L, -1, "unpack");</span>
<span class='curline'><a href='../S/1223.html#L446'>L</a>                 446 src/lua/ltablib.cpp   lua_setglobal(L, "unpack");</span>
<span class='curline'><a href='../S/1195.html#L37'>L</a>                  37 src/lua/ltm.cpp void luaT_init (lua_State *L) {</span>
<span class='curline'><a href='../S/1195.html#L49'>L</a>                  49 src/lua/ltm.cpp     G(L)-&gt;tmname[i] = luaS_new(L, luaT_eventname[i]);</span>
<span class='curline'><a href='../S/1195.html#L50'>L</a>                  50 src/lua/ltm.cpp     luaC_fix(L, obj2gco(G(L)-&gt;tmname[i]));  /* never collect these names */</span>
<span class='curline'><a href='../S/1195.html#L70'>L</a>                  70 src/lua/ltm.cpp const TValue *luaT_gettmbyobj (lua_State *L, const TValue *o, TMS event) {</span>
<span class='curline'><a href='../S/1195.html#L80'>L</a>                  80 src/lua/ltm.cpp       mt = G(L)-&gt;mt[ttnov(o)];</span>
<span class='curline'><a href='../S/1195.html#L82'>L</a>                  82 src/lua/ltm.cpp   return (mt ? luaH_getshortstr(mt, G(L)-&gt;tmname[event]) : luaO_nilobject);</span>
<span class='curline'><a href='../S/1195.html#L90'>L</a>                  90 src/lua/ltm.cpp const char *luaT_objtypename (lua_State *L, const TValue *o) {</span>
<span class='curline'><a href='../S/1195.html#L94'>L</a>                  94 src/lua/ltm.cpp     const TValue *name = luaH_getshortstr(mt, luaS_new(L, "__name"));</span>
<span class='curline'><a href='../S/1195.html#L102'>L</a>                 102 src/lua/ltm.cpp void luaT_callTM (lua_State *L, const TValue *f, const TValue *p1,</span>
<span class='curline'><a href='../S/1195.html#L104'>L</a>                 104 src/lua/ltm.cpp   ptrdiff_t result = savestack(L, p3);</span>
<span class='curline'><a href='../S/1195.html#L105'>L</a>                 105 src/lua/ltm.cpp   StkId func = L-&gt;top;</span>
<span class='curline'><a href='../S/1195.html#L106'>L</a>                 106 src/lua/ltm.cpp   setobj2s(L, func, f);  /* push function (assume EXTRA_STACK) */</span>
<span class='curline'><a href='../S/1195.html#L107'>L</a>                 107 src/lua/ltm.cpp   setobj2s(L, func + 1, p1);  /* 1st argument */</span>
<span class='curline'><a href='../S/1195.html#L108'>L</a>                 108 src/lua/ltm.cpp   setobj2s(L, func + 2, p2);  /* 2nd argument */</span>
<span class='curline'><a href='../S/1195.html#L109'>L</a>                 109 src/lua/ltm.cpp   L-&gt;top += 3;</span>
<span class='curline'><a href='../S/1195.html#L111'>L</a>                 111 src/lua/ltm.cpp     setobj2s(L, L-&gt;top++, p3);  /* 3rd argument */</span>
<span class='curline'><a href='../S/1195.html#L113'>L</a>                 113 src/lua/ltm.cpp   if (isLua(L-&gt;ci))</span>
<span class='curline'><a href='../S/1195.html#L114'>L</a>                 114 src/lua/ltm.cpp     luaD_call(L, func, hasres);</span>
<span class='curline'><a href='../S/1195.html#L116'>L</a>                 116 src/lua/ltm.cpp     luaD_callnoyield(L, func, hasres);</span>
<span class='curline'><a href='../S/1195.html#L118'>L</a>                 118 src/lua/ltm.cpp     p3 = restorestack(L, result);</span>
<span class='curline'><a href='../S/1195.html#L119'>L</a>                 119 src/lua/ltm.cpp     setobjs2s(L, p3, --L-&gt;top);</span>
<span class='curline'><a href='../S/1195.html#L124'>L</a>                 124 src/lua/ltm.cpp int luaT_callbinTM (lua_State *L, const TValue *p1, const TValue *p2,</span>
<span class='curline'><a href='../S/1195.html#L126'>L</a>                 126 src/lua/ltm.cpp   const TValue *tm = luaT_gettmbyobj(L, p1, event);  /* try first operand */</span>
<span class='curline'><a href='../S/1195.html#L128'>L</a>                 128 src/lua/ltm.cpp     tm = luaT_gettmbyobj(L, p2, event);  /* try second operand */</span>
<span class='curline'><a href='../S/1195.html#L130'>L</a>                 130 src/lua/ltm.cpp   luaT_callTM(L, tm, p1, p2, res, 1);</span>
<span class='curline'><a href='../S/1195.html#L135'>L</a>                 135 src/lua/ltm.cpp void luaT_trybinTM (lua_State *L, const TValue *p1, const TValue *p2,</span>
<span class='curline'><a href='../S/1195.html#L137'>L</a>                 137 src/lua/ltm.cpp   if (!luaT_callbinTM(L, p1, p2, res, event)) {</span>
<span class='curline'><a href='../S/1195.html#L140'>L</a>                 140 src/lua/ltm.cpp         luaG_concaterror(L, p1, p2);</span>
<span class='curline'><a href='../S/1195.html#L146'>L</a>                 146 src/lua/ltm.cpp           luaG_tointerror(L, p1, p2);</span>
<span class='curline'><a href='../S/1195.html#L148'>L</a>                 148 src/lua/ltm.cpp           luaG_opinterror(L, p1, p2, "perform bitwise operation on");</span>
<span class='curline'><a href='../S/1195.html#L152'>L</a>                 152 src/lua/ltm.cpp         luaG_opinterror(L, p1, p2, "perform arithmetic on");</span>
<span class='curline'><a href='../S/1195.html#L158'>L</a>                 158 src/lua/ltm.cpp int luaT_callorderTM (lua_State *L, const TValue *p1, const TValue *p2,</span>
<span class='curline'><a href='../S/1195.html#L160'>L</a>                 160 src/lua/ltm.cpp   if (!luaT_callbinTM(L, p1, p2, L-&gt;top, event))</span>
<span class='curline'><a href='../S/1195.html#L163'>L</a>                 163 src/lua/ltm.cpp     return !l_isfalse(L-&gt;top);</span>
<span class='curline'><a href='../S/1206.html#L58'>L</a>                  58 src/lua/ltm.h  LUAI_FUNC const char *luaT_objtypename (lua_State *L, const TValue *o);</span>
<span class='curline'><a href='../S/1206.html#L61'>L</a>                  61 src/lua/ltm.h  LUAI_FUNC const TValue *luaT_gettmbyobj (lua_State *L, const TValue *o,</span>
<span class='curline'><a href='../S/1206.html#L63'>L</a>                  63 src/lua/ltm.h  LUAI_FUNC void luaT_init (lua_State *L);</span>
<span class='curline'><a href='../S/1206.html#L65'>L</a>                  65 src/lua/ltm.h  LUAI_FUNC void luaT_callTM (lua_State *L, const TValue *f, const TValue *p1,</span>
<span class='curline'><a href='../S/1206.html#L67'>L</a>                  67 src/lua/ltm.h  LUAI_FUNC int luaT_callbinTM (lua_State *L, const TValue *p1, const TValue *p2,</span>
<span class='curline'><a href='../S/1206.html#L69'>L</a>                  69 src/lua/ltm.h  LUAI_FUNC void luaT_trybinTM (lua_State *L, const TValue *p1, const TValue *p2,</span>
<span class='curline'><a href='../S/1206.html#L71'>L</a>                  71 src/lua/ltm.h  LUAI_FUNC int luaT_callorderTM (lua_State *L, const TValue *p1,</span>
<span class='curline'><a href='../S/1224.html#L105'>L</a>                 105 src/lua/lua.h  typedef int (*lua_CFunction) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L110'>L</a>                 110 src/lua/lua.h  typedef int (*lua_KFunction) (lua_State *L, int status, lua_KContext ctx);</span>
<span class='curline'><a href='../S/1224.html#L116'>L</a>                 116 src/lua/lua.h  typedef const char * (*lua_Reader) (lua_State *L, void *ud, size_t *sz);</span>
<span class='curline'><a href='../S/1224.html#L118'>L</a>                 118 src/lua/lua.h  typedef int (*lua_Writer) (lua_State *L, const void *p, size_t sz, void *ud);</span>
<span class='curline'><a href='../S/1224.html#L146'>L</a>                 146 src/lua/lua.h  LUA_API void       (lua_close) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L147'>L</a>                 147 src/lua/lua.h  LUA_API lua_State *(lua_newthread) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L149'>L</a>                 149 src/lua/lua.h  LUA_API lua_CFunction (lua_atpanic) (lua_State *L, lua_CFunction panicf);</span>
<span class='curline'><a href='../S/1224.html#L152'>L</a>                 152 src/lua/lua.h  LUA_API const lua_Number *(lua_version) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L158'>L</a>                 158 src/lua/lua.h  LUA_API int   (lua_absindex) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L159'>L</a>                 159 src/lua/lua.h  LUA_API int   (lua_gettop) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L160'>L</a>                 160 src/lua/lua.h  LUA_API void  (lua_settop) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L161'>L</a>                 161 src/lua/lua.h  LUA_API void  (lua_pushvalue) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L162'>L</a>                 162 src/lua/lua.h  LUA_API void  (lua_rotate) (lua_State *L, int idx, int n);</span>
<span class='curline'><a href='../S/1224.html#L163'>L</a>                 163 src/lua/lua.h  LUA_API void  (lua_copy) (lua_State *L, int fromidx, int toidx);</span>
<span class='curline'><a href='../S/1224.html#L164'>L</a>                 164 src/lua/lua.h  LUA_API int   (lua_checkstack) (lua_State *L, int n);</span>
<span class='curline'><a href='../S/1224.html#L173'>L</a>                 173 src/lua/lua.h  LUA_API int             (lua_isnumber) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L174'>L</a>                 174 src/lua/lua.h  LUA_API int             (lua_isstring) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L175'>L</a>                 175 src/lua/lua.h  LUA_API int             (lua_iscfunction) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L176'>L</a>                 176 src/lua/lua.h  LUA_API int             (lua_isinteger) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L177'>L</a>                 177 src/lua/lua.h  LUA_API int             (lua_isuserdata) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L178'>L</a>                 178 src/lua/lua.h  LUA_API int             (lua_type) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L179'>L</a>                 179 src/lua/lua.h  LUA_API const char     *(lua_typename) (lua_State *L, int tp);</span>
<span class='curline'><a href='../S/1224.html#L181'>L</a>                 181 src/lua/lua.h  LUA_API lua_Number      (lua_tonumberx) (lua_State *L, int idx, int *isnum);</span>
<span class='curline'><a href='../S/1224.html#L182'>L</a>                 182 src/lua/lua.h  LUA_API lua_Integer     (lua_tointegerx) (lua_State *L, int idx, int *isnum);</span>
<span class='curline'><a href='../S/1224.html#L183'>L</a>                 183 src/lua/lua.h  LUA_API int             (lua_toboolean) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L184'>L</a>                 184 src/lua/lua.h  LUA_API const char     *(lua_tolstring) (lua_State *L, int idx, size_t *len);</span>
<span class='curline'><a href='../S/1224.html#L185'>L</a>                 185 src/lua/lua.h  LUA_API size_t          (lua_rawlen) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L186'>L</a>                 186 src/lua/lua.h  LUA_API lua_CFunction   (lua_tocfunction) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L187'>L</a>                 187 src/lua/lua.h  LUA_API void	       *(lua_touserdata) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L188'>L</a>                 188 src/lua/lua.h  LUA_API lua_State      *(lua_tothread) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L189'>L</a>                 189 src/lua/lua.h  LUA_API const void     *(lua_topointer) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L211'>L</a>                 211 src/lua/lua.h  LUA_API void  (lua_arith) (lua_State *L, int op);</span>
<span class='curline'><a href='../S/1224.html#L217'>L</a>                 217 src/lua/lua.h  LUA_API int   (lua_rawequal) (lua_State *L, int idx1, int idx2);</span>
<span class='curline'><a href='../S/1224.html#L218'>L</a>                 218 src/lua/lua.h  LUA_API int   (lua_compare) (lua_State *L, int idx1, int idx2, int op);</span>
<span class='curline'><a href='../S/1224.html#L224'>L</a>                 224 src/lua/lua.h  LUA_API void        (lua_pushnil) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L225'>L</a>                 225 src/lua/lua.h  LUA_API void        (lua_pushnumber) (lua_State *L, lua_Number n);</span>
<span class='curline'><a href='../S/1224.html#L226'>L</a>                 226 src/lua/lua.h  LUA_API void        (lua_pushinteger) (lua_State *L, lua_Integer n);</span>
<span class='curline'><a href='../S/1224.html#L227'>L</a>                 227 src/lua/lua.h  LUA_API const char *(lua_pushlstring) (lua_State *L, const char *s, size_t len);</span>
<span class='curline'><a href='../S/1224.html#L228'>L</a>                 228 src/lua/lua.h  LUA_API const char *(lua_pushstring) (lua_State *L, const char *s);</span>
<span class='curline'><a href='../S/1224.html#L229'>L</a>                 229 src/lua/lua.h  LUA_API const char *(lua_pushvfstring) (lua_State *L, const char *fmt,</span>
<span class='curline'><a href='../S/1224.html#L231'>L</a>                 231 src/lua/lua.h  LUA_API const char *(lua_pushfstring) (lua_State *L, const char *fmt, ...);</span>
<span class='curline'><a href='../S/1224.html#L232'>L</a>                 232 src/lua/lua.h  LUA_API void  (lua_pushcclosure) (lua_State *L, lua_CFunction fn, int n);</span>
<span class='curline'><a href='../S/1224.html#L233'>L</a>                 233 src/lua/lua.h  LUA_API void  (lua_pushboolean) (lua_State *L, int b);</span>
<span class='curline'><a href='../S/1224.html#L234'>L</a>                 234 src/lua/lua.h  LUA_API void  (lua_pushlightuserdata) (lua_State *L, void *p);</span>
<span class='curline'><a href='../S/1224.html#L235'>L</a>                 235 src/lua/lua.h  LUA_API int   (lua_pushthread) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L241'>L</a>                 241 src/lua/lua.h  LUA_API int (lua_getglobal) (lua_State *L, const char *name);</span>
<span class='curline'><a href='../S/1224.html#L242'>L</a>                 242 src/lua/lua.h  LUA_API int (lua_gettable) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L243'>L</a>                 243 src/lua/lua.h  LUA_API int (lua_getfield) (lua_State *L, int idx, const char *k);</span>
<span class='curline'><a href='../S/1224.html#L244'>L</a>                 244 src/lua/lua.h  LUA_API int (lua_geti) (lua_State *L, int idx, lua_Integer n);</span>
<span class='curline'><a href='../S/1224.html#L245'>L</a>                 245 src/lua/lua.h  LUA_API int (lua_rawget) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L246'>L</a>                 246 src/lua/lua.h  LUA_API int (lua_rawgeti) (lua_State *L, int idx, lua_Integer n);</span>
<span class='curline'><a href='../S/1224.html#L247'>L</a>                 247 src/lua/lua.h  LUA_API int (lua_rawgetp) (lua_State *L, int idx, const void *p);</span>
<span class='curline'><a href='../S/1224.html#L249'>L</a>                 249 src/lua/lua.h  LUA_API void  (lua_createtable) (lua_State *L, int narr, int nrec);</span>
<span class='curline'><a href='../S/1224.html#L250'>L</a>                 250 src/lua/lua.h  LUA_API void *(lua_newuserdata) (lua_State *L, size_t sz);</span>
<span class='curline'><a href='../S/1224.html#L251'>L</a>                 251 src/lua/lua.h  LUA_API int   (lua_getmetatable) (lua_State *L, int objindex);</span>
<span class='curline'><a href='../S/1224.html#L252'>L</a>                 252 src/lua/lua.h  LUA_API int  (lua_getuservalue) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L258'>L</a>                 258 src/lua/lua.h  LUA_API void  (lua_setglobal) (lua_State *L, const char *name);</span>
<span class='curline'><a href='../S/1224.html#L259'>L</a>                 259 src/lua/lua.h  LUA_API void  (lua_settable) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L260'>L</a>                 260 src/lua/lua.h  LUA_API void  (lua_setfield) (lua_State *L, int idx, const char *k);</span>
<span class='curline'><a href='../S/1224.html#L261'>L</a>                 261 src/lua/lua.h  LUA_API void  (lua_seti) (lua_State *L, int idx, lua_Integer n);</span>
<span class='curline'><a href='../S/1224.html#L262'>L</a>                 262 src/lua/lua.h  LUA_API void  (lua_rawset) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L263'>L</a>                 263 src/lua/lua.h  LUA_API void  (lua_rawseti) (lua_State *L, int idx, lua_Integer n);</span>
<span class='curline'><a href='../S/1224.html#L264'>L</a>                 264 src/lua/lua.h  LUA_API void  (lua_rawsetp) (lua_State *L, int idx, const void *p);</span>
<span class='curline'><a href='../S/1224.html#L265'>L</a>                 265 src/lua/lua.h  LUA_API int   (lua_setmetatable) (lua_State *L, int objindex);</span>
<span class='curline'><a href='../S/1224.html#L266'>L</a>                 266 src/lua/lua.h  LUA_API void  (lua_setuservalue) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L272'>L</a>                 272 src/lua/lua.h  LUA_API void  (lua_callk) (lua_State *L, int nargs, int nresults,</span>
<span class='curline'><a href='../S/1224.html#L274'>L</a>                 274 src/lua/lua.h  #define lua_call(L,n,r)		lua_callk(L, (n), (r), 0, NULL)</span>
<span class='curline'><a href='../S/1224.html#L276'>L</a>                 276 src/lua/lua.h  LUA_API int   (lua_pcallk) (lua_State *L, int nargs, int nresults, int errfunc,</span>
<span class='curline'><a href='../S/1224.html#L278'>L</a>                 278 src/lua/lua.h  #define lua_pcall(L,n,r,f)	lua_pcallk(L, (n), (r), (f), 0, NULL)</span>
<span class='curline'><a href='../S/1224.html#L280'>L</a>                 280 src/lua/lua.h  LUA_API int   (lua_load) (lua_State *L, lua_Reader reader, void *dt,</span>
<span class='curline'><a href='../S/1224.html#L283'>L</a>                 283 src/lua/lua.h  LUA_API int (lua_dump) (lua_State *L, lua_Writer writer, void *data, int strip);</span>
<span class='curline'><a href='../S/1224.html#L289'>L</a>                 289 src/lua/lua.h  LUA_API int  (lua_yieldk)     (lua_State *L, int nresults, lua_KContext ctx,</span>
<span class='curline'><a href='../S/1224.html#L291'>L</a>                 291 src/lua/lua.h  LUA_API int  (lua_resume)     (lua_State *L, lua_State *from, int narg);</span>
<span class='curline'><a href='../S/1224.html#L292'>L</a>                 292 src/lua/lua.h  LUA_API int  (lua_status)     (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L293'>L</a>                 293 src/lua/lua.h  LUA_API int (lua_isyieldable) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L295'>L</a>                 295 src/lua/lua.h  #define lua_yield(L,n)		lua_yieldk(L, (n), 0, NULL)</span>
<span class='curline'><a href='../S/1224.html#L312'>L</a>                 312 src/lua/lua.h  LUA_API int (lua_gc) (lua_State *L, int what, int data);</span>
<span class='curline'><a href='../S/1224.html#L319'>L</a>                 319 src/lua/lua.h  LUA_API int   (lua_error) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L321'>L</a>                 321 src/lua/lua.h  LUA_API int   (lua_next) (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L323'>L</a>                 323 src/lua/lua.h  LUA_API void  (lua_concat) (lua_State *L, int n);</span>
<span class='curline'><a href='../S/1224.html#L324'>L</a>                 324 src/lua/lua.h  LUA_API void  (lua_len)    (lua_State *L, int idx);</span>
<span class='curline'><a href='../S/1224.html#L326'>L</a>                 326 src/lua/lua.h  LUA_API size_t   (lua_stringtonumber) (lua_State *L, const char *s);</span>
<span class='curline'><a href='../S/1224.html#L328'>L</a>                 328 src/lua/lua.h  LUA_API lua_Alloc (lua_getallocf) (lua_State *L, void **ud);</span>
<span class='curline'><a href='../S/1224.html#L329'>L</a>                 329 src/lua/lua.h  LUA_API void      (lua_setallocf) (lua_State *L, lua_Alloc f, void *ud);</span>
<span class='curline'><a href='../S/1224.html#L339'>L</a>                 339 src/lua/lua.h  #define lua_getextraspace(L)	((void *)((char *)(L) - LUA_EXTRASPACE))</span>
<span class='curline'><a href='../S/1224.html#L341'>L</a>                 341 src/lua/lua.h  #define lua_tonumber(L,i)	lua_tonumberx(L,(i),NULL)</span>
<span class='curline'><a href='../S/1224.html#L342'>L</a>                 342 src/lua/lua.h  #define lua_tointeger(L,i)	lua_tointegerx(L,(i),NULL)</span>
<span class='curline'><a href='../S/1224.html#L344'>L</a>                 344 src/lua/lua.h  #define lua_pop(L,n)		lua_settop(L, -(n)-1)</span>
<span class='curline'><a href='../S/1224.html#L346'>L</a>                 346 src/lua/lua.h  #define lua_newtable(L)		lua_createtable(L, 0, 0)</span>
<span class='curline'><a href='../S/1224.html#L348'>L</a>                 348 src/lua/lua.h  #define lua_register(L,n,f) (lua_pushcfunction(L, (f)), lua_setglobal(L, (n)))</span>
<span class='curline'><a href='../S/1224.html#L350'>L</a>                 350 src/lua/lua.h  #define lua_pushcfunction(L,f)	lua_pushcclosure(L, (f), 0)</span>
<span class='curline'><a href='../S/1224.html#L352'>L</a>                 352 src/lua/lua.h  #define lua_isfunction(L,n)	(lua_type(L, (n)) == LUA_TFUNCTION)</span>
<span class='curline'><a href='../S/1224.html#L353'>L</a>                 353 src/lua/lua.h  #define lua_istable(L,n)	(lua_type(L, (n)) == LUA_TTABLE)</span>
<span class='curline'><a href='../S/1224.html#L354'>L</a>                 354 src/lua/lua.h  #define lua_islightuserdata(L,n)	(lua_type(L, (n)) == LUA_TLIGHTUSERDATA)</span>
<span class='curline'><a href='../S/1224.html#L355'>L</a>                 355 src/lua/lua.h  #define lua_isnil(L,n)		(lua_type(L, (n)) == LUA_TNIL)</span>
<span class='curline'><a href='../S/1224.html#L356'>L</a>                 356 src/lua/lua.h  #define lua_isboolean(L,n)	(lua_type(L, (n)) == LUA_TBOOLEAN)</span>
<span class='curline'><a href='../S/1224.html#L357'>L</a>                 357 src/lua/lua.h  #define lua_isthread(L,n)	(lua_type(L, (n)) == LUA_TTHREAD)</span>
<span class='curline'><a href='../S/1224.html#L358'>L</a>                 358 src/lua/lua.h  #define lua_isnone(L,n)		(lua_type(L, (n)) == LUA_TNONE)</span>
<span class='curline'><a href='../S/1224.html#L359'>L</a>                 359 src/lua/lua.h  #define lua_isnoneornil(L, n)	(lua_type(L, (n)) &lt;= 0)</span>
<span class='curline'><a href='../S/1224.html#L361'>L</a>                 361 src/lua/lua.h  #define lua_pushliteral(L, s)	lua_pushstring(L, "" s)</span>
<span class='curline'><a href='../S/1224.html#L363'>L</a>                 363 src/lua/lua.h  #define lua_pushglobaltable(L)  \</span>
<span class='curline'><a href='../S/1224.html#L364'>L</a>                 364 src/lua/lua.h  	((void)lua_rawgeti(L, LUA_REGISTRYINDEX, LUA_RIDX_GLOBALS))</span>
<span class='curline'><a href='../S/1224.html#L366'>L</a>                 366 src/lua/lua.h  #define lua_tostring(L,i)	lua_tolstring(L, (i), NULL)</span>
<span class='curline'><a href='../S/1224.html#L369'>L</a>                 369 src/lua/lua.h  #define lua_insert(L,idx)	lua_rotate(L, (idx), 1)</span>
<span class='curline'><a href='../S/1224.html#L371'>L</a>                 371 src/lua/lua.h  #define lua_remove(L,idx)	(lua_rotate(L, (idx), -1), lua_pop(L, 1))</span>
<span class='curline'><a href='../S/1224.html#L373'>L</a>                 373 src/lua/lua.h  #define lua_replace(L,idx)	(lua_copy(L, -1, (idx)), lua_pop(L, 1))</span>
<span class='curline'><a href='../S/1224.html#L385'>L</a>                 385 src/lua/lua.h  #define lua_pushunsigned(L,n)	lua_pushinteger(L, (lua_Integer)(n))</span>
<span class='curline'><a href='../S/1224.html#L386'>L</a>                 386 src/lua/lua.h  #define lua_tounsignedx(L,i,is)	((lua_Unsigned)lua_tointegerx(L,i,is))</span>
<span class='curline'><a href='../S/1224.html#L387'>L</a>                 387 src/lua/lua.h  #define lua_tounsigned(L,i)	lua_tounsignedx(L,(i),NULL)</span>
<span class='curline'><a href='../S/1224.html#L421'>L</a>                 421 src/lua/lua.h  typedef void (*lua_Hook) (lua_State *L, lua_Debug *ar);</span>
<span class='curline'><a href='../S/1224.html#L424'>L</a>                 424 src/lua/lua.h  LUA_API int (lua_getstack) (lua_State *L, int level, lua_Debug *ar);</span>
<span class='curline'><a href='../S/1224.html#L425'>L</a>                 425 src/lua/lua.h  LUA_API int (lua_getinfo) (lua_State *L, const char *what, lua_Debug *ar);</span>
<span class='curline'><a href='../S/1224.html#L426'>L</a>                 426 src/lua/lua.h  LUA_API const char *(lua_getlocal) (lua_State *L, const lua_Debug *ar, int n);</span>
<span class='curline'><a href='../S/1224.html#L427'>L</a>                 427 src/lua/lua.h  LUA_API const char *(lua_setlocal) (lua_State *L, const lua_Debug *ar, int n);</span>
<span class='curline'><a href='../S/1224.html#L428'>L</a>                 428 src/lua/lua.h  LUA_API const char *(lua_getupvalue) (lua_State *L, int funcindex, int n);</span>
<span class='curline'><a href='../S/1224.html#L429'>L</a>                 429 src/lua/lua.h  LUA_API const char *(lua_setupvalue) (lua_State *L, int funcindex, int n);</span>
<span class='curline'><a href='../S/1224.html#L431'>L</a>                 431 src/lua/lua.h  LUA_API void *(lua_upvalueid) (lua_State *L, int fidx, int n);</span>
<span class='curline'><a href='../S/1224.html#L432'>L</a>                 432 src/lua/lua.h  LUA_API void  (lua_upvaluejoin) (lua_State *L, int fidx1, int n1,</span>
<span class='curline'><a href='../S/1224.html#L435'>L</a>                 435 src/lua/lua.h  LUA_API void (lua_sethook) (lua_State *L, lua_Hook func, int mask, int count);</span>
<span class='curline'><a href='../S/1224.html#L436'>L</a>                 436 src/lua/lua.h  LUA_API lua_Hook (lua_gethook) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L437'>L</a>                 437 src/lua/lua.h  LUA_API int (lua_gethookmask) (lua_State *L);</span>
<span class='curline'><a href='../S/1224.html#L438'>L</a>                 438 src/lua/lua.h  LUA_API int (lua_gethookcount) (lua_State *L);</span>
<span class='curline'><a href='../S/1220.html#L353'>L</a>                 353 src/lua/luaconf.h #define lua_cpcall(L,f,u)  \</span>
<span class='curline'><a href='../S/1220.html#L354'>L</a>                 354 src/lua/luaconf.h 	(lua_pushcfunction(L, (f)), \</span>
<span class='curline'><a href='../S/1220.html#L355'>L</a>                 355 src/lua/luaconf.h 	 lua_pushlightuserdata(L,(u)), \</span>
<span class='curline'><a href='../S/1220.html#L356'>L</a>                 356 src/lua/luaconf.h 	 lua_pcall(L,1,0,0))</span>
<span class='curline'><a href='../S/1220.html#L381'>L</a>                 381 src/lua/luaconf.h #define lua_strlen(L,i)		lua_rawlen(L, (i))</span>
<span class='curline'><a href='../S/1220.html#L383'>L</a>                 383 src/lua/luaconf.h #define lua_objlen(L,i)		lua_rawlen(L, (i))</span>
<span class='curline'><a href='../S/1220.html#L385'>L</a>                 385 src/lua/luaconf.h #define lua_equal(L,idx1,idx2)		lua_compare(L,(idx1),(idx2),LUA_OPEQ)</span>
<span class='curline'><a href='../S/1220.html#L386'>L</a>                 386 src/lua/luaconf.h #define lua_lessthan(L,idx1,idx2)	lua_compare(L,(idx1),(idx2),LUA_OPLT)</span>
<span class='curline'><a href='../S/1220.html#L630'>L</a>                 630 src/lua/luaconf.h #define lua_number2strx(L,b,sz,f,n)  \</span>
<span class='curline'><a href='../S/1220.html#L631'>L</a>                 631 src/lua/luaconf.h 	((void)L, l_sprintf(b,sz,f,(LUAI_UACNUMBER)(n)))</span>
<span class='curline'><a href='../S/1207.html#L18'>L</a>                  18 src/lua/lualib.h LUAMOD_API int (luaopen_base) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L21'>L</a>                  21 src/lua/lualib.h LUAMOD_API int (luaopen_coroutine) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L24'>L</a>                  24 src/lua/lualib.h LUAMOD_API int (luaopen_table) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L27'>L</a>                  27 src/lua/lualib.h LUAMOD_API int (luaopen_io) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L30'>L</a>                  30 src/lua/lualib.h LUAMOD_API int (luaopen_os) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L33'>L</a>                  33 src/lua/lualib.h LUAMOD_API int (luaopen_string) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L36'>L</a>                  36 src/lua/lualib.h LUAMOD_API int (luaopen_utf8) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L39'>L</a>                  39 src/lua/lualib.h LUAMOD_API int (luaopen_bit32) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L42'>L</a>                  42 src/lua/lualib.h LUAMOD_API int (luaopen_math) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L45'>L</a>                  45 src/lua/lualib.h LUAMOD_API int (luaopen_debug) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L48'>L</a>                  48 src/lua/lualib.h LUAMOD_API int (luaopen_package) (lua_State *L);</span>
<span class='curline'><a href='../S/1207.html#L52'>L</a>                  52 src/lua/lualib.h LUALIB_API void (luaL_openlibs) (lua_State *L);</span>
<span class='curline'><a href='../S/1200.html#L28'>L</a>                  28 src/lua/lundump.cpp #define luai_verifycode(L,b,f)  /* empty */</span>
<span class='curline'><a href='../S/1200.html#L33'>L</a>                  33 src/lua/lundump.cpp   lua_State *L;</span>
<span class='curline'><a href='../S/1200.html#L40'>L</a>                  40 src/lua/lundump.cpp   luaO_pushfstring(S-&gt;L, "%s: %s precompiled chunk", S-&gt;name, why);</span>
<span class='curline'><a href='../S/1200.html#L41'>L</a>                  41 src/lua/lundump.cpp   luaD_throw(S-&gt;L, LUA_ERRSYNTAX);</span>
<span class='curline'><a href='../S/1200.html#L97'>L</a>                  97 src/lua/lundump.cpp     return luaS_newlstr(S-&gt;L, buff, size);</span>
<span class='curline'><a href='../S/1200.html#L100'>L</a>                 100 src/lua/lundump.cpp     TString *ts = luaS_createlngstrobj(S-&gt;L, size);</span>
<span class='curline'><a href='../S/1200.html#L109'>L</a>                 109 src/lua/lundump.cpp   f-&gt;code = luaM_newvector(S-&gt;L, n, Instruction);</span>
<span class='curline'><a href='../S/1200.html#L121'>L</a>                 121 src/lua/lundump.cpp   f-&gt;k = luaM_newvector(S-&gt;L, n, TValue);</span>
<span class='curline'><a href='../S/1200.html#L143'>L</a>                 143 src/lua/lundump.cpp       setsvalue2n(S-&gt;L, o, LoadString(S));</span>
<span class='curline'><a href='../S/1200.html#L155'>L</a>                 155 src/lua/lundump.cpp   f-&gt;p = luaM_newvector(S-&gt;L, n, Proto *);</span>
<span class='curline'><a href='../S/1200.html#L160'>L</a>                 160 src/lua/lundump.cpp     f-&gt;p[i] = luaF_newproto(S-&gt;L);</span>
<span class='curline'><a href='../S/1200.html#L169'>L</a>                 169 src/lua/lundump.cpp   f-&gt;upvalues = luaM_newvector(S-&gt;L, n, Upvaldesc);</span>
<span class='curline'><a href='../S/1200.html#L183'>L</a>                 183 src/lua/lundump.cpp   f-&gt;lineinfo = luaM_newvector(S-&gt;L, n, int);</span>
<span class='curline'><a href='../S/1200.html#L187'>L</a>                 187 src/lua/lundump.cpp   f-&gt;locvars = luaM_newvector(S-&gt;L, n, LocVar);</span>
<span class='curline'><a href='../S/1200.html#L230'>L</a>                 230 src/lua/lundump.cpp     error(S, luaO_pushfstring(S-&gt;L, "%s size mismatch in", tname));</span>
<span class='curline'><a href='../S/1200.html#L258'>L</a>                 258 src/lua/lundump.cpp LClosure *luaU_undump(lua_State *L, ZIO *Z, const char *name) {</span>
<span class='curline'><a href='../S/1200.html#L267'>L</a>                 267 src/lua/lundump.cpp   S.L = L;</span>
<span class='curline'><a href='../S/1200.html#L270'>L</a>                 270 src/lua/lundump.cpp   cl = luaF_newLclosure(L, LoadByte(&amp;S));</span>
<span class='curline'><a href='../S/1200.html#L271'>L</a>                 271 src/lua/lundump.cpp   setclLvalue(L, L-&gt;top, cl);</span>
<span class='curline'><a href='../S/1200.html#L272'>L</a>                 272 src/lua/lundump.cpp   luaD_inctop(L);</span>
<span class='curline'><a href='../S/1200.html#L273'>L</a>                 273 src/lua/lundump.cpp   cl-&gt;p = luaF_newproto(L);</span>
<span class='curline'><a href='../S/1200.html#L276'>L</a>                 276 src/lua/lundump.cpp   luai_verifycode(L, buff, cl-&gt;p);</span>
<span class='curline'><a href='../S/1179.html#L26'>L</a>                  26 src/lua/lundump.h LUAI_FUNC LClosure* luaU_undump (lua_State* L, ZIO* Z, const char* name);</span>
<span class='curline'><a href='../S/1179.html#L29'>L</a>                  29 src/lua/lundump.h LUAI_FUNC int luaU_dump (lua_State* L, const Proto* f, lua_Writer w,</span>
<span class='curline'><a href='../S/1170.html#L71'>L</a>                  71 src/lua/lutf8lib.cpp static int utflen (lua_State *L) {</span>
<span class='curline'><a href='../S/1170.html#L74'>L</a>                  74 src/lua/lutf8lib.cpp   const char *s = luaL_checklstring(L, 1, &amp;len);</span>
<span class='curline'><a href='../S/1170.html#L75'>L</a>                  75 src/lua/lutf8lib.cpp   lua_Integer posi = u_posrelat(luaL_optinteger(L, 2, 1), len);</span>
<span class='curline'><a href='../S/1170.html#L76'>L</a>                  76 src/lua/lutf8lib.cpp   lua_Integer posj = u_posrelat(luaL_optinteger(L, 3, -1), len);</span>
<span class='curline'><a href='../S/1170.html#L77'>L</a>                  77 src/lua/lutf8lib.cpp   luaL_argcheck(L, 1 &lt;= posi &amp;&amp; --posi &lt;= (lua_Integer)len, 2,</span>
<span class='curline'><a href='../S/1170.html#L79'>L</a>                  79 src/lua/lutf8lib.cpp   luaL_argcheck(L, --posj &lt; (lua_Integer)len, 3,</span>
<span class='curline'><a href='../S/1170.html#L84'>L</a>                  84 src/lua/lutf8lib.cpp       lua_pushnil(L);  /* return nil ... */</span>
<span class='curline'><a href='../S/1170.html#L85'>L</a>                  85 src/lua/lutf8lib.cpp       lua_pushinteger(L, posi + 1);  /* ... and current position */</span>
<span class='curline'><a href='../S/1170.html#L91'>L</a>                  91 src/lua/lutf8lib.cpp   lua_pushinteger(L, n);</span>
<span class='curline'><a href='../S/1170.html#L100'>L</a>                 100 src/lua/lutf8lib.cpp static int codepoint (lua_State *L) {</span>
<span class='curline'><a href='../S/1170.html#L102'>L</a>                 102 src/lua/lutf8lib.cpp   const char *s = luaL_checklstring(L, 1, &amp;len);</span>
<span class='curline'><a href='../S/1170.html#L103'>L</a>                 103 src/lua/lutf8lib.cpp   lua_Integer posi = u_posrelat(luaL_optinteger(L, 2, 1), len);</span>
<span class='curline'><a href='../S/1170.html#L104'>L</a>                 104 src/lua/lutf8lib.cpp   lua_Integer pose = u_posrelat(luaL_optinteger(L, 3, posi), len);</span>
<span class='curline'><a href='../S/1170.html#L107'>L</a>                 107 src/lua/lutf8lib.cpp   luaL_argcheck(L, posi &gt;= 1, 2, "out of range");</span>
<span class='curline'><a href='../S/1170.html#L108'>L</a>                 108 src/lua/lutf8lib.cpp   luaL_argcheck(L, pose &lt;= (lua_Integer)len, 3, "out of range");</span>
<span class='curline'><a href='../S/1170.html#L111'>L</a>                 111 src/lua/lutf8lib.cpp     return luaL_error(L, "string slice too long");</span>
<span class='curline'><a href='../S/1170.html#L113'>L</a>                 113 src/lua/lutf8lib.cpp   luaL_checkstack(L, n, "string slice too long");</span>
<span class='curline'><a href='../S/1170.html#L120'>L</a>                 120 src/lua/lutf8lib.cpp       return luaL_error(L, "invalid UTF-8 code");</span>
<span class='curline'><a href='../S/1170.html#L121'>L</a>                 121 src/lua/lutf8lib.cpp     lua_pushinteger(L, code);</span>
<span class='curline'><a href='../S/1170.html#L128'>L</a>                 128 src/lua/lutf8lib.cpp static void pushutfchar (lua_State *L, int arg) {</span>
<span class='curline'><a href='../S/1170.html#L129'>L</a>                 129 src/lua/lutf8lib.cpp   lua_Integer code = luaL_checkinteger(L, arg);</span>
<span class='curline'><a href='../S/1170.html#L130'>L</a>                 130 src/lua/lutf8lib.cpp   luaL_argcheck(L, 0 &lt;= code &amp;&amp; code &lt;= MAXUNICODE, arg, "value out of range");</span>
<span class='curline'><a href='../S/1170.html#L131'>L</a>                 131 src/lua/lutf8lib.cpp   lua_pushfstring(L, "%U", (long)code);</span>
<span class='curline'><a href='../S/1170.html#L138'>L</a>                 138 src/lua/lutf8lib.cpp static int utfchar (lua_State *L) {</span>
<span class='curline'><a href='../S/1170.html#L139'>L</a>                 139 src/lua/lutf8lib.cpp   int n = lua_gettop(L);  /* number of arguments */</span>
<span class='curline'><a href='../S/1170.html#L141'>L</a>                 141 src/lua/lutf8lib.cpp     pushutfchar(L, 1);</span>
<span class='curline'><a href='../S/1170.html#L145'>L</a>                 145 src/lua/lutf8lib.cpp     luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/1170.html#L147'>L</a>                 147 src/lua/lutf8lib.cpp       pushutfchar(L, i);</span>
<span class='curline'><a href='../S/1170.html#L160'>L</a>                 160 src/lua/lutf8lib.cpp static int byteoffset (lua_State *L) {</span>
<span class='curline'><a href='../S/1170.html#L162'>L</a>                 162 src/lua/lutf8lib.cpp   const char *s = luaL_checklstring(L, 1, &amp;len);</span>
<span class='curline'><a href='../S/1170.html#L163'>L</a>                 163 src/lua/lutf8lib.cpp   lua_Integer n  = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/1170.html#L165'>L</a>                 165 src/lua/lutf8lib.cpp   posi = u_posrelat(luaL_optinteger(L, 3, posi), len);</span>
<span class='curline'><a href='../S/1170.html#L166'>L</a>                 166 src/lua/lutf8lib.cpp   luaL_argcheck(L, 1 &lt;= posi &amp;&amp; --posi &lt;= (lua_Integer)len, 3,</span>
<span class='curline'><a href='../S/1170.html#L174'>L</a>                 174 src/lua/lutf8lib.cpp       luaL_error(L, "initial position is a continuation byte");</span>
<span class='curline'><a href='../S/1170.html#L194'>L</a>                 194 src/lua/lutf8lib.cpp     lua_pushinteger(L, posi + 1);</span>
<span class='curline'><a href='../S/1170.html#L196'>L</a>                 196 src/lua/lutf8lib.cpp     lua_pushnil(L);</span>
<span class='curline'><a href='../S/1170.html#L201'>L</a>                 201 src/lua/lutf8lib.cpp static int iter_aux (lua_State *L) {</span>
<span class='curline'><a href='../S/1170.html#L203'>L</a>                 203 src/lua/lutf8lib.cpp   const char *s = luaL_checklstring(L, 1, &amp;len);</span>
<span class='curline'><a href='../S/1170.html#L204'>L</a>                 204 src/lua/lutf8lib.cpp   lua_Integer n = lua_tointeger(L, 2) - 1;</span>
<span class='curline'><a href='../S/1170.html#L217'>L</a>                 217 src/lua/lutf8lib.cpp       return luaL_error(L, "invalid UTF-8 code");</span>
<span class='curline'><a href='../S/1170.html#L218'>L</a>                 218 src/lua/lutf8lib.cpp     lua_pushinteger(L, n + 1);</span>
<span class='curline'><a href='../S/1170.html#L219'>L</a>                 219 src/lua/lutf8lib.cpp     lua_pushinteger(L, code);</span>
<span class='curline'><a href='../S/1170.html#L225'>L</a>                 225 src/lua/lutf8lib.cpp static int iter_codes (lua_State *L) {</span>
<span class='curline'><a href='../S/1170.html#L226'>L</a>                 226 src/lua/lutf8lib.cpp   luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/1170.html#L227'>L</a>                 227 src/lua/lutf8lib.cpp   lua_pushcfunction(L, iter_aux);</span>
<span class='curline'><a href='../S/1170.html#L228'>L</a>                 228 src/lua/lutf8lib.cpp   lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/1170.html#L229'>L</a>                 229 src/lua/lutf8lib.cpp   lua_pushinteger(L, 0);</span>
<span class='curline'><a href='../S/1170.html#L250'>L</a>                 250 src/lua/lutf8lib.cpp LUAMOD_API int luaopen_utf8 (lua_State *L) {</span>
<span class='curline'><a href='../S/1170.html#L251'>L</a>                 251 src/lua/lutf8lib.cpp   luaL_newlib(L, funcs);</span>
<span class='curline'><a href='../S/1170.html#L252'>L</a>                 252 src/lua/lutf8lib.cpp   lua_pushlstring(L, UTF8PATT, sizeof(UTF8PATT)/sizeof(char) - 1);</span>
<span class='curline'><a href='../S/1170.html#L253'>L</a>                 253 src/lua/lutf8lib.cpp   lua_setfield(L, -2, "charpattern");</span>
<span class='curline'><a href='../S/1182.html#L160'>L</a>                 160 src/lua/lvm.cpp void luaV_finishget (lua_State *L, const TValue *t, TValue *key, StkId val,</span>
<span class='curline'><a href='../S/1182.html#L167'>L</a>                 167 src/lua/lvm.cpp       tm = luaT_gettmbyobj(L, t, TM_INDEX);</span>
<span class='curline'><a href='../S/1182.html#L169'>L</a>                 169 src/lua/lvm.cpp         luaG_typeerror(L, t, "index");  /* no metamethod */</span>
<span class='curline'><a href='../S/1182.html#L174'>L</a>                 174 src/lua/lvm.cpp       tm = fasttm(L, hvalue(t)-&gt;metatable, TM_INDEX);  /* table's metamethod */</span>
<span class='curline'><a href='../S/1182.html#L182'>L</a>                 182 src/lua/lvm.cpp       luaT_callTM(L, tm, t, key, val, 1);  /* call it */</span>
<span class='curline'><a href='../S/1182.html#L186'>L</a>                 186 src/lua/lvm.cpp     if (luaV_fastget(L,t,key,slot,luaH_get)) {  /* fast track? */</span>
<span class='curline'><a href='../S/1182.html#L187'>L</a>                 187 src/lua/lvm.cpp       setobj2s(L, val, slot);  /* done */</span>
<span class='curline'><a href='../S/1182.html#L192'>L</a>                 192 src/lua/lvm.cpp   luaG_runerror(L, "'__index' chain too long; possible loop");</span>
<span class='curline'><a href='../S/1182.html#L203'>L</a>                 203 src/lua/lvm.cpp void luaV_finishset (lua_State *L, const TValue *t, TValue *key,</span>
<span class='curline'><a href='../S/1182.html#L211'>L</a>                 211 src/lua/lvm.cpp       tm = fasttm(L, h-&gt;metatable, TM_NEWINDEX);  /* get metamethod */</span>
<span class='curline'><a href='../S/1182.html#L214'>L</a>                 214 src/lua/lvm.cpp           slot = luaH_newkey(L, h, key);  /* create one */</span>
<span class='curline'><a href='../S/1182.html#L216'>L</a>                 216 src/lua/lvm.cpp         setobj2t(L, cast(TValue *, slot), val);  /* set its new value */</span>
<span class='curline'><a href='../S/1182.html#L218'>L</a>                 218 src/lua/lvm.cpp         luaC_barrierback(L, h, val);</span>
<span class='curline'><a href='../S/1182.html#L224'>L</a>                 224 src/lua/lvm.cpp       if (ttisnil(tm = luaT_gettmbyobj(L, t, TM_NEWINDEX)))</span>
<span class='curline'><a href='../S/1182.html#L225'>L</a>                 225 src/lua/lvm.cpp         luaG_typeerror(L, t, "index");</span>
<span class='curline'><a href='../S/1182.html#L229'>L</a>                 229 src/lua/lvm.cpp       luaT_callTM(L, tm, t, key, val, 0);</span>
<span class='curline'><a href='../S/1182.html#L233'>L</a>                 233 src/lua/lvm.cpp     if (luaV_fastset(L, t, key, slot, luaH_get, val))</span>
<span class='curline'><a href='../S/1182.html#L237'>L</a>                 237 src/lua/lvm.cpp   luaG_runerror(L, "'__newindex' chain too long; possible loop");</span>
<span class='curline'><a href='../S/1182.html#L364'>L</a>                 364 src/lua/lvm.cpp int luaV_lessthan (lua_State *L, const TValue *l, const TValue *r) {</span>
<span class='curline'><a href='../S/1182.html#L370'>L</a>                 370 src/lua/lvm.cpp   else if ((res = luaT_callorderTM(L, l, r, TM_LT)) &lt; 0)  /* no metamethod? */</span>
<span class='curline'><a href='../S/1182.html#L371'>L</a>                 371 src/lua/lvm.cpp     luaG_ordererror(L, l, r);  /* error */</span>
<span class='curline'><a href='../S/1182.html#L384'>L</a>                 384 src/lua/lvm.cpp int luaV_lessequal (lua_State *L, const TValue *l, const TValue *r) {</span>
<span class='curline'><a href='../S/1182.html#L390'>L</a>                 390 src/lua/lvm.cpp   else if ((res = luaT_callorderTM(L, l, r, TM_LE)) &gt;= 0)  /* try 'le' */</span>
<span class='curline'><a href='../S/1182.html#L393'>L</a>                 393 src/lua/lvm.cpp     L-&gt;ci-&gt;callstatus |= CIST_LEQ;  /* mark it is doing 'lt' for 'le' */</span>
<span class='curline'><a href='../S/1182.html#L394'>L</a>                 394 src/lua/lvm.cpp     res = luaT_callorderTM(L, r, l, TM_LT);</span>
<span class='curline'><a href='../S/1182.html#L395'>L</a>                 395 src/lua/lvm.cpp     L-&gt;ci-&gt;callstatus ^= CIST_LEQ;  /* clear mark */</span>
<span class='curline'><a href='../S/1182.html#L397'>L</a>                 397 src/lua/lvm.cpp       luaG_ordererror(L, l, r);</span>
<span class='curline'><a href='../S/1182.html#L407'>L</a>                 407 src/lua/lvm.cpp int luaV_equalobj (lua_State *L, const TValue *t1, const TValue *t2) {</span>
<span class='curline'><a href='../S/1182.html#L429'>L</a>                 429 src/lua/lvm.cpp       else if (L == NULL) return 0;</span>
<span class='curline'><a href='../S/1182.html#L430'>L</a>                 430 src/lua/lvm.cpp       tm = fasttm(L, uvalue(t1)-&gt;metatable, TM_EQ);</span>
<span class='curline'><a href='../S/1182.html#L432'>L</a>                 432 src/lua/lvm.cpp         tm = fasttm(L, uvalue(t2)-&gt;metatable, TM_EQ);</span>
<span class='curline'><a href='../S/1182.html#L437'>L</a>                 437 src/lua/lvm.cpp       else if (L == NULL) return 0;</span>
<span class='curline'><a href='../S/1182.html#L438'>L</a>                 438 src/lua/lvm.cpp       tm = fasttm(L, hvalue(t1)-&gt;metatable, TM_EQ);</span>
<span class='curline'><a href='../S/1182.html#L440'>L</a>                 440 src/lua/lvm.cpp         tm = fasttm(L, hvalue(t2)-&gt;metatable, TM_EQ);</span>
<span class='curline'><a href='../S/1182.html#L448'>L</a>                 448 src/lua/lvm.cpp   luaT_callTM(L, tm, t1, t2, L-&gt;top, 1);  /* call TM */</span>
<span class='curline'><a href='../S/1182.html#L449'>L</a>                 449 src/lua/lvm.cpp   return !l_isfalse(L-&gt;top);</span>
<span class='curline'><a href='../S/1182.html#L454'>L</a>                 454 src/lua/lvm.cpp #define tostring(L,o)  \</span>
<span class='curline'><a href='../S/1182.html#L455'>L</a>                 455 src/lua/lvm.cpp 	(ttisstring(o) || (cvt2str(o) &amp;&amp; (luaO_tostring(L, o), 1)))</span>
<span class='curline'><a href='../S/1182.html#L474'>L</a>                 474 src/lua/lvm.cpp void luaV_concat (lua_State *L, int total) {</span>
<span class='curline'><a href='../S/1182.html#L477'>L</a>                 477 src/lua/lvm.cpp     StkId top = L-&gt;top;</span>
<span class='curline'><a href='../S/1182.html#L479'>L</a>                 479 src/lua/lvm.cpp     if (!(ttisstring(top-2) || cvt2str(top-2)) || !tostring(L, top-1))</span>
<span class='curline'><a href='../S/1182.html#L480'>L</a>                 480 src/lua/lvm.cpp       luaT_trybinTM(L, top-2, top-1, top-2, TM_CONCAT);</span>
<span class='curline'><a href='../S/1182.html#L482'>L</a>                 482 src/lua/lvm.cpp       cast_void(tostring(L, top - 2));  /* result is first operand */</span>
<span class='curline'><a href='../S/1182.html#L484'>L</a>                 484 src/lua/lvm.cpp       setobjs2s(L, top - 2, top - 1);  /* result is second op. */</span>
<span class='curline'><a href='../S/1182.html#L491'>L</a>                 491 src/lua/lvm.cpp       for (n = 1; n &lt; total &amp;&amp; tostring(L, top - n - 1); n++) {</span>
<span class='curline'><a href='../S/1182.html#L494'>L</a>                 494 src/lua/lvm.cpp           luaG_runerror(L, "string length overflow");</span>
<span class='curline'><a href='../S/1182.html#L500'>L</a>                 500 src/lua/lvm.cpp         ts = luaS_newlstr(L, buff, tl);</span>
<span class='curline'><a href='../S/1182.html#L503'>L</a>                 503 src/lua/lvm.cpp         ts = luaS_createlngstrobj(L, tl);</span>
<span class='curline'><a href='../S/1182.html#L506'>L</a>                 506 src/lua/lvm.cpp       setsvalue2s(L, top - n, ts);  /* create result */</span>
<span class='curline'><a href='../S/1182.html#L509'>L</a>                 509 src/lua/lvm.cpp     L-&gt;top -= n-1;  /* popped 'n' strings and pushed one */</span>
<span class='curline'><a href='../S/1182.html#L517'>L</a>                 517 src/lua/lvm.cpp void luaV_objlen (lua_State *L, StkId ra, const TValue *rb) {</span>
<span class='curline'><a href='../S/1182.html#L522'>L</a>                 522 src/lua/lvm.cpp       tm = fasttm(L, h-&gt;metatable, TM_LEN);</span>
<span class='curline'><a href='../S/1182.html#L536'>L</a>                 536 src/lua/lvm.cpp       tm = luaT_gettmbyobj(L, rb, TM_LEN);</span>
<span class='curline'><a href='../S/1182.html#L538'>L</a>                 538 src/lua/lvm.cpp         luaG_typeerror(L, rb, "get length of");</span>
<span class='curline'><a href='../S/1182.html#L542'>L</a>                 542 src/lua/lvm.cpp   luaT_callTM(L, tm, rb, rb, ra, 1);</span>
<span class='curline'><a href='../S/1182.html#L552'>L</a>                 552 src/lua/lvm.cpp lua_Integer luaV_div (lua_State *L, lua_Integer m, lua_Integer n) {</span>
<span class='curline'><a href='../S/1182.html#L555'>L</a>                 555 src/lua/lvm.cpp       luaG_runerror(L, "attempt to divide by zero");</span>
<span class='curline'><a href='../S/1182.html#L572'>L</a>                 572 src/lua/lvm.cpp lua_Integer luaV_mod (lua_State *L, lua_Integer m, lua_Integer n) {</span>
<span class='curline'><a href='../S/1182.html#L575'>L</a>                 575 src/lua/lvm.cpp       luaG_runerror(L, "attempt to perform 'n%%0'");</span>
<span class='curline'><a href='../S/1182.html#L632'>L</a>                 632 src/lua/lvm.cpp static void pushclosure (lua_State *L, Proto *p, UpVal **encup, StkId base,</span>
<span class='curline'><a href='../S/1182.html#L637'>L</a>                 637 src/lua/lvm.cpp   LClosure *ncl = luaF_newLclosure(L, nup);</span>
<span class='curline'><a href='../S/1182.html#L639'>L</a>                 639 src/lua/lvm.cpp   setclLvalue(L, ra, ncl);  /* anchor new closure in stack */</span>
<span class='curline'><a href='../S/1182.html#L642'>L</a>                 642 src/lua/lvm.cpp       ncl-&gt;upvals[i] = luaF_findupval(L, base + uv[i].idx);</span>
<span class='curline'><a href='../S/1182.html#L656'>L</a>                 656 src/lua/lvm.cpp void luaV_finishOp (lua_State *L) {</span>
<span class='curline'><a href='../S/1182.html#L657'>L</a>                 657 src/lua/lvm.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1182.html#L667'>L</a>                 667 src/lua/lvm.cpp       setobjs2s(L, base + GETARG_A(inst), --L-&gt;top);</span>
<span class='curline'><a href='../S/1182.html#L671'>L</a>                 671 src/lua/lvm.cpp       int res = !l_isfalse(L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1182.html#L672'>L</a>                 672 src/lua/lvm.cpp       L-&gt;top--;</span>
<span class='curline'><a href='../S/1182.html#L684'>L</a>                 684 src/lua/lvm.cpp       StkId top = L-&gt;top - 1;  /* top when 'luaT_trybinTM' was called */</span>
<span class='curline'><a href='../S/1182.html#L687'>L</a>                 687 src/lua/lvm.cpp       setobj2s(L, top - 2, top);  /* put TM result in proper position */</span>
<span class='curline'><a href='../S/1182.html#L689'>L</a>                 689 src/lua/lvm.cpp         L-&gt;top = top - 1;  /* top is one after last element (at top-2) */</span>
<span class='curline'><a href='../S/1182.html#L690'>L</a>                 690 src/lua/lvm.cpp         luaV_concat(L, total);  /* concat them (may yield again) */</span>
<span class='curline'><a href='../S/1182.html#L693'>L</a>                 693 src/lua/lvm.cpp       setobj2s(L, ci-&gt;u.l.base + GETARG_A(inst), L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1182.html#L694'>L</a>                 694 src/lua/lvm.cpp       L-&gt;top = ci-&gt;top;  /* restore top */</span>
<span class='curline'><a href='../S/1182.html#L699'>L</a>                 699 src/lua/lvm.cpp       L-&gt;top = ci-&gt;top;  /* correct top */</span>
<span class='curline'><a href='../S/1182.html#L704'>L</a>                 704 src/lua/lvm.cpp         L-&gt;top = ci-&gt;top;  /* adjust results */</span>
<span class='curline'><a href='../S/1182.html#L740'>L</a>                 740 src/lua/lvm.cpp     if (a != 0) luaF_close(L, ci-&gt;u.l.base + a - 1); \</span>
<span class='curline'><a href='../S/1182.html#L749'>L</a>                 749 src/lua/lvm.cpp #define checkGC(L,c)  \</span>
<span class='curline'><a href='../S/1182.html#L750'>L</a>                 750 src/lua/lvm.cpp 	{ luaC_condGC(L, L-&gt;top = (c),  /* limit of live values */ \</span>
<span class='curline'><a href='../S/1182.html#L751'>L</a>                 751 src/lua/lvm.cpp                          Protect(L-&gt;top = ci-&gt;top));  /* restore top */ \</span>
<span class='curline'><a href='../S/1182.html#L752'>L</a>                 752 src/lua/lvm.cpp            luai_threadyield(L); }</span>
<span class='curline'><a href='../S/1182.html#L758'>L</a>                 758 src/lua/lvm.cpp   if (L-&gt;hookmask &amp; (LUA_MASKLINE | LUA_MASKCOUNT)) \</span>
<span class='curline'><a href='../S/1182.html#L759'>L</a>                 759 src/lua/lvm.cpp     Protect(luaG_traceexec(L)); \</span>
<span class='curline'><a href='../S/1182.html#L762'>L</a>                 762 src/lua/lvm.cpp   lua_assert(base &lt;= L-&gt;top &amp;&amp; L-&gt;top &lt; L-&gt;stack + L-&gt;stacksize); \</span>
<span class='curline'><a href='../S/1182.html#L774'>L</a>                 774 src/lua/lvm.cpp #define gettableProtected(L,t,k,v)  { const TValue *slot; \</span>
<span class='curline'><a href='../S/1182.html#L775'>L</a>                 775 src/lua/lvm.cpp   if (luaV_fastget(L,t,k,slot,luaH_get)) { setobj2s(L, v, slot); } \</span>
<span class='curline'><a href='../S/1182.html#L776'>L</a>                 776 src/lua/lvm.cpp   else Protect(luaV_finishget(L,t,k,v,slot)); }</span>
<span class='curline'><a href='../S/1182.html#L780'>L</a>                 780 src/lua/lvm.cpp #define settableProtected(L,t,k,v) { const TValue *slot; \</span>
<span class='curline'><a href='../S/1182.html#L781'>L</a>                 781 src/lua/lvm.cpp   if (!luaV_fastset(L,t,k,slot,luaH_get,v)) \</span>
<span class='curline'><a href='../S/1182.html#L782'>L</a>                 782 src/lua/lvm.cpp     Protect(luaV_finishset(L,t,k,v,slot)); }</span>
<span class='curline'><a href='../S/1182.html#L786'>L</a>                 786 src/lua/lvm.cpp void luaV_execute (lua_State *L) {</span>
<span class='curline'><a href='../S/1182.html#L787'>L</a>                 787 src/lua/lvm.cpp   CallInfo *ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1182.html#L793'>L</a>                 793 src/lua/lvm.cpp   lua_assert(ci == L-&gt;ci);</span>
<span class='curline'><a href='../S/1182.html#L804'>L</a>                 804 src/lua/lvm.cpp         setobjs2s(L, ra, RB(i));</span>
<span class='curline'><a href='../S/1182.html#L809'>L</a>                 809 src/lua/lvm.cpp         setobj2s(L, ra, rb);</span>
<span class='curline'><a href='../S/1182.html#L816'>L</a>                 816 src/lua/lvm.cpp         setobj2s(L, ra, rb);</span>
<span class='curline'><a href='../S/1182.html#L833'>L</a>                 833 src/lua/lvm.cpp         setobj2s(L, ra, cl-&gt;upvals[b]-&gt;v);</span>
<span class='curline'><a href='../S/1182.html#L839'>L</a>                 839 src/lua/lvm.cpp         gettableProtected(L, upval, rc, ra);</span>
<span class='curline'><a href='../S/1182.html#L845'>L</a>                 845 src/lua/lvm.cpp         gettableProtected(L, rb, rc, ra);</span>
<span class='curline'><a href='../S/1182.html#L852'>L</a>                 852 src/lua/lvm.cpp         settableProtected(L, upval, rb, rc);</span>
<span class='curline'><a href='../S/1182.html#L857'>L</a>                 857 src/lua/lvm.cpp         setobj(L, uv-&gt;v, ra);</span>
<span class='curline'><a href='../S/1182.html#L858'>L</a>                 858 src/lua/lvm.cpp         luaC_upvalbarrier(L, uv);</span>
<span class='curline'><a href='../S/1182.html#L864'>L</a>                 864 src/lua/lvm.cpp         settableProtected(L, ra, rb, rc);</span>
<span class='curline'><a href='../S/1182.html#L870'>L</a>                 870 src/lua/lvm.cpp         Table *t = luaH_new(L);</span>
<span class='curline'><a href='../S/1182.html#L871'>L</a>                 871 src/lua/lvm.cpp         sethvalue(L, ra, t);</span>
<span class='curline'><a href='../S/1182.html#L873'>L</a>                 873 src/lua/lvm.cpp           luaH_resize(L, t, luaO_fb2int(b), luaO_fb2int(c));</span>
<span class='curline'><a href='../S/1182.html#L874'>L</a>                 874 src/lua/lvm.cpp         checkGC(L, ra + 1);</span>
<span class='curline'><a href='../S/1182.html#L882'>L</a>                 882 src/lua/lvm.cpp         setobjs2s(L, ra + 1, rb);</span>
<span class='curline'><a href='../S/1182.html#L883'>L</a>                 883 src/lua/lvm.cpp         if (luaV_fastget(L, rb, key, aux, luaH_getstr)) {</span>
<span class='curline'><a href='../S/1182.html#L884'>L</a>                 884 src/lua/lvm.cpp           setobj2s(L, ra, aux);</span>
<span class='curline'><a href='../S/1182.html#L886'>L</a>                 886 src/lua/lvm.cpp         else Protect(luaV_finishget(L, rb, rc, ra, aux));</span>
<span class='curline'><a href='../S/1182.html#L898'>L</a>                 898 src/lua/lvm.cpp           setfltvalue(ra, luai_numadd(L, nb, nc));</span>
<span class='curline'><a href='../S/1182.html#L900'>L</a>                 900 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_ADD)); }</span>
<span class='curline'><a href='../S/1182.html#L912'>L</a>                 912 src/lua/lvm.cpp           setfltvalue(ra, luai_numsub(L, nb, nc));</span>
<span class='curline'><a href='../S/1182.html#L914'>L</a>                 914 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_SUB)); }</span>
<span class='curline'><a href='../S/1182.html#L926'>L</a>                 926 src/lua/lvm.cpp           setfltvalue(ra, luai_nummul(L, nb, nc));</span>
<span class='curline'><a href='../S/1182.html#L928'>L</a>                 928 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_MUL)); }</span>
<span class='curline'><a href='../S/1182.html#L936'>L</a>                 936 src/lua/lvm.cpp           setfltvalue(ra, luai_numdiv(L, nb, nc));</span>
<span class='curline'><a href='../S/1182.html#L938'>L</a>                 938 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_DIV)); }</span>
<span class='curline'><a href='../S/1182.html#L948'>L</a>                 948 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_BAND)); }</span>
<span class='curline'><a href='../S/1182.html#L958'>L</a>                 958 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_BOR)); }</span>
<span class='curline'><a href='../S/1182.html#L968'>L</a>                 968 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_BXOR)); }</span>
<span class='curline'><a href='../S/1182.html#L978'>L</a>                 978 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_SHL)); }</span>
<span class='curline'><a href='../S/1182.html#L988'>L</a>                 988 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_SHR)); }</span>
<span class='curline'><a href='../S/1182.html#L997'>L</a>                 997 src/lua/lvm.cpp           setivalue(ra, luaV_mod(L, ib, ic));</span>
<span class='curline'><a href='../S/1182.html#L1001'>L</a>                1001 src/lua/lvm.cpp           luai_nummod(L, nb, nc, m);</span>
<span class='curline'><a href='../S/1182.html#L1004'>L</a>                1004 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_MOD)); }</span>
<span class='curline'><a href='../S/1182.html#L1013'>L</a>                1013 src/lua/lvm.cpp           setivalue(ra, luaV_div(L, ib, ic));</span>
<span class='curline'><a href='../S/1182.html#L1016'>L</a>                1016 src/lua/lvm.cpp           setfltvalue(ra, luai_numidiv(L, nb, nc));</span>
<span class='curline'><a href='../S/1182.html#L1018'>L</a>                1018 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_IDIV)); }</span>
<span class='curline'><a href='../S/1182.html#L1026'>L</a>                1026 src/lua/lvm.cpp           setfltvalue(ra, luai_numpow(L, nb, nc));</span>
<span class='curline'><a href='../S/1182.html#L1028'>L</a>                1028 src/lua/lvm.cpp         else { Protect(luaT_trybinTM(L, rb, rc, ra, TM_POW)); }</span>
<span class='curline'><a href='../S/1182.html#L1039'>L</a>                1039 src/lua/lvm.cpp           setfltvalue(ra, luai_numunm(L, nb));</span>
<span class='curline'><a href='../S/1182.html#L1042'>L</a>                1042 src/lua/lvm.cpp           Protect(luaT_trybinTM(L, rb, rb, ra, TM_UNM));</span>
<span class='curline'><a href='../S/1182.html#L1053'>L</a>                1053 src/lua/lvm.cpp           Protect(luaT_trybinTM(L, rb, rb, ra, TM_BNOT));</span>
<span class='curline'><a href='../S/1182.html#L1064'>L</a>                1064 src/lua/lvm.cpp         Protect(luaV_objlen(L, ra, RB(i)));</span>
<span class='curline'><a href='../S/1182.html#L1071'>L</a>                1071 src/lua/lvm.cpp         L-&gt;top = base + c + 1;  /* mark the end of concat operands */</span>
<span class='curline'><a href='../S/1182.html#L1072'>L</a>                1072 src/lua/lvm.cpp         Protect(luaV_concat(L, c - b + 1));</span>
<span class='curline'><a href='../S/1182.html#L1075'>L</a>                1075 src/lua/lvm.cpp         setobjs2s(L, ra, rb);</span>
<span class='curline'><a href='../S/1182.html#L1076'>L</a>                1076 src/lua/lvm.cpp         checkGC(L, (ra &gt;= rb ? ra + 1 : rb));</span>
<span class='curline'><a href='../S/1182.html#L1077'>L</a>                1077 src/lua/lvm.cpp         L-&gt;top = ci-&gt;top;  /* restore top */</span>
<span class='curline'><a href='../S/1182.html#L1088'>L</a>                1088 src/lua/lvm.cpp           if (luaV_equalobj(L, rb, rc) != GETARG_A(i))</span>
<span class='curline'><a href='../S/1182.html#L1097'>L</a>                1097 src/lua/lvm.cpp           if (luaV_lessthan(L, RKB(i), RKC(i)) != GETARG_A(i))</span>
<span class='curline'><a href='../S/1182.html#L1106'>L</a>                1106 src/lua/lvm.cpp           if (luaV_lessequal(L, RKB(i), RKC(i)) != GETARG_A(i))</span>
<span class='curline'><a href='../S/1182.html#L1125'>L</a>                1125 src/lua/lvm.cpp           setobjs2s(L, ra, rb);</span>
<span class='curline'><a href='../S/1182.html#L1133'>L</a>                1133 src/lua/lvm.cpp         if (b != 0) L-&gt;top = ra+b;  /* else previous instruction set top */</span>
<span class='curline'><a href='../S/1182.html#L1134'>L</a>                1134 src/lua/lvm.cpp         if (luaD_precall(L, ra, nresults)) {  /* C function? */</span>
<span class='curline'><a href='../S/1182.html#L1136'>L</a>                1136 src/lua/lvm.cpp             L-&gt;top = ci-&gt;top;  /* adjust results */</span>
<span class='curline'><a href='../S/1182.html#L1140'>L</a>                1140 src/lua/lvm.cpp           ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1182.html#L1147'>L</a>                1147 src/lua/lvm.cpp         if (b != 0) L-&gt;top = ra+b;  /* else previous instruction set top */</span>
<span class='curline'><a href='../S/1182.html#L1149'>L</a>                1149 src/lua/lvm.cpp         if (luaD_precall(L, ra, LUA_MULTRET)) {  /* C function? */</span>
<span class='curline'><a href='../S/1182.html#L1154'>L</a>                1154 src/lua/lvm.cpp           CallInfo *nci = L-&gt;ci;  /* called frame */</span>
<span class='curline'><a href='../S/1182.html#L1162'>L</a>                1162 src/lua/lvm.cpp           if (cl-&gt;p-&gt;sizep &gt; 0) luaF_close(L, oci-&gt;u.l.base);</span>
<span class='curline'><a href='../S/1182.html#L1165'>L</a>                1165 src/lua/lvm.cpp             setobjs2s(L, ofunc + aux, nfunc + aux);</span>
<span class='curline'><a href='../S/1182.html#L1167'>L</a>                1167 src/lua/lvm.cpp           oci-&gt;top = L-&gt;top = ofunc + (L-&gt;top - nfunc);  /* correct top */</span>
<span class='curline'><a href='../S/1182.html#L1170'>L</a>                1170 src/lua/lvm.cpp           ci = L-&gt;ci = oci;  /* remove new frame */</span>
<span class='curline'><a href='../S/1182.html#L1171'>L</a>                1171 src/lua/lvm.cpp           lua_assert(L-&gt;top == oci-&gt;u.l.base + getproto(ofunc)-&gt;maxstacksize);</span>
<span class='curline'><a href='../S/1182.html#L1178'>L</a>                1178 src/lua/lvm.cpp         if (cl-&gt;p-&gt;sizep &gt; 0) luaF_close(L, base);</span>
<span class='curline'><a href='../S/1182.html#L1179'>L</a>                1179 src/lua/lvm.cpp         b = luaD_poscall(L, ci, ra, (b != 0 ? b - 1 : cast_int(L-&gt;top - ra)));</span>
<span class='curline'><a href='../S/1182.html#L1183'>L</a>                1183 src/lua/lvm.cpp           ci = L-&gt;ci;</span>
<span class='curline'><a href='../S/1182.html#L1184'>L</a>                1184 src/lua/lvm.cpp           if (b) L-&gt;top = ci-&gt;top;</span>
<span class='curline'><a href='../S/1182.html#L1203'>L</a>                1203 src/lua/lvm.cpp           lua_Number idx = luai_numadd(L, fltvalue(ra), step); /* inc. index */</span>
<span class='curline'><a href='../S/1182.html#L1230'>L</a>                1230 src/lua/lvm.cpp             luaG_runerror(L, "'for' limit must be a number");</span>
<span class='curline'><a href='../S/1182.html#L1233'>L</a>                1233 src/lua/lvm.cpp             luaG_runerror(L, "'for' step must be a number");</span>
<span class='curline'><a href='../S/1182.html#L1236'>L</a>                1236 src/lua/lvm.cpp             luaG_runerror(L, "'for' initial value must be a number");</span>
<span class='curline'><a href='../S/1182.html#L1237'>L</a>                1237 src/lua/lvm.cpp           setfltvalue(init, luai_numsub(L, ninit, nstep));</span>
<span class='curline'><a href='../S/1182.html#L1244'>L</a>                1244 src/lua/lvm.cpp         setobjs2s(L, cb+2, ra+2);</span>
<span class='curline'><a href='../S/1182.html#L1245'>L</a>                1245 src/lua/lvm.cpp         setobjs2s(L, cb+1, ra+1);</span>
<span class='curline'><a href='../S/1182.html#L1246'>L</a>                1246 src/lua/lvm.cpp         setobjs2s(L, cb, ra);</span>
<span class='curline'><a href='../S/1182.html#L1247'>L</a>                1247 src/lua/lvm.cpp         L-&gt;top = cb + 3;  /* func. + 2 args (state and index) */</span>
<span class='curline'><a href='../S/1182.html#L1248'>L</a>                1248 src/lua/lvm.cpp         Protect(luaD_call(L, cb, GETARG_C(i)));</span>
<span class='curline'><a href='../S/1182.html#L1249'>L</a>                1249 src/lua/lvm.cpp         L-&gt;top = ci-&gt;top;</span>
<span class='curline'><a href='../S/1182.html#L1258'>L</a>                1258 src/lua/lvm.cpp           setobjs2s(L, ra, ra + 1);  /* save control variable */</span>
<span class='curline'><a href='../S/1182.html#L1268'>L</a>                1268 src/lua/lvm.cpp         if (n == 0) n = cast_int(L-&gt;top - ra) - 1;</span>
<span class='curline'><a href='../S/1182.html#L1276'>L</a>                1276 src/lua/lvm.cpp           luaH_resizearray(L, h, last);  /* preallocate it at once */</span>
<span class='curline'><a href='../S/1182.html#L1279'>L</a>                1279 src/lua/lvm.cpp           luaH_setint(L, h, last--, val);</span>
<span class='curline'><a href='../S/1182.html#L1280'>L</a>                1280 src/lua/lvm.cpp           luaC_barrierback(L, h, val);</span>
<span class='curline'><a href='../S/1182.html#L1282'>L</a>                1282 src/lua/lvm.cpp         L-&gt;top = ci-&gt;top;  /* correct top (in case of previous open call) */</span>
<span class='curline'><a href='../S/1182.html#L1289'>L</a>                1289 src/lua/lvm.cpp           pushclosure(L, p, cl-&gt;upvals, base, ra);  /* create a new one */</span>
<span class='curline'><a href='../S/1182.html#L1291'>L</a>                1291 src/lua/lvm.cpp           setclLvalue(L, ra, ncl);  /* push cashed closure */</span>
<span class='curline'><a href='../S/1182.html#L1292'>L</a>                1292 src/lua/lvm.cpp         checkGC(L, ra + 1);</span>
<span class='curline'><a href='../S/1182.html#L1303'>L</a>                1303 src/lua/lvm.cpp           Protect(luaD_checkstack(L, n));</span>
<span class='curline'><a href='../S/1182.html#L1305'>L</a>                1305 src/lua/lvm.cpp           L-&gt;top = ra + n;</span>
<span class='curline'><a href='../S/1182.html#L1308'>L</a>                1308 src/lua/lvm.cpp           setobjs2s(L, ra + j, base - n + j);</span>
<span class='curline'><a href='../S/1218.html#L58'>L</a>                  58 src/lua/lvm.h  #define luaV_fastget(L,t,k,slot,f) \</span>
<span class='curline'><a href='../S/1218.html#L67'>L</a>                  67 src/lua/lvm.h  #define luaV_gettable(L,t,k,v) { const TValue *slot; \</span>
<span class='curline'><a href='../S/1218.html#L68'>L</a>                  68 src/lua/lvm.h    if (luaV_fastget(L,t,k,slot,luaH_get)) { setobj2s(L, v, slot); } \</span>
<span class='curline'><a href='../S/1218.html#L69'>L</a>                  69 src/lua/lvm.h    else luaV_finishget(L,t,k,v,slot); }</span>
<span class='curline'><a href='../S/1218.html#L80'>L</a>                  80 src/lua/lvm.h  #define luaV_fastset(L,t,k,slot,f,v) \</span>
<span class='curline'><a href='../S/1218.html#L85'>L</a>                  85 src/lua/lvm.h       : (luaC_barrierback(L, hvalue(t), v), \</span>
<span class='curline'><a href='../S/1218.html#L86'>L</a>                  86 src/lua/lvm.h          setobj2t(L, cast(TValue *,slot), v), \</span>
<span class='curline'><a href='../S/1218.html#L90'>L</a>                  90 src/lua/lvm.h  #define luaV_settable(L,t,k,v) { const TValue *slot; \</span>
<span class='curline'><a href='../S/1218.html#L91'>L</a>                  91 src/lua/lvm.h    if (!luaV_fastset(L,t,k,slot,luaH_get,v)) \</span>
<span class='curline'><a href='../S/1218.html#L92'>L</a>                  92 src/lua/lvm.h      luaV_finishset(L,t,k,v,slot); }</span>
<span class='curline'><a href='../S/1218.html#L96'>L</a>                  96 src/lua/lvm.h  LUAI_FUNC int luaV_equalobj (lua_State *L, const TValue *t1, const TValue *t2);</span>
<span class='curline'><a href='../S/1218.html#L97'>L</a>                  97 src/lua/lvm.h  LUAI_FUNC int luaV_lessthan (lua_State *L, const TValue *l, const TValue *r);</span>
<span class='curline'><a href='../S/1218.html#L98'>L</a>                  98 src/lua/lvm.h  LUAI_FUNC int luaV_lessequal (lua_State *L, const TValue *l, const TValue *r);</span>
<span class='curline'><a href='../S/1218.html#L101'>L</a>                 101 src/lua/lvm.h  LUAI_FUNC void luaV_finishget (lua_State *L, const TValue *t, TValue *key,</span>
<span class='curline'><a href='../S/1218.html#L103'>L</a>                 103 src/lua/lvm.h  LUAI_FUNC void luaV_finishset (lua_State *L, const TValue *t, TValue *key,</span>
<span class='curline'><a href='../S/1218.html#L105'>L</a>                 105 src/lua/lvm.h  LUAI_FUNC void luaV_finishOp (lua_State *L);</span>
<span class='curline'><a href='../S/1218.html#L106'>L</a>                 106 src/lua/lvm.h  LUAI_FUNC void luaV_execute (lua_State *L);</span>
<span class='curline'><a href='../S/1218.html#L107'>L</a>                 107 src/lua/lvm.h  LUAI_FUNC void luaV_concat (lua_State *L, int total);</span>
<span class='curline'><a href='../S/1218.html#L108'>L</a>                 108 src/lua/lvm.h  LUAI_FUNC lua_Integer luaV_div (lua_State *L, lua_Integer x, lua_Integer y);</span>
<span class='curline'><a href='../S/1218.html#L109'>L</a>                 109 src/lua/lvm.h  LUAI_FUNC lua_Integer luaV_mod (lua_State *L, lua_Integer x, lua_Integer y);</span>
<span class='curline'><a href='../S/1218.html#L111'>L</a>                 111 src/lua/lvm.h  LUAI_FUNC void luaV_objlen (lua_State *L, StkId ra, const TValue *rb);</span>
<span class='curline'><a href='../S/1221.html#L25'>L</a>                  25 src/lua/lzio.cpp   lua_State *L = z-&gt;L;</span>
<span class='curline'><a href='../S/1221.html#L27'>L</a>                  27 src/lua/lzio.cpp   lua_unlock(L);</span>
<span class='curline'><a href='../S/1221.html#L28'>L</a>                  28 src/lua/lzio.cpp   buff = z-&gt;reader(L, z-&gt;data, &amp;size);</span>
<span class='curline'><a href='../S/1221.html#L29'>L</a>                  29 src/lua/lzio.cpp   lua_lock(L);</span>
<span class='curline'><a href='../S/1221.html#L38'>L</a>                  38 src/lua/lzio.cpp void luaZ_init (lua_State *L, ZIO *z, lua_Reader reader, void *data) {</span>
<span class='curline'><a href='../S/1221.html#L39'>L</a>                  39 src/lua/lzio.cpp   z-&gt;L = L;</span>
<span class='curline'><a href='../S/1180.html#L29'>L</a>                  29 src/lua/lzio.h #define luaZ_initbuffer(L, buff) ((buff)-&gt;buffer = NULL, (buff)-&gt;buffsize = 0)</span>
<span class='curline'><a href='../S/1180.html#L39'>L</a>                  39 src/lua/lzio.h #define luaZ_resizebuffer(L, buff, size) \</span>
<span class='curline'><a href='../S/1180.html#L40'>L</a>                  40 src/lua/lzio.h 	((buff)-&gt;buffer = luaM_reallocvchar(L, (buff)-&gt;buffer, \</span>
<span class='curline'><a href='../S/1180.html#L44'>L</a>                  44 src/lua/lzio.h #define luaZ_freebuffer(L, buff)	luaZ_resizebuffer(L, buff, 0)</span>
<span class='curline'><a href='../S/1180.html#L47'>L</a>                  47 src/lua/lzio.h LUAI_FUNC void luaZ_init (lua_State *L, ZIO *z, lua_Reader reader,</span>
<span class='curline'><a href='../S/1180.html#L60'>L</a>                  60 src/lua/lzio.h   lua_State *L;			/* Lua state (for reader) */</span>
<span class='curline'><a href='../S/209.html#L65'>L</a>                  65 src/scripting/application_lua_kernel.cpp static int intf_describe_plugins(lua_State * L)</span>
<span class='curline'><a href='../S/209.html#L68'>L</a>                  68 src/scripting/application_lua_kernel.cpp 	lua_getglobal(L, "print");</span>
<span class='curline'><a href='../S/209.html#L70'>L</a>                  70 src/scripting/application_lua_kernel.cpp 		lua_pushvalue(L,-1); //duplicate the print</span>
<span class='curline'><a href='../S/209.html#L82'>L</a>                  82 src/scripting/application_lua_kernel.cpp 		lua_pushstring(L, line.str().c_str());</span>
<span class='curline'><a href='../S/209.html#L83'>L</a>                  83 src/scripting/application_lua_kernel.cpp 		lua_call(L, 1, 0);</span>
<span class='curline'><a href='../S/209.html#L86'>L</a>                  86 src/scripting/application_lua_kernel.cpp 		lua_pushstring(L, "No plugins available.\n");</span>
<span class='curline'><a href='../S/209.html#L87'>L</a>                  87 src/scripting/application_lua_kernel.cpp 		lua_call(L, 1, 0);</span>
<span class='curline'><a href='../S/209.html#L92'>L</a>                  92 src/scripting/application_lua_kernel.cpp static int intf_delay(lua_State* L)</span>
<span class='curline'><a href='../S/209.html#L94'>L</a>                  94 src/scripting/application_lua_kernel.cpp 	unsigned int delay = static_cast&lt;unsigned int&gt;(luaL_checkinteger(L, 1));</span>
<span class='curline'><a href='../S/209.html#L144'>L</a>                 144 src/scripting/application_lua_kernel.cpp static lua_State * get_new_thread(lua_State * L)</span>
<span class='curline'><a href='../S/209.html#L146'>L</a>                 146 src/scripting/application_lua_kernel.cpp 	lua_pushlightuserdata(L	, threadtableKey);</span>
<span class='curline'><a href='../S/209.html#L147'>L</a>                 147 src/scripting/application_lua_kernel.cpp 	lua_pushvalue(L,1);				// duplicate script key, since we need to store later</span>
<span class='curline'><a href='../S/209.html#L150'>L</a>                 150 src/scripting/application_lua_kernel.cpp 	lua_rawget(L, LUA_REGISTRYINDEX);		// get the script table from the registry, on the top of the stack</span>
<span class='curline'><a href='../S/209.html#L151'>L</a>                 151 src/scripting/application_lua_kernel.cpp 	if (!lua_istable(L,-1)) {			// if it doesn't exist create it</span>
<span class='curline'><a href='../S/209.html#L152'>L</a>                 152 src/scripting/application_lua_kernel.cpp 		lua_pop(L,1);</span>
<span class='curline'><a href='../S/209.html#L153'>L</a>                 153 src/scripting/application_lua_kernel.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/209.html#L156'>L</a>                 156 src/scripting/application_lua_kernel.cpp 	lua_pushinteger(L, lua_rawlen(L, -1) + 1);	// push #table + 1 onto the stack</span>
<span class='curline'><a href='../S/209.html#L158'>L</a>                 158 src/scripting/application_lua_kernel.cpp 	lua_State * T = lua_newthread(L);		// create new thread T</span>
<span class='curline'><a href='../S/209.html#L160'>L</a>                 160 src/scripting/application_lua_kernel.cpp 	lua_rawset(L, -3);				// store the new thread at #table +1 index of the table.</span>
<span class='curline'><a href='../S/209.html#L162'>L</a>                 162 src/scripting/application_lua_kernel.cpp 	lua_rawset(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/209.html#L231'>L</a>                 231 src/scripting/application_lua_kernel.cpp static int impl_context_backend(lua_State * L, std::shared_ptr&lt;lua_context_backend&gt; backend, std::string req_name)</span>
<span class='curline'><a href='../S/209.html#L234'>L</a>                 234 src/scripting/application_lua_kernel.cpp 		luaL_error(L , "Error, you tried to use an invalid context object in a lua thread");</span>
<span class='curline'><a href='../S/209.html#L239'>L</a>                 239 src/scripting/application_lua_kernel.cpp 	evt.data = luaW_checkconfig(L, -1);</span>
<span class='curline'><a href='../S/209.html#L245'>L</a>                 245 src/scripting/application_lua_kernel.cpp static int impl_context_accessor(lua_State * L, std::shared_ptr&lt;lua_context_backend&gt; backend, plugins_context::accessor_function func)</span>
<span class='curline'><a href='../S/209.html#L248'>L</a>                 248 src/scripting/application_lua_kernel.cpp 		luaL_error(L , "Error, you tried to use an invalid context object in a lua thread");</span>
<span class='curline'><a href='../S/209.html#L251'>L</a>                 251 src/scripting/application_lua_kernel.cpp 	if(lua_gettop(L)) {</span>
<span class='curline'><a href='../S/209.html#L253'>L</a>                 253 src/scripting/application_lua_kernel.cpp 		if(!luaW_toconfig(L, 1, temp)) {</span>
<span class='curline'><a href='../S/209.html#L254'>L</a>                 254 src/scripting/application_lua_kernel.cpp 			luaL_argerror(L, 1, "Error, tried to parse a config but some fields were invalid");</span>
<span class='curline'><a href='../S/209.html#L256'>L</a>                 256 src/scripting/application_lua_kernel.cpp 		luaW_pushconfig(L, func(temp));</span>
<span class='curline'><a href='../S/209.html#L259'>L</a>                 259 src/scripting/application_lua_kernel.cpp 		luaW_pushconfig(L, func(config()));</span>
<span class='curline'><a href='../S/204.html#L29'>L</a>                  29 src/scripting/debug_lua.cpp 	int i, lua_State* L,</span>
<span class='curline'><a href='../S/204.html#L33'>L</a>                  33 src/scripting/debug_lua.cpp 	const int t = lua_type(L, i);</span>
<span class='curline'><a href='../S/204.html#L36'>L</a>                  36 src/scripting/debug_lua.cpp 			output &lt;&lt; "STRING; VALUE: " &lt;&lt; lua_tostring(L, i);</span>
<span class='curline'><a href='../S/204.html#L39'>L</a>                  39 src/scripting/debug_lua.cpp 			output &lt;&lt; "BOOLEAN; VALUE: " &lt;&lt; (lua_toboolean(L, i) ? "true" : "false");</span>
<span class='curline'><a href='../S/204.html#L42'>L</a>                  42 src/scripting/debug_lua.cpp 			output &lt;&lt; "NUMBER; VALUE: " &lt;&lt; lua_tonumber(L, i);</span>
<span class='curline'><a href='../S/204.html#L49'>L</a>                  49 src/scripting/debug_lua.cpp 			output &lt;&lt; "TABLE; VALUE: " &lt;&lt; lua_topointer(L, i);</span>
<span class='curline'><a href='../S/204.html#L53'>L</a>                  53 src/scripting/debug_lua.cpp 				unsigned keyindex = lua_gettop(L) + 1;</span>
<span class='curline'><a href='../S/204.html#L54'>L</a>                  54 src/scripting/debug_lua.cpp 				lua_pushnil(L);</span>
<span class='curline'><a href='../S/204.html#L55'>L</a>                  55 src/scripting/debug_lua.cpp 				while(lua_next(L, i) != 0)</span>
<span class='curline'><a href='../S/204.html#L58'>L</a>                  58 src/scripting/debug_lua.cpp 					const int keytype = lua_type(L, keyindex);</span>
<span class='curline'><a href='../S/204.html#L61'>L</a>                  61 src/scripting/debug_lua.cpp 							output &lt;&lt; lua_tostring(L, keyindex);</span>
<span class='curline'><a href='../S/204.html#L64'>L</a>                  64 src/scripting/debug_lua.cpp 							output &lt;&lt; (lua_toboolean(L, keyindex) ? "true" : "false");</span>
<span class='curline'><a href='../S/204.html#L67'>L</a>                  67 src/scripting/debug_lua.cpp 							output &lt;&lt; lua_tonumber(L, keyindex);</span>
<span class='curline'><a href='../S/204.html#L70'>L</a>                  70 src/scripting/debug_lua.cpp 							output &lt;&lt; lua_topointer(L, keyindex);</span>
<span class='curline'><a href='../S/204.html#L74'>L</a>                  74 src/scripting/debug_lua.cpp 					value_to_stringstream(output, keyindex + 1, L, indent);</span>
<span class='curline'><a href='../S/204.html#L75'>L</a>                  75 src/scripting/debug_lua.cpp 					lua_pop(L, 1);</span>
<span class='curline'><a href='../S/204.html#L81'>L</a>                  81 src/scripting/debug_lua.cpp 			output &lt;&lt; "USERDATA; VALUE: " &lt;&lt; lua_topointer(L, i);</span>
<span class='curline'><a href='../S/204.html#L84'>L</a>                  84 src/scripting/debug_lua.cpp 			output &lt;&lt; "FUNCTION; VALUE: " &lt;&lt; lua_topointer(L, i);</span>
<span class='curline'><a href='../S/204.html#L87'>L</a>                  87 src/scripting/debug_lua.cpp 			output &lt;&lt; "THREAD; VALUE: " &lt;&lt; lua_topointer(L, i);</span>
<span class='curline'><a href='../S/204.html#L90'>L</a>                  90 src/scripting/debug_lua.cpp 			output &lt;&lt; "LIGHTUSERDATA; VALUE: " &lt;&lt; lua_topointer(L, i);</span>
<span class='curline'><a href='../S/204.html#L99'>L</a>                  99 src/scripting/debug_lua.cpp void ds(lua_State *L, const bool verbose_table) {</span>
<span class='curline'><a href='../S/204.html#L102'>L</a>                 102 src/scripting/debug_lua.cpp 	int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/204.html#L105'>L</a>                 105 src/scripting/debug_lua.cpp 		value_to_stringstream(output, i, L, "", verbose_table);</span>
<span class='curline'><a href='../S/186.html#L21'>L</a>                  21 src/scripting/debug_lua.hpp void ds(lua_State *L, const bool verbose_table = true);</span>
<span class='curline'><a href='../S/185.html#L153'>L</a>                 153 src/scripting/game_lua_kernel.cpp int dispatch(lua_State *L) {</span>
<span class='curline'><a href='../S/185.html#L154'>L</a>                 154 src/scripting/game_lua_kernel.cpp 	return ((lua_kernel_base::get_lua_kernel&lt;game_lua_kernel&gt;(L)).*method)(L);</span>
<span class='curline'><a href='../S/185.html#L161'>L</a>                 161 src/scripting/game_lua_kernel.cpp int dispatch2(lua_State *L) {</span>
<span class='curline'><a href='../S/185.html#L162'>L</a>                 162 src/scripting/game_lua_kernel.cpp 	return ((lua_kernel_base::get_lua_kernel&lt;game_lua_kernel&gt;(L)).*method)(L, b);</span>
<span class='curline'><a href='../S/185.html#L223'>L</a>                 223 src/scripting/game_lua_kernel.cpp static int special_locations_len(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L225'>L</a>                 225 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, lua_kernel_base::get_lua_kernel&lt;game_lua_kernel&gt;(L).map().special_locations().size());</span>
<span class='curline'><a href='../S/185.html#L229'>L</a>                 229 src/scripting/game_lua_kernel.cpp static int special_locations_next(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L231'>L</a>                 231 src/scripting/game_lua_kernel.cpp 	const t_translation::starting_positions::left_map&amp; left = lua_kernel_base::get_lua_kernel&lt;game_lua_kernel&gt;(L).map().special_locations().left;</span>
<span class='curline'><a href='../S/185.html#L234'>L</a>                 234 src/scripting/game_lua_kernel.cpp 	if (lua_isnoneornil(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L238'>L</a>                 238 src/scripting/game_lua_kernel.cpp 		it = left.find(luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/185.html#L247'>L</a>                 247 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, it-&gt;first.c_str());</span>
<span class='curline'><a href='../S/185.html#L248'>L</a>                 248 src/scripting/game_lua_kernel.cpp 	luaW_pushlocation(L, it-&gt;second);</span>
<span class='curline'><a href='../S/185.html#L252'>L</a>                 252 src/scripting/game_lua_kernel.cpp static int special_locations_pairs(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L254'>L</a>                 254 src/scripting/game_lua_kernel.cpp 	lua_pushcfunction(L, &amp;special_locations_next);</span>
<span class='curline'><a href='../S/185.html#L255'>L</a>                 255 src/scripting/game_lua_kernel.cpp 	lua_pushvalue(L, -2);</span>
<span class='curline'><a href='../S/185.html#L256'>L</a>                 256 src/scripting/game_lua_kernel.cpp 	lua_pushnil(L);</span>
<span class='curline'><a href='../S/185.html#L260'>L</a>                 260 src/scripting/game_lua_kernel.cpp static int special_locations_index(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L262'>L</a>                 262 src/scripting/game_lua_kernel.cpp 	const t_translation::starting_positions::left_map&amp; left = lua_kernel_base::get_lua_kernel&lt;game_lua_kernel&gt;(L).map().special_locations().left;</span>
<span class='curline'><a href='../S/185.html#L263'>L</a>                 263 src/scripting/game_lua_kernel.cpp 	auto it = left.find(luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/185.html#L268'>L</a>                 268 src/scripting/game_lua_kernel.cpp 		luaW_pushlocation(L, it-&gt;second);</span>
<span class='curline'><a href='../S/185.html#L273'>L</a>                 273 src/scripting/game_lua_kernel.cpp static int special_locations_newindex(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L275'>L</a>                 275 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "special locations cannot be modified using wesnoth.special_locations");</span>
<span class='curline'><a href='../S/185.html#L276'>L</a>                 276 src/scripting/game_lua_kernel.cpp 	return lua_error(L);</span>
<span class='curline'><a href='../S/185.html#L279'>L</a>                 279 src/scripting/game_lua_kernel.cpp static void push_locations_table(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L281'>L</a>                 281 src/scripting/game_lua_kernel.cpp 	lua_newtable(L); // The functor table</span>
<span class='curline'><a href='../S/185.html#L282'>L</a>                 282 src/scripting/game_lua_kernel.cpp 	lua_newtable(L); // The functor metatable</span>
<span class='curline'><a href='../S/185.html#L283'>L</a>                 283 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "__len");</span>
<span class='curline'><a href='../S/185.html#L284'>L</a>                 284 src/scripting/game_lua_kernel.cpp 	lua_pushcfunction(L, &amp;special_locations_len);</span>
<span class='curline'><a href='../S/185.html#L285'>L</a>                 285 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L286'>L</a>                 286 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "__index");</span>
<span class='curline'><a href='../S/185.html#L287'>L</a>                 287 src/scripting/game_lua_kernel.cpp 	lua_pushcfunction(L, &amp;special_locations_index);</span>
<span class='curline'><a href='../S/185.html#L288'>L</a>                 288 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L289'>L</a>                 289 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "__newindex");</span>
<span class='curline'><a href='../S/185.html#L290'>L</a>                 290 src/scripting/game_lua_kernel.cpp 	lua_pushcfunction(L, &amp;special_locations_newindex);</span>
<span class='curline'><a href='../S/185.html#L291'>L</a>                 291 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L292'>L</a>                 292 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "__pairs");</span>
<span class='curline'><a href='../S/185.html#L293'>L</a>                 293 src/scripting/game_lua_kernel.cpp 	lua_pushcfunction(L, &amp;special_locations_pairs);</span>
<span class='curline'><a href='../S/185.html#L294'>L</a>                 294 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L295'>L</a>                 295 src/scripting/game_lua_kernel.cpp 	lua_setmetatable(L, -2); // Apply the metatable to the functor table</span>
<span class='curline'><a href='../S/185.html#L325'>L</a>                 325 src/scripting/game_lua_kernel.cpp static int intf_get_viewing_side(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L328'>L</a>                 328 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, disp-&gt;viewing_side());</span>
<span class='curline'><a href='../S/185.html#L329'>L</a>                 329 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, disp-&gt;show_everything());</span>
<span class='curline'><a href='../S/185.html#L339'>L</a>                 339 src/scripting/game_lua_kernel.cpp static int impl_animator_collect(lua_State* L) {</span>
<span class='curline'><a href='../S/185.html#L340'>L</a>                 340 src/scripting/game_lua_kernel.cpp 	unit_animator&amp; anim = *static_cast&lt;unit_animator*&gt;(luaL_checkudata(L, 1, animatorKey));</span>
<span class='curline'><a href='../S/185.html#L345'>L</a>                 345 src/scripting/game_lua_kernel.cpp static int impl_add_animation(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L347'>L</a>                 347 src/scripting/game_lua_kernel.cpp 	unit_animator&amp; anim = *static_cast&lt;unit_animator*&gt;(luaL_checkudata(L, 1, animatorKey));</span>
<span class='curline'><a href='../S/185.html#L348'>L</a>                 348 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 2);</span>
<span class='curline'><a href='../S/185.html#L349'>L</a>                 349 src/scripting/game_lua_kernel.cpp 	std::string which = luaL_checkstring(L, 3);</span>
<span class='curline'><a href='../S/185.html#L352'>L</a>                 352 src/scripting/game_lua_kernel.cpp 	std::string hits_str = luaL_checkstring(L, 4);</span>
<span class='curline'><a href='../S/185.html#L362'>L</a>                 362 src/scripting/game_lua_kernel.cpp 	if(lua_istable(L, 5)) {</span>
<span class='curline'><a href='../S/185.html#L363'>L</a>                 363 src/scripting/game_lua_kernel.cpp 		lua_getfield(L, 5, "target");</span>
<span class='curline'><a href='../S/185.html#L364'>L</a>                 364 src/scripting/game_lua_kernel.cpp 		if(luaW_tolocation(L, -1, dest)) {</span>
<span class='curline'><a href='../S/185.html#L366'>L</a>                 366 src/scripting/game_lua_kernel.cpp 				return luaL_argerror(L, 5, "target location must be different from animated unit's location");</span>
<span class='curline'><a href='../S/185.html#L368'>L</a>                 368 src/scripting/game_lua_kernel.cpp 				return luaL_argerror(L, 5, "target location must be adjacent to the animated unit");</span>
<span class='curline'><a href='../S/185.html#L373'>L</a>                 373 src/scripting/game_lua_kernel.cpp 			if(!lua_isnoneornil(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L374'>L</a>                 374 src/scripting/game_lua_kernel.cpp 				return luaW_type_error(L, 5, "target", "location table");</span>
<span class='curline'><a href='../S/185.html#L377'>L</a>                 377 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L379'>L</a>                 379 src/scripting/game_lua_kernel.cpp 		lua_getfield(L, 5, "value");</span>
<span class='curline'><a href='../S/185.html#L380'>L</a>                 380 src/scripting/game_lua_kernel.cpp 		if(lua_isnumber(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L381'>L</a>                 381 src/scripting/game_lua_kernel.cpp 			v1 = lua_tonumber(L, -1);</span>
<span class='curline'><a href='../S/185.html#L382'>L</a>                 382 src/scripting/game_lua_kernel.cpp 		} else if(lua_istable(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L383'>L</a>                 383 src/scripting/game_lua_kernel.cpp 			lua_rawgeti(L, -1, 1);</span>
<span class='curline'><a href='../S/185.html#L384'>L</a>                 384 src/scripting/game_lua_kernel.cpp 			v1 = lua_tonumber(L, -1);</span>
<span class='curline'><a href='../S/185.html#L385'>L</a>                 385 src/scripting/game_lua_kernel.cpp 			lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L386'>L</a>                 386 src/scripting/game_lua_kernel.cpp 			lua_rawgeti(L, -1, 2);</span>
<span class='curline'><a href='../S/185.html#L387'>L</a>                 387 src/scripting/game_lua_kernel.cpp 			v2 = lua_tonumber(L, -1);</span>
<span class='curline'><a href='../S/185.html#L388'>L</a>                 388 src/scripting/game_lua_kernel.cpp 			lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L389'>L</a>                 389 src/scripting/game_lua_kernel.cpp 		} else if(!lua_isnoneornil(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L390'>L</a>                 390 src/scripting/game_lua_kernel.cpp 			return luaW_type_error(L, 5, "value", "number or array of two numbers");</span>
<span class='curline'><a href='../S/185.html#L392'>L</a>                 392 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L394'>L</a>                 394 src/scripting/game_lua_kernel.cpp 		lua_getfield(L, 5, "with_bars");</span>
<span class='curline'><a href='../S/185.html#L395'>L</a>                 395 src/scripting/game_lua_kernel.cpp 		if(lua_isboolean(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L396'>L</a>                 396 src/scripting/game_lua_kernel.cpp 			bars = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L397'>L</a>                 397 src/scripting/game_lua_kernel.cpp 		} else if(!lua_isnoneornil(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L398'>L</a>                 398 src/scripting/game_lua_kernel.cpp 			return luaW_type_error(L, 5, "with_bars", lua_typename(L, LUA_TBOOLEAN));</span>
<span class='curline'><a href='../S/185.html#L400'>L</a>                 400 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L402'>L</a>                 402 src/scripting/game_lua_kernel.cpp 		lua_getfield(L, 5, "text");</span>
<span class='curline'><a href='../S/185.html#L403'>L</a>                 403 src/scripting/game_lua_kernel.cpp 		if(lua_isstring(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L404'>L</a>                 404 src/scripting/game_lua_kernel.cpp 			text = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/185.html#L405'>L</a>                 405 src/scripting/game_lua_kernel.cpp 		} else if(luaW_totstring(L, -1, text)) {</span>
<span class='curline'><a href='../S/185.html#L407'>L</a>                 407 src/scripting/game_lua_kernel.cpp 		} else if(!lua_isnoneornil(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L408'>L</a>                 408 src/scripting/game_lua_kernel.cpp 			return luaW_type_error(L, 5, "text", lua_typename(L, LUA_TSTRING));</span>
<span class='curline'><a href='../S/185.html#L410'>L</a>                 410 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L412'>L</a>                 412 src/scripting/game_lua_kernel.cpp 		lua_getfield(L, 5, "color");</span>
<span class='curline'><a href='../S/185.html#L413'>L</a>                 413 src/scripting/game_lua_kernel.cpp 		if(lua_istable(L, -1) &amp;&amp; lua_rawlen(L, -1) == 3) {</span>
<span class='curline'><a href='../S/185.html#L414'>L</a>                 414 src/scripting/game_lua_kernel.cpp 			int idx = lua_absindex(L, -1);</span>
<span class='curline'><a href='../S/185.html#L415'>L</a>                 415 src/scripting/game_lua_kernel.cpp 			lua_rawgeti(L, idx, 1); // red @ -3</span>
<span class='curline'><a href='../S/185.html#L416'>L</a>                 416 src/scripting/game_lua_kernel.cpp 			lua_rawgeti(L, idx, 2); // green @ -2</span>
<span class='curline'><a href='../S/185.html#L417'>L</a>                 417 src/scripting/game_lua_kernel.cpp 			lua_rawgeti(L, idx, 3); // blue @ -1</span>
<span class='curline'><a href='../S/185.html#L418'>L</a>                 418 src/scripting/game_lua_kernel.cpp 			color = color_t(lua_tonumber(L, -3), lua_tonumber(L, -2), lua_tonumber(L, -1));</span>
<span class='curline'><a href='../S/185.html#L419'>L</a>                 419 src/scripting/game_lua_kernel.cpp 			lua_pop(L, 3);</span>
<span class='curline'><a href='../S/185.html#L420'>L</a>                 420 src/scripting/game_lua_kernel.cpp 		} else if(!lua_isnoneornil(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L421'>L</a>                 421 src/scripting/game_lua_kernel.cpp 			return luaW_type_error(L, 5, "color", "array of three numbers");</span>
<span class='curline'><a href='../S/185.html#L423'>L</a>                 423 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L425'>L</a>                 425 src/scripting/game_lua_kernel.cpp 		lua_getfield(L, 5, "primary");</span>
<span class='curline'><a href='../S/185.html#L426'>L</a>                 426 src/scripting/game_lua_kernel.cpp 		primary = luaW_toweapon(L, -1);</span>
<span class='curline'><a href='../S/185.html#L427'>L</a>                 427 src/scripting/game_lua_kernel.cpp 		if(!primary &amp;&amp; !lua_isnoneornil(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L428'>L</a>                 428 src/scripting/game_lua_kernel.cpp 			return luaW_type_error(L, 5, "primary", "weapon");</span>
<span class='curline'><a href='../S/185.html#L430'>L</a>                 430 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L432'>L</a>                 432 src/scripting/game_lua_kernel.cpp 		lua_getfield(L, 5, "secondary");</span>
<span class='curline'><a href='../S/185.html#L433'>L</a>                 433 src/scripting/game_lua_kernel.cpp 		secondary = luaW_toweapon(L, -1);</span>
<span class='curline'><a href='../S/185.html#L434'>L</a>                 434 src/scripting/game_lua_kernel.cpp 		if(!secondary &amp;&amp; !lua_isnoneornil(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L435'>L</a>                 435 src/scripting/game_lua_kernel.cpp 			return luaW_type_error(L, 5, "secondary", "weapon");</span>
<span class='curline'><a href='../S/185.html#L437'>L</a>                 437 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L438'>L</a>                 438 src/scripting/game_lua_kernel.cpp 	} else if(!lua_isnoneornil(L, 5)) {</span>
<span class='curline'><a href='../S/185.html#L439'>L</a>                 439 src/scripting/game_lua_kernel.cpp 		return luaW_type_error(L, 5, "table of options");</span>
<span class='curline'><a href='../S/185.html#L446'>L</a>                 446 src/scripting/game_lua_kernel.cpp static int impl_run_animation(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L449'>L</a>                 449 src/scripting/game_lua_kernel.cpp 	unit_animator&amp; anim = *static_cast&lt;unit_animator*&gt;(luaL_checkudata(L, 1, animatorKey));</span>
<span class='curline'><a href='../S/185.html#L456'>L</a>                 456 src/scripting/game_lua_kernel.cpp static int impl_clear_animation(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L458'>L</a>                 458 src/scripting/game_lua_kernel.cpp 	unit_animator&amp; anim = *static_cast&lt;unit_animator*&gt;(luaL_checkudata(L, 1, animatorKey));</span>
<span class='curline'><a href='../S/185.html#L463'>L</a>                 463 src/scripting/game_lua_kernel.cpp static int impl_animator_get(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L465'>L</a>                 465 src/scripting/game_lua_kernel.cpp 	const char* m = lua_tostring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L466'>L</a>                 466 src/scripting/game_lua_kernel.cpp 	return luaW_getmetafield(L, 1, m);</span>
<span class='curline'><a href='../S/185.html#L469'>L</a>                 469 src/scripting/game_lua_kernel.cpp static int intf_create_animator(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L471'>L</a>                 471 src/scripting/game_lua_kernel.cpp 	new(L) unit_animator;</span>
<span class='curline'><a href='../S/185.html#L472'>L</a>                 472 src/scripting/game_lua_kernel.cpp 	if(luaL_newmetatable(L, animatorKey)) {</span>
<span class='curline'><a href='../S/185.html#L481'>L</a>                 481 src/scripting/game_lua_kernel.cpp 		luaL_setfuncs(L, metafuncs, 0);</span>
<span class='curline'><a href='../S/185.html#L482'>L</a>                 482 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "__metatable");</span>
<span class='curline'><a href='../S/185.html#L483'>L</a>                 483 src/scripting/game_lua_kernel.cpp 		lua_setfield(L, -2, animatorKey);</span>
<span class='curline'><a href='../S/185.html#L485'>L</a>                 485 src/scripting/game_lua_kernel.cpp 	lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/185.html#L489'>L</a>                 489 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_gamestate_inspector(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L492'>L</a>                 492 src/scripting/game_lua_kernel.cpp 		return lua_gui2::show_gamestate_inspector(game_display_-&gt;video(), luaW_checkvconfig(L, 1), gamedata(), game_state_);</span>
<span class='curline'><a href='../S/185.html#L505'>L</a>                 505 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L508'>L</a>                 508 src/scripting/game_lua_kernel.cpp 	if(lua_isstring(L, 1) &amp;&amp; !lua_isnumber(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L509'>L</a>                 509 src/scripting/game_lua_kernel.cpp 		std::string id = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L512'>L</a>                 512 src/scripting/game_lua_kernel.cpp 				luaW_pushunit(L, u.underlying_id());</span>
<span class='curline'><a href='../S/185.html#L518'>L</a>                 518 src/scripting/game_lua_kernel.cpp 	if(!luaW_tolocation(L, 1, loc)) {</span>
<span class='curline'><a href='../S/185.html#L519'>L</a>                 519 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 1, "expected string or location");</span>
<span class='curline'><a href='../S/185.html#L525'>L</a>                 525 src/scripting/game_lua_kernel.cpp 	luaW_pushunit(L, ui-&gt;underlying_id());</span>
<span class='curline'><a href='../S/185.html#L534'>L</a>                 534 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_displayed_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L546'>L</a>                 546 src/scripting/game_lua_kernel.cpp 	luaW_pushunit(L, ui-&gt;underlying_id());</span>
<span class='curline'><a href='../S/185.html#L558'>L</a>                 558 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_units(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L560'>L</a>                 560 src/scripting/game_lua_kernel.cpp 	vconfig filter = luaW_checkvconfig(L, 1, true);</span>
<span class='curline'><a href='../S/185.html#L567'>L</a>                 567 src/scripting/game_lua_kernel.cpp 	if(unit* u_adj = luaW_tounit(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L569'>L</a>                 569 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 2, "unit not found");</span>
<span class='curline'><a href='../S/185.html#L572'>L</a>                 572 src/scripting/game_lua_kernel.cpp 	} else if(!lua_isnoneornil(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L574'>L</a>                 574 src/scripting/game_lua_kernel.cpp 		luaW_tolocation(L, 2, loc);</span>
<span class='curline'><a href='../S/185.html#L576'>L</a>                 576 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 2, "invalid location");</span>
<span class='curline'><a href='../S/185.html#L585'>L</a>                 585 src/scripting/game_lua_kernel.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/185.html#L586'>L</a>                 586 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L590'>L</a>                 590 src/scripting/game_lua_kernel.cpp 		luaW_pushunit(L, ui-&gt;underlying_id());</span>
<span class='curline'><a href='../S/185.html#L591'>L</a>                 591 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, 1, i);</span>
<span class='curline'><a href='../S/185.html#L604'>L</a>                 604 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_match_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L606'>L</a>                 606 src/scripting/game_lua_kernel.cpp 	lua_unit&amp; u = *luaW_checkunit_ref(L, 1);</span>
<span class='curline'><a href='../S/185.html#L608'>L</a>                 608 src/scripting/game_lua_kernel.cpp 	vconfig filter = luaW_checkvconfig(L, 2, true);</span>
<span class='curline'><a href='../S/185.html#L611'>L</a>                 611 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, true);</span>
<span class='curline'><a href='../S/185.html#L617'>L</a>                 617 src/scripting/game_lua_kernel.cpp 	if(unit* u_adj = luaW_tounit(L, 3)) {</span>
<span class='curline'><a href='../S/185.html#L624'>L</a>                 624 src/scripting/game_lua_kernel.cpp 			lua_pushboolean(L, unit_filter(filter, &amp;fc).matches(*u, map_location()));</span>
<span class='curline'><a href='../S/185.html#L628'>L</a>                 628 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 3, "unit not found");</span>
<span class='curline'><a href='../S/185.html#L630'>L</a>                 630 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, unit_filter(filter, &amp;fc).matches(*u, *u_adj));</span>
<span class='curline'><a href='../S/185.html#L633'>L</a>                 633 src/scripting/game_lua_kernel.cpp 		luaW_tolocation(L, 3, loc); // If argument 3 isn't a location, loc is unchanged</span>
<span class='curline'><a href='../S/185.html#L636'>L</a>                 636 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, unit_filter(filter, &amp;fc).matches(*u, loc));</span>
<span class='curline'><a href='../S/185.html#L640'>L</a>                 640 src/scripting/game_lua_kernel.cpp 		luaW_tolocation(L, 3, loc); // If argument 3 isn't a location, loc is unchanged</span>
<span class='curline'><a href='../S/185.html#L641'>L</a>                 641 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, unit_filter(filter, &amp;fc).matches(*u, loc));</span>
<span class='curline'><a href='../S/185.html#L652'>L</a>                 652 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_recall_units(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L654'>L</a>                 654 src/scripting/game_lua_kernel.cpp 	vconfig filter = luaW_checkvconfig(L, 1, true);</span>
<span class='curline'><a href='../S/185.html#L658'>L</a>                 658 src/scripting/game_lua_kernel.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/185.html#L659'>L</a>                 659 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L673'>L</a>                 673 src/scripting/game_lua_kernel.cpp 			luaW_pushunit(L, s, u-&gt;underlying_id());</span>
<span class='curline'><a href='../S/185.html#L674'>L</a>                 674 src/scripting/game_lua_kernel.cpp 			lua_rawseti(L, 1, i);</span>
<span class='curline'><a href='../S/185.html#L691'>L</a>                 691 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_fire_event(lua_State *L, const bool by_id)</span>
<span class='curline'><a href='../S/185.html#L693'>L</a>                 693 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L699'>L</a>                 699 src/scripting/game_lua_kernel.cpp 	if (luaW_tolocation(L, 2, l1)) {</span>
<span class='curline'><a href='../S/185.html#L700'>L</a>                 700 src/scripting/game_lua_kernel.cpp 		if (luaW_tolocation(L, 3, l2)) {</span>
<span class='curline'><a href='../S/185.html#L707'>L</a>                 707 src/scripting/game_lua_kernel.cpp 	if (!lua_isnoneornil(L, pos)) {</span>
<span class='curline'><a href='../S/185.html#L708'>L</a>                 708 src/scripting/game_lua_kernel.cpp 		data.add_child("first", luaW_checkconfig(L, pos));</span>
<span class='curline'><a href='../S/185.html#L711'>L</a>                 711 src/scripting/game_lua_kernel.cpp 	if (!lua_isnoneornil(L, pos)) {</span>
<span class='curline'><a href='../S/185.html#L712'>L</a>                 712 src/scripting/game_lua_kernel.cpp 		data.add_child("second", luaW_checkconfig(L, pos));</span>
<span class='curline'><a href='../S/185.html#L723'>L</a>                 723 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, b);</span>
<span class='curline'><a href='../S/185.html#L739'>L</a>                 739 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_fire_wml_menu_item(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L741'>L</a>                 741 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L743'>L</a>                 743 src/scripting/game_lua_kernel.cpp 	map_location l1 = luaW_checklocation(L, 2);</span>
<span class='curline'><a href='../S/185.html#L746'>L</a>                 746 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, b);</span>
<span class='curline'><a href='../S/185.html#L756'>L</a>                 756 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_variable(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L758'>L</a>                 758 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L760'>L</a>                 760 src/scripting/game_lua_kernel.cpp 	return luaW_pushvariable(L, v) ? 1 : 0;</span>
<span class='curline'><a href='../S/185.html#L769'>L</a>                 769 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_side_variable(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L772'>L</a>                 772 src/scripting/game_lua_kernel.cpp 	unsigned side_index = luaL_checkinteger(L, 1) - 1;</span>
<span class='curline'><a href='../S/185.html#L774'>L</a>                 774 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 1, "invalid side number");</span>
<span class='curline'><a href='../S/185.html#L776'>L</a>                 776 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L778'>L</a>                 778 src/scripting/game_lua_kernel.cpp 	return luaW_pushvariable(L, v) ? 1 : 0;</span>
<span class='curline'><a href='../S/185.html#L787'>L</a>                 787 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_set_side_variable(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L789'>L</a>                 789 src/scripting/game_lua_kernel.cpp 	unsigned side = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/185.html#L791'>L</a>                 791 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 1, "invalid side number");</span>
<span class='curline'><a href='../S/185.html#L793'>L</a>                 793 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L795'>L</a>                 795 src/scripting/game_lua_kernel.cpp 	if(lua_isnoneornil(L, 3)) {</span>
<span class='curline'><a href='../S/185.html#L803'>L</a>                 803 src/scripting/game_lua_kernel.cpp 	luaW_checkvariable(L, v, 3);</span>
<span class='curline'><a href='../S/185.html#L812'>L</a>                 812 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_set_variable(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L814'>L</a>                 814 src/scripting/game_lua_kernel.cpp 	const std::string m = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L815'>L</a>                 815 src/scripting/game_lua_kernel.cpp 	if(m.empty()) return luaL_argerror(L, 1, "empty variable name");</span>
<span class='curline'><a href='../S/185.html#L816'>L</a>                 816 src/scripting/game_lua_kernel.cpp 	if (lua_isnoneornil(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L821'>L</a>                 821 src/scripting/game_lua_kernel.cpp 	luaW_checkvariable(L, v, 2);</span>
<span class='curline'><a href='../S/185.html#L825'>L</a>                 825 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_set_menu_item(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L827'>L</a>                 827 src/scripting/game_lua_kernel.cpp 	game_state_.get_wml_menu_items().set_item(luaL_checkstring(L, 1), luaW_checkvconfig(L,2));</span>
<span class='curline'><a href='../S/185.html#L831'>L</a>                 831 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_clear_menu_item(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L833'>L</a>                 833 src/scripting/game_lua_kernel.cpp 	std::string ids(luaL_checkstring(L, 1));</span>
<span class='curline'><a href='../S/185.html#L844'>L</a>                 844 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_set_end_campaign_credits(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L847'>L</a>                 847 src/scripting/game_lua_kernel.cpp 	classification.end_credits = luaW_toboolean(L, 1);</span>
<span class='curline'><a href='../S/185.html#L851'>L</a>                 851 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_set_end_campaign_text(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L854'>L</a>                 854 src/scripting/game_lua_kernel.cpp 	classification.end_text = luaW_checktstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L855'>L</a>                 855 src/scripting/game_lua_kernel.cpp 	if (lua_isnumber(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L856'>L</a>                 856 src/scripting/game_lua_kernel.cpp 		classification.end_text_duration = static_cast&lt;int&gt; (lua_tonumber(L, 2));</span>
<span class='curline'><a href='../S/185.html#L862'>L</a>                 862 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_set_next_scenario(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L865'>L</a>                 865 src/scripting/game_lua_kernel.cpp 	gamedata().set_next_scenario(luaL_checkstring(L, 1));</span>
<span class='curline'><a href='../S/185.html#L869'>L</a>                 869 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_shroud_op(lua_State *L, bool place_shroud)</span>
<span class='curline'><a href='../S/185.html#L872'>L</a>                 872 src/scripting/game_lua_kernel.cpp 	int side_num = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/185.html#L874'>L</a>                 874 src/scripting/game_lua_kernel.cpp 	if(lua_isstring(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L875'>L</a>                 875 src/scripting/game_lua_kernel.cpp 		std::string data = lua_tostring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L890'>L</a>                 890 src/scripting/game_lua_kernel.cpp 	} else if(lua_istable(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L891'>L</a>                 891 src/scripting/game_lua_kernel.cpp 		std::vector&lt;map_location&gt; locs_v = lua_check&lt;std::vector&lt;map_location&gt;&gt;(L, 2);</span>
<span class='curline'><a href='../S/185.html#L904'>L</a>                 904 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 2, "expected list of locations or shroud data string");</span>
<span class='curline'><a href='../S/185.html#L919'>L</a>                 919 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_highlight_hex(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L925'>L</a>                 925 src/scripting/game_lua_kernel.cpp 	const map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L926'>L</a>                 926 src/scripting/game_lua_kernel.cpp 	if(!map().on_board(loc)) return luaL_argerror(L, 1, "not on board");</span>
<span class='curline'><a href='../S/185.html#L938'>L</a>                 938 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_is_enemy(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L940'>L</a>                 940 src/scripting/game_lua_kernel.cpp 	unsigned side_1 = luaL_checkinteger(L, 1) - 1;</span>
<span class='curline'><a href='../S/185.html#L941'>L</a>                 941 src/scripting/game_lua_kernel.cpp 	unsigned side_2 = luaL_checkinteger(L, 2) - 1;</span>
<span class='curline'><a href='../S/185.html#L943'>L</a>                 943 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, teams()[side_1].is_enemy(side_2 + 1));</span>
<span class='curline'><a href='../S/185.html#L951'>L</a>                 951 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_view_locked(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L957'>L</a>                 957 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, game_display_-&gt;view_locked());</span>
<span class='curline'><a href='../S/185.html#L965'>L</a>                 965 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_lock_view(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L967'>L</a>                 967 src/scripting/game_lua_kernel.cpp 	bool lock = luaW_toboolean(L, 1);</span>
<span class='curline'><a href='../S/185.html#L979'>L</a>                 979 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_terrain(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L981'>L</a>                 981 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L985'>L</a>                 985 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, t_translation::write_terrain_code(t).c_str());</span>
<span class='curline'><a href='../S/185.html#L996'>L</a>                 996 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_set_terrain(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L998'>L</a>                 998 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L999'>L</a>                 999 src/scripting/game_lua_kernel.cpp 	std::string t_str(luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/185.html#L1003'>L</a>                1003 src/scripting/game_lua_kernel.cpp 	if (!lua_isnone(L, 3)) {</span>
<span class='curline'><a href='../S/185.html#L1004'>L</a>                1004 src/scripting/game_lua_kernel.cpp 		if (!lua_isnil(L, 3)) {</span>
<span class='curline'><a href='../S/185.html#L1005'>L</a>                1005 src/scripting/game_lua_kernel.cpp 			mode_str = luaL_checkstring(L, 3);</span>
<span class='curline'><a href='../S/185.html#L1008'>L</a>                1008 src/scripting/game_lua_kernel.cpp 		if(!lua_isnoneornil(L, 4)) {</span>
<span class='curline'><a href='../S/185.html#L1009'>L</a>                1009 src/scripting/game_lua_kernel.cpp 			replace_if_failed = luaW_toboolean(L, 4);</span>
<span class='curline'><a href='../S/185.html#L1027'>L</a>                1027 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_terrain_info(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1029'>L</a>                1029 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1034'>L</a>                1034 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L1035'>L</a>                1035 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, info.id().c_str());</span>
<span class='curline'><a href='../S/185.html#L1036'>L</a>                1036 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "id");</span>
<span class='curline'><a href='../S/185.html#L1037'>L</a>                1037 src/scripting/game_lua_kernel.cpp 	luaW_pushtstring(L, info.name());</span>
<span class='curline'><a href='../S/185.html#L1038'>L</a>                1038 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "name");</span>
<span class='curline'><a href='../S/185.html#L1039'>L</a>                1039 src/scripting/game_lua_kernel.cpp 	luaW_pushtstring(L, info.editor_name());</span>
<span class='curline'><a href='../S/185.html#L1040'>L</a>                1040 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "editor_name");</span>
<span class='curline'><a href='../S/185.html#L1041'>L</a>                1041 src/scripting/game_lua_kernel.cpp 	luaW_pushtstring(L, info.description());</span>
<span class='curline'><a href='../S/185.html#L1042'>L</a>                1042 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "description");</span>
<span class='curline'><a href='../S/185.html#L1043'>L</a>                1043 src/scripting/game_lua_kernel.cpp 	lua_push(L, info.icon_image());</span>
<span class='curline'><a href='../S/185.html#L1044'>L</a>                1044 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "icon");</span>
<span class='curline'><a href='../S/185.html#L1045'>L</a>                1045 src/scripting/game_lua_kernel.cpp 	lua_push(L, info.editor_image());</span>
<span class='curline'><a href='../S/185.html#L1046'>L</a>                1046 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "editor_image");</span>
<span class='curline'><a href='../S/185.html#L1047'>L</a>                1047 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, info.light_bonus(0));</span>
<span class='curline'><a href='../S/185.html#L1048'>L</a>                1048 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "light");</span>
<span class='curline'><a href='../S/185.html#L1049'>L</a>                1049 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, info.is_village());</span>
<span class='curline'><a href='../S/185.html#L1050'>L</a>                1050 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "village");</span>
<span class='curline'><a href='../S/185.html#L1051'>L</a>                1051 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, info.is_castle());</span>
<span class='curline'><a href='../S/185.html#L1052'>L</a>                1052 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "castle");</span>
<span class='curline'><a href='../S/185.html#L1053'>L</a>                1053 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, info.is_keep());</span>
<span class='curline'><a href='../S/185.html#L1054'>L</a>                1054 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "keep");</span>
<span class='curline'><a href='../S/185.html#L1055'>L</a>                1055 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, info.gives_healing());</span>
<span class='curline'><a href='../S/185.html#L1056'>L</a>                1056 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "healing");</span>
<span class='curline'><a href='../S/185.html#L1068'>L</a>                1068 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_time_of_day(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1076'>L</a>                1076 src/scripting/game_lua_kernel.cpp 	if(lua_isnumber(L, arg)) {</span>
<span class='curline'><a href='../S/185.html#L1078'>L</a>                1078 src/scripting/game_lua_kernel.cpp 		for_turn = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1081'>L</a>                1081 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 1, "turn number out of range");</span>
<span class='curline'><a href='../S/185.html#L1084'>L</a>                1084 src/scripting/game_lua_kernel.cpp 	else if(lua_isnil(L, arg)) ++arg;</span>
<span class='curline'><a href='../S/185.html#L1086'>L</a>                1086 src/scripting/game_lua_kernel.cpp 	if(luaW_tolocation(L, arg, loc)) {</span>
<span class='curline'><a href='../S/185.html#L1087'>L</a>                1087 src/scripting/game_lua_kernel.cpp 		if(!board().map().on_board(loc)) return luaL_argerror(L, arg, "coordinates are not on board");</span>
<span class='curline'><a href='../S/185.html#L1089'>L</a>                1089 src/scripting/game_lua_kernel.cpp 		if(lua_istable(L, arg)) {</span>
<span class='curline'><a href='../S/185.html#L1090'>L</a>                1090 src/scripting/game_lua_kernel.cpp 			lua_rawgeti(L, arg, 3);</span>
<span class='curline'><a href='../S/185.html#L1091'>L</a>                1091 src/scripting/game_lua_kernel.cpp 			consider_illuminates = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1092'>L</a>                1092 src/scripting/game_lua_kernel.cpp 			lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1093'>L</a>                1093 src/scripting/game_lua_kernel.cpp 		} else if(lua_isboolean(L, arg + 1)) {</span>
<span class='curline'><a href='../S/185.html#L1094'>L</a>                1094 src/scripting/game_lua_kernel.cpp 			consider_illuminates = luaW_toboolean(L, arg + 1);</span>
<span class='curline'><a href='../S/185.html#L1102'>L</a>                1102 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L1103'>L</a>                1103 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, tod.id.c_str());</span>
<span class='curline'><a href='../S/185.html#L1104'>L</a>                1104 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "id");</span>
<span class='curline'><a href='../S/185.html#L1105'>L</a>                1105 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, tod.lawful_bonus);</span>
<span class='curline'><a href='../S/185.html#L1106'>L</a>                1106 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "lawful_bonus");</span>
<span class='curline'><a href='../S/185.html#L1107'>L</a>                1107 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, tod.bonus_modified);</span>
<span class='curline'><a href='../S/185.html#L1108'>L</a>                1108 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "bonus_modified");</span>
<span class='curline'><a href='../S/185.html#L1109'>L</a>                1109 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, tod.image.c_str());</span>
<span class='curline'><a href='../S/185.html#L1110'>L</a>                1110 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "image");</span>
<span class='curline'><a href='../S/185.html#L1111'>L</a>                1111 src/scripting/game_lua_kernel.cpp 	luaW_pushtstring(L, tod.name);</span>
<span class='curline'><a href='../S/185.html#L1112'>L</a>                1112 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "name");</span>
<span class='curline'><a href='../S/185.html#L1114'>L</a>                1114 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, tod.color.r);</span>
<span class='curline'><a href='../S/185.html#L1115'>L</a>                1115 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "red");</span>
<span class='curline'><a href='../S/185.html#L1116'>L</a>                1116 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, tod.color.g);</span>
<span class='curline'><a href='../S/185.html#L1117'>L</a>                1117 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "green");</span>
<span class='curline'><a href='../S/185.html#L1118'>L</a>                1118 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, tod.color.b);</span>
<span class='curline'><a href='../S/185.html#L1119'>L</a>                1119 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "blue");</span>
<span class='curline'><a href='../S/185.html#L1129'>L</a>                1129 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_village_owner(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1131'>L</a>                1131 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1137'>L</a>                1137 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, side);</span>
<span class='curline'><a href='../S/185.html#L1146'>L</a>                1146 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_set_village_owner(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1148'>L</a>                1148 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1149'>L</a>                1149 src/scripting/game_lua_kernel.cpp 	int new_side = lua_isnoneornil(L, 2) ? 0 : luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/185.html#L1164'>L</a>                1164 src/scripting/game_lua_kernel.cpp 		board().get_team(new_side).get_village(loc, old_side, (luaW_toboolean(L, 4) ? &amp;gamedata() : nullptr) );</span>
<span class='curline'><a href='../S/185.html#L1176'>L</a>                1176 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_map_size(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1179'>L</a>                1179 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, map.w());</span>
<span class='curline'><a href='../S/185.html#L1180'>L</a>                1180 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, map.h());</span>
<span class='curline'><a href='../S/185.html#L1181'>L</a>                1181 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, map.border_size());</span>
<span class='curline'><a href='../S/185.html#L1190'>L</a>                1190 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_mouseover_tile(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1198'>L</a>                1198 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, loc.wml_x());</span>
<span class='curline'><a href='../S/185.html#L1199'>L</a>                1199 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, loc.wml_y());</span>
<span class='curline'><a href='../S/185.html#L1208'>L</a>                1208 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_selected_tile(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1216'>L</a>                1216 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, loc.wml_x());</span>
<span class='curline'><a href='../S/185.html#L1217'>L</a>                1217 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, loc.wml_y());</span>
<span class='curline'><a href='../S/185.html#L1226'>L</a>                1226 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_starting_location(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L1228'>L</a>                1228 src/scripting/game_lua_kernel.cpp 	const int side = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1230'>L</a>                1230 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 1, "out of bounds");</span>
<span class='curline'><a href='../S/185.html#L1234'>L</a>                1234 src/scripting/game_lua_kernel.cpp 	luaW_pushlocation(L, starting_pos);</span>
<span class='curline'><a href='../S/185.html#L1244'>L</a>                1244 src/scripting/game_lua_kernel.cpp static int intf_get_era(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1246'>L</a>                1246 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1247'>L</a>                1247 src/scripting/game_lua_kernel.cpp 	luaW_pushconfig(L, game_config_manager::get()-&gt;game_config().find_child("era","id",m));</span>
<span class='curline'><a href='../S/185.html#L1257'>L</a>                1257 src/scripting/game_lua_kernel.cpp int game_lua_kernel::impl_game_config_get(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1260'>L</a>                1260 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L1288'>L</a>                1288 src/scripting/game_lua_kernel.cpp 	return lua_kernel_base::impl_game_config_get(L);</span>
<span class='curline'><a href='../S/185.html#L1297'>L</a>                1297 src/scripting/game_lua_kernel.cpp int game_lua_kernel::impl_game_config_set(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1300'>L</a>                1300 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L1319'>L</a>                1319 src/scripting/game_lua_kernel.cpp 	return lua_kernel_base::impl_game_config_set(L);</span>
<span class='curline'><a href='../S/185.html#L1352'>L</a>                1352 src/scripting/game_lua_kernel.cpp int game_lua_kernel::impl_current_get(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1354'>L</a>                1354 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L1385'>L</a>                1385 src/scripting/game_lua_kernel.cpp 		luaW_pushconfig(L, cfg);</span>
<span class='curline'><a href='../S/185.html#L1397'>L</a>                1397 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_message(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1399'>L</a>                1399 src/scripting/game_lua_kernel.cpp 	t_string m = luaW_checktstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1401'>L</a>                1401 src/scripting/game_lua_kernel.cpp 	if (lua_isnone(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L1404'>L</a>                1404 src/scripting/game_lua_kernel.cpp 		m = luaW_checktstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L1411'>L</a>                1411 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_open_help(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1414'>L</a>                1414 src/scripting/game_lua_kernel.cpp 		help::show_help(game_display_-&gt;video(), luaL_checkstring(L, 1));</span>
<span class='curline'><a href='../S/185.html#L1419'>L</a>                1419 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_zoom(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L1424'>L</a>                1424 src/scripting/game_lua_kernel.cpp 	double factor = luaL_checknumber(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1425'>L</a>                1425 src/scripting/game_lua_kernel.cpp 	bool relative = luaW_toboolean(L, 2);</span>
<span class='curline'><a href='../S/185.html#L1432'>L</a>                1432 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, game_display_-&gt;get_zoom_factor());</span>
<span class='curline'><a href='../S/185.html#L1447'>L</a>                1447 src/scripting/game_lua_kernel.cpp static int impl_end_level_data_get(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L1449'>L</a>                1449 src/scripting/game_lua_kernel.cpp 	const end_level_data&amp; data = *static_cast&lt;end_level_data*&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/185.html#L1450'>L</a>                1450 src/scripting/game_lua_kernel.cpp 	const char* m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L1478'>L</a>                1478 src/scripting/game_lua_kernel.cpp int game_lua_kernel::impl_end_level_data_set(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L1480'>L</a>                1480 src/scripting/game_lua_kernel.cpp 	end_level_data&amp; data = *static_cast&lt;end_level_data*&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/185.html#L1481'>L</a>                1481 src/scripting/game_lua_kernel.cpp 	const char* m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L1493'>L</a>                1493 src/scripting/game_lua_kernel.cpp static int impl_end_level_data_collect(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L1495'>L</a>                1495 src/scripting/game_lua_kernel.cpp 	end_level_data* data = static_cast&lt;end_level_data*&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/185.html#L1501'>L</a>                1501 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_end_level_data(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L1507'>L</a>                1507 src/scripting/game_lua_kernel.cpp 	new(L) end_level_data(data);</span>
<span class='curline'><a href='../S/185.html#L1508'>L</a>                1508 src/scripting/game_lua_kernel.cpp 	if(luaL_newmetatable(L, "end level data")) {</span>
<span class='curline'><a href='../S/185.html#L1515'>L</a>                1515 src/scripting/game_lua_kernel.cpp 		luaL_setfuncs(L, callbacks, 0);</span>
<span class='curline'><a href='../S/185.html#L1517'>L</a>                1517 src/scripting/game_lua_kernel.cpp 	lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/185.html#L1521'>L</a>                1521 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_end_level(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1523'>L</a>                1523 src/scripting/game_lua_kernel.cpp 	vconfig cfg(luaW_checkvconfig(L, 1));</span>
<span class='curline'><a href='../S/185.html#L1548'>L</a>                1548 src/scripting/game_lua_kernel.cpp static int intf_eval_conditional(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1550'>L</a>                1550 src/scripting/game_lua_kernel.cpp 	vconfig cond = luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1552'>L</a>                1552 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, b);</span>
<span class='curline'><a href='../S/185.html#L1566'>L</a>                1566 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_find_path(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1572'>L</a>                1572 src/scripting/game_lua_kernel.cpp 	if (lua_isuserdata(L, arg))</span>
<span class='curline'><a href='../S/185.html#L1574'>L</a>                1574 src/scripting/game_lua_kernel.cpp 		u = &amp;luaW_checkunit(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1580'>L</a>                1580 src/scripting/game_lua_kernel.cpp 		src = luaW_checklocation(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1588'>L</a>                1588 src/scripting/game_lua_kernel.cpp 	dst = luaW_checklocation(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1592'>L</a>                1592 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 1, "invalid location");</span>
<span class='curline'><a href='../S/185.html#L1594'>L</a>                1594 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, arg - 2, "invalid location");</span>
<span class='curline'><a href='../S/185.html#L1602'>L</a>                1602 src/scripting/game_lua_kernel.cpp 	if (lua_istable(L, arg))</span>
<span class='curline'><a href='../S/185.html#L1604'>L</a>                1604 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "ignore_units");</span>
<span class='curline'><a href='../S/185.html#L1605'>L</a>                1605 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1606'>L</a>                1606 src/scripting/game_lua_kernel.cpp 		ignore_units = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1607'>L</a>                1607 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1609'>L</a>                1609 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "ignore_teleport");</span>
<span class='curline'><a href='../S/185.html#L1610'>L</a>                1610 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1611'>L</a>                1611 src/scripting/game_lua_kernel.cpp 		ignore_teleport = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1612'>L</a>                1612 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1614'>L</a>                1614 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "max_cost");</span>
<span class='curline'><a href='../S/185.html#L1615'>L</a>                1615 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1616'>L</a>                1616 src/scripting/game_lua_kernel.cpp 		if (!lua_isnil(L, -1))</span>
<span class='curline'><a href='../S/185.html#L1617'>L</a>                1617 src/scripting/game_lua_kernel.cpp 			stop_at = luaL_checknumber(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1618'>L</a>                1618 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1620'>L</a>                1620 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "viewing_side");</span>
<span class='curline'><a href='../S/185.html#L1621'>L</a>                1621 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1622'>L</a>                1622 src/scripting/game_lua_kernel.cpp 		if (!lua_isnil(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L1623'>L</a>                1623 src/scripting/game_lua_kernel.cpp 			int i = luaL_checkinteger(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1627'>L</a>                1627 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1629'>L</a>                1629 src/scripting/game_lua_kernel.cpp 	else if (lua_isfunction(L, arg))</span>
<span class='curline'><a href='../S/185.html#L1631'>L</a>                1631 src/scripting/game_lua_kernel.cpp 		calc.reset(new lua_pathfind_cost_calculator(L, arg));</span>
<span class='curline'><a href='../S/185.html#L1637'>L</a>                1637 src/scripting/game_lua_kernel.cpp 		if (!u) return luaL_argerror(L, 1, "unit not found");</span>
<span class='curline'><a href='../S/185.html#L1655'>L</a>                1655 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, nb, 0);</span>
<span class='curline'><a href='../S/185.html#L1658'>L</a>                1658 src/scripting/game_lua_kernel.cpp 		lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/185.html#L1659'>L</a>                1659 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, res.steps[i].wml_x());</span>
<span class='curline'><a href='../S/185.html#L1660'>L</a>                1660 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/185.html#L1661'>L</a>                1661 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, res.steps[i].wml_y());</span>
<span class='curline'><a href='../S/185.html#L1662'>L</a>                1662 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/185.html#L1663'>L</a>                1663 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, i + 1);</span>
<span class='curline'><a href='../S/185.html#L1665'>L</a>                1665 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, res.move_cost);</span>
<span class='curline'><a href='../S/185.html#L1676'>L</a>                1676 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_find_reach(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1681'>L</a>                1681 src/scripting/game_lua_kernel.cpp 	if (lua_isuserdata(L, arg))</span>
<span class='curline'><a href='../S/185.html#L1683'>L</a>                1683 src/scripting/game_lua_kernel.cpp 		u = &amp;luaW_checkunit(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1688'>L</a>                1688 src/scripting/game_lua_kernel.cpp 		map_location src = luaW_checklocation(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1691'>L</a>                1691 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 1, "unit not found");</span>
<span class='curline'><a href='../S/185.html#L1700'>L</a>                1700 src/scripting/game_lua_kernel.cpp 	if (lua_istable(L, arg))</span>
<span class='curline'><a href='../S/185.html#L1702'>L</a>                1702 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "ignore_units");</span>
<span class='curline'><a href='../S/185.html#L1703'>L</a>                1703 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1704'>L</a>                1704 src/scripting/game_lua_kernel.cpp 		ignore_units = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1705'>L</a>                1705 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1707'>L</a>                1707 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "ignore_teleport");</span>
<span class='curline'><a href='../S/185.html#L1708'>L</a>                1708 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1709'>L</a>                1709 src/scripting/game_lua_kernel.cpp 		ignore_teleport = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1710'>L</a>                1710 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1712'>L</a>                1712 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "additional_turns");</span>
<span class='curline'><a href='../S/185.html#L1713'>L</a>                1713 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1714'>L</a>                1714 src/scripting/game_lua_kernel.cpp 		additional_turns = lua_tointeger(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1715'>L</a>                1715 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1717'>L</a>                1717 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "viewing_side");</span>
<span class='curline'><a href='../S/185.html#L1718'>L</a>                1718 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1719'>L</a>                1719 src/scripting/game_lua_kernel.cpp 		if (!lua_isnil(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L1720'>L</a>                1720 src/scripting/game_lua_kernel.cpp 			int i = luaL_checkinteger(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1724'>L</a>                1724 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1735'>L</a>                1735 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, nb, 0);</span>
<span class='curline'><a href='../S/185.html#L1739'>L</a>                1739 src/scripting/game_lua_kernel.cpp 		lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/185.html#L1740'>L</a>                1740 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, s.curr.wml_x());</span>
<span class='curline'><a href='../S/185.html#L1741'>L</a>                1741 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/185.html#L1742'>L</a>                1742 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, s.curr.wml_y());</span>
<span class='curline'><a href='../S/185.html#L1743'>L</a>                1743 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/185.html#L1744'>L</a>                1744 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, s.move_left);</span>
<span class='curline'><a href='../S/185.html#L1745'>L</a>                1745 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 3);</span>
<span class='curline'><a href='../S/185.html#L1746'>L</a>                1746 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, i + 1);</span>
<span class='curline'><a href='../S/185.html#L1757'>L</a>                1757 src/scripting/game_lua_kernel.cpp static int load_fake_units(lua_State* L, int arg, T&amp; fake_units)</span>
<span class='curline'><a href='../S/185.html#L1759'>L</a>                1759 src/scripting/game_lua_kernel.cpp 	for (int i = 1, i_end = lua_rawlen(L, arg); i &lt;= i_end; ++i)</span>
<span class='curline'><a href='../S/185.html#L1762'>L</a>                1762 src/scripting/game_lua_kernel.cpp 		lua_rawgeti(L, arg, i);</span>
<span class='curline'><a href='../S/185.html#L1763'>L</a>                1763 src/scripting/game_lua_kernel.cpp 		int entry = lua_gettop(L);</span>
<span class='curline'><a href='../S/185.html#L1764'>L</a>                1764 src/scripting/game_lua_kernel.cpp 		if (!lua_istable(L, entry)) {</span>
<span class='curline'><a href='../S/185.html#L1768'>L</a>                1768 src/scripting/game_lua_kernel.cpp 		if (!luaW_tolocation(L, entry, src)) {</span>
<span class='curline'><a href='../S/185.html#L1772'>L</a>                1772 src/scripting/game_lua_kernel.cpp 		lua_rawgeti(L, entry, 3);</span>
<span class='curline'><a href='../S/185.html#L1773'>L</a>                1773 src/scripting/game_lua_kernel.cpp 		if (!lua_isnumber(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L1774'>L</a>                1774 src/scripting/game_lua_kernel.cpp 			lua_getfield(L, entry, "side");</span>
<span class='curline'><a href='../S/185.html#L1775'>L</a>                1775 src/scripting/game_lua_kernel.cpp 			if (!lua_isnumber(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L1779'>L</a>                1779 src/scripting/game_lua_kernel.cpp 		int side = lua_tointeger(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1781'>L</a>                1781 src/scripting/game_lua_kernel.cpp 		lua_rawgeti(L, entry, 4);</span>
<span class='curline'><a href='../S/185.html#L1782'>L</a>                1782 src/scripting/game_lua_kernel.cpp 		if (!lua_isstring(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L1783'>L</a>                1783 src/scripting/game_lua_kernel.cpp 			lua_getfield(L, entry, "type");</span>
<span class='curline'><a href='../S/185.html#L1784'>L</a>                1784 src/scripting/game_lua_kernel.cpp 			if (!lua_isstring(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L1788'>L</a>                1788 src/scripting/game_lua_kernel.cpp 		std::string unit_type = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1792'>L</a>                1792 src/scripting/game_lua_kernel.cpp 		lua_settop(L, entry - 1);</span>
<span class='curline'><a href='../S/185.html#L1796'>L</a>                1796 src/scripting/game_lua_kernel.cpp 	return luaL_argerror(L, arg, "unit type table malformed - each entry should be either array of 4 elements or table with keys x, y, side, type");</span>
<span class='curline'><a href='../S/185.html#L1807'>L</a>                1807 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_find_cost_map(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L1810'>L</a>                1810 src/scripting/game_lua_kernel.cpp 	unit* unit = luaW_tounit(L, arg, true);</span>
<span class='curline'><a href='../S/185.html#L1812'>L</a>                1812 src/scripting/game_lua_kernel.cpp 	luaW_tovconfig(L, arg, filter);</span>
<span class='curline'><a href='../S/185.html#L1830'>L</a>                1830 src/scripting/game_lua_kernel.cpp 		map_location src = luaW_checklocation(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1839'>L</a>                1839 src/scripting/game_lua_kernel.cpp 	if (lua_istable(L, arg))  // 2. arg - optional types</span>
<span class='curline'><a href='../S/185.html#L1841'>L</a>                1841 src/scripting/game_lua_kernel.cpp 		load_fake_units(L, arg, fake_units);</span>
<span class='curline'><a href='../S/185.html#L1847'>L</a>                1847 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 1, "unit(s) not found");</span>
<span class='curline'><a href='../S/185.html#L1853'>L</a>                1853 src/scripting/game_lua_kernel.cpp 	if (lua_istable(L, arg))  // 4. arg - options</span>
<span class='curline'><a href='../S/185.html#L1855'>L</a>                1855 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "ignore_units");</span>
<span class='curline'><a href='../S/185.html#L1856'>L</a>                1856 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1857'>L</a>                1857 src/scripting/game_lua_kernel.cpp 		if (!lua_isnil(L, -1))</span>
<span class='curline'><a href='../S/185.html#L1859'>L</a>                1859 src/scripting/game_lua_kernel.cpp 			ignore_units = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1861'>L</a>                1861 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1863'>L</a>                1863 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "ignore_teleport");</span>
<span class='curline'><a href='../S/185.html#L1864'>L</a>                1864 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1865'>L</a>                1865 src/scripting/game_lua_kernel.cpp 		if (!lua_isnil(L, -1))</span>
<span class='curline'><a href='../S/185.html#L1867'>L</a>                1867 src/scripting/game_lua_kernel.cpp 			ignore_teleport = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1869'>L</a>                1869 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1871'>L</a>                1871 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "viewing_side");</span>
<span class='curline'><a href='../S/185.html#L1872'>L</a>                1872 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1873'>L</a>                1873 src/scripting/game_lua_kernel.cpp 		if (!lua_isnil(L, -1))</span>
<span class='curline'><a href='../S/185.html#L1875'>L</a>                1875 src/scripting/game_lua_kernel.cpp 			int i = luaL_checkinteger(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1883'>L</a>                1883 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "debug");</span>
<span class='curline'><a href='../S/185.html#L1884'>L</a>                1884 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1885'>L</a>                1885 src/scripting/game_lua_kernel.cpp 		if (!lua_isnil(L, -1))</span>
<span class='curline'><a href='../S/185.html#L1887'>L</a>                1887 src/scripting/game_lua_kernel.cpp 			debug = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1889'>L</a>                1889 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1891'>L</a>                1891 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "use_max_moves");</span>
<span class='curline'><a href='../S/185.html#L1892'>L</a>                1892 src/scripting/game_lua_kernel.cpp 		lua_rawget(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1893'>L</a>                1893 src/scripting/game_lua_kernel.cpp 		if (!lua_isnil(L, -1))</span>
<span class='curline'><a href='../S/185.html#L1895'>L</a>                1895 src/scripting/game_lua_kernel.cpp 			use_max_moves = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L1897'>L</a>                1897 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L1904'>L</a>                1904 src/scripting/game_lua_kernel.cpp 	luaW_tovconfig(L, arg, filter);</span>
<span class='curline'><a href='../S/185.html#L1948'>L</a>                1948 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, location_set.size(), 0);</span>
<span class='curline'><a href='../S/185.html#L1952'>L</a>                1952 src/scripting/game_lua_kernel.cpp 		lua_createtable(L, 4, 0);</span>
<span class='curline'><a href='../S/185.html#L1954'>L</a>                1954 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, loc.wml_x());</span>
<span class='curline'><a href='../S/185.html#L1955'>L</a>                1955 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/185.html#L1957'>L</a>                1957 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, loc.wml_y());</span>
<span class='curline'><a href='../S/185.html#L1958'>L</a>                1958 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/185.html#L1960'>L</a>                1960 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, cost_map.get_pair_at(loc.x, loc.y).first);</span>
<span class='curline'><a href='../S/185.html#L1961'>L</a>                1961 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 3);</span>
<span class='curline'><a href='../S/185.html#L1963'>L</a>                1963 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, cost_map.get_pair_at(loc.x, loc.y).second);</span>
<span class='curline'><a href='../S/185.html#L1964'>L</a>                1964 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 4);</span>
<span class='curline'><a href='../S/185.html#L1966'>L</a>                1966 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, counter);</span>
<span class='curline'><a href='../S/185.html#L1972'>L</a>                1972 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_print(lua_State *L) {</span>
<span class='curline'><a href='../S/185.html#L1973'>L</a>                1973 src/scripting/game_lua_kernel.cpp 	vconfig cfg(luaW_checkvconfig(L, 1));</span>
<span class='curline'><a href='../S/185.html#L2029'>L</a>                2029 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_put_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2032'>L</a>                2032 src/scripting/game_lua_kernel.cpp 		return luaL_error(L, "Attempted to move a unit while the map is locked");</span>
<span class='curline'><a href='../S/185.html#L2037'>L</a>                2037 src/scripting/game_lua_kernel.cpp 	if (lua_isnumber(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L2040'>L</a>                2040 src/scripting/game_lua_kernel.cpp 		loc.set_wml_x(lua_tointeger(L, 1));</span>
<span class='curline'><a href='../S/185.html#L2041'>L</a>                2041 src/scripting/game_lua_kernel.cpp 		loc.set_wml_y(luaL_checkinteger(L, 2));</span>
<span class='curline'><a href='../S/185.html#L2043'>L</a>                2043 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 1, "invalid location");</span>
<span class='curline'><a href='../S/185.html#L2045'>L</a>                2045 src/scripting/game_lua_kernel.cpp 	} else if (luaW_tolocation(L, 2, loc)) {</span>
<span class='curline'><a href='../S/185.html#L2047'>L</a>                2047 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 2, "invalid location");</span>
<span class='curline'><a href='../S/185.html#L2051'>L</a>                2051 src/scripting/game_lua_kernel.cpp 	if((luaW_isunit(L, unit_arg))) {</span>
<span class='curline'><a href='../S/185.html#L2052'>L</a>                2052 src/scripting/game_lua_kernel.cpp 		lua_unit&amp; u = *luaW_checkunit_ref(L, unit_arg);</span>
<span class='curline'><a href='../S/185.html#L2059'>L</a>                2059 src/scripting/game_lua_kernel.cpp 				return luaL_argerror(L, 1, "invalid location");</span>
<span class='curline'><a href='../S/185.html#L2066'>L</a>                2066 src/scripting/game_lua_kernel.cpp 	} else if(!lua_isnoneornil(L, unit_arg)) {</span>
<span class='curline'><a href='../S/185.html#L2068'>L</a>                2068 src/scripting/game_lua_kernel.cpp 		config cfg = luaW_checkconfig(L, unit_arg, vcfg);</span>
<span class='curline'><a href='../S/185.html#L2073'>L</a>                2073 src/scripting/game_lua_kernel.cpp 				return luaL_argerror(L, 2, "invalid location");</span>
<span class='curline'><a href='../S/185.html#L2089'>L</a>                2089 src/scripting/game_lua_kernel.cpp 	if(unit_arg != 1 || luaW_toboolean(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L2099'>L</a>                2099 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_erase_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2102'>L</a>                2102 src/scripting/game_lua_kernel.cpp 		return luaL_error(L, "Attempted to remove a unit while the map is locked");</span>
<span class='curline'><a href='../S/185.html#L2106'>L</a>                2106 src/scripting/game_lua_kernel.cpp 	if(luaW_isunit(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L2107'>L</a>                2107 src/scripting/game_lua_kernel.cpp 		lua_unit&amp; u = *luaW_checkunit_ref(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2111'>L</a>                2111 src/scripting/game_lua_kernel.cpp 				return luaL_argerror(L, 1, "invalid location");</span>
<span class='curline'><a href='../S/185.html#L2118'>L</a>                2118 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 1, "can't erase private units");</span>
<span class='curline'><a href='../S/185.html#L2120'>L</a>                2120 src/scripting/game_lua_kernel.cpp 	} else if (luaW_tolocation(L, 1, loc)) {</span>
<span class='curline'><a href='../S/185.html#L2122'>L</a>                2122 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 1, "invalid location");</span>
<span class='curline'><a href='../S/185.html#L2124'>L</a>                2124 src/scripting/game_lua_kernel.cpp 	} else if (!lua_isnoneornil(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L2125'>L</a>                2125 src/scripting/game_lua_kernel.cpp 		config cfg = luaW_checkconfig(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2129'>L</a>                2129 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 1, "invalid location");</span>
<span class='curline'><a href='../S/185.html#L2132'>L</a>                2132 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 1, "expected unit or integer");</span>
<span class='curline'><a href='../S/185.html#L2145'>L</a>                2145 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_put_recall_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2148'>L</a>                2148 src/scripting/game_lua_kernel.cpp 		return luaL_error(L, "Attempted to move a unit while the map is locked");</span>
<span class='curline'><a href='../S/185.html#L2152'>L</a>                2152 src/scripting/game_lua_kernel.cpp 	int side = lua_tointeger(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2155'>L</a>                2155 src/scripting/game_lua_kernel.cpp 	if(luaW_isunit(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L2156'>L</a>                2156 src/scripting/game_lua_kernel.cpp 		lu = luaW_checkunit_ref(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2159'>L</a>                2159 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 1, "unit already on recall list");</span>
<span class='curline'><a href='../S/185.html#L2163'>L</a>                2163 src/scripting/game_lua_kernel.cpp 		config cfg = luaW_checkconfig(L, 1, vcfg);</span>
<span class='curline'><a href='../S/185.html#L2191'>L</a>                2191 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_extract_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2194'>L</a>                2194 src/scripting/game_lua_kernel.cpp 		return luaL_error(L, "Attempted to remove a unit while the map is locked");</span>
<span class='curline'><a href='../S/185.html#L2196'>L</a>                2196 src/scripting/game_lua_kernel.cpp 	lua_unit* lu = luaW_checkunit_ref(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2223'>L</a>                2223 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_find_vacant_tile(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2225'>L</a>                2225 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2228'>L</a>                2228 src/scripting/game_lua_kernel.cpp 	if (!lua_isnoneornil(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L2229'>L</a>                2229 src/scripting/game_lua_kernel.cpp 		if(luaW_isunit(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L2230'>L</a>                2230 src/scripting/game_lua_kernel.cpp 			u = luaW_checkunit_ptr(L, 2, false);</span>
<span class='curline'><a href='../S/185.html#L2233'>L</a>                2233 src/scripting/game_lua_kernel.cpp 			config cfg = luaW_checkconfig(L, 2, vcfg);</span>
<span class='curline'><a href='../S/185.html#L2241'>L</a>                2241 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, res.wml_x());</span>
<span class='curline'><a href='../S/185.html#L2242'>L</a>                2242 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, res.wml_y());</span>
<span class='curline'><a href='../S/185.html#L2252'>L</a>                2252 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_float_label(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2254'>L</a>                2254 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2257'>L</a>                2257 src/scripting/game_lua_kernel.cpp 	t_string text = luaW_checktstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2258'>L</a>                2258 src/scripting/game_lua_kernel.cpp 	if (!lua_isnoneornil(L, 3)) {</span>
<span class='curline'><a href='../S/185.html#L2259'>L</a>                2259 src/scripting/game_lua_kernel.cpp 		color = color_t::from_rgb_string(luaL_checkstring(L, 3));</span>
<span class='curline'><a href='../S/185.html#L2273'>L</a>                2273 src/scripting/game_lua_kernel.cpp static int intf_create_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2276'>L</a>                2276 src/scripting/game_lua_kernel.cpp 	config cfg = luaW_checkconfig(L, 1, vcfg);</span>
<span class='curline'><a href='../S/185.html#L2278'>L</a>                2278 src/scripting/game_lua_kernel.cpp 	luaW_pushunit(L, u);</span>
<span class='curline'><a href='../S/185.html#L2287'>L</a>                2287 src/scripting/game_lua_kernel.cpp static int intf_copy_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2289'>L</a>                2289 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2290'>L</a>                2290 src/scripting/game_lua_kernel.cpp 	luaW_pushunit(L, unit_ptr(new unit(u)));</span>
<span class='curline'><a href='../S/185.html#L2302'>L</a>                2302 src/scripting/game_lua_kernel.cpp static int intf_unit_resistance(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2304'>L</a>                2304 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2305'>L</a>                2305 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2306'>L</a>                2306 src/scripting/game_lua_kernel.cpp 	bool a = luaW_toboolean(L, 3);</span>
<span class='curline'><a href='../S/185.html#L2309'>L</a>                2309 src/scripting/game_lua_kernel.cpp 	if (!lua_isnoneornil(L, 4)) {</span>
<span class='curline'><a href='../S/185.html#L2310'>L</a>                2310 src/scripting/game_lua_kernel.cpp 		loc = luaW_checklocation(L, 4);</span>
<span class='curline'><a href='../S/185.html#L2313'>L</a>                2313 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, u.resistance_against(m, a, loc));</span>
<span class='curline'><a href='../S/185.html#L2323'>L</a>                2323 src/scripting/game_lua_kernel.cpp static int intf_unit_movement_cost(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2325'>L</a>                2325 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2326'>L</a>                2326 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2328'>L</a>                2328 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, u.movement_cost(t));</span>
<span class='curline'><a href='../S/185.html#L2338'>L</a>                2338 src/scripting/game_lua_kernel.cpp static int intf_unit_vision_cost(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2340'>L</a>                2340 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2341'>L</a>                2341 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2343'>L</a>                2343 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, u.vision_cost(t));</span>
<span class='curline'><a href='../S/185.html#L2353'>L</a>                2353 src/scripting/game_lua_kernel.cpp static int intf_unit_jamming_cost(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2355'>L</a>                2355 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2356'>L</a>                2356 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2358'>L</a>                2358 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, u.jamming_cost(t));</span>
<span class='curline'><a href='../S/185.html#L2368'>L</a>                2368 src/scripting/game_lua_kernel.cpp static int intf_unit_defense(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2370'>L</a>                2370 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2371'>L</a>                2371 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2373'>L</a>                2373 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, u.defense_modifier(t));</span>
<span class='curline'><a href='../S/185.html#L2383'>L</a>                2383 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_unit_ability(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2385'>L</a>                2385 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2386'>L</a>                2386 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2387'>L</a>                2387 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, u.get_ability_bool(m, board()));</span>
<span class='curline'><a href='../S/185.html#L2396'>L</a>                2396 src/scripting/game_lua_kernel.cpp static int intf_transform_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2398'>L</a>                2398 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2399'>L</a>                2399 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2401'>L</a>                2401 src/scripting/game_lua_kernel.cpp 	if (!utp) return luaL_argerror(L, 2, "unknown unit type");</span>
<span class='curline'><a href='../S/185.html#L2410'>L</a>                2410 src/scripting/game_lua_kernel.cpp static void luaW_pushsimdata(lua_State *L, const combatant &amp;cmb)</span>
<span class='curline'><a href='../S/185.html#L2413'>L</a>                2413 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, 0, 4);</span>
<span class='curline'><a href='../S/185.html#L2414'>L</a>                2414 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, cmb.poisoned);</span>
<span class='curline'><a href='../S/185.html#L2415'>L</a>                2415 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "poisoned");</span>
<span class='curline'><a href='../S/185.html#L2416'>L</a>                2416 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, cmb.slowed);</span>
<span class='curline'><a href='../S/185.html#L2417'>L</a>                2417 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "slowed");</span>
<span class='curline'><a href='../S/185.html#L2418'>L</a>                2418 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, cmb.untouched);</span>
<span class='curline'><a href='../S/185.html#L2419'>L</a>                2419 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "untouched");</span>
<span class='curline'><a href='../S/185.html#L2420'>L</a>                2420 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, cmb.average_hp());</span>
<span class='curline'><a href='../S/185.html#L2421'>L</a>                2421 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "average_hp");</span>
<span class='curline'><a href='../S/185.html#L2422'>L</a>                2422 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, n, 0);</span>
<span class='curline'><a href='../S/185.html#L2424'>L</a>                2424 src/scripting/game_lua_kernel.cpp 		lua_pushnumber(L, cmb.hp_dist[i]);</span>
<span class='curline'><a href='../S/185.html#L2425'>L</a>                2425 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, i);</span>
<span class='curline'><a href='../S/185.html#L2427'>L</a>                2427 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "hp_chance");</span>
<span class='curline'><a href='../S/185.html#L2433'>L</a>                2433 src/scripting/game_lua_kernel.cpp static void luaW_pushsimweapon(lua_State *L, const battle_context_unit_stats &amp;bcustats)</span>
<span class='curline'><a href='../S/185.html#L2436'>L</a>                2436 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, 0, 16);</span>
<span class='curline'><a href='../S/185.html#L2438'>L</a>                2438 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, bcustats.num_blows);</span>
<span class='curline'><a href='../S/185.html#L2439'>L</a>                2439 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "num_blows");</span>
<span class='curline'><a href='../S/185.html#L2440'>L</a>                2440 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, bcustats.damage);</span>
<span class='curline'><a href='../S/185.html#L2441'>L</a>                2441 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "damage");</span>
<span class='curline'><a href='../S/185.html#L2442'>L</a>                2442 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, bcustats.chance_to_hit);</span>
<span class='curline'><a href='../S/185.html#L2443'>L</a>                2443 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "chance_to_hit");</span>
<span class='curline'><a href='../S/185.html#L2444'>L</a>                2444 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, bcustats.poisons);</span>
<span class='curline'><a href='../S/185.html#L2445'>L</a>                2445 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "poisons");</span>
<span class='curline'><a href='../S/185.html#L2446'>L</a>                2446 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, bcustats.slows);</span>
<span class='curline'><a href='../S/185.html#L2447'>L</a>                2447 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "slows");</span>
<span class='curline'><a href='../S/185.html#L2448'>L</a>                2448 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, bcustats.petrifies);</span>
<span class='curline'><a href='../S/185.html#L2449'>L</a>                2449 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "petrifies");</span>
<span class='curline'><a href='../S/185.html#L2450'>L</a>                2450 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, bcustats.plagues);</span>
<span class='curline'><a href='../S/185.html#L2451'>L</a>                2451 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "plagues");</span>
<span class='curline'><a href='../S/185.html#L2452'>L</a>                2452 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, bcustats.plague_type.c_str());</span>
<span class='curline'><a href='../S/185.html#L2453'>L</a>                2453 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "plague_type");</span>
<span class='curline'><a href='../S/185.html#L2454'>L</a>                2454 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, bcustats.backstab_pos);</span>
<span class='curline'><a href='../S/185.html#L2455'>L</a>                2455 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "backstabs");</span>
<span class='curline'><a href='../S/185.html#L2456'>L</a>                2456 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, bcustats.rounds);</span>
<span class='curline'><a href='../S/185.html#L2457'>L</a>                2457 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "rounds");</span>
<span class='curline'><a href='../S/185.html#L2458'>L</a>                2458 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, bcustats.firststrike);</span>
<span class='curline'><a href='../S/185.html#L2459'>L</a>                2459 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "firststrike");</span>
<span class='curline'><a href='../S/185.html#L2460'>L</a>                2460 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, bcustats.drains);</span>
<span class='curline'><a href='../S/185.html#L2461'>L</a>                2461 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "drains");</span>
<span class='curline'><a href='../S/185.html#L2462'>L</a>                2462 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, bcustats.drain_constant);</span>
<span class='curline'><a href='../S/185.html#L2463'>L</a>                2463 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "drain_constant");</span>
<span class='curline'><a href='../S/185.html#L2464'>L</a>                2464 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, bcustats.drain_percent);</span>
<span class='curline'><a href='../S/185.html#L2465'>L</a>                2465 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "drain_percent");</span>
<span class='curline'><a href='../S/185.html#L2469'>L</a>                2469 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, bcustats.attack_num);</span>
<span class='curline'><a href='../S/185.html#L2470'>L</a>                2470 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "attack_num"); // DEPRECATED</span>
<span class='curline'><a href='../S/185.html#L2471'>L</a>                2471 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, bcustats.attack_num + 1);</span>
<span class='curline'><a href='../S/185.html#L2472'>L</a>                2472 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "number");</span>
<span class='curline'><a href='../S/185.html#L2476'>L</a>                2476 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, bcustats.weapon-&gt;id().c_str());</span>
<span class='curline'><a href='../S/185.html#L2477'>L</a>                2477 src/scripting/game_lua_kernel.cpp 		lua_setfield(L, -2, "name");</span>
<span class='curline'><a href='../S/185.html#L2478'>L</a>                2478 src/scripting/game_lua_kernel.cpp 		luaW_pushweapon(L, bcustats.weapon);</span>
<span class='curline'><a href='../S/185.html#L2479'>L</a>                2479 src/scripting/game_lua_kernel.cpp 		lua_setfield(L, -2, "weapon");</span>
<span class='curline'><a href='../S/185.html#L2495'>L</a>                2495 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_simulate_combat(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2499'>L</a>                2499 src/scripting/game_lua_kernel.cpp 	const unit&amp; att = luaW_checkunit(L, arg_num);</span>
<span class='curline'><a href='../S/185.html#L2501'>L</a>                2501 src/scripting/game_lua_kernel.cpp 	if (lua_isnumber(L, arg_num)) {</span>
<span class='curline'><a href='../S/185.html#L2502'>L</a>                2502 src/scripting/game_lua_kernel.cpp 		att_w = lua_tointeger(L, arg_num) - 1;</span>
<span class='curline'><a href='../S/185.html#L2504'>L</a>                2504 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, arg_num, "weapon index out of bounds");</span>
<span class='curline'><a href='../S/185.html#L2508'>L</a>                2508 src/scripting/game_lua_kernel.cpp 	const unit&amp; def = luaW_checkunit(L, arg_num, true);</span>
<span class='curline'><a href='../S/185.html#L2510'>L</a>                2510 src/scripting/game_lua_kernel.cpp 	if (lua_isnumber(L, arg_num)) {</span>
<span class='curline'><a href='../S/185.html#L2511'>L</a>                2511 src/scripting/game_lua_kernel.cpp 		def_w = lua_tointeger(L, arg_num) - 1;</span>
<span class='curline'><a href='../S/185.html#L2513'>L</a>                2513 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, arg_num, "weapon index out of bounds");</span>
<span class='curline'><a href='../S/185.html#L2520'>L</a>                2520 src/scripting/game_lua_kernel.cpp 	luaW_pushsimdata(L, context.get_attacker_combatant());</span>
<span class='curline'><a href='../S/185.html#L2521'>L</a>                2521 src/scripting/game_lua_kernel.cpp 	luaW_pushsimdata(L, context.get_defender_combatant());</span>
<span class='curline'><a href='../S/185.html#L2522'>L</a>                2522 src/scripting/game_lua_kernel.cpp 	luaW_pushsimweapon(L, context.get_attacker_stats());</span>
<span class='curline'><a href='../S/185.html#L2523'>L</a>                2523 src/scripting/game_lua_kernel.cpp 	luaW_pushsimweapon(L, context.get_defender_stats());</span>
<span class='curline'><a href='../S/185.html#L2531'>L</a>                2531 src/scripting/game_lua_kernel.cpp static int intf_set_music(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2534'>L</a>                2534 src/scripting/game_lua_kernel.cpp 	if (lua_isnoneornil(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L2539'>L</a>                2539 src/scripting/game_lua_kernel.cpp 	config cfg = luaW_checkconfig(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2549'>L</a>                2549 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_play_sound(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2551'>L</a>                2551 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2553'>L</a>                2553 src/scripting/game_lua_kernel.cpp 	int repeats = lua_tointeger(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2563'>L</a>                2563 src/scripting/game_lua_kernel.cpp static int intf_sound_volume(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L2566'>L</a>                2566 src/scripting/game_lua_kernel.cpp 	lua_pushnumber(L, sound::get_sound_volume() * 100.0 / vol);</span>
<span class='curline'><a href='../S/185.html#L2567'>L</a>                2567 src/scripting/game_lua_kernel.cpp 	if(lua_isnumber(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L2568'>L</a>                2568 src/scripting/game_lua_kernel.cpp 		float rel = lua_tonumber(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2570'>L</a>                2570 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 1, "volume must be in range 0..100");</span>
<span class='curline'><a href='../S/185.html#L2585'>L</a>                2585 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_scroll_to_tile(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2587'>L</a>                2587 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2588'>L</a>                2588 src/scripting/game_lua_kernel.cpp 	bool check_fogged = luaW_toboolean(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2589'>L</a>                2589 src/scripting/game_lua_kernel.cpp 	game_display::SCROLL_TYPE scroll = luaW_toboolean(L, 4)</span>
<span class='curline'><a href='../S/185.html#L2590'>L</a>                2590 src/scripting/game_lua_kernel.cpp 		? luaW_toboolean(L, 3)</span>
<span class='curline'><a href='../S/185.html#L2593'>L</a>                2593 src/scripting/game_lua_kernel.cpp 		: luaW_toboolean(L, 3)</span>
<span class='curline'><a href='../S/185.html#L2603'>L</a>                2603 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_select_hex(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2611'>L</a>                2611 src/scripting/game_lua_kernel.cpp 	const map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2612'>L</a>                2612 src/scripting/game_lua_kernel.cpp 	luaW_pushlocation(L, loc);</span>
<span class='curline'><a href='../S/185.html#L2613'>L</a>                2613 src/scripting/game_lua_kernel.cpp 	lua_replace(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2615'>L</a>                2615 src/scripting/game_lua_kernel.cpp 	intf_select_unit(L);</span>
<span class='curline'><a href='../S/185.html#L2616'>L</a>                2616 src/scripting/game_lua_kernel.cpp 	if(!lua_isnoneornil(L, 2) &amp;&amp; luaW_toboolean(L,2)) {</span>
<span class='curline'><a href='../S/185.html#L2617'>L</a>                2617 src/scripting/game_lua_kernel.cpp 		intf_highlight_hex(L);</span>
<span class='curline'><a href='../S/185.html#L2627'>L</a>                2627 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_select_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2630'>L</a>                2630 src/scripting/game_lua_kernel.cpp 	if(lua_isnoneornil(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L2634'>L</a>                2634 src/scripting/game_lua_kernel.cpp 	const map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2635'>L</a>                2635 src/scripting/game_lua_kernel.cpp 	if(!map().on_board(loc)) return luaL_argerror(L, 1, "not on board");</span>
<span class='curline'><a href='../S/185.html#L2637'>L</a>                2637 src/scripting/game_lua_kernel.cpp 	if(!lua_isnoneornil(L, 2))</span>
<span class='curline'><a href='../S/185.html#L2638'>L</a>                2638 src/scripting/game_lua_kernel.cpp 		highlight = luaW_toboolean(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2639'>L</a>                2639 src/scripting/game_lua_kernel.cpp 	const bool fire_event = luaW_toboolean(L, 3);</span>
<span class='curline'><a href='../S/185.html#L2661'>L</a>                2661 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_is_skipping_messages(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2667'>L</a>                2667 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, skipping);</span>
<span class='curline'><a href='../S/185.html#L2675'>L</a>                2675 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_skip_messages(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2678'>L</a>                2678 src/scripting/game_lua_kernel.cpp 	if (!lua_isnone(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L2679'>L</a>                2679 src/scripting/game_lua_kernel.cpp 		skip = luaW_toboolean(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2689'>L</a>                2689 src/scripting/game_lua_kernel.cpp 		lua_State *L;</span>
<span class='curline'><a href='../S/185.html#L2695'>L</a>                2695 src/scripting/game_lua_kernel.cpp 			: L(l)</span>
<span class='curline'><a href='../S/185.html#L2704'>L</a>                2704 src/scripting/game_lua_kernel.cpp 			bool is_local_ai = lua_kernel_base::get_lua_kernel&lt;game_lua_kernel&gt;(L).board().get_team(side).is_local_ai();</span>
<span class='curline'><a href='../S/185.html#L2713'>L</a>                2713 src/scripting/game_lua_kernel.cpp 			if(random_choice_index != 0 &amp;&amp; lua_isfunction(L, random_choice_index)) {</span>
<span class='curline'><a href='../S/185.html#L2727'>L</a>                2727 src/scripting/game_lua_kernel.cpp 			lua_pushvalue(L, function_index);</span>
<span class='curline'><a href='../S/185.html#L2728'>L</a>                2728 src/scripting/game_lua_kernel.cpp 			lua_pushnumber(L, side);</span>
<span class='curline'><a href='../S/185.html#L2729'>L</a>                2729 src/scripting/game_lua_kernel.cpp 			if (luaW_pcall(L, 1, 1, false)) {</span>
<span class='curline'><a href='../S/185.html#L2730'>L</a>                2730 src/scripting/game_lua_kernel.cpp 				if(!luaW_toconfig(L, -1, cfg)) {</span>
<span class='curline'><a href='../S/185.html#L2731'>L</a>                2731 src/scripting/game_lua_kernel.cpp 					lua_kernel_base::get_lua_kernel&lt;game_lua_kernel&gt;(L).log_error("function returned to wesnoth.synchronize_choice a table which was partially invalid");</span>
<span class='curline'><a href='../S/185.html#L2750'>L</a>                2750 src/scripting/game_lua_kernel.cpp static int intf_synchronize_choice(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2759'>L</a>                2759 src/scripting/game_lua_kernel.cpp 	if(!lua_isfunction(L, nextarg) &amp;&amp; luaW_totstring(L, nextarg, desc) ) {</span>
<span class='curline'><a href='../S/185.html#L2762'>L</a>                2762 src/scripting/game_lua_kernel.cpp 	if(lua_isfunction(L, nextarg)) {</span>
<span class='curline'><a href='../S/185.html#L2766'>L</a>                2766 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, nextarg, "expected a function");</span>
<span class='curline'><a href='../S/185.html#L2768'>L</a>                2768 src/scripting/game_lua_kernel.cpp 	if(lua_isfunction(L, nextarg)) {</span>
<span class='curline'><a href='../S/185.html#L2771'>L</a>                2771 src/scripting/game_lua_kernel.cpp 	side_for = lua_tointeger(L, nextarg);</span>
<span class='curline'><a href='../S/185.html#L2773'>L</a>                2773 src/scripting/game_lua_kernel.cpp 	config cfg = mp_sync::get_user_choice(tagname, lua_synchronize(L, desc, human_func, 0, ai_func), side_for);</span>
<span class='curline'><a href='../S/185.html#L2774'>L</a>                2774 src/scripting/game_lua_kernel.cpp 	luaW_pushconfig(L, cfg);</span>
<span class='curline'><a href='../S/185.html#L2785'>L</a>                2785 src/scripting/game_lua_kernel.cpp static int intf_synchronize_choices(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2794'>L</a>                2794 src/scripting/game_lua_kernel.cpp 	if(!lua_isfunction(L, nextarg) &amp;&amp; luaW_totstring(L, nextarg, desc) ) {</span>
<span class='curline'><a href='../S/185.html#L2797'>L</a>                2797 src/scripting/game_lua_kernel.cpp 	if(lua_isfunction(L, nextarg)) {</span>
<span class='curline'><a href='../S/185.html#L2801'>L</a>                2801 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, nextarg, "expected a function");</span>
<span class='curline'><a href='../S/185.html#L2803'>L</a>                2803 src/scripting/game_lua_kernel.cpp 	if(lua_isfunction(L, nextarg)) {</span>
<span class='curline'><a href='../S/185.html#L2806'>L</a>                2806 src/scripting/game_lua_kernel.cpp 	sides_for = lua_check&lt;std::vector&lt;int&gt; &gt;(L, nextarg++);</span>
<span class='curline'><a href='../S/185.html#L2808'>L</a>                2808 src/scripting/game_lua_kernel.cpp 	lua_push(L, mp_sync::get_user_choice_multiple_sides(tagname, lua_synchronize(L, desc, human_func, null_func), std::set&lt;int&gt;(sides_for.begin(), sides_for.end())));</span>
<span class='curline'><a href='../S/185.html#L2818'>L</a>                2818 src/scripting/game_lua_kernel.cpp static int intf_do_unsynced(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2821'>L</a>                2821 src/scripting/game_lua_kernel.cpp 	lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2822'>L</a>                2822 src/scripting/game_lua_kernel.cpp 	luaW_pcall(L, 0, 0, false);</span>
<span class='curline'><a href='../S/185.html#L2832'>L</a>                2832 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_locations(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2834'>L</a>                2834 src/scripting/game_lua_kernel.cpp 	vconfig filter = luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2839'>L</a>                2839 src/scripting/game_lua_kernel.cpp 	if(luaW_isunit(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L2840'>L</a>                2840 src/scripting/game_lua_kernel.cpp 		t_filter.get_locations(res, *luaW_tounit(L, 2), true);</span>
<span class='curline'><a href='../S/185.html#L2845'>L</a>                2845 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, res.size(), 0);</span>
<span class='curline'><a href='../S/185.html#L2849'>L</a>                2849 src/scripting/game_lua_kernel.cpp 		lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/185.html#L2850'>L</a>                2850 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, loc.wml_x());</span>
<span class='curline'><a href='../S/185.html#L2851'>L</a>                2851 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/185.html#L2852'>L</a>                2852 src/scripting/game_lua_kernel.cpp 		lua_pushinteger(L, loc.wml_y());</span>
<span class='curline'><a href='../S/185.html#L2853'>L</a>                2853 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/185.html#L2854'>L</a>                2854 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, i);</span>
<span class='curline'><a href='../S/185.html#L2865'>L</a>                2865 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_villages(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2868'>L</a>                2868 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L2871'>L</a>                2871 src/scripting/game_lua_kernel.cpp 	vconfig filter = luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2877'>L</a>                2877 src/scripting/game_lua_kernel.cpp 			lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/185.html#L2878'>L</a>                2878 src/scripting/game_lua_kernel.cpp 			lua_pushinteger(L, it-&gt;wml_x());</span>
<span class='curline'><a href='../S/185.html#L2879'>L</a>                2879 src/scripting/game_lua_kernel.cpp 			lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/185.html#L2880'>L</a>                2880 src/scripting/game_lua_kernel.cpp 			lua_pushinteger(L, it-&gt;wml_y());</span>
<span class='curline'><a href='../S/185.html#L2881'>L</a>                2881 src/scripting/game_lua_kernel.cpp 			lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/185.html#L2882'>L</a>                2882 src/scripting/game_lua_kernel.cpp 			lua_rawseti(L, -2, i);</span>
<span class='curline'><a href='../S/185.html#L2896'>L</a>                2896 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_match_location(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2898'>L</a>                2898 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2899'>L</a>                2899 src/scripting/game_lua_kernel.cpp 	vconfig filter = luaW_checkvconfig(L, 2, true);</span>
<span class='curline'><a href='../S/185.html#L2902'>L</a>                2902 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, true);</span>
<span class='curline'><a href='../S/185.html#L2908'>L</a>                2908 src/scripting/game_lua_kernel.cpp 	if(luaW_isunit(L, 3)) {</span>
<span class='curline'><a href='../S/185.html#L2909'>L</a>                2909 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, t_filter.match(loc, *luaW_tounit(L, 3)));</span>
<span class='curline'><a href='../S/185.html#L2911'>L</a>                2911 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, t_filter.match(loc));</span>
<span class='curline'><a href='../S/185.html#L2924'>L</a>                2924 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_match_side(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2926'>L</a>                2926 src/scripting/game_lua_kernel.cpp 	vconfig filter = luaW_checkvconfig(L, 2, true);</span>
<span class='curline'><a href='../S/185.html#L2929'>L</a>                2929 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, true);</span>
<span class='curline'><a href='../S/185.html#L2936'>L</a>                2936 src/scripting/game_lua_kernel.cpp 	if(team* t = luaW_toteam(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L2937'>L</a>                2937 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, s_filter.match(*t));</span>
<span class='curline'><a href='../S/185.html#L2939'>L</a>                2939 src/scripting/game_lua_kernel.cpp 		unsigned side = luaL_checkinteger(L, 1) - 1;</span>
<span class='curline'><a href='../S/185.html#L2941'>L</a>                2941 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, s_filter.match(side + 1));</span>
<span class='curline'><a href='../S/185.html#L2946'>L</a>                2946 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_set_side_id(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2948'>L</a>                2948 src/scripting/game_lua_kernel.cpp 	int team_i = luaL_checkinteger(L, 1) - 1;</span>
<span class='curline'><a href='../S/185.html#L2949'>L</a>                2949 src/scripting/game_lua_kernel.cpp 	std::string flag = luaL_optlstring(L, 2, "", nullptr);</span>
<span class='curline'><a href='../S/185.html#L2950'>L</a>                2950 src/scripting/game_lua_kernel.cpp 	std::string color = luaL_optlstring(L, 3, "", nullptr);</span>
<span class='curline'><a href='../S/185.html#L2956'>L</a>                2956 src/scripting/game_lua_kernel.cpp 		return luaL_error(L, "set_side_id: side number %d out of range", team_i);</span>
<span class='curline'><a href='../S/185.html#L2971'>L</a>                2971 src/scripting/game_lua_kernel.cpp static int intf_modify_ai(lua_State *L, const char* action)</span>
<span class='curline'><a href='../S/185.html#L2973'>L</a>                2973 src/scripting/game_lua_kernel.cpp 	int side_num = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2974'>L</a>                2974 src/scripting/game_lua_kernel.cpp 	std::string path = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L2983'>L</a>                2983 src/scripting/game_lua_kernel.cpp 	config component = luaW_checkconfig(L, 3);</span>
<span class='curline'><a href='../S/185.html#L2994'>L</a>                2994 src/scripting/game_lua_kernel.cpp static int intf_switch_ai(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L2996'>L</a>                2996 src/scripting/game_lua_kernel.cpp 	int side_num = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2997'>L</a>                2997 src/scripting/game_lua_kernel.cpp 	if(lua_isstring(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L2998'>L</a>                2998 src/scripting/game_lua_kernel.cpp 		std::string file = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3001'>L</a>                3001 src/scripting/game_lua_kernel.cpp 			lua_pushlstring(L, err.c_str(), err.length());</span>
<span class='curline'><a href='../S/185.html#L3002'>L</a>                3002 src/scripting/game_lua_kernel.cpp 			return lua_error(L);</span>
<span class='curline'><a href='../S/185.html#L3005'>L</a>                3005 src/scripting/game_lua_kernel.cpp 		ai::manager::add_ai_for_side_from_config(side_num, luaW_checkconfig(L, 2));</span>
<span class='curline'><a href='../S/185.html#L3010'>L</a>                3010 src/scripting/game_lua_kernel.cpp static int intf_append_ai(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3012'>L</a>                3012 src/scripting/game_lua_kernel.cpp 	int side_num = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3013'>L</a>                3013 src/scripting/game_lua_kernel.cpp 	config cfg = luaW_checkconfig(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3039'>L</a>                3039 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_sides(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L3043'>L</a>                3043 src/scripting/game_lua_kernel.cpp 	const vconfig ssf = luaW_checkvconfig(L, 1, true);</span>
<span class='curline'><a href='../S/185.html#L3055'>L</a>                3055 src/scripting/game_lua_kernel.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/185.html#L3056'>L</a>                3056 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, sides.size(), 0);</span>
<span class='curline'><a href='../S/185.html#L3059'>L</a>                3059 src/scripting/game_lua_kernel.cpp 		luaW_pushteam(L, board().get_team(side));</span>
<span class='curline'><a href='../S/185.html#L3060'>L</a>                3060 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, index);</span>
<span class='curline'><a href='../S/185.html#L3071'>L</a>                3071 src/scripting/game_lua_kernel.cpp static int intf_get_traits(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L3073'>L</a>                3073 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L3080'>L</a>                3080 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, id.c_str());</span>
<span class='curline'><a href='../S/185.html#L3081'>L</a>                3081 src/scripting/game_lua_kernel.cpp 		luaW_pushconfig(L, trait);</span>
<span class='curline'><a href='../S/185.html#L3082'>L</a>                3082 src/scripting/game_lua_kernel.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L3094'>L</a>                3094 src/scripting/game_lua_kernel.cpp static int intf_add_modification(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3096'>L</a>                3096 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3097'>L</a>                3097 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3104'>L</a>                3104 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 2, "unknown modification type");</span>
<span class='curline'><a href='../S/185.html#L3107'>L</a>                3107 src/scripting/game_lua_kernel.cpp 	if (!lua_isnone(L, 4)) {</span>
<span class='curline'><a href='../S/185.html#L3108'>L</a>                3108 src/scripting/game_lua_kernel.cpp 		write_to_mods = luaW_toboolean(L, 4);</span>
<span class='curline'><a href='../S/185.html#L3114'>L</a>                3114 src/scripting/game_lua_kernel.cpp 	config cfg = luaW_checkconfig(L, 3);</span>
<span class='curline'><a href='../S/185.html#L3125'>L</a>                3125 src/scripting/game_lua_kernel.cpp static int intf_remove_modifications(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3127'>L</a>                3127 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3128'>L</a>                3128 src/scripting/game_lua_kernel.cpp 	config filter = luaW_checkconfig(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3129'>L</a>                3129 src/scripting/game_lua_kernel.cpp 	std::string tag = luaL_optstring(L, 3, "object");</span>
<span class='curline'><a href='../S/185.html#L3150'>L</a>                3150 src/scripting/game_lua_kernel.cpp static int intf_advance_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3154'>L</a>                3154 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 1, true);</span>
<span class='curline'><a href='../S/185.html#L3156'>L</a>                3156 src/scripting/game_lua_kernel.cpp 	if(lua_isboolean(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L3157'>L</a>                3157 src/scripting/game_lua_kernel.cpp 		par.animate(luaW_toboolean(L, 2));</span>
<span class='curline'><a href='../S/185.html#L3159'>L</a>                3159 src/scripting/game_lua_kernel.cpp 	if(lua_isboolean(L, 3)) {</span>
<span class='curline'><a href='../S/185.html#L3160'>L</a>                3160 src/scripting/game_lua_kernel.cpp 		par.fire_events(luaW_toboolean(L, 3));</span>
<span class='curline'><a href='../S/185.html#L3171'>L</a>                3171 src/scripting/game_lua_kernel.cpp static int intf_add_known_unit(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3173'>L</a>                3173 src/scripting/game_lua_kernel.cpp 	char const *ty = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3178'>L</a>                3178 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 1, ss.str().c_str());</span>
<span class='curline'><a href='../S/185.html#L3189'>L</a>                3189 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_add_tile_overlay(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3191'>L</a>                3191 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3192'>L</a>                3192 src/scripting/game_lua_kernel.cpp 	config cfg = luaW_checkconfig(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3206'>L</a>                3206 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_remove_tile_overlay(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3208'>L</a>                3208 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3209'>L</a>                3209 src/scripting/game_lua_kernel.cpp 	char const *m = lua_tostring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3223'>L</a>                3223 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_log_replay(lua_State* L)</span>
<span class='curline'><a href='../S/185.html#L3226'>L</a>                3226 src/scripting/game_lua_kernel.cpp 	const int nargs = lua_gettop(L);</span>
<span class='curline'><a href='../S/185.html#L3228'>L</a>                3228 src/scripting/game_lua_kernel.cpp 		return luaL_error(L, "Wrong number of arguments to ai.log_replay() - should be 2 or 3 arguments.");</span>
<span class='curline'><a href='../S/185.html#L3230'>L</a>                3230 src/scripting/game_lua_kernel.cpp 	const std::string key = nargs == 2 ? luaL_checkstring(L, 1) : luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3233'>L</a>                3233 src/scripting/game_lua_kernel.cpp 		recorder.add_log_data(key, luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/185.html#L3234'>L</a>                3234 src/scripting/game_lua_kernel.cpp 	} else if(luaW_toconfig(L, 3, cfg)) {</span>
<span class='curline'><a href='../S/185.html#L3235'>L</a>                3235 src/scripting/game_lua_kernel.cpp 		recorder.add_log_data(luaL_checkstring(L, 1), key, cfg);</span>
<span class='curline'><a href='../S/185.html#L3236'>L</a>                3236 src/scripting/game_lua_kernel.cpp 	} else if(!lua_isstring(L, 3)) {</span>
<span class='curline'><a href='../S/185.html#L3237'>L</a>                3237 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 3, "accepts only string or config");</span>
<span class='curline'><a href='../S/185.html#L3239'>L</a>                3239 src/scripting/game_lua_kernel.cpp 		recorder.add_log_data(luaL_checkstring(L, 1), key, luaL_checkstring(L, 3));</span>
<span class='curline'><a href='../S/185.html#L3245'>L</a>                3245 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_add_event(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3247'>L</a>                3247 src/scripting/game_lua_kernel.cpp 	vconfig cfg(luaW_checkvconfig(L, 1));</span>
<span class='curline'><a href='../S/185.html#L3258'>L</a>                3258 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_remove_event(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3260'>L</a>                3260 src/scripting/game_lua_kernel.cpp 	game_state_.events_manager_-&gt;remove_event_handler(luaL_checkstring(L, 1));</span>
<span class='curline'><a href='../S/185.html#L3264'>L</a>                3264 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_color_adjust(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3267'>L</a>                3267 src/scripting/game_lua_kernel.cpp 		vconfig cfg(luaW_checkvconfig(L, 1));</span>
<span class='curline'><a href='../S/185.html#L3281'>L</a>                3281 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_delay(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3284'>L</a>                3284 src/scripting/game_lua_kernel.cpp 	lua_Integer delay = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3289'>L</a>                3289 src/scripting/game_lua_kernel.cpp 	if(luaW_toboolean(L, 2) &amp;&amp; game_display_ &amp;&amp; game_display_-&gt;turbo_speed() &gt; 0) {</span>
<span class='curline'><a href='../S/185.html#L3300'>L</a>                3300 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_label(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3303'>L</a>                3303 src/scripting/game_lua_kernel.cpp 		vconfig cfg(luaW_checkvconfig(L, 1));</span>
<span class='curline'><a href='../S/185.html#L3315'>L</a>                3315 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_redraw(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3320'>L</a>                3320 src/scripting/game_lua_kernel.cpp 		vconfig cfg(luaW_checkvconfig(L, 1));</span>
<span class='curline'><a href='../S/185.html#L3321'>L</a>                3321 src/scripting/game_lua_kernel.cpp 		bool clear_shroud(luaW_toboolean(L, 2));</span>
<span class='curline'><a href='../S/185.html#L3352'>L</a>                3352 src/scripting/game_lua_kernel.cpp static int intf_modify_ai_old(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3355'>L</a>                3355 src/scripting/game_lua_kernel.cpp 	luaW_toconfig(L, 1, cfg);</span>
<span class='curline'><a href='../S/185.html#L3362'>L</a>                3362 src/scripting/game_lua_kernel.cpp static int cfun_exec_candidate_action(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3364'>L</a>                3364 src/scripting/game_lua_kernel.cpp 	bool exec = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L3365'>L</a>                3365 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3367'>L</a>                3367 src/scripting/game_lua_kernel.cpp 	lua_getfield(L, -1, "ca_ptr");</span>
<span class='curline'><a href='../S/185.html#L3369'>L</a>                3369 src/scripting/game_lua_kernel.cpp 	ai::candidate_action *ca = static_cast&lt;ai::candidate_action*&gt;(lua_touserdata(L, -1));</span>
<span class='curline'><a href='../S/185.html#L3370'>L</a>                3370 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3375'>L</a>                3375 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, ca-&gt;evaluate());</span>
<span class='curline'><a href='../S/185.html#L3379'>L</a>                3379 src/scripting/game_lua_kernel.cpp static int cfun_exec_stage(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3381'>L</a>                3381 src/scripting/game_lua_kernel.cpp 	lua_getfield(L, -1, "stg_ptr");</span>
<span class='curline'><a href='../S/185.html#L3382'>L</a>                3382 src/scripting/game_lua_kernel.cpp 	ai::stage *stg = static_cast&lt;ai::stage*&gt;(lua_touserdata(L, -1));</span>
<span class='curline'><a href='../S/185.html#L3383'>L</a>                3383 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3388'>L</a>                3388 src/scripting/game_lua_kernel.cpp static void push_component(lua_State *L, ai::component* c, const std::string &amp;ct = "")</span>
<span class='curline'><a href='../S/185.html#L3390'>L</a>                3390 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, 0, 0); // Table for a component</span>
<span class='curline'><a href='../S/185.html#L3392'>L</a>                3392 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "name");</span>
<span class='curline'><a href='../S/185.html#L3393'>L</a>                3393 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, c-&gt;get_name().c_str());</span>
<span class='curline'><a href='../S/185.html#L3394'>L</a>                3394 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L3396'>L</a>                3396 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "engine");</span>
<span class='curline'><a href='../S/185.html#L3397'>L</a>                3397 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, c-&gt;get_engine().c_str());</span>
<span class='curline'><a href='../S/185.html#L3398'>L</a>                3398 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L3400'>L</a>                3400 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "id");</span>
<span class='curline'><a href='../S/185.html#L3401'>L</a>                3401 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, c-&gt;get_id().c_str());</span>
<span class='curline'><a href='../S/185.html#L3402'>L</a>                3402 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L3405'>L</a>                3405 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "ca_ptr");</span>
<span class='curline'><a href='../S/185.html#L3406'>L</a>                3406 src/scripting/game_lua_kernel.cpp 		lua_pushlightuserdata(L, c);</span>
<span class='curline'><a href='../S/185.html#L3407'>L</a>                3407 src/scripting/game_lua_kernel.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L3409'>L</a>                3409 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "exec");</span>
<span class='curline'><a href='../S/185.html#L3410'>L</a>                3410 src/scripting/game_lua_kernel.cpp 		lua_pushcclosure(L, &amp;cfun_exec_candidate_action, 0);</span>
<span class='curline'><a href='../S/185.html#L3411'>L</a>                3411 src/scripting/game_lua_kernel.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L3415'>L</a>                3415 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "stg_ptr");</span>
<span class='curline'><a href='../S/185.html#L3416'>L</a>                3416 src/scripting/game_lua_kernel.cpp 		lua_pushlightuserdata(L, c);</span>
<span class='curline'><a href='../S/185.html#L3417'>L</a>                3417 src/scripting/game_lua_kernel.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L3419'>L</a>                3419 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, "exec");</span>
<span class='curline'><a href='../S/185.html#L3420'>L</a>                3420 src/scripting/game_lua_kernel.cpp 		lua_pushcclosure(L, &amp;cfun_exec_stage, 0);</span>
<span class='curline'><a href='../S/185.html#L3421'>L</a>                3421 src/scripting/game_lua_kernel.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L3436'>L</a>                3436 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, type.c_str());</span>
<span class='curline'><a href='../S/185.html#L3437'>L</a>                3437 src/scripting/game_lua_kernel.cpp 		lua_createtable(L, 0, 0); // this table will be on top of the stack during recursive calls</span>
<span class='curline'><a href='../S/185.html#L3441'>L</a>                3441 src/scripting/game_lua_kernel.cpp 			lua_pushstring(L, (*i)-&gt;get_name().c_str());</span>
<span class='curline'><a href='../S/185.html#L3442'>L</a>                3442 src/scripting/game_lua_kernel.cpp 			push_component(L, *i, type);</span>
<span class='curline'><a href='../S/185.html#L3443'>L</a>                3443 src/scripting/game_lua_kernel.cpp 			lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L3452'>L</a>                3452 src/scripting/game_lua_kernel.cpp 		lua_rawset(L, -3); // setting the child table</span>
<span class='curline'><a href='../S/185.html#L3463'>L</a>                3463 src/scripting/game_lua_kernel.cpp static int intf_debug_ai(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3468'>L</a>                3468 src/scripting/game_lua_kernel.cpp 	int side = lua_tointeger(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3469'>L</a>                3469 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3511'>L</a>                3511 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "components");</span>
<span class='curline'><a href='../S/185.html#L3512'>L</a>                3512 src/scripting/game_lua_kernel.cpp 	push_component(L, c); // stack: [-1: component tree; -2: ai context]</span>
<span class='curline'><a href='../S/185.html#L3513'>L</a>                3513 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L3519'>L</a>                3519 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_allow_end_turn(lua_State * L)</span>
<span class='curline'><a href='../S/185.html#L3521'>L</a>                3521 src/scripting/game_lua_kernel.cpp 	gamedata().set_allow_end_turn(luaW_toboolean(L, 1));</span>
<span class='curline'><a href='../S/185.html#L3526'>L</a>                3526 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_allow_undo(lua_State * L)</span>
<span class='curline'><a href='../S/185.html#L3528'>L</a>                3528 src/scripting/game_lua_kernel.cpp 	if(lua_isboolean(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L3529'>L</a>                3529 src/scripting/game_lua_kernel.cpp 		play_controller_.pump().set_undo_disabled(!luaW_toboolean(L, 1));</span>
<span class='curline'><a href='../S/185.html#L3544'>L</a>                3544 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_add_time_area(lua_State * L)</span>
<span class='curline'><a href='../S/185.html#L3548'>L</a>                3548 src/scripting/game_lua_kernel.cpp 	vconfig cfg(luaW_checkvconfig(L, 1));</span>
<span class='curline'><a href='../S/185.html#L3561'>L</a>                3561 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_remove_time_area(lua_State * L)</span>
<span class='curline'><a href='../S/185.html#L3565'>L</a>                3565 src/scripting/game_lua_kernel.cpp 	const char * id = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3573'>L</a>                3573 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_replace_schedule(lua_State * L)</span>
<span class='curline'><a href='../S/185.html#L3575'>L</a>                3575 src/scripting/game_lua_kernel.cpp 	vconfig cfg = luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3589'>L</a>                3589 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_set_time_of_day(lua_State * L)</span>
<span class='curline'><a href='../S/185.html#L3596'>L</a>                3596 src/scripting/game_lua_kernel.cpp 	if (lua_isstring(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L3597'>L</a>                3597 src/scripting/game_lua_kernel.cpp 		area_id = lua_tostring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3601'>L</a>                3601 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 1, "invalid time area ID");</span>
<span class='curline'><a href='../S/185.html#L3605'>L</a>                3605 src/scripting/game_lua_kernel.cpp 	int new_time = lua_tonumberx(L, 1, &amp;is_num) - 1;</span>
<span class='curline'><a href='../S/185.html#L3611'>L</a>                3611 src/scripting/game_lua_kernel.cpp 		std::string time_id = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3620'>L</a>                3620 src/scripting/game_lua_kernel.cpp 			return luaL_argerror(L, 1, "invalid time of day ID");</span>
<span class='curline'><a href='../S/185.html#L3624'>L</a>                3624 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 1, "invalid time of day index");</span>
<span class='curline'><a href='../S/185.html#L3635'>L</a>                3635 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_scroll(lua_State * L)</span>
<span class='curline'><a href='../S/185.html#L3637'>L</a>                3637 src/scripting/game_lua_kernel.cpp 	int x = luaL_checkinteger(L, 1), y = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3652'>L</a>                3652 src/scripting/game_lua_kernel.cpp 		lua_report_generator(lua_State *L, const std::string &amp;n)</span>
<span class='curline'><a href='../S/185.html#L3653'>L</a>                3653 src/scripting/game_lua_kernel.cpp 			: mState(L), name(n) {}</span>
<span class='curline'><a href='../S/185.html#L3659'>L</a>                3659 src/scripting/game_lua_kernel.cpp 		lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L3661'>L</a>                3661 src/scripting/game_lua_kernel.cpp 		if (!luaW_getglobal(L, "wesnoth", "theme_items", name))</span>
<span class='curline'><a href='../S/185.html#L3663'>L</a>                3663 src/scripting/game_lua_kernel.cpp 		if (!luaW_pcall(L, 0, 1)) return cfg;</span>
<span class='curline'><a href='../S/185.html#L3664'>L</a>                3664 src/scripting/game_lua_kernel.cpp 		luaW_toconfig(L, -1, cfg);</span>
<span class='curline'><a href='../S/185.html#L3665'>L</a>                3665 src/scripting/game_lua_kernel.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3673'>L</a>                3673 src/scripting/game_lua_kernel.cpp int game_lua_kernel::impl_theme_item(lua_State *L, std::string m)</span>
<span class='curline'><a href='../S/185.html#L3676'>L</a>                3676 src/scripting/game_lua_kernel.cpp 	luaW_pushconfig(L, reports_.generate_report(m.c_str(), temp_context , true));</span>
<span class='curline'><a href='../S/185.html#L3683'>L</a>                3683 src/scripting/game_lua_kernel.cpp int game_lua_kernel::impl_theme_items_get(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3685'>L</a>                3685 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3686'>L</a>                3686 src/scripting/game_lua_kernel.cpp 	lua_cpp::push_closure(L, std::bind(&amp;game_lua_kernel::impl_theme_item, this, _1, std::string(m)), 0);</span>
<span class='curline'><a href='../S/185.html#L3687'>L</a>                3687 src/scripting/game_lua_kernel.cpp 	lua_pushvalue(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3688'>L</a>                3688 src/scripting/game_lua_kernel.cpp 	lua_pushvalue(L, -2);</span>
<span class='curline'><a href='../S/185.html#L3689'>L</a>                3689 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3690'>L</a>                3690 src/scripting/game_lua_kernel.cpp 	reports_.register_generator(m, new lua_report_generator(L, m));</span>
<span class='curline'><a href='../S/185.html#L3697'>L</a>                3697 src/scripting/game_lua_kernel.cpp int game_lua_kernel::impl_theme_items_set(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3699'>L</a>                3699 src/scripting/game_lua_kernel.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3700'>L</a>                3700 src/scripting/game_lua_kernel.cpp 	lua_pushvalue(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3701'>L</a>                3701 src/scripting/game_lua_kernel.cpp 	lua_pushvalue(L, 3);</span>
<span class='curline'><a href='../S/185.html#L3702'>L</a>                3702 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3703'>L</a>                3703 src/scripting/game_lua_kernel.cpp 	reports_.register_generator(m, new lua_report_generator(L, m));</span>
<span class='curline'><a href='../S/185.html#L3711'>L</a>                3711 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_all_vars(lua_State *L) {</span>
<span class='curline'><a href='../S/185.html#L3712'>L</a>                3712 src/scripting/game_lua_kernel.cpp 	luaW_pushconfig(L, gamedata().get_variables());</span>
<span class='curline'><a href='../S/185.html#L3724'>L</a>                3724 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_teleport(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3727'>L</a>                3727 src/scripting/game_lua_kernel.cpp 	unit_ptr u = luaW_checkunit_ptr(L, 1, true);</span>
<span class='curline'><a href='../S/185.html#L3728'>L</a>                3728 src/scripting/game_lua_kernel.cpp 	map_location dst = luaW_checklocation(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3729'>L</a>                3729 src/scripting/game_lua_kernel.cpp 	bool check_passability = !luaW_toboolean(L, 3);</span>
<span class='curline'><a href='../S/185.html#L3730'>L</a>                3730 src/scripting/game_lua_kernel.cpp 	bool clear_shroud = luaW_toboolean(L, 4);</span>
<span class='curline'><a href='../S/185.html#L3731'>L</a>                3731 src/scripting/game_lua_kernel.cpp 	bool animate = luaW_toboolean(L, 5);</span>
<span class='curline'><a href='../S/185.html#L3780'>L</a>                3780 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_remove_sound_source(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3783'>L</a>                3783 src/scripting/game_lua_kernel.cpp 	std::string id = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3792'>L</a>                3792 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_add_sound_source(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3795'>L</a>                3795 src/scripting/game_lua_kernel.cpp 	config cfg = luaW_checkconfig(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3815'>L</a>                3815 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_sound_source(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3818'>L</a>                3818 src/scripting/game_lua_kernel.cpp 	std::string id = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3826'>L</a>                3826 src/scripting/game_lua_kernel.cpp 	luaW_pushconfig(L, cfg);</span>
<span class='curline'><a href='../S/185.html#L3836'>L</a>                3836 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_log(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L3838'>L</a>                3838 src/scripting/game_lua_kernel.cpp 	const std::string&amp; logger = lua_isstring(L, 2) ? luaL_checkstring(L, 1) : "";</span>
<span class='curline'><a href='../S/185.html#L3839'>L</a>                3839 src/scripting/game_lua_kernel.cpp 	const std::string&amp; msg = lua_isstring(L, 2) ? luaL_checkstring(L, 2) : luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3844'>L</a>                3844 src/scripting/game_lua_kernel.cpp 		bool in_chat = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L3850'>L</a>                3850 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_get_fog_or_shroud(lua_State *L, bool fog)</span>
<span class='curline'><a href='../S/185.html#L3852'>L</a>                3852 src/scripting/game_lua_kernel.cpp 	int side = luaL_checknumber(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3853'>L</a>                3853 src/scripting/game_lua_kernel.cpp 	map_location loc = luaW_checklocation(L, 2);</span>
<span class='curline'><a href='../S/185.html#L3856'>L</a>                3856 src/scripting/game_lua_kernel.cpp 		return luaL_argerror(L, 1, error.c_str());</span>
<span class='curline'><a href='../S/185.html#L3860'>L</a>                3860 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, fog ? t.fogged(loc) : t.shrouded(loc));</span>
<span class='curline'><a href='../S/185.html#L3876'>L</a>                3876 src/scripting/game_lua_kernel.cpp int game_lua_kernel::intf_toggle_fog(lua_State *L, const bool clear)</span>
<span class='curline'><a href='../S/185.html#L3879'>L</a>                3879 src/scripting/game_lua_kernel.cpp 	if(lua_isboolean(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L3880'>L</a>                3880 src/scripting/game_lua_kernel.cpp 		affect_normal_fog = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L3883'>L</a>                3883 src/scripting/game_lua_kernel.cpp 	if(lua_isnumber(L, 1)) {</span>
<span class='curline'><a href='../S/185.html#L3884'>L</a>                3884 src/scripting/game_lua_kernel.cpp 		sides.insert(lua_tonumber(L, 1));</span>
<span class='curline'><a href='../S/185.html#L3885'>L</a>                3885 src/scripting/game_lua_kernel.cpp 	} else if(lua_istable(L, 1) &amp;&amp; lua_istable(L, 2)) {</span>
<span class='curline'><a href='../S/185.html#L3886'>L</a>                3886 src/scripting/game_lua_kernel.cpp 		const auto&amp; v = lua_check&lt;std::vector&lt;int&gt;&gt;(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3893'>L</a>                3893 src/scripting/game_lua_kernel.cpp 	const auto&amp; v_locs = lua_check&lt;std::vector&lt;map_location&gt;&gt;(L, lua_istable(L, 2) ? 2 : 1);</span>
<span class='curline'><a href='../S/185.html#L3968'>L</a>                3968 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4100'>L</a>                4100 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4101'>L</a>                4101 src/scripting/game_lua_kernel.cpp 	if (!lua_istable(L,-1)) {</span>
<span class='curline'><a href='../S/185.html#L4102'>L</a>                4102 src/scripting/game_lua_kernel.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L4104'>L</a>                4104 src/scripting/game_lua_kernel.cpp 	luaL_setfuncs(L, callbacks, 0);</span>
<span class='curline'><a href='../S/185.html#L4105'>L</a>                4105 src/scripting/game_lua_kernel.cpp 	lua_cpp::set_functions(L, cpp_callbacks);</span>
<span class='curline'><a href='../S/185.html#L4112'>L</a>                4112 src/scripting/game_lua_kernel.cpp 		luaL_setfuncs(L, test_callbacks , 0);</span>
<span class='curline'><a href='../S/185.html#L4115'>L</a>                4115 src/scripting/game_lua_kernel.cpp 	lua_setglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4118'>L</a>                4118 src/scripting/game_lua_kernel.cpp 	cmd_log_ &lt;&lt; lua_team::register_metatable(L);</span>
<span class='curline'><a href='../S/185.html#L4121'>L</a>                4121 src/scripting/game_lua_kernel.cpp 	cmd_log_ &lt;&lt; lua_unit_type::register_metatable(L);</span>
<span class='curline'><a href='../S/185.html#L4124'>L</a>                4124 src/scripting/game_lua_kernel.cpp 	cmd_log_ &lt;&lt; lua_race::register_metatable(L);</span>
<span class='curline'><a href='../S/185.html#L4127'>L</a>                4127 src/scripting/game_lua_kernel.cpp 	cmd_log_ &lt;&lt; lua_units::register_metatables(L);</span>
<span class='curline'><a href='../S/185.html#L4128'>L</a>                4128 src/scripting/game_lua_kernel.cpp 	cmd_log_ &lt;&lt; lua_units::register_attacks_metatables(L);</span>
<span class='curline'><a href='../S/185.html#L4131'>L</a>                4131 src/scripting/game_lua_kernel.cpp 	cmd_log_ &lt;&lt; lua_common::register_vconfig_metatable(L);</span>
<span class='curline'><a href='../S/185.html#L4134'>L</a>                4134 src/scripting/game_lua_kernel.cpp 	cmd_log_ &lt;&lt; lua_unit_type::register_table(L);</span>
<span class='curline'><a href='../S/185.html#L4139'>L</a>                4139 src/scripting/game_lua_kernel.cpp 	ai::lua_ai_context::init(L);</span>
<span class='curline'><a href='../S/185.html#L4144'>L</a>                4144 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4145'>L</a>                4145 src/scripting/game_lua_kernel.cpp 	lua_newuserdata(L, 0);</span>
<span class='curline'><a href='../S/185.html#L4146'>L</a>                4146 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, 0, 2);</span>
<span class='curline'><a href='../S/185.html#L4147'>L</a>                4147 src/scripting/game_lua_kernel.cpp 	lua_pushcfunction(L, &amp;dispatch&lt;&amp;game_lua_kernel::impl_current_get&gt;);</span>
<span class='curline'><a href='../S/185.html#L4148'>L</a>                4148 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/185.html#L4149'>L</a>                4149 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "current config");</span>
<span class='curline'><a href='../S/185.html#L4150'>L</a>                4150 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/185.html#L4151'>L</a>                4151 src/scripting/game_lua_kernel.cpp 	lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/185.html#L4152'>L</a>                4152 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "current");</span>
<span class='curline'><a href='../S/185.html#L4153'>L</a>                4153 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4156'>L</a>                4156 src/scripting/game_lua_kernel.cpp 	cmd_log_ &lt;&lt; lua_audio::register_table(L);</span>
<span class='curline'><a href='../S/185.html#L4161'>L</a>                4161 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4162'>L</a>                4162 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L4163'>L</a>                4163 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "wml_actions");</span>
<span class='curline'><a href='../S/185.html#L4164'>L</a>                4164 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4169'>L</a>                4169 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4170'>L</a>                4170 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L4171'>L</a>                4171 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "wml_conditionals");</span>
<span class='curline'><a href='../S/185.html#L4172'>L</a>                4172 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4180'>L</a>                4180 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4181'>L</a>                4181 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L4182'>L</a>                4182 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "effects");</span>
<span class='curline'><a href='../S/185.html#L4183'>L</a>                4183 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4188'>L</a>                4188 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4189'>L</a>                4189 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L4190'>L</a>                4190 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "game_events");</span>
<span class='curline'><a href='../S/185.html#L4191'>L</a>                4191 src/scripting/game_lua_kernel.cpp 	push_locations_table(L);</span>
<span class='curline'><a href='../S/185.html#L4192'>L</a>                4192 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "special_locations");</span>
<span class='curline'><a href='../S/185.html#L4193'>L</a>                4193 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4198'>L</a>                4198 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4199'>L</a>                4199 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L4200'>L</a>                4200 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, 0, 2);</span>
<span class='curline'><a href='../S/185.html#L4201'>L</a>                4201 src/scripting/game_lua_kernel.cpp 	lua_pushcfunction(L, &amp;dispatch&lt;&amp;game_lua_kernel::impl_theme_items_get&gt;);</span>
<span class='curline'><a href='../S/185.html#L4202'>L</a>                4202 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/185.html#L4203'>L</a>                4203 src/scripting/game_lua_kernel.cpp 	lua_pushcfunction(L, &amp;dispatch&lt;&amp;game_lua_kernel::impl_theme_items_set&gt;);</span>
<span class='curline'><a href='../S/185.html#L4204'>L</a>                4204 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "__newindex");</span>
<span class='curline'><a href='../S/185.html#L4205'>L</a>                4205 src/scripting/game_lua_kernel.cpp 	lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/185.html#L4206'>L</a>                4206 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "theme_items");</span>
<span class='curline'><a href='../S/185.html#L4207'>L</a>                4207 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4209'>L</a>                4209 src/scripting/game_lua_kernel.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/185.html#L4215'>L</a>                4215 src/scripting/game_lua_kernel.cpp 	luaW_getglobal(L, "wesnoth", "effects");</span>
<span class='curline'><a href='../S/185.html#L4217'>L</a>                4217 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, effect.c_str());</span>
<span class='curline'><a href='../S/185.html#L4219'>L</a>                4219 src/scripting/game_lua_kernel.cpp 		lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L4221'>L</a>                4221 src/scripting/game_lua_kernel.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/185.html#L4226'>L</a>                4226 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4233'>L</a>                4233 src/scripting/game_lua_kernel.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/185.html#L4234'>L</a>                4234 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4236'>L</a>                4236 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "get_sides");</span>
<span class='curline'><a href='../S/185.html#L4237'>L</a>                4237 src/scripting/game_lua_kernel.cpp 	lua_rawget(L, -2);</span>
<span class='curline'><a href='../S/185.html#L4238'>L</a>                4238 src/scripting/game_lua_kernel.cpp 	lua_createtable(L, 0, 0);</span>
<span class='curline'><a href='../S/185.html#L4243'>L</a>                4243 src/scripting/game_lua_kernel.cpp 		lua_setfield(L, -2, "sides");</span>
<span class='curline'><a href='../S/185.html#L4250'>L</a>                4250 src/scripting/game_lua_kernel.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/185.html#L4251'>L</a>                4251 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4252'>L</a>                4252 src/scripting/game_lua_kernel.cpp 	luaW_pushracetable(L);</span>
<span class='curline'><a href='../S/185.html#L4253'>L</a>                4253 src/scripting/game_lua_kernel.cpp 	lua_setfield(L, -2, "races");</span>
<span class='curline'><a href='../S/185.html#L4254'>L</a>                4254 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4297'>L</a>                4297 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4299'>L</a>                4299 src/scripting/game_lua_kernel.cpp 	if (!luaW_getglobal(L, "wesnoth", "game_events", "on_load"))</span>
<span class='curline'><a href='../S/185.html#L4302'>L</a>                4302 src/scripting/game_lua_kernel.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/185.html#L4307'>L</a>                4307 src/scripting/game_lua_kernel.cpp 		lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/185.html#L4308'>L</a>                4308 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, v.key.c_str());</span>
<span class='curline'><a href='../S/185.html#L4309'>L</a>                4309 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/185.html#L4310'>L</a>                4310 src/scripting/game_lua_kernel.cpp 		luaW_pushconfig(L, v.cfg);</span>
<span class='curline'><a href='../S/185.html#L4311'>L</a>                4311 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/185.html#L4312'>L</a>                4312 src/scripting/game_lua_kernel.cpp 		lua_rawseti(L, -2, k++);</span>
<span class='curline'><a href='../S/185.html#L4315'>L</a>                4315 src/scripting/game_lua_kernel.cpp 	luaW_pcall(L, 1, 0, true);</span>
<span class='curline'><a href='../S/185.html#L4324'>L</a>                4324 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4326'>L</a>                4326 src/scripting/game_lua_kernel.cpp 	if (!luaW_getglobal(L, "wesnoth", "game_events", "on_save"))</span>
<span class='curline'><a href='../S/185.html#L4329'>L</a>                4329 src/scripting/game_lua_kernel.cpp 	if (!luaW_pcall(L, 0, 1, false))</span>
<span class='curline'><a href='../S/185.html#L4333'>L</a>                4333 src/scripting/game_lua_kernel.cpp 	luaW_toconfig(L, -1, v);</span>
<span class='curline'><a href='../S/185.html#L4334'>L</a>                4334 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4362'>L</a>                4362 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4364'>L</a>                4364 src/scripting/game_lua_kernel.cpp 	if (!luaW_getglobal(L, "wesnoth", "game_events", "on_event"))</span>
<span class='curline'><a href='../S/185.html#L4368'>L</a>                4368 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, ev.name.c_str());</span>
<span class='curline'><a href='../S/185.html#L4369'>L</a>                4369 src/scripting/game_lua_kernel.cpp 	luaW_pcall(L, 1, 0, false);</span>
<span class='curline'><a href='../S/185.html#L4380'>L</a>                4380 src/scripting/game_lua_kernel.cpp int game_lua_kernel::cfun_builtin_effect(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L4382'>L</a>                4382 src/scripting/game_lua_kernel.cpp 	std::string which_effect = lua_tostring(L, lua_upvalueindex(1));</span>
<span class='curline'><a href='../S/185.html#L4383'>L</a>                4383 src/scripting/game_lua_kernel.cpp 	bool need_apply = luaW_toboolean(L, lua_upvalueindex(2));</span>
<span class='curline'><a href='../S/185.html#L4385'>L</a>                4385 src/scripting/game_lua_kernel.cpp 	lua_unit u(luaW_checkunit(L, 2));</span>
<span class='curline'><a href='../S/185.html#L4386'>L</a>                4386 src/scripting/game_lua_kernel.cpp 	config cfg = luaW_checkconfig(L, 3);</span>
<span class='curline'><a href='../S/185.html#L4397'>L</a>                4397 src/scripting/game_lua_kernel.cpp 		lua_pushstring(L, description.c_str());</span>
<span class='curline'><a href='../S/185.html#L4407'>L</a>                4407 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4410'>L</a>                4410 src/scripting/game_lua_kernel.cpp 	int str_i = lua_gettop(L);</span>
<span class='curline'><a href='../S/185.html#L4411'>L</a>                4411 src/scripting/game_lua_kernel.cpp 	lua_newtable(L); // The functor table</span>
<span class='curline'><a href='../S/185.html#L4412'>L</a>                4412 src/scripting/game_lua_kernel.cpp 	lua_newtable(L); // The functor metatable</span>
<span class='curline'><a href='../S/185.html#L4413'>L</a>                4413 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "__call");</span>
<span class='curline'><a href='../S/185.html#L4414'>L</a>                4414 src/scripting/game_lua_kernel.cpp 	lua_pushvalue(L, str_i);</span>
<span class='curline'><a href='../S/185.html#L4415'>L</a>                4415 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, true);</span>
<span class='curline'><a href='../S/185.html#L4416'>L</a>                4416 src/scripting/game_lua_kernel.cpp 	lua_pushcclosure(L, &amp;dispatch&lt;&amp;game_lua_kernel::cfun_builtin_effect&gt;, 2);</span>
<span class='curline'><a href='../S/185.html#L4417'>L</a>                4417 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3); // Set the call metafunction</span>
<span class='curline'><a href='../S/185.html#L4418'>L</a>                4418 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "__descr");</span>
<span class='curline'><a href='../S/185.html#L4419'>L</a>                4419 src/scripting/game_lua_kernel.cpp 	lua_pushvalue(L, str_i);</span>
<span class='curline'><a href='../S/185.html#L4420'>L</a>                4420 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, false);</span>
<span class='curline'><a href='../S/185.html#L4421'>L</a>                4421 src/scripting/game_lua_kernel.cpp 	lua_pushcclosure(L, &amp;dispatch&lt;&amp;game_lua_kernel::cfun_builtin_effect&gt;, 2);</span>
<span class='curline'><a href='../S/185.html#L4422'>L</a>                4422 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3); // Set the descr "metafunction"</span>
<span class='curline'><a href='../S/185.html#L4423'>L</a>                4423 src/scripting/game_lua_kernel.cpp 	lua_setmetatable(L, -2); // Apply the metatable to the functor table</span>
<span class='curline'><a href='../S/185.html#L4430'>L</a>                4430 src/scripting/game_lua_kernel.cpp int game_lua_kernel::cfun_wml_action(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L4433'>L</a>                4433 src/scripting/game_lua_kernel.cpp 		(lua_touserdata(L, lua_upvalueindex(1)));</span>
<span class='curline'><a href='../S/185.html#L4435'>L</a>                4435 src/scripting/game_lua_kernel.cpp 	vconfig vcfg = luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4445'>L</a>                4445 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4447'>L</a>                4447 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4448'>L</a>                4448 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "wml_actions");</span>
<span class='curline'><a href='../S/185.html#L4449'>L</a>                4449 src/scripting/game_lua_kernel.cpp 	lua_rawget(L, -2);</span>
<span class='curline'><a href='../S/185.html#L4450'>L</a>                4450 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, cmd.c_str());</span>
<span class='curline'><a href='../S/185.html#L4451'>L</a>                4451 src/scripting/game_lua_kernel.cpp 	lua_pushlightuserdata(L, reinterpret_cast&lt;void *&gt;(h));</span>
<span class='curline'><a href='../S/185.html#L4452'>L</a>                4452 src/scripting/game_lua_kernel.cpp 	lua_pushcclosure(L, &amp;dispatch&lt;&amp;game_lua_kernel::cfun_wml_action&gt;, 1);</span>
<span class='curline'><a href='../S/185.html#L4453'>L</a>                4453 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L4454'>L</a>                4454 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 2);</span>
<span class='curline'><a href='../S/185.html#L4462'>L</a>                4462 src/scripting/game_lua_kernel.cpp static int cfun_wml_condition(lua_State *L)</span>
<span class='curline'><a href='../S/185.html#L4465'>L</a>                4465 src/scripting/game_lua_kernel.cpp 		(lua_touserdata(L, lua_upvalueindex(1)));</span>
<span class='curline'><a href='../S/185.html#L4467'>L</a>                4467 src/scripting/game_lua_kernel.cpp 	vconfig vcfg = luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4468'>L</a>                4468 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, h(vcfg));</span>
<span class='curline'><a href='../S/185.html#L4477'>L</a>                4477 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4479'>L</a>                4479 src/scripting/game_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/185.html#L4480'>L</a>                4480 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, "wml_conditionals");</span>
<span class='curline'><a href='../S/185.html#L4481'>L</a>                4481 src/scripting/game_lua_kernel.cpp 	lua_rawget(L, -2);</span>
<span class='curline'><a href='../S/185.html#L4482'>L</a>                4482 src/scripting/game_lua_kernel.cpp 	lua_pushstring(L, cmd.c_str());</span>
<span class='curline'><a href='../S/185.html#L4483'>L</a>                4483 src/scripting/game_lua_kernel.cpp 	lua_pushlightuserdata(L, reinterpret_cast&lt;void *&gt;(h));</span>
<span class='curline'><a href='../S/185.html#L4484'>L</a>                4484 src/scripting/game_lua_kernel.cpp 	lua_pushcclosure(L, &amp;cfun_wml_condition, 1);</span>
<span class='curline'><a href='../S/185.html#L4485'>L</a>                4485 src/scripting/game_lua_kernel.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/185.html#L4486'>L</a>                4486 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 2);</span>
<span class='curline'><a href='../S/185.html#L4498'>L</a>                4498 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4501'>L</a>                4501 src/scripting/game_lua_kernel.cpp 	if (!luaW_getglobal(L, "wesnoth", "wml_actions", cmd))</span>
<span class='curline'><a href='../S/185.html#L4505'>L</a>                4505 src/scripting/game_lua_kernel.cpp 	luaW_pushvconfig(L, cfg);</span>
<span class='curline'><a href='../S/185.html#L4506'>L</a>                4506 src/scripting/game_lua_kernel.cpp 	luaW_pcall(L, 1, 0, true);</span>
<span class='curline'><a href='../S/185.html#L4519'>L</a>                4519 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4522'>L</a>                4522 src/scripting/game_lua_kernel.cpp 	if (!luaW_getglobal(L, "wesnoth", "wml_conditionals", cmd)) {</span>
<span class='curline'><a href='../S/185.html#L4527'>L</a>                4527 src/scripting/game_lua_kernel.cpp 	luaW_pushvconfig(L, cfg);</span>
<span class='curline'><a href='../S/185.html#L4528'>L</a>                4528 src/scripting/game_lua_kernel.cpp 	luaW_pcall(L, 1, 1, true);</span>
<span class='curline'><a href='../S/185.html#L4530'>L</a>                4530 src/scripting/game_lua_kernel.cpp 	bool b = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L4531'>L</a>                4531 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4552'>L</a>                4552 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4556'>L</a>                4556 src/scripting/game_lua_kernel.cpp 	luaW_pushunit(L, ui-&gt;underlying_id());</span>
<span class='curline'><a href='../S/185.html#L4567'>L</a>                4567 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4570'>L</a>                4570 src/scripting/game_lua_kernel.cpp 	if (!luaW_getglobal(L, path))</span>
<span class='curline'><a href='../S/185.html#L4577'>L</a>                4577 src/scripting/game_lua_kernel.cpp 	lua_insert(L, -nArgs - 1);</span>
<span class='curline'><a href='../S/185.html#L4579'>L</a>                4579 src/scripting/game_lua_kernel.cpp 	if (!luaW_pcall(L, nArgs, 1)) return false;</span>
<span class='curline'><a href='../S/185.html#L4581'>L</a>                4581 src/scripting/game_lua_kernel.cpp 	bool b = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/185.html#L4582'>L</a>                4582 src/scripting/game_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/185.html#L4588'>L</a>                4588 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4589'>L</a>                4589 src/scripting/game_lua_kernel.cpp 	int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/185.html#L4592'>L</a>                4592 src/scripting/game_lua_kernel.cpp 	lua_unit* lu = luaW_pushlocalunit(L, u);</span>
<span class='curline'><a href='../S/185.html#L4595'>L</a>                4595 src/scripting/game_lua_kernel.cpp 	luaW_pushconfig(L, cfg);</span>
<span class='curline'><a href='../S/185.html#L4597'>L</a>                4597 src/scripting/game_lua_kernel.cpp 	if(luaW_getglobal(L, "wesnoth", "effects", name)) {</span>
<span class='curline'><a href='../S/185.html#L4600'>L</a>                4600 src/scripting/game_lua_kernel.cpp 		if(lua_istable(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L4603'>L</a>                4603 src/scripting/game_lua_kernel.cpp 				lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/185.html#L4605'>L</a>                4605 src/scripting/game_lua_kernel.cpp 				lua_pushvalue(L, top + 1);</span>
<span class='curline'><a href='../S/185.html#L4607'>L</a>                4607 src/scripting/game_lua_kernel.cpp 				lua_pushvalue(L, top + 2);</span>
<span class='curline'><a href='../S/185.html#L4609'>L</a>                4609 src/scripting/game_lua_kernel.cpp 				luaW_pcall(L, 2, 0);</span>
<span class='curline'><a href='../S/185.html#L4612'>L</a>                4612 src/scripting/game_lua_kernel.cpp 			if(luaL_getmetafield(L, -1, "__descr")) {</span>
<span class='curline'><a href='../S/185.html#L4614'>L</a>                4614 src/scripting/game_lua_kernel.cpp 				if(lua_isstring(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L4616'>L</a>                4616 src/scripting/game_lua_kernel.cpp 					descr = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/185.html#L4618'>L</a>                4618 src/scripting/game_lua_kernel.cpp 					lua_pushvalue(L, -2);</span>
<span class='curline'><a href='../S/185.html#L4620'>L</a>                4620 src/scripting/game_lua_kernel.cpp 					lua_pushvalue(L, top + 1);</span>
<span class='curline'><a href='../S/185.html#L4622'>L</a>                4622 src/scripting/game_lua_kernel.cpp 					lua_pushvalue(L, top + 2);</span>
<span class='curline'><a href='../S/185.html#L4624'>L</a>                4624 src/scripting/game_lua_kernel.cpp 					luaW_pcall(L, 3, 1);</span>
<span class='curline'><a href='../S/185.html#L4625'>L</a>                4625 src/scripting/game_lua_kernel.cpp 					if(lua_isstring(L, -1) &amp;&amp; !lua_isnumber(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L4626'>L</a>                4626 src/scripting/game_lua_kernel.cpp 						descr = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/185.html#L4629'>L</a>                4629 src/scripting/game_lua_kernel.cpp 						if(lua_isnone(L, -1)) {</span>
<span class='curline'><a href='../S/185.html#L4632'>L</a>                4632 src/scripting/game_lua_kernel.cpp 							ERR_LUA &lt;&lt; lua_typename(L, lua_type(L, -1));</span>
<span class='curline'><a href='../S/185.html#L4639'>L</a>                4639 src/scripting/game_lua_kernel.cpp 			lua_pushvalue(L, top + 1);</span>
<span class='curline'><a href='../S/185.html#L4641'>L</a>                4641 src/scripting/game_lua_kernel.cpp 			lua_pushvalue(L, top + 2);</span>
<span class='curline'><a href='../S/185.html#L4643'>L</a>                4643 src/scripting/game_lua_kernel.cpp 			luaW_pcall(L, 2, 0);</span>
<span class='curline'><a href='../S/185.html#L4647'>L</a>                4647 src/scripting/game_lua_kernel.cpp 	lua_settop(L, top);</span>
<span class='curline'><a href='../S/185.html#L4664'>L</a>                4664 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4666'>L</a>                4666 src/scripting/game_lua_kernel.cpp 	if (!luaW_getglobal(L, "wesnoth", "game_events", "on_mouse_move")) {</span>
<span class='curline'><a href='../S/185.html#L4669'>L</a>                4669 src/scripting/game_lua_kernel.cpp 	lua_push(L, loc.wml_x());</span>
<span class='curline'><a href='../S/185.html#L4670'>L</a>                4670 src/scripting/game_lua_kernel.cpp 	lua_push(L, loc.wml_y());</span>
<span class='curline'><a href='../S/185.html#L4671'>L</a>                4671 src/scripting/game_lua_kernel.cpp 	luaW_pcall(L, 2, 0, false);</span>
<span class='curline'><a href='../S/185.html#L4677'>L</a>                4677 src/scripting/game_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/185.html#L4679'>L</a>                4679 src/scripting/game_lua_kernel.cpp 	if (!luaW_getglobal(L, "wesnoth", "game_events", "on_mouse_action")) {</span>
<span class='curline'><a href='../S/185.html#L4682'>L</a>                4682 src/scripting/game_lua_kernel.cpp 	lua_push(L, loc.wml_x());</span>
<span class='curline'><a href='../S/185.html#L4683'>L</a>                4683 src/scripting/game_lua_kernel.cpp 	lua_push(L, loc.wml_y());</span>
<span class='curline'><a href='../S/185.html#L4684'>L</a>                4684 src/scripting/game_lua_kernel.cpp 	luaW_pcall(L, 2, 0, false);</span>
<span class='curline'><a href='../S/187.html#L45'>L</a>                  45 src/scripting/game_lua_kernel.hpp typedef int (*lua_CFunction) (lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L82'>L</a>                  82 src/scripting/game_lua_kernel.hpp 	int intf_match_unit(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L83'>L</a>                  83 src/scripting/game_lua_kernel.hpp 	int intf_get_recall_units(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L84'>L</a>                  84 src/scripting/game_lua_kernel.hpp 	int intf_get_variable(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L85'>L</a>                  85 src/scripting/game_lua_kernel.hpp 	int intf_get_side_variable(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L86'>L</a>                  86 src/scripting/game_lua_kernel.hpp 	int intf_set_variable(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L87'>L</a>                  87 src/scripting/game_lua_kernel.hpp 	int intf_set_side_variable(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L88'>L</a>                  88 src/scripting/game_lua_kernel.hpp 	int intf_highlight_hex(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L89'>L</a>                  89 src/scripting/game_lua_kernel.hpp 	int intf_is_enemy(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L90'>L</a>                  90 src/scripting/game_lua_kernel.hpp 	int intf_unit_ability(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L91'>L</a>                  91 src/scripting/game_lua_kernel.hpp 	int intf_view_locked(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L92'>L</a>                  92 src/scripting/game_lua_kernel.hpp 	int intf_lock_view(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L93'>L</a>                  93 src/scripting/game_lua_kernel.hpp 	int intf_get_terrain(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L94'>L</a>                  94 src/scripting/game_lua_kernel.hpp 	int intf_set_terrain(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L95'>L</a>                  95 src/scripting/game_lua_kernel.hpp 	int intf_get_terrain_info(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L96'>L</a>                  96 src/scripting/game_lua_kernel.hpp 	int intf_get_time_of_day(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L97'>L</a>                  97 src/scripting/game_lua_kernel.hpp 	int intf_get_village_owner(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L98'>L</a>                  98 src/scripting/game_lua_kernel.hpp 	int intf_set_village_owner(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L99'>L</a>                  99 src/scripting/game_lua_kernel.hpp 	int intf_get_map_size(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L100'>L</a>                 100 src/scripting/game_lua_kernel.hpp 	int intf_get_mouseover_tile(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L101'>L</a>                 101 src/scripting/game_lua_kernel.hpp 	int intf_get_selected_tile(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L102'>L</a>                 102 src/scripting/game_lua_kernel.hpp 	int intf_get_starting_location(lua_State* L);</span>
<span class='curline'><a href='../S/187.html#L103'>L</a>                 103 src/scripting/game_lua_kernel.hpp 	int impl_game_config_get(lua_State *L) override;</span>
<span class='curline'><a href='../S/187.html#L104'>L</a>                 104 src/scripting/game_lua_kernel.hpp 	int impl_game_config_set(lua_State *L) override;</span>
<span class='curline'><a href='../S/187.html#L105'>L</a>                 105 src/scripting/game_lua_kernel.hpp 	int impl_current_get(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L111'>L</a>                 111 src/scripting/game_lua_kernel.hpp 	int intf_find_path(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L112'>L</a>                 112 src/scripting/game_lua_kernel.hpp 	int intf_find_reach(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L113'>L</a>                 113 src/scripting/game_lua_kernel.hpp 	int intf_find_cost_map(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L114'>L</a>                 114 src/scripting/game_lua_kernel.hpp 	int intf_heal_unit(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L115'>L</a>                 115 src/scripting/game_lua_kernel.hpp 	int intf_message(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L116'>L</a>                 116 src/scripting/game_lua_kernel.hpp 	int intf_open_help(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L117'>L</a>                 117 src/scripting/game_lua_kernel.hpp 	int intf_play_sound(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L118'>L</a>                 118 src/scripting/game_lua_kernel.hpp 	int intf_print(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L120'>L</a>                 120 src/scripting/game_lua_kernel.hpp 	int intf_put_unit(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L121'>L</a>                 121 src/scripting/game_lua_kernel.hpp 	int intf_erase_unit(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L122'>L</a>                 122 src/scripting/game_lua_kernel.hpp 	int intf_put_recall_unit(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L123'>L</a>                 123 src/scripting/game_lua_kernel.hpp 	int intf_extract_unit(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L124'>L</a>                 124 src/scripting/game_lua_kernel.hpp 	int intf_find_vacant_tile(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L125'>L</a>                 125 src/scripting/game_lua_kernel.hpp 	int intf_float_label(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L126'>L</a>                 126 src/scripting/game_lua_kernel.hpp 	int intf_set_end_campaign_credits(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L127'>L</a>                 127 src/scripting/game_lua_kernel.hpp 	int intf_set_end_campaign_text(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L128'>L</a>                 128 src/scripting/game_lua_kernel.hpp 	int intf_clear_menu_item(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L129'>L</a>                 129 src/scripting/game_lua_kernel.hpp 	int intf_set_menu_item(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L130'>L</a>                 130 src/scripting/game_lua_kernel.hpp 	int intf_set_next_scenario(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L131'>L</a>                 131 src/scripting/game_lua_kernel.hpp 	int intf_shroud_op(lua_State *L, bool place_shroud);</span>
<span class='curline'><a href='../S/187.html#L132'>L</a>                 132 src/scripting/game_lua_kernel.hpp 	int intf_simulate_combat(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L133'>L</a>                 133 src/scripting/game_lua_kernel.hpp 	int intf_scroll_to_tile(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L134'>L</a>                 134 src/scripting/game_lua_kernel.hpp 	int intf_select_hex(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L135'>L</a>                 135 src/scripting/game_lua_kernel.hpp 	int intf_select_unit(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L136'>L</a>                 136 src/scripting/game_lua_kernel.hpp 	int intf_deselect_hex(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L137'>L</a>                 137 src/scripting/game_lua_kernel.hpp 	int intf_is_skipping_messages(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L138'>L</a>                 138 src/scripting/game_lua_kernel.hpp 	int intf_skip_messages(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L139'>L</a>                 139 src/scripting/game_lua_kernel.hpp 	int intf_get_locations(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L140'>L</a>                 140 src/scripting/game_lua_kernel.hpp 	int intf_get_villages(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L141'>L</a>                 141 src/scripting/game_lua_kernel.hpp 	int intf_match_location(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L142'>L</a>                 142 src/scripting/game_lua_kernel.hpp 	int intf_match_side(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L143'>L</a>                 143 src/scripting/game_lua_kernel.hpp 	int intf_set_side_id(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L144'>L</a>                 144 src/scripting/game_lua_kernel.hpp 	int intf_modify_ai_wml(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L145'>L</a>                 145 src/scripting/game_lua_kernel.hpp 	int intf_get_sides(lua_State* L);</span>
<span class='curline'><a href='../S/187.html#L146'>L</a>                 146 src/scripting/game_lua_kernel.hpp 	int intf_add_tile_overlay(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L147'>L</a>                 147 src/scripting/game_lua_kernel.hpp 	int intf_remove_tile_overlay(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L148'>L</a>                 148 src/scripting/game_lua_kernel.hpp 	int intf_add_event(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L149'>L</a>                 149 src/scripting/game_lua_kernel.hpp 	int intf_remove_event(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L150'>L</a>                 150 src/scripting/game_lua_kernel.hpp 	int intf_color_adjust(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L151'>L</a>                 151 src/scripting/game_lua_kernel.hpp 	int intf_delay(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L152'>L</a>                 152 src/scripting/game_lua_kernel.hpp 	int intf_label(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L153'>L</a>                 153 src/scripting/game_lua_kernel.hpp 	int intf_redraw(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L155'>L</a>                 155 src/scripting/game_lua_kernel.hpp 	int intf_set_time_of_day(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L156'>L</a>                 156 src/scripting/game_lua_kernel.hpp 	int intf_scroll(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L157'>L</a>                 157 src/scripting/game_lua_kernel.hpp 	int intf_get_all_vars(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L158'>L</a>                 158 src/scripting/game_lua_kernel.hpp 	int impl_theme_item(lua_State *L, std::string name);</span>
<span class='curline'><a href='../S/187.html#L159'>L</a>                 159 src/scripting/game_lua_kernel.hpp 	int impl_theme_items_get(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L160'>L</a>                 160 src/scripting/game_lua_kernel.hpp 	int impl_theme_items_set(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L161'>L</a>                 161 src/scripting/game_lua_kernel.hpp 	int cfun_builtin_effect(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L162'>L</a>                 162 src/scripting/game_lua_kernel.hpp 	int cfun_wml_action(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L163'>L</a>                 163 src/scripting/game_lua_kernel.hpp 	int intf_fire_event(lua_State *L, const bool by_id);</span>
<span class='curline'><a href='../S/187.html#L164'>L</a>                 164 src/scripting/game_lua_kernel.hpp 	int intf_fire_wml_menu_item(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L165'>L</a>                 165 src/scripting/game_lua_kernel.hpp 	int intf_teleport(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L166'>L</a>                 166 src/scripting/game_lua_kernel.hpp 	int intf_remove_sound_source(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L167'>L</a>                 167 src/scripting/game_lua_kernel.hpp 	int intf_add_sound_source(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L168'>L</a>                 168 src/scripting/game_lua_kernel.hpp 	int intf_get_sound_source(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L169'>L</a>                 169 src/scripting/game_lua_kernel.hpp 	int intf_log(lua_State *L);</span>
<span class='curline'><a href='../S/187.html#L170'>L</a>                 170 src/scripting/game_lua_kernel.hpp 	int intf_toggle_fog(lua_State *L, const bool clear);</span>
<span class='curline'><a href='../S/187.html#L171'>L</a>                 171 src/scripting/game_lua_kernel.hpp 	int intf_get_fog_or_shroud(lua_State *L, bool fog);</span>
<span class='curline'><a href='../S/187.html#L172'>L</a>                 172 src/scripting/game_lua_kernel.hpp 	int intf_log_replay(lua_State* L);</span>
<span class='curline'><a href='../S/187.html#L173'>L</a>                 173 src/scripting/game_lua_kernel.hpp 	int intf_zoom(lua_State* L);</span>
<span class='curline'><a href='../S/198.html#L55'>L</a>                  55 src/scripting/lua_audio.cpp static lua_music_track* push_track(lua_State* L, int i) {</span>
<span class='curline'><a href='../S/198.html#L56'>L</a>                  56 src/scripting/lua_audio.cpp 	lua_music_track* trk = new(L) lua_music_track(i);</span>
<span class='curline'><a href='../S/198.html#L57'>L</a>                  57 src/scripting/lua_audio.cpp 	luaL_setmetatable(L, Track);</span>
<span class='curline'><a href='../S/198.html#L61'>L</a>                  61 src/scripting/lua_audio.cpp static lua_music_track* push_track(lua_State* L, std::shared_ptr&lt;sound::music_track&gt; new_track) {</span>
<span class='curline'><a href='../S/198.html#L62'>L</a>                  62 src/scripting/lua_audio.cpp 	lua_music_track* trk = new(L) lua_music_track(new_track);</span>
<span class='curline'><a href='../S/198.html#L63'>L</a>                  63 src/scripting/lua_audio.cpp 	luaL_setmetatable(L, Track);</span>
<span class='curline'><a href='../S/198.html#L67'>L</a>                  67 src/scripting/lua_audio.cpp static lua_music_track* get_track(lua_State* L, int i) {</span>
<span class='curline'><a href='../S/198.html#L68'>L</a>                  68 src/scripting/lua_audio.cpp 	return static_cast&lt;lua_music_track*&gt;(luaL_checkudata(L, i, Track));</span>
<span class='curline'><a href='../S/198.html#L74'>L</a>                  74 src/scripting/lua_audio.cpp static int impl_track_collect(lua_State* L)</span>
<span class='curline'><a href='../S/198.html#L76'>L</a>                  76 src/scripting/lua_audio.cpp 	lua_music_track* u = get_track(L, 1);</span>
<span class='curline'><a href='../S/198.html#L81'>L</a>                  81 src/scripting/lua_audio.cpp static int impl_music_get(lua_State* L) {</span>
<span class='curline'><a href='../S/198.html#L82'>L</a>                  82 src/scripting/lua_audio.cpp 	if(lua_isnumber(L, 2)) {</span>
<span class='curline'><a href='../S/198.html#L83'>L</a>                  83 src/scripting/lua_audio.cpp 		push_track(L, lua_tointeger(L, 2) - 1);</span>
<span class='curline'><a href='../S/198.html#L86'>L</a>                  86 src/scripting/lua_audio.cpp 	const char* m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/198.html#L89'>L</a>                  89 src/scripting/lua_audio.cpp 		push_track(L, sound::get_current_track());</span>
<span class='curline'><a href='../S/198.html#L94'>L</a>                  94 src/scripting/lua_audio.cpp 		push_track(L, sound::get_previous_music_track());</span>
<span class='curline'><a href='../S/198.html#L101'>L</a>                 101 src/scripting/lua_audio.cpp 			lua_pushnil(L);</span>
<span class='curline'><a href='../S/198.html#L103'>L</a>                 103 src/scripting/lua_audio.cpp 			lua_pushinteger(L, i + 1);</span>
<span class='curline'><a href='../S/198.html#L112'>L</a>                 112 src/scripting/lua_audio.cpp 		lua_push(L, tracks);</span>
<span class='curline'><a href='../S/198.html#L118'>L</a>                 118 src/scripting/lua_audio.cpp 	return luaW_getmetafield(L, 1, m);</span>
<span class='curline'><a href='../S/198.html#L121'>L</a>                 121 src/scripting/lua_audio.cpp static int impl_music_set(lua_State* L) {</span>
<span class='curline'><a href='../S/198.html#L122'>L</a>                 122 src/scripting/lua_audio.cpp 	if(lua_isnumber(L, 2)) {</span>
<span class='curline'><a href='../S/198.html#L123'>L</a>                 123 src/scripting/lua_audio.cpp 		unsigned int i = lua_tointeger(L, 2) - 1;</span>
<span class='curline'><a href='../S/198.html#L125'>L</a>                 125 src/scripting/lua_audio.cpp 		if(lua_isnil(L, 3)) {</span>
<span class='curline'><a href='../S/198.html#L129'>L</a>                 129 src/scripting/lua_audio.cpp 		} else if(luaW_toconfig(L, 3, cfg)) {</span>
<span class='curline'><a href='../S/198.html#L132'>L</a>                 132 src/scripting/lua_audio.cpp 				return luaL_argerror(L, 3, "For play_once, use wesnoth.music_list.play instead");</span>
<span class='curline'><a href='../S/198.html#L143'>L</a>                 143 src/scripting/lua_audio.cpp 			lua_music_track&amp; track = *get_track(L, 3);</span>
<span class='curline'><a href='../S/198.html#L153'>L</a>                 153 src/scripting/lua_audio.cpp 	const char* m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/198.html#L159'>L</a>                 159 src/scripting/lua_audio.cpp static int impl_music_len(lua_State* L) {</span>
<span class='curline'><a href='../S/198.html#L160'>L</a>                 160 src/scripting/lua_audio.cpp 	lua_pushinteger(L, sound::get_num_tracks());</span>
<span class='curline'><a href='../S/198.html#L164'>L</a>                 164 src/scripting/lua_audio.cpp static int intf_music_play(lua_State* L) {</span>
<span class='curline'><a href='../S/198.html#L165'>L</a>                 165 src/scripting/lua_audio.cpp 	sound::play_music_once(luaL_checkstring(L, 1));</span>
<span class='curline'><a href='../S/198.html#L177'>L</a>                 177 src/scripting/lua_audio.cpp static int intf_music_add(lua_State* L) {</span>
<span class='curline'><a href='../S/198.html#L179'>L</a>                 179 src/scripting/lua_audio.cpp 	if(lua_isinteger(L, 1)) {</span>
<span class='curline'><a href='../S/198.html#L180'>L</a>                 180 src/scripting/lua_audio.cpp 		index = lua_tointeger(L, 1);</span>
<span class='curline'><a href='../S/198.html#L181'>L</a>                 181 src/scripting/lua_audio.cpp 		lua_remove(L, 1);</span>
<span class='curline'><a href='../S/198.html#L184'>L</a>                 184 src/scripting/lua_audio.cpp 		"name", luaL_checkstring(L, 1),</span>
<span class='curline'><a href='../S/198.html#L188'>L</a>                 188 src/scripting/lua_audio.cpp 	for(int i = 2; i &lt;= lua_gettop(L); i++) {</span>
<span class='curline'><a href='../S/198.html#L189'>L</a>                 189 src/scripting/lua_audio.cpp 		if(lua_isboolean(L, i)) {</span>
<span class='curline'><a href='../S/198.html#L191'>L</a>                 191 src/scripting/lua_audio.cpp 				return luaL_argerror(L, i, "only one boolean argument may be passed");</span>
<span class='curline'><a href='../S/198.html#L193'>L</a>                 193 src/scripting/lua_audio.cpp 				cfg["immediate"] = luaW_toboolean(L, i);</span>
<span class='curline'><a href='../S/198.html#L195'>L</a>                 195 src/scripting/lua_audio.cpp 		} else if(lua_isnumber(L, i)) {</span>
<span class='curline'><a href='../S/198.html#L197'>L</a>                 197 src/scripting/lua_audio.cpp 				return luaL_argerror(L, i, "only two integer arguments may be passed");</span>
<span class='curline'><a href='../S/198.html#L199'>L</a>                 199 src/scripting/lua_audio.cpp 				cfg["ms_after"] = lua_tointeger(L, i);</span>
<span class='curline'><a href='../S/198.html#L202'>L</a>                 202 src/scripting/lua_audio.cpp 				cfg["ms_before"] = lua_tointeger(L, i);</span>
<span class='curline'><a href='../S/198.html#L206'>L</a>                 206 src/scripting/lua_audio.cpp 			return luaL_argerror(L, i, "unrecognized argument");</span>
<span class='curline'><a href='../S/198.html#L218'>L</a>                 218 src/scripting/lua_audio.cpp static int intf_music_remove(lua_State* L) {</span>
<span class='curline'><a href='../S/198.html#L221'>L</a>                 221 src/scripting/lua_audio.cpp 	for(int i = 1; i &lt;= lua_gettop(L); i++) {</span>
<span class='curline'><a href='../S/198.html#L222'>L</a>                 222 src/scripting/lua_audio.cpp 		to_remove.insert(luaL_checkinteger(L, i));</span>
<span class='curline'><a href='../S/198.html#L235'>L</a>                 235 src/scripting/lua_audio.cpp static int impl_track_get(lua_State* L) {</span>
<span class='curline'><a href='../S/198.html#L236'>L</a>                 236 src/scripting/lua_audio.cpp 	lua_music_track* track = get_track(L, 1);</span>
<span class='curline'><a href='../S/198.html#L238'>L</a>                 238 src/scripting/lua_audio.cpp 		return luaL_error(L, "Error: Attempted to access an invalid music track.\n");</span>
<span class='curline'><a href='../S/198.html#L240'>L</a>                 240 src/scripting/lua_audio.cpp 	const char* m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/198.html#L243'>L</a>                 243 src/scripting/lua_audio.cpp 		return luaL_error(L, "Tried to access member of track that is no longer valid.");</span>
<span class='curline'><a href='../S/198.html#L264'>L</a>                 264 src/scripting/lua_audio.cpp 	return luaW_getmetafield(L, 1, m);</span>
<span class='curline'><a href='../S/198.html#L267'>L</a>                 267 src/scripting/lua_audio.cpp static int impl_track_set(lua_State* L) {</span>
<span class='curline'><a href='../S/198.html#L268'>L</a>                 268 src/scripting/lua_audio.cpp 	lua_music_track* track = get_track(L, 1);</span>
<span class='curline'><a href='../S/198.html#L270'>L</a>                 270 src/scripting/lua_audio.cpp 		return luaL_error(L, "Error: Attempted to access an invalid music track.\n");</span>
<span class='curline'><a href='../S/198.html#L272'>L</a>                 272 src/scripting/lua_audio.cpp 	const char* m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/198.html#L280'>L</a>                 280 src/scripting/lua_audio.cpp static int impl_track_eq(lua_State* L) {</span>
<span class='curline'><a href='../S/198.html#L281'>L</a>                 281 src/scripting/lua_audio.cpp 	lua_music_track* a = get_track(L, 1);</span>
<span class='curline'><a href='../S/198.html#L282'>L</a>                 282 src/scripting/lua_audio.cpp 	lua_music_track* b = get_track(L, 2);</span>
<span class='curline'><a href='../S/198.html#L286'>L</a>                 286 src/scripting/lua_audio.cpp 		lua_pushboolean(L, false);</span>
<span class='curline'><a href='../S/198.html#L290'>L</a>                 290 src/scripting/lua_audio.cpp 		lua_pushboolean(L, true);</span>
<span class='curline'><a href='../S/198.html#L296'>L</a>                 296 src/scripting/lua_audio.cpp 		lua_pushboolean(L, lhs-&gt;id() == rhs-&gt;id() &amp;&amp; lhs-&gt;shuffle() == rhs-&gt;shuffle() &amp;&amp; lhs-&gt;play_once() == rhs-&gt;play_once() &amp;&amp; lhs-&gt;ms_before() == rhs-&gt;ms_before() &amp;&amp; lhs-&gt;ms_after() == rhs-&gt;ms_after());</span>
<span class='curline'><a href='../S/198.html#L299'>L</a>                 299 src/scripting/lua_audio.cpp 	lua_pushboolean(L, false);</span>
<span class='curline'><a href='../S/198.html#L304'>L</a>                 304 src/scripting/lua_audio.cpp 	std::string register_table(lua_State* L) {</span>
<span class='curline'><a href='../S/198.html#L306'>L</a>                 306 src/scripting/lua_audio.cpp 		lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/198.html#L307'>L</a>                 307 src/scripting/lua_audio.cpp 		lua_newuserdata(L, 0);</span>
<span class='curline'><a href='../S/198.html#L308'>L</a>                 308 src/scripting/lua_audio.cpp 		lua_createtable(L, 0, 4);</span>
<span class='curline'><a href='../S/198.html#L321'>L</a>                 321 src/scripting/lua_audio.cpp 		luaL_setfuncs(L, pl_callbacks, 0);</span>
<span class='curline'><a href='../S/198.html#L322'>L</a>                 322 src/scripting/lua_audio.cpp 		lua_pushstring(L, "music playlist");</span>
<span class='curline'><a href='../S/198.html#L323'>L</a>                 323 src/scripting/lua_audio.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/198.html#L324'>L</a>                 324 src/scripting/lua_audio.cpp 		lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/198.html#L325'>L</a>                 325 src/scripting/lua_audio.cpp 		lua_setfield(L, -2, "music_list");</span>
<span class='curline'><a href='../S/198.html#L326'>L</a>                 326 src/scripting/lua_audio.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/198.html#L329'>L</a>                 329 src/scripting/lua_audio.cpp 		luaL_newmetatable(L, Track);</span>
<span class='curline'><a href='../S/198.html#L337'>L</a>                 337 src/scripting/lua_audio.cpp 		luaL_setfuncs(L, track_callbacks, 0);</span>
<span class='curline'><a href='../S/198.html#L338'>L</a>                 338 src/scripting/lua_audio.cpp 		lua_pushstring(L, Track);</span>
<span class='curline'><a href='../S/198.html#L339'>L</a>                 339 src/scripting/lua_audio.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/196.html#L64'>L</a>                  64 src/scripting/lua_common.cpp static int impl_gettext(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L66'>L</a>                  66 src/scripting/lua_common.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/196.html#L67'>L</a>                  67 src/scripting/lua_common.cpp 	char const *d = static_cast&lt;char *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/196.html#L69'>L</a>                  69 src/scripting/lua_common.cpp 	if(lua_isstring(L, 3)) {</span>
<span class='curline'><a href='../S/196.html#L70'>L</a>                  70 src/scripting/lua_common.cpp 		const char* pl = luaL_checkstring(L, 3);</span>
<span class='curline'><a href='../S/196.html#L71'>L</a>                  71 src/scripting/lua_common.cpp 		int count = luaL_checkinteger(L, 4);</span>
<span class='curline'><a href='../S/196.html#L72'>L</a>                  72 src/scripting/lua_common.cpp 		luaW_pushtstring(L, t_string(m, pl, count, d));</span>
<span class='curline'><a href='../S/196.html#L74'>L</a>                  74 src/scripting/lua_common.cpp 		luaW_pushtstring(L, t_string(m, d));</span>
<span class='curline'><a href='../S/196.html#L84'>L</a>                  84 src/scripting/lua_common.cpp int intf_textdomain(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L87'>L</a>                  87 src/scripting/lua_common.cpp 	char const *m = luaL_checklstring(L, 1, &amp;l);</span>
<span class='curline'><a href='../S/196.html#L89'>L</a>                  89 src/scripting/lua_common.cpp 	void *p = lua_newuserdata(L, l + 1);</span>
<span class='curline'><a href='../S/196.html#L92'>L</a>                  92 src/scripting/lua_common.cpp 	luaL_setmetatable(L, gettextKey);</span>
<span class='curline'><a href='../S/196.html#L103'>L</a>                 103 src/scripting/lua_common.cpp static void tstring_concat_aux(lua_State *L, t_string &amp;dst, int src)</span>
<span class='curline'><a href='../S/196.html#L105'>L</a>                 105 src/scripting/lua_common.cpp 	switch (lua_type(L, src)) {</span>
<span class='curline'><a href='../S/196.html#L108'>L</a>                 108 src/scripting/lua_common.cpp 			dst += lua_tostring(L, src);</span>
<span class='curline'><a href='../S/196.html#L112'>L</a>                 112 src/scripting/lua_common.cpp 			if (t_string * src_ptr = static_cast&lt;t_string *&gt; (luaL_testudata(L, src, tstringKey))) {</span>
<span class='curline'><a href='../S/196.html#L118'>L</a>                 118 src/scripting/lua_common.cpp 			luaW_type_error(L, src, "string");</span>
<span class='curline'><a href='../S/196.html#L125'>L</a>                 125 src/scripting/lua_common.cpp static int impl_tstring_concat(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L128'>L</a>                 128 src/scripting/lua_common.cpp 	t_string *t = new(L) t_string;</span>
<span class='curline'><a href='../S/196.html#L129'>L</a>                 129 src/scripting/lua_common.cpp 	luaL_setmetatable(L, tstringKey);</span>
<span class='curline'><a href='../S/196.html#L132'>L</a>                 132 src/scripting/lua_common.cpp 	tstring_concat_aux(L, *t, 1);</span>
<span class='curline'><a href='../S/196.html#L133'>L</a>                 133 src/scripting/lua_common.cpp 	tstring_concat_aux(L, *t, 2);</span>
<span class='curline'><a href='../S/196.html#L138'>L</a>                 138 src/scripting/lua_common.cpp static int impl_tstring_len(lua_State* L)</span>
<span class='curline'><a href='../S/196.html#L140'>L</a>                 140 src/scripting/lua_common.cpp 	t_string* t = static_cast&lt;t_string*&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/196.html#L141'>L</a>                 141 src/scripting/lua_common.cpp 	lua_pushnumber(L, t-&gt;size());</span>
<span class='curline'><a href='../S/196.html#L148'>L</a>                 148 src/scripting/lua_common.cpp static int impl_tstring_collect(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L150'>L</a>                 150 src/scripting/lua_common.cpp 	t_string *t = static_cast&lt;t_string *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/196.html#L155'>L</a>                 155 src/scripting/lua_common.cpp static int impl_tstring_lt(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L157'>L</a>                 157 src/scripting/lua_common.cpp 	t_string *t1 = static_cast&lt;t_string *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/196.html#L158'>L</a>                 158 src/scripting/lua_common.cpp 	t_string *t2 = static_cast&lt;t_string *&gt;(lua_touserdata(L, 2));</span>
<span class='curline'><a href='../S/196.html#L159'>L</a>                 159 src/scripting/lua_common.cpp 	lua_pushboolean(L, translation::compare(t1-&gt;get(), t2-&gt;get()) &lt; 0);</span>
<span class='curline'><a href='../S/196.html#L163'>L</a>                 163 src/scripting/lua_common.cpp static int impl_tstring_le(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L165'>L</a>                 165 src/scripting/lua_common.cpp 	t_string *t1 = static_cast&lt;t_string *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/196.html#L166'>L</a>                 166 src/scripting/lua_common.cpp 	t_string *t2 = static_cast&lt;t_string *&gt;(lua_touserdata(L, 2));</span>
<span class='curline'><a href='../S/196.html#L167'>L</a>                 167 src/scripting/lua_common.cpp 	lua_pushboolean(L, translation::compare(t1-&gt;get(), t2-&gt;get()) &lt; 1);</span>
<span class='curline'><a href='../S/196.html#L171'>L</a>                 171 src/scripting/lua_common.cpp static int impl_tstring_eq(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L173'>L</a>                 173 src/scripting/lua_common.cpp 	t_string *t1 = static_cast&lt;t_string *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/196.html#L174'>L</a>                 174 src/scripting/lua_common.cpp 	t_string *t2 = static_cast&lt;t_string *&gt;(lua_touserdata(L, 2));</span>
<span class='curline'><a href='../S/196.html#L175'>L</a>                 175 src/scripting/lua_common.cpp 	lua_pushboolean(L, translation::compare(t1-&gt;get(), t2-&gt;get()) == 0);</span>
<span class='curline'><a href='../S/196.html#L183'>L</a>                 183 src/scripting/lua_common.cpp static int impl_tstring_tostring(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L185'>L</a>                 185 src/scripting/lua_common.cpp 	t_string *t = static_cast&lt;t_string *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/196.html#L186'>L</a>                 186 src/scripting/lua_common.cpp 	lua_pushstring(L, t-&gt;c_str());</span>
<span class='curline'><a href='../S/196.html#L195'>L</a>                 195 src/scripting/lua_common.cpp static int impl_vconfig_get(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L197'>L</a>                 197 src/scripting/lua_common.cpp 	vconfig *v = static_cast&lt;vconfig *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/196.html#L199'>L</a>                 199 src/scripting/lua_common.cpp 	if (lua_isnumber(L, 2))</span>
<span class='curline'><a href='../S/196.html#L203'>L</a>                 203 src/scripting/lua_common.cpp 		unsigned pos = lua_tointeger(L, 2) - 1;</span>
<span class='curline'><a href='../S/196.html#L207'>L</a>                 207 src/scripting/lua_common.cpp 		lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/196.html#L208'>L</a>                 208 src/scripting/lua_common.cpp 		lua_pushstring(L, i.get_key().c_str());</span>
<span class='curline'><a href='../S/196.html#L209'>L</a>                 209 src/scripting/lua_common.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/196.html#L210'>L</a>                 210 src/scripting/lua_common.cpp 		luaW_pushvconfig(L, i.get_child());</span>
<span class='curline'><a href='../S/196.html#L211'>L</a>                 211 src/scripting/lua_common.cpp 		lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/196.html#L215'>L</a>                 215 src/scripting/lua_common.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/196.html#L217'>L</a>                 217 src/scripting/lua_common.cpp 		luaW_pushconfig(L, v-&gt;get_config());</span>
<span class='curline'><a href='../S/196.html#L221'>L</a>                 221 src/scripting/lua_common.cpp 		luaW_pushconfig(L, v-&gt;get_parsed_config());</span>
<span class='curline'><a href='../S/196.html#L228'>L</a>                 228 src/scripting/lua_common.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/196.html#L231'>L</a>                 231 src/scripting/lua_common.cpp 				luaW_pushscalar(L, a.second);</span>
<span class='curline'><a href='../S/196.html#L233'>L</a>                 233 src/scripting/lua_common.cpp 				luaW_pushscalar(L, v-&gt;expand(a.first));</span>
<span class='curline'><a href='../S/196.html#L234'>L</a>                 234 src/scripting/lua_common.cpp 			lua_setfield(L, -2, a.first.c_str());</span>
<span class='curline'><a href='../S/196.html#L244'>L</a>                 244 src/scripting/lua_common.cpp 			lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/196.html#L245'>L</a>                 245 src/scripting/lua_common.cpp 			lua_pushstring(L, i.get_key().c_str());</span>
<span class='curline'><a href='../S/196.html#L246'>L</a>                 246 src/scripting/lua_common.cpp 			lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/196.html#L247'>L</a>                 247 src/scripting/lua_common.cpp 			luaW_pushvconfig(L, i.get_child());</span>
<span class='curline'><a href='../S/196.html#L248'>L</a>                 248 src/scripting/lua_common.cpp 			lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/196.html#L249'>L</a>                 249 src/scripting/lua_common.cpp 			lua_rawseti(L, -2, j);</span>
<span class='curline'><a href='../S/196.html#L255'>L</a>                 255 src/scripting/lua_common.cpp 	luaW_pushscalar(L, (*v)[m]);</span>
<span class='curline'><a href='../S/196.html#L262'>L</a>                 262 src/scripting/lua_common.cpp static int impl_vconfig_size(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L264'>L</a>                 264 src/scripting/lua_common.cpp 	vconfig *v = static_cast&lt;vconfig *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/196.html#L265'>L</a>                 265 src/scripting/lua_common.cpp 	lua_pushinteger(L, v-&gt;null() ? 0 :</span>
<span class='curline'><a href='../S/196.html#L273'>L</a>                 273 src/scripting/lua_common.cpp static int impl_vconfig_collect(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L275'>L</a>                 275 src/scripting/lua_common.cpp 	vconfig *v = static_cast&lt;vconfig *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/196.html#L283'>L</a>                 283 src/scripting/lua_common.cpp static int impl_vconfig_pairs_iter(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L285'>L</a>                 285 src/scripting/lua_common.cpp 	vconfig vcfg = luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/196.html#L286'>L</a>                 286 src/scripting/lua_common.cpp 	void* p = luaL_checkudata(L, lua_upvalueindex(1), vconfigpairsKey);</span>
<span class='curline'><a href='../S/196.html#L293'>L</a>                 293 src/scripting/lua_common.cpp 	lua_pushlstring(L, value.first.c_str(), value.first.length());</span>
<span class='curline'><a href='../S/196.html#L294'>L</a>                 294 src/scripting/lua_common.cpp 	luaW_pushscalar(L, vcfg[value.first]);</span>
<span class='curline'><a href='../S/196.html#L301'>L</a>                 301 src/scripting/lua_common.cpp static int impl_vconfig_pairs_collect(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L304'>L</a>                 304 src/scripting/lua_common.cpp 	void* p = lua_touserdata(L, 1);</span>
<span class='curline'><a href='../S/196.html#L313'>L</a>                 313 src/scripting/lua_common.cpp static int impl_vconfig_pairs(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L315'>L</a>                 315 src/scripting/lua_common.cpp 	vconfig vcfg = luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/196.html#L316'>L</a>                 316 src/scripting/lua_common.cpp 	new(L) config::const_attr_itors(vcfg.get_config().attribute_range());</span>
<span class='curline'><a href='../S/196.html#L317'>L</a>                 317 src/scripting/lua_common.cpp 	luaL_newmetatable(L, vconfigpairsKey);</span>
<span class='curline'><a href='../S/196.html#L318'>L</a>                 318 src/scripting/lua_common.cpp 	lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/196.html#L319'>L</a>                 319 src/scripting/lua_common.cpp 	lua_pushcclosure(L, &amp;impl_vconfig_pairs_iter, 1);</span>
<span class='curline'><a href='../S/196.html#L320'>L</a>                 320 src/scripting/lua_common.cpp 	lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/196.html#L329'>L</a>                 329 src/scripting/lua_common.cpp static int impl_vconfig_ipairs_iter(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L331'>L</a>                 331 src/scripting/lua_common.cpp 	luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/196.html#L332'>L</a>                 332 src/scripting/lua_common.cpp 	int i = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/196.html#L333'>L</a>                 333 src/scripting/lua_common.cpp 	void* p = luaL_checkudata(L, lua_upvalueindex(1), vconfigipairsKey);</span>
<span class='curline'><a href='../S/196.html#L339'>L</a>                 339 src/scripting/lua_common.cpp 	lua_pushinteger(L, i + 1);</span>
<span class='curline'><a href='../S/196.html#L340'>L</a>                 340 src/scripting/lua_common.cpp 	lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/196.html#L341'>L</a>                 341 src/scripting/lua_common.cpp 	lua_pushlstring(L, value.first.c_str(), value.first.length());</span>
<span class='curline'><a href='../S/196.html#L342'>L</a>                 342 src/scripting/lua_common.cpp 	lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/196.html#L343'>L</a>                 343 src/scripting/lua_common.cpp 	luaW_pushvconfig(L, value.second);</span>
<span class='curline'><a href='../S/196.html#L344'>L</a>                 344 src/scripting/lua_common.cpp 	lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/196.html#L351'>L</a>                 351 src/scripting/lua_common.cpp static int impl_vconfig_ipairs_collect(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L353'>L</a>                 353 src/scripting/lua_common.cpp 	void* p = lua_touserdata(L, 1);</span>
<span class='curline'><a href='../S/196.html#L362'>L</a>                 362 src/scripting/lua_common.cpp static int impl_vconfig_ipairs(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L364'>L</a>                 364 src/scripting/lua_common.cpp 	vconfig cfg = luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/196.html#L365'>L</a>                 365 src/scripting/lua_common.cpp 	new(L) vconfig_child_range(cfg.ordered_begin(), cfg.ordered_end());</span>
<span class='curline'><a href='../S/196.html#L366'>L</a>                 366 src/scripting/lua_common.cpp 	luaL_newmetatable(L, vconfigipairsKey);</span>
<span class='curline'><a href='../S/196.html#L367'>L</a>                 367 src/scripting/lua_common.cpp 	lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/196.html#L368'>L</a>                 368 src/scripting/lua_common.cpp 	lua_pushcclosure(L, &amp;impl_vconfig_ipairs_iter, 1);</span>
<span class='curline'><a href='../S/196.html#L369'>L</a>                 369 src/scripting/lua_common.cpp 	lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/196.html#L370'>L</a>                 370 src/scripting/lua_common.cpp 	lua_pushinteger(L, 0);</span>
<span class='curline'><a href='../S/196.html#L379'>L</a>                 379 src/scripting/lua_common.cpp int intf_tovconfig(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L381'>L</a>                 381 src/scripting/lua_common.cpp 	vconfig vcfg = luaW_checkvconfig(L, 1);</span>
<span class='curline'><a href='../S/196.html#L382'>L</a>                 382 src/scripting/lua_common.cpp 	luaW_pushvconfig(L, vcfg);</span>
<span class='curline'><a href='../S/196.html#L389'>L</a>                 389 src/scripting/lua_common.cpp std::string register_gettext_metatable(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L391'>L</a>                 391 src/scripting/lua_common.cpp 	luaL_newmetatable(L, gettextKey);</span>
<span class='curline'><a href='../S/196.html#L397'>L</a>                 397 src/scripting/lua_common.cpp 	luaL_setfuncs(L, callbacks, 0);</span>
<span class='curline'><a href='../S/196.html#L399'>L</a>                 399 src/scripting/lua_common.cpp 	lua_pushstring(L, "message domain");</span>
<span class='curline'><a href='../S/196.html#L400'>L</a>                 400 src/scripting/lua_common.cpp 	lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/196.html#L408'>L</a>                 408 src/scripting/lua_common.cpp std::string register_tstring_metatable(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L410'>L</a>                 410 src/scripting/lua_common.cpp 	luaL_newmetatable(L, tstringKey);</span>
<span class='curline'><a href='../S/196.html#L422'>L</a>                 422 src/scripting/lua_common.cpp 	luaL_setfuncs(L, callbacks, 0);</span>
<span class='curline'><a href='../S/196.html#L424'>L</a>                 424 src/scripting/lua_common.cpp 	lua_pushstring(L, "translatable string");</span>
<span class='curline'><a href='../S/196.html#L425'>L</a>                 425 src/scripting/lua_common.cpp 	lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/196.html#L433'>L</a>                 433 src/scripting/lua_common.cpp std::string register_vconfig_metatable(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L435'>L</a>                 435 src/scripting/lua_common.cpp 	luaL_newmetatable(L, vconfigKey);</span>
<span class='curline'><a href='../S/196.html#L445'>L</a>                 445 src/scripting/lua_common.cpp 	luaL_setfuncs(L, callbacks, 0);</span>
<span class='curline'><a href='../S/196.html#L447'>L</a>                 447 src/scripting/lua_common.cpp 	lua_pushstring(L, "wml object");</span>
<span class='curline'><a href='../S/196.html#L448'>L</a>                 448 src/scripting/lua_common.cpp 	lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/196.html#L455'>L</a>                 455 src/scripting/lua_common.cpp 	luaL_newmetatable(L, vconfigpairsKey);</span>
<span class='curline'><a href='../S/196.html#L456'>L</a>                 456 src/scripting/lua_common.cpp 	lua_pushstring(L, "__gc");</span>
<span class='curline'><a href='../S/196.html#L457'>L</a>                 457 src/scripting/lua_common.cpp 	lua_pushcfunction(L, &amp;impl_vconfig_pairs_collect);</span>
<span class='curline'><a href='../S/196.html#L458'>L</a>                 458 src/scripting/lua_common.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/196.html#L460'>L</a>                 460 src/scripting/lua_common.cpp 	luaL_newmetatable(L, vconfigipairsKey);</span>
<span class='curline'><a href='../S/196.html#L461'>L</a>                 461 src/scripting/lua_common.cpp 	lua_pushstring(L, "__gc");</span>
<span class='curline'><a href='../S/196.html#L462'>L</a>                 462 src/scripting/lua_common.cpp 	lua_pushcfunction(L, &amp;impl_vconfig_ipairs_collect);</span>
<span class='curline'><a href='../S/196.html#L463'>L</a>                 463 src/scripting/lua_common.cpp 	lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/196.html#L470'>L</a>                 470 src/scripting/lua_common.cpp void* operator new(size_t sz, lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L472'>L</a>                 472 src/scripting/lua_common.cpp 	return lua_newuserdata(L, sz);</span>
<span class='curline'><a href='../S/196.html#L475'>L</a>                 475 src/scripting/lua_common.cpp void operator delete(void*, lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L480'>L</a>                 480 src/scripting/lua_common.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/196.html#L483'>L</a>                 483 src/scripting/lua_common.cpp bool luaW_getmetafield(lua_State *L, int idx, const char* key)</span>
<span class='curline'><a href='../S/196.html#L495'>L</a>                 495 src/scripting/lua_common.cpp 	return luaL_getmetafield(L, idx, key) != 0;</span>
<span class='curline'><a href='../S/196.html#L498'>L</a>                 498 src/scripting/lua_common.cpp void luaW_pushvconfig(lua_State *L, vconfig const &amp;cfg)</span>
<span class='curline'><a href='../S/196.html#L500'>L</a>                 500 src/scripting/lua_common.cpp 	new(L) vconfig(cfg);</span>
<span class='curline'><a href='../S/196.html#L501'>L</a>                 501 src/scripting/lua_common.cpp 	luaL_setmetatable(L, vconfigKey);</span>
<span class='curline'><a href='../S/196.html#L504'>L</a>                 504 src/scripting/lua_common.cpp void luaW_pushtstring(lua_State *L, t_string const &amp;v)</span>
<span class='curline'><a href='../S/196.html#L506'>L</a>                 506 src/scripting/lua_common.cpp 	new(L) t_string(v);</span>
<span class='curline'><a href='../S/196.html#L507'>L</a>                 507 src/scripting/lua_common.cpp 	luaL_setmetatable(L, tstringKey);</span>
<span class='curline'><a href='../S/196.html#L514'>L</a>                 514 src/scripting/lua_common.cpp 		lua_State *L;</span>
<span class='curline'><a href='../S/196.html#L515'>L</a>                 515 src/scripting/lua_common.cpp 		luaW_pushscalar_visitor(lua_State *l): L(l) {}</span>
<span class='curline'><a href='../S/196.html#L518'>L</a>                 518 src/scripting/lua_common.cpp 		{ lua_pushnil(L); }</span>
<span class='curline'><a href='../S/196.html#L520'>L</a>                 520 src/scripting/lua_common.cpp 		{ lua_pushboolean(L, b); }</span>
<span class='curline'><a href='../S/196.html#L522'>L</a>                 522 src/scripting/lua_common.cpp 		{ lua_pushinteger(L, i); }</span>
<span class='curline'><a href='../S/196.html#L524'>L</a>                 524 src/scripting/lua_common.cpp 		{ lua_pushnumber(L, ull); }</span>
<span class='curline'><a href='../S/196.html#L526'>L</a>                 526 src/scripting/lua_common.cpp 		{ lua_pushnumber(L, d); }</span>
<span class='curline'><a href='../S/196.html#L528'>L</a>                 528 src/scripting/lua_common.cpp 		{ lua_pushstring(L, s.c_str()); }</span>
<span class='curline'><a href='../S/196.html#L530'>L</a>                 530 src/scripting/lua_common.cpp 		{ luaW_pushtstring(L, s); }</span>
<span class='curline'><a href='../S/196.html#L534'>L</a>                 534 src/scripting/lua_common.cpp void luaW_pushscalar(lua_State *L, config::attribute_value const &amp;v)</span>
<span class='curline'><a href='../S/196.html#L536'>L</a>                 536 src/scripting/lua_common.cpp 	v.apply_visitor(luaW_pushscalar_visitor(L));</span>
<span class='curline'><a href='../S/196.html#L539'>L</a>                 539 src/scripting/lua_common.cpp bool luaW_toscalar(lua_State *L, int index, config::attribute_value&amp; v)</span>
<span class='curline'><a href='../S/196.html#L541'>L</a>                 541 src/scripting/lua_common.cpp 	switch (lua_type(L, index)) {</span>
<span class='curline'><a href='../S/196.html#L543'>L</a>                 543 src/scripting/lua_common.cpp 			v = luaW_toboolean(L, -1);</span>
<span class='curline'><a href='../S/196.html#L546'>L</a>                 546 src/scripting/lua_common.cpp 			v = lua_tonumber(L, -1);</span>
<span class='curline'><a href='../S/196.html#L549'>L</a>                 549 src/scripting/lua_common.cpp 			v = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/196.html#L553'>L</a>                 553 src/scripting/lua_common.cpp 			if (t_string * tptr = static_cast&lt;t_string *&gt;(luaL_testudata(L, -1, tstringKey))) {</span>
<span class='curline'><a href='../S/196.html#L566'>L</a>                 566 src/scripting/lua_common.cpp bool luaW_totstring(lua_State *L, int index, t_string &amp;str)</span>
<span class='curline'><a href='../S/196.html#L568'>L</a>                 568 src/scripting/lua_common.cpp 	switch (lua_type(L, index)) {</span>
<span class='curline'><a href='../S/196.html#L570'>L</a>                 570 src/scripting/lua_common.cpp 			str = lua_toboolean(L, index) ? "yes" : "no";</span>
<span class='curline'><a href='../S/196.html#L574'>L</a>                 574 src/scripting/lua_common.cpp 			str = lua_tostring(L, index);</span>
<span class='curline'><a href='../S/196.html#L578'>L</a>                 578 src/scripting/lua_common.cpp 			if (t_string * tstr = static_cast&lt;t_string *&gt; (luaL_testudata(L, index, tstringKey))) {</span>
<span class='curline'><a href='../S/196.html#L591'>L</a>                 591 src/scripting/lua_common.cpp t_string luaW_checktstring(lua_State *L, int index)</span>
<span class='curline'><a href='../S/196.html#L594'>L</a>                 594 src/scripting/lua_common.cpp 	if (!luaW_totstring(L, index, result))</span>
<span class='curline'><a href='../S/196.html#L595'>L</a>                 595 src/scripting/lua_common.cpp 		luaW_type_error(L, index, "translatable string");</span>
<span class='curline'><a href='../S/196.html#L599'>L</a>                 599 src/scripting/lua_common.cpp void luaW_filltable(lua_State *L, config const &amp;cfg)</span>
<span class='curline'><a href='../S/196.html#L601'>L</a>                 601 src/scripting/lua_common.cpp 	if (!lua_checkstack(L, LUA_MINSTACK))</span>
<span class='curline'><a href='../S/196.html#L607'>L</a>                 607 src/scripting/lua_common.cpp 		lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/196.html#L608'>L</a>                 608 src/scripting/lua_common.cpp 		lua_pushstring(L, ch.key.c_str());</span>
<span class='curline'><a href='../S/196.html#L609'>L</a>                 609 src/scripting/lua_common.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/196.html#L610'>L</a>                 610 src/scripting/lua_common.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/196.html#L611'>L</a>                 611 src/scripting/lua_common.cpp 		luaW_filltable(L, ch.cfg);</span>
<span class='curline'><a href='../S/196.html#L612'>L</a>                 612 src/scripting/lua_common.cpp 		lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/196.html#L613'>L</a>                 613 src/scripting/lua_common.cpp 		lua_rawseti(L, -2, k++);</span>
<span class='curline'><a href='../S/196.html#L617'>L</a>                 617 src/scripting/lua_common.cpp 		luaW_pushscalar(L, attr.second);</span>
<span class='curline'><a href='../S/196.html#L618'>L</a>                 618 src/scripting/lua_common.cpp 		lua_setfield(L, -2, attr.first.c_str());</span>
<span class='curline'><a href='../S/196.html#L622'>L</a>                 622 src/scripting/lua_common.cpp void luaW_pushlocation(lua_State *L, const map_location&amp; ml)</span>
<span class='curline'><a href='../S/196.html#L624'>L</a>                 624 src/scripting/lua_common.cpp 	lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/196.html#L626'>L</a>                 626 src/scripting/lua_common.cpp 	lua_pushinteger(L, ml.wml_x());</span>
<span class='curline'><a href='../S/196.html#L627'>L</a>                 627 src/scripting/lua_common.cpp 	lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/196.html#L629'>L</a>                 629 src/scripting/lua_common.cpp 	lua_pushinteger(L, ml.wml_y());</span>
<span class='curline'><a href='../S/196.html#L630'>L</a>                 630 src/scripting/lua_common.cpp 	lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/196.html#L633'>L</a>                 633 src/scripting/lua_common.cpp bool luaW_tolocation(lua_State *L, int index, map_location&amp; loc) {</span>
<span class='curline'><a href='../S/196.html#L634'>L</a>                 634 src/scripting/lua_common.cpp 	if (!lua_checkstack(L, LUA_MINSTACK)) {</span>
<span class='curline'><a href='../S/196.html#L637'>L</a>                 637 src/scripting/lua_common.cpp 	if (lua_isnoneornil(L, index)) {</span>
<span class='curline'><a href='../S/196.html#L644'>L</a>                 644 src/scripting/lua_common.cpp 	index = lua_absindex(L, index);</span>
<span class='curline'><a href='../S/196.html#L646'>L</a>                 646 src/scripting/lua_common.cpp 	if (lua_istable(L, index) || luaW_tounit(L, index) || luaW_tovconfig(L, index, dummy_vcfg)) {</span>
<span class='curline'><a href='../S/196.html#L649'>L</a>                 649 src/scripting/lua_common.cpp 		lua_getfield(L, index, "x");</span>
<span class='curline'><a href='../S/196.html#L650'>L</a>                 650 src/scripting/lua_common.cpp 		result.set_wml_x(lua_tonumberx(L, -1, &amp;x_was_num));</span>
<span class='curline'><a href='../S/196.html#L651'>L</a>                 651 src/scripting/lua_common.cpp 		lua_getfield(L, index, "y");</span>
<span class='curline'><a href='../S/196.html#L652'>L</a>                 652 src/scripting/lua_common.cpp 		result.set_wml_y(lua_tonumberx(L, -1, &amp;y_was_num));</span>
<span class='curline'><a href='../S/196.html#L653'>L</a>                 653 src/scripting/lua_common.cpp 		lua_pop(L, 2);</span>
<span class='curline'><a href='../S/196.html#L657'>L</a>                 657 src/scripting/lua_common.cpp 			if (lua_isuserdata(L, index)) {</span>
<span class='curline'><a href='../S/196.html#L660'>L</a>                 660 src/scripting/lua_common.cpp 			lua_rawgeti(L, index, 1);</span>
<span class='curline'><a href='../S/196.html#L661'>L</a>                 661 src/scripting/lua_common.cpp 			result.set_wml_x(lua_tonumberx(L, -1, &amp;x_was_num));</span>
<span class='curline'><a href='../S/196.html#L662'>L</a>                 662 src/scripting/lua_common.cpp 			lua_rawgeti(L, index, 2);</span>
<span class='curline'><a href='../S/196.html#L663'>L</a>                 663 src/scripting/lua_common.cpp 			result.set_wml_y(lua_tonumberx(L, -1, &amp;y_was_num));</span>
<span class='curline'><a href='../S/196.html#L664'>L</a>                 664 src/scripting/lua_common.cpp 			lua_pop(L, 2);</span>
<span class='curline'><a href='../S/196.html#L670'>L</a>                 670 src/scripting/lua_common.cpp 	} else if (lua_isnumber(L, index) &amp;&amp; lua_isnumber(L, index + 1)) {</span>
<span class='curline'><a href='../S/196.html#L674'>L</a>                 674 src/scripting/lua_common.cpp 		loc.set_wml_x(lua_tonumber(L, index));</span>
<span class='curline'><a href='../S/196.html#L675'>L</a>                 675 src/scripting/lua_common.cpp 		lua_remove(L, index);</span>
<span class='curline'><a href='../S/196.html#L676'>L</a>                 676 src/scripting/lua_common.cpp 		loc.set_wml_y(lua_tonumber(L, index));</span>
<span class='curline'><a href='../S/196.html#L682'>L</a>                 682 src/scripting/lua_common.cpp map_location luaW_checklocation(lua_State *L, int index)</span>
<span class='curline'><a href='../S/196.html#L685'>L</a>                 685 src/scripting/lua_common.cpp 	if (!luaW_tolocation(L, index, result))</span>
<span class='curline'><a href='../S/196.html#L686'>L</a>                 686 src/scripting/lua_common.cpp 		luaW_type_error(L, index, "location");</span>
<span class='curline'><a href='../S/196.html#L690'>L</a>                 690 src/scripting/lua_common.cpp void luaW_pushconfig(lua_State *L, config const &amp;cfg)</span>
<span class='curline'><a href='../S/196.html#L692'>L</a>                 692 src/scripting/lua_common.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/196.html#L693'>L</a>                 693 src/scripting/lua_common.cpp 	luaW_filltable(L, cfg);</span>
<span class='curline'><a href='../S/196.html#L700'>L</a>                 700 src/scripting/lua_common.cpp   do { lua_settop(L, initial_top); return false; } while (0)</span>
<span class='curline'><a href='../S/196.html#L702'>L</a>                 702 src/scripting/lua_common.cpp bool luaW_toconfig(lua_State *L, int index, config &amp;cfg)</span>
<span class='curline'><a href='../S/196.html#L704'>L</a>                 704 src/scripting/lua_common.cpp 	if (!lua_checkstack(L, LUA_MINSTACK))</span>
<span class='curline'><a href='../S/196.html#L708'>L</a>                 708 src/scripting/lua_common.cpp 	index = lua_absindex(L, index);</span>
<span class='curline'><a href='../S/196.html#L709'>L</a>                 709 src/scripting/lua_common.cpp 	int initial_top = lua_gettop(L);</span>
<span class='curline'><a href='../S/196.html#L711'>L</a>                 711 src/scripting/lua_common.cpp 	switch (lua_type(L, index))</span>
<span class='curline'><a href='../S/196.html#L717'>L</a>                 717 src/scripting/lua_common.cpp 			if (vconfig * ptr = static_cast&lt;vconfig *&gt; (luaL_testudata(L, index, vconfigKey))) {</span>
<span class='curline'><a href='../S/196.html#L732'>L</a>                 732 src/scripting/lua_common.cpp 	for (int i = 1, i_end = lua_rawlen(L, index); i &lt;= i_end; ++i)</span>
<span class='curline'><a href='../S/196.html#L734'>L</a>                 734 src/scripting/lua_common.cpp 		lua_rawgeti(L, index, i);</span>
<span class='curline'><a href='../S/196.html#L735'>L</a>                 735 src/scripting/lua_common.cpp 		if (!lua_istable(L, -1)) return_misformed();</span>
<span class='curline'><a href='../S/196.html#L736'>L</a>                 736 src/scripting/lua_common.cpp 		lua_rawgeti(L, -1, 1);</span>
<span class='curline'><a href='../S/196.html#L737'>L</a>                 737 src/scripting/lua_common.cpp 		char const *m = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/196.html#L739'>L</a>                 739 src/scripting/lua_common.cpp 		lua_rawgeti(L, -2, 2);</span>
<span class='curline'><a href='../S/196.html#L740'>L</a>                 740 src/scripting/lua_common.cpp 		if (!luaW_toconfig(L, -1, cfg.add_child(m)))</span>
<span class='curline'><a href='../S/196.html#L742'>L</a>                 742 src/scripting/lua_common.cpp 		lua_pop(L, 3);</span>
<span class='curline'><a href='../S/196.html#L746'>L</a>                 746 src/scripting/lua_common.cpp 	for (lua_pushnil(L); lua_next(L, index); lua_pop(L, 1))</span>
<span class='curline'><a href='../S/196.html#L748'>L</a>                 748 src/scripting/lua_common.cpp 		if (lua_isnumber(L, -2)) continue;</span>
<span class='curline'><a href='../S/196.html#L749'>L</a>                 749 src/scripting/lua_common.cpp 		if (!lua_isstring(L, -2)) return_misformed();</span>
<span class='curline'><a href='../S/196.html#L750'>L</a>                 750 src/scripting/lua_common.cpp 		config::attribute_value &amp;v = cfg[lua_tostring(L, -2)];</span>
<span class='curline'><a href='../S/196.html#L751'>L</a>                 751 src/scripting/lua_common.cpp 		if (lua_istable(L, -1)) {</span>
<span class='curline'><a href='../S/196.html#L752'>L</a>                 752 src/scripting/lua_common.cpp 			int subindex = lua_absindex(L, -1);</span>
<span class='curline'><a href='../S/196.html#L754'>L</a>                 754 src/scripting/lua_common.cpp 			for (int i = 1, i_end = lua_rawlen(L, subindex); i &lt;= i_end; ++i, lua_pop(L, 1)) {</span>
<span class='curline'><a href='../S/196.html#L755'>L</a>                 755 src/scripting/lua_common.cpp 				lua_rawgeti(L, -1, i);</span>
<span class='curline'><a href='../S/196.html#L757'>L</a>                 757 src/scripting/lua_common.cpp 				if (!luaW_toscalar(L, -1, item)) return_misformed();</span>
<span class='curline'><a href='../S/196.html#L762'>L</a>                 762 src/scripting/lua_common.cpp 			for (lua_pushnil(L); lua_next(L, subindex); lua_pop(L, 1)) {</span>
<span class='curline'><a href='../S/196.html#L763'>L</a>                 763 src/scripting/lua_common.cpp 				if (!lua_isnumber(L, -2)) return_misformed();</span>
<span class='curline'><a href='../S/196.html#L766'>L</a>                 766 src/scripting/lua_common.cpp 		} else if (!luaW_toscalar(L, -1, v)) return_misformed();</span>
<span class='curline'><a href='../S/196.html#L769'>L</a>                 769 src/scripting/lua_common.cpp 	lua_settop(L, initial_top);</span>
<span class='curline'><a href='../S/196.html#L776'>L</a>                 776 src/scripting/lua_common.cpp config luaW_checkconfig(lua_State *L, int index)</span>
<span class='curline'><a href='../S/196.html#L779'>L</a>                 779 src/scripting/lua_common.cpp 	if (!luaW_toconfig(L, index, result))</span>
<span class='curline'><a href='../S/196.html#L780'>L</a>                 780 src/scripting/lua_common.cpp 		luaW_type_error(L, index, "WML table");</span>
<span class='curline'><a href='../S/196.html#L784'>L</a>                 784 src/scripting/lua_common.cpp config luaW_checkconfig(lua_State *L, int index, const vconfig*&amp; vcfg)</span>
<span class='curline'><a href='../S/196.html#L786'>L</a>                 786 src/scripting/lua_common.cpp 	config result = luaW_checkconfig(L, index);</span>
<span class='curline'><a href='../S/196.html#L787'>L</a>                 787 src/scripting/lua_common.cpp 	if(void* p = luaL_testudata(L, index, vconfigKey)) {</span>
<span class='curline'><a href='../S/196.html#L793'>L</a>                 793 src/scripting/lua_common.cpp bool luaW_tovconfig(lua_State *L, int index, vconfig &amp;vcfg)</span>
<span class='curline'><a href='../S/196.html#L795'>L</a>                 795 src/scripting/lua_common.cpp 	switch (lua_type(L, index))</span>
<span class='curline'><a href='../S/196.html#L800'>L</a>                 800 src/scripting/lua_common.cpp 			bool ok = luaW_toconfig(L, index, cfg);</span>
<span class='curline'><a href='../S/196.html#L806'>L</a>                 806 src/scripting/lua_common.cpp 			if (vconfig * ptr = static_cast&lt;vconfig *&gt; (luaL_testudata(L, index, vconfigKey))) {</span>
<span class='curline'><a href='../S/196.html#L820'>L</a>                 820 src/scripting/lua_common.cpp vconfig luaW_checkvconfig(lua_State *L, int index, bool allow_missing)</span>
<span class='curline'><a href='../S/196.html#L823'>L</a>                 823 src/scripting/lua_common.cpp 	if (!luaW_tovconfig(L, index, result) || (!allow_missing &amp;&amp; result.null()))</span>
<span class='curline'><a href='../S/196.html#L824'>L</a>                 824 src/scripting/lua_common.cpp 		luaW_type_error(L, index, "WML table");</span>
<span class='curline'><a href='../S/196.html#L828'>L</a>                 828 src/scripting/lua_common.cpp bool luaW_getglobal(lua_State *L, const std::vector&lt;std::string&gt;&amp; path)</span>
<span class='curline'><a href='../S/196.html#L830'>L</a>                 830 src/scripting/lua_common.cpp 	lua_pushglobaltable(L);</span>
<span class='curline'><a href='../S/196.html#L833'>L</a>                 833 src/scripting/lua_common.cpp 		if (!lua_istable(L, -1)) goto discard;</span>
<span class='curline'><a href='../S/196.html#L834'>L</a>                 834 src/scripting/lua_common.cpp 		lua_pushlstring(L, s.c_str(), s.size());</span>
<span class='curline'><a href='../S/196.html#L835'>L</a>                 835 src/scripting/lua_common.cpp 		lua_rawget(L, -2);</span>
<span class='curline'><a href='../S/196.html#L836'>L</a>                 836 src/scripting/lua_common.cpp 		lua_remove(L, -2);</span>
<span class='curline'><a href='../S/196.html#L839'>L</a>                 839 src/scripting/lua_common.cpp 	if (lua_isnil(L, -1)) {</span>
<span class='curline'><a href='../S/196.html#L841'>L</a>                 841 src/scripting/lua_common.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/196.html#L847'>L</a>                 847 src/scripting/lua_common.cpp bool luaW_toboolean(lua_State *L, int n)</span>
<span class='curline'><a href='../S/196.html#L849'>L</a>                 849 src/scripting/lua_common.cpp 	return lua_toboolean(L,n) != 0;</span>
<span class='curline'><a href='../S/196.html#L852'>L</a>                 852 src/scripting/lua_common.cpp bool luaW_pushvariable(lua_State *L, variable_access_const&amp; v)</span>
<span class='curline'><a href='../S/196.html#L858'>L</a>                 858 src/scripting/lua_common.cpp 			luaW_pushscalar(L, v.as_scalar());</span>
<span class='curline'><a href='../S/196.html#L863'>L</a>                 863 src/scripting/lua_common.cpp 			lua_newtable(L);</span>
<span class='curline'><a href='../S/196.html#L864'>L</a>                 864 src/scripting/lua_common.cpp 			luaW_filltable(L, v.as_container());</span>
<span class='curline'><a href='../S/196.html#L869'>L</a>                 869 src/scripting/lua_common.cpp 			lua_pushnil(L);</span>
<span class='curline'><a href='../S/196.html#L880'>L</a>                 880 src/scripting/lua_common.cpp bool luaW_checkvariable(lua_State *L, variable_access_create&amp; v, int n)</span>
<span class='curline'><a href='../S/196.html#L882'>L</a>                 882 src/scripting/lua_common.cpp 	int variabletype = lua_type(L, n);</span>
<span class='curline'><a href='../S/196.html#L887'>L</a>                 887 src/scripting/lua_common.cpp 			v.as_scalar() = luaW_toboolean(L, n);</span>
<span class='curline'><a href='../S/196.html#L890'>L</a>                 890 src/scripting/lua_common.cpp 			v.as_scalar() = lua_tonumber(L, n);</span>
<span class='curline'><a href='../S/196.html#L893'>L</a>                 893 src/scripting/lua_common.cpp 			v.as_scalar() = lua_tostring(L, n);</span>
<span class='curline'><a href='../S/196.html#L896'>L</a>                 896 src/scripting/lua_common.cpp 			if (t_string * t_str = static_cast&lt;t_string*&gt; (luaL_testudata(L, n, tstringKey))) {</span>
<span class='curline'><a href='../S/196.html#L905'>L</a>                 905 src/scripting/lua_common.cpp 				if (luaW_toconfig(L, n, cfg)) {</span>
<span class='curline'><a href='../S/196.html#L912'>L</a>                 912 src/scripting/lua_common.cpp 			return luaW_type_error(L, n, "WML table or scalar") != 0;</span>
<span class='curline'><a href='../S/196.html#L918'>L</a>                 918 src/scripting/lua_common.cpp 		WRN_LUA &lt;&lt; v.get_error_message() &lt;&lt; " when attempting to write a '" &lt;&lt; lua_typename(L, variabletype) &lt;&lt; "'\n";</span>
<span class='curline'><a href='../S/196.html#L930'>L</a>                 930 src/scripting/lua_common.cpp void push_error_handler(lua_State *L)</span>
<span class='curline'><a href='../S/196.html#L932'>L</a>                 932 src/scripting/lua_common.cpp 	luaW_getglobal(L, "debug", "traceback");</span>
<span class='curline'><a href='../S/196.html#L933'>L</a>                 933 src/scripting/lua_common.cpp 	lua_setfield(L, LUA_REGISTRYINDEX, executeKey);</span>
<span class='curline'><a href='../S/196.html#L936'>L</a>                 936 src/scripting/lua_common.cpp int luaW_pcall_internal(lua_State *L, int nArgs, int nRets)</span>
<span class='curline'><a href='../S/196.html#L939'>L</a>                 939 src/scripting/lua_common.cpp 	lua_getfield(L, LUA_REGISTRYINDEX, executeKey);</span>
<span class='curline'><a href='../S/196.html#L940'>L</a>                 940 src/scripting/lua_common.cpp 	lua_insert(L, -2 - nArgs);</span>
<span class='curline'><a href='../S/196.html#L942'>L</a>                 942 src/scripting/lua_common.cpp 	int error_handler_index = lua_gettop(L) - nArgs - 1;</span>
<span class='curline'><a href='../S/196.html#L945'>L</a>                 945 src/scripting/lua_common.cpp 	int errcode = lua_pcall(L, nArgs, nRets, -2 - nArgs);</span>
<span class='curline'><a href='../S/196.html#L950'>L</a>                 950 src/scripting/lua_common.cpp 	lua_remove(L, error_handler_index);</span>
<span class='curline'><a href='../S/196.html#L959'>L</a>                 959 src/scripting/lua_common.cpp bool luaW_pcall(lua_State *L, int nArgs, int nRets, bool allow_wml_error)</span>
<span class='curline'><a href='../S/196.html#L961'>L</a>                 961 src/scripting/lua_common.cpp 	int res = luaW_pcall_internal(L, nArgs, nRets);</span>
<span class='curline'><a href='../S/196.html#L969'>L</a>                 969 src/scripting/lua_common.cpp 		char const *m = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/196.html#L991'>L</a>                 991 src/scripting/lua_common.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/196.html#L1000'>L</a>                1000 src/scripting/lua_common.cpp int luaW_type_error(lua_State *L, int narg, const char *tname) {</span>
<span class='curline'><a href='../S/196.html#L1001'>L</a>                1001 src/scripting/lua_common.cpp 	const char *msg = lua_pushfstring(L, "%s expected, got %s", tname, luaL_typename(L, narg));</span>
<span class='curline'><a href='../S/196.html#L1002'>L</a>                1002 src/scripting/lua_common.cpp 	return luaL_argerror(L, narg, msg);</span>
<span class='curline'><a href='../S/196.html#L1008'>L</a>                1008 src/scripting/lua_common.cpp int luaW_type_error (lua_State *L, int narg, const char* kpath, const char *tname) {</span>
<span class='curline'><a href='../S/196.html#L1009'>L</a>                1009 src/scripting/lua_common.cpp 	const char *msg = lua_pushfstring(L, "%s expected for '%s', got %s", tname, kpath, luaL_typename(L, narg));</span>
<span class='curline'><a href='../S/196.html#L1010'>L</a>                1010 src/scripting/lua_common.cpp 	return luaL_argerror(L, narg, msg);</span>
<span class='curline'><a href='../S/212.html#L33'>L</a>                  33 src/scripting/lua_common.hpp 	int intf_textdomain(lua_State *L);</span>
<span class='curline'><a href='../S/212.html#L34'>L</a>                  34 src/scripting/lua_common.hpp 	int intf_tovconfig(lua_State* L);</span>
<span class='curline'><a href='../S/212.html#L36'>L</a>                  36 src/scripting/lua_common.hpp 	std::string register_gettext_metatable(lua_State *L);</span>
<span class='curline'><a href='../S/212.html#L37'>L</a>                  37 src/scripting/lua_common.hpp 	std::string register_tstring_metatable(lua_State *L);</span>
<span class='curline'><a href='../S/212.html#L38'>L</a>                  38 src/scripting/lua_common.hpp 	std::string register_vconfig_metatable(lua_State *L);</span>
<span class='curline'><a href='../S/212.html#L42'>L</a>                  42 src/scripting/lua_common.hpp void* operator new(size_t sz, lua_State *L);</span>
<span class='curline'><a href='../S/212.html#L43'>L</a>                  43 src/scripting/lua_common.hpp void operator delete(void* p, lua_State *L);</span>
<span class='curline'><a href='../S/212.html#L49'>L</a>                  49 src/scripting/lua_common.hpp bool luaW_getmetafield(lua_State *L, int idx, const char* key);</span>
<span class='curline'><a href='../S/212.html#L54'>L</a>                  54 src/scripting/lua_common.hpp void luaW_pushvconfig(lua_State *L, vconfig const &amp;cfg);</span>
<span class='curline'><a href='../S/212.html#L59'>L</a>                  59 src/scripting/lua_common.hpp void luaW_pushtstring(lua_State *L, t_string const &amp;v);</span>
<span class='curline'><a href='../S/212.html#L64'>L</a>                  64 src/scripting/lua_common.hpp void luaW_pushscalar(lua_State *L, config::attribute_value const &amp;v);</span>
<span class='curline'><a href='../S/212.html#L69'>L</a>                  69 src/scripting/lua_common.hpp bool luaW_toscalar(lua_State *L, int index, config::attribute_value&amp; v);</span>
<span class='curline'><a href='../S/212.html#L74'>L</a>                  74 src/scripting/lua_common.hpp bool luaW_totstring(lua_State *L, int index, t_string &amp;str);</span>
<span class='curline'><a href='../S/212.html#L79'>L</a>                  79 src/scripting/lua_common.hpp t_string luaW_checktstring(lua_State *L, int index);</span>
<span class='curline'><a href='../S/212.html#L86'>L</a>                  86 src/scripting/lua_common.hpp void luaW_filltable(lua_State *L, config const &amp;cfg);</span>
<span class='curline'><a href='../S/212.html#L91'>L</a>                  91 src/scripting/lua_common.hpp void luaW_pushlocation(lua_State *L, map_location const &amp;loc);</span>
<span class='curline'><a href='../S/212.html#L98'>L</a>                  98 src/scripting/lua_common.hpp bool luaW_tolocation(lua_State *L, int index, map_location &amp;loc);</span>
<span class='curline'><a href='../S/212.html#L105'>L</a>                 105 src/scripting/lua_common.hpp map_location luaW_checklocation(lua_State *L, int index);</span>
<span class='curline'><a href='../S/212.html#L110'>L</a>                 110 src/scripting/lua_common.hpp void luaW_pushconfig(lua_State *L, config const &amp;cfg);</span>
<span class='curline'><a href='../S/212.html#L119'>L</a>                 119 src/scripting/lua_common.hpp bool luaW_toconfig(lua_State *L, int index, config &amp;cfg);</span>
<span class='curline'><a href='../S/212.html#L124'>L</a>                 124 src/scripting/lua_common.hpp config luaW_checkconfig(lua_State *L, int index);</span>
<span class='curline'><a href='../S/212.html#L130'>L</a>                 130 src/scripting/lua_common.hpp bool luaW_tovconfig(lua_State *L, int index, vconfig &amp;vcfg);</span>
<span class='curline'><a href='../S/212.html#L137'>L</a>                 137 src/scripting/lua_common.hpp vconfig luaW_checkvconfig(lua_State *L, int index, bool allow_missing = false);</span>
<span class='curline'><a href='../S/212.html#L143'>L</a>                 143 src/scripting/lua_common.hpp config luaW_checkconfig(lua_State *L, int index, const vconfig*&amp; vcfg);</span>
<span class='curline'><a href='../S/212.html#L150'>L</a>                 150 src/scripting/lua_common.hpp bool luaW_getglobal(lua_State *L, const std::vector&lt;std::string&gt;&amp; path);</span>
<span class='curline'><a href='../S/212.html#L158'>L</a>                 158 src/scripting/lua_common.hpp bool luaW_getglobal(lua_State *L, T... path) {</span>
<span class='curline'><a href='../S/212.html#L159'>L</a>                 159 src/scripting/lua_common.hpp 	return luaW_getglobal(L, std::vector&lt;std::string&gt; {path...} );</span>
<span class='curline'><a href='../S/212.html#L162'>L</a>                 162 src/scripting/lua_common.hpp bool luaW_toboolean(lua_State *L, int n);</span>
<span class='curline'><a href='../S/212.html#L165'>L</a>                 165 src/scripting/lua_common.hpp bool luaW_pushvariable(lua_State *L, variable_access_const&amp; v);</span>
<span class='curline'><a href='../S/212.html#L167'>L</a>                 167 src/scripting/lua_common.hpp bool luaW_checkvariable(lua_State *L, variable_access_create&amp; v, int n);</span>
<span class='curline'><a href='../S/212.html#L179'>L</a>                 179 src/scripting/lua_common.hpp bool luaW_pcall(lua_State *L, int nArgs, int nRets, bool allow_wml_error = false);</span>
<span class='curline'><a href='../S/212.html#L182'>L</a>                 182 src/scripting/lua_common.hpp void push_error_handler(lua_State *L);</span>
<span class='curline'><a href='../S/212.html#L183'>L</a>                 183 src/scripting/lua_common.hpp int luaW_pcall_internal(lua_State *L, int nArgs, int nRets);</span>
<span class='curline'><a href='../S/212.html#L185'>L</a>                 185 src/scripting/lua_common.hpp int luaW_type_error(lua_State *L, int narg, const char *tname);</span>
<span class='curline'><a href='../S/212.html#L186'>L</a>                 186 src/scripting/lua_common.hpp int luaW_type_error(lua_State *L, int narg, const char* kpath, const char *tname);</span>
<span class='curline'><a href='../S/212.html#L191'>L</a>                 191 src/scripting/lua_common.hpp 		luaW_pushtstring(L, (accessor)); \</span>
<span class='curline'><a href='../S/212.html#L199'>L</a>                 199 src/scripting/lua_common.hpp 		lua_pushstring(L, (accessor)); \</span>
<span class='curline'><a href='../S/212.html#L208'>L</a>                 208 src/scripting/lua_common.hpp 		lua_pushlstring(L, str.c_str(), str.length()); \</span>
<span class='curline'><a href='../S/212.html#L216'>L</a>                 216 src/scripting/lua_common.hpp 		lua_pushinteger(L, (accessor)); \</span>
<span class='curline'><a href='../S/212.html#L224'>L</a>                 224 src/scripting/lua_common.hpp 		lua_pushnumber(L, (accessor)); \</span>
<span class='curline'><a href='../S/212.html#L232'>L</a>                 232 src/scripting/lua_common.hpp 		lua_pushboolean(L, (accessor)); \</span>
<span class='curline'><a href='../S/212.html#L242'>L</a>                 242 src/scripting/lua_common.hpp 		luaW_pushconfig(L, cfg); \</span>
<span class='curline'><a href='../S/212.html#L250'>L</a>                 250 src/scripting/lua_common.hpp 		luaW_pushconfig(L, (accessor)); \</span>
<span class='curline'><a href='../S/212.html#L259'>L</a>                 259 src/scripting/lua_common.hpp 		lua_createtable(L, vector.size(), 0); \</span>
<span class='curline'><a href='../S/212.html#L262'>L</a>                 262 src/scripting/lua_common.hpp 			lua_pushlstring(L, s.c_str(), s.length()); \</span>
<span class='curline'><a href='../S/212.html#L263'>L</a>                 263 src/scripting/lua_common.hpp 			lua_rawseti(L, -2, i); \</span>
<span class='curline'><a href='../S/212.html#L273'>L</a>                 273 src/scripting/lua_common.hpp 		t_string value = luaW_checktstring(L, 3); \</span>
<span class='curline'><a href='../S/212.html#L282'>L</a>                 282 src/scripting/lua_common.hpp 		const char *value = luaL_checkstring(L, 3); \</span>
<span class='curline'><a href='../S/212.html#L291'>L</a>                 291 src/scripting/lua_common.hpp 		int value = static_cast&lt;int&gt;(luaL_checknumber(L, 3)); \</span>
<span class='curline'><a href='../S/212.html#L300'>L</a>                 300 src/scripting/lua_common.hpp 		int value = static_cast&lt;int&gt;(luaL_checknumber(L, 3)); \</span>
<span class='curline'><a href='../S/212.html#L301'>L</a>                 301 src/scripting/lua_common.hpp 		if (value &lt; (allowed_min) || (allowed_max) &lt; value) return luaL_argerror(L, 3, "out of bounds"); \</span>
<span class='curline'><a href='../S/212.html#L310'>L</a>                 310 src/scripting/lua_common.hpp 		lua_Number value = luaL_checknumber(L, 3); \</span>
<span class='curline'><a href='../S/212.html#L319'>L</a>                 319 src/scripting/lua_common.hpp 		lua_Number value = luaL_checknumber(L, 3); \</span>
<span class='curline'><a href='../S/212.html#L320'>L</a>                 320 src/scripting/lua_common.hpp 		if (value &lt; (allowed_min) || (allowed_max) &lt; value) return luaL_argerror(L, 3, "out of bounds"); \</span>
<span class='curline'><a href='../S/212.html#L329'>L</a>                 329 src/scripting/lua_common.hpp 		bool value = luaW_toboolean(L, 3); \</span>
<span class='curline'><a href='../S/212.html#L340'>L</a>                 340 src/scripting/lua_common.hpp 		if (!lua_istable(L, 3)) return luaL_argerror(L, 3, message); \</span>
<span class='curline'><a href='../S/212.html#L341'>L</a>                 341 src/scripting/lua_common.hpp 		unsigned length = lua_rawlen(L, 3); \</span>
<span class='curline'><a href='../S/212.html#L343'>L</a>                 343 src/scripting/lua_common.hpp 			lua_rawgeti(L, 3, i); \</span>
<span class='curline'><a href='../S/212.html#L344'>L</a>                 344 src/scripting/lua_common.hpp 			char const* string = lua_tostring(L, 4); \</span>
<span class='curline'><a href='../S/212.html#L345'>L</a>                 345 src/scripting/lua_common.hpp 			if(!string) return luaL_argerror(L, 2 + i, message); \</span>
<span class='curline'><a href='../S/212.html#L347'>L</a>                 347 src/scripting/lua_common.hpp 			lua_pop(L, 1); \</span>
<span class='curline'><a href='../S/202.html#L36'>L</a>                  36 src/scripting/lua_cpp_function.cpp static int intf_dispatcher ( lua_State* L )</span>
<span class='curline'><a href='../S/202.html#L39'>L</a>                  39 src/scripting/lua_cpp_function.cpp 	lua_function f = * static_cast&lt;lua_function *&gt; (luaL_checkudata(L, 1, cpp_function));</span>
<span class='curline'><a href='../S/202.html#L41'>L</a>                  41 src/scripting/lua_cpp_function.cpp 	lua_remove(L,1);</span>
<span class='curline'><a href='../S/202.html#L42'>L</a>                  42 src/scripting/lua_cpp_function.cpp 	int result = (f)(L);</span>
<span class='curline'><a href='../S/202.html#L46'>L</a>                  46 src/scripting/lua_cpp_function.cpp static int intf_cleanup ( lua_State* L )</span>
<span class='curline'><a href='../S/202.html#L48'>L</a>                  48 src/scripting/lua_cpp_function.cpp 	lua_function * d = static_cast&lt; lua_function *&gt; (luaL_testudata(L, 1, cpp_function));</span>
<span class='curline'><a href='../S/202.html#L50'>L</a>                  50 src/scripting/lua_cpp_function.cpp 		ERR_LUA &lt;&lt; "lua_cpp::intf_cleanup called on data of type: " &lt;&lt; lua_typename( L, lua_type( L, 1 ) ) &lt;&lt; std::endl;</span>
<span class='curline'><a href='../S/202.html#L52'>L</a>                  52 src/scripting/lua_cpp_function.cpp 		lua_pushstring(L, "C++ function object garbage collection failure");</span>
<span class='curline'><a href='../S/202.html#L53'>L</a>                  53 src/scripting/lua_cpp_function.cpp 		lua_error(L);</span>
<span class='curline'><a href='../S/202.html#L60'>L</a>                  60 src/scripting/lua_cpp_function.cpp static int intf_tostring( lua_State* L )</span>
<span class='curline'><a href='../S/202.html#L62'>L</a>                  62 src/scripting/lua_cpp_function.cpp 	lua_function * d = static_cast&lt; lua_function *&gt; (luaL_checkudata(L, 1, cpp_function));</span>
<span class='curline'><a href='../S/202.html#L66'>L</a>                  66 src/scripting/lua_cpp_function.cpp 	lua_pushstring(L, result.str().c_str());</span>
<span class='curline'><a href='../S/202.html#L70'>L</a>                  70 src/scripting/lua_cpp_function.cpp void register_metatable ( lua_State* L )</span>
<span class='curline'><a href='../S/202.html#L72'>L</a>                  72 src/scripting/lua_cpp_function.cpp 	luaL_newmetatable(L, cpp_function);</span>
<span class='curline'><a href='../S/202.html#L73'>L</a>                  73 src/scripting/lua_cpp_function.cpp 	lua_pushcfunction(L, intf_dispatcher);</span>
<span class='curline'><a href='../S/202.html#L74'>L</a>                  74 src/scripting/lua_cpp_function.cpp 	lua_setfield(L, -2, "__call");</span>
<span class='curline'><a href='../S/202.html#L75'>L</a>                  75 src/scripting/lua_cpp_function.cpp 	lua_pushcfunction(L, intf_cleanup);</span>
<span class='curline'><a href='../S/202.html#L76'>L</a>                  76 src/scripting/lua_cpp_function.cpp 	lua_setfield(L, -2, "__gc");</span>
<span class='curline'><a href='../S/202.html#L77'>L</a>                  77 src/scripting/lua_cpp_function.cpp 	lua_pushcfunction(L, intf_tostring);</span>
<span class='curline'><a href='../S/202.html#L78'>L</a>                  78 src/scripting/lua_cpp_function.cpp 	lua_setfield(L, -2, "__tostring");</span>
<span class='curline'><a href='../S/202.html#L79'>L</a>                  79 src/scripting/lua_cpp_function.cpp 	lua_pushvalue(L, -1); //make a copy of this table, set it to be its own __index table</span>
<span class='curline'><a href='../S/202.html#L80'>L</a>                  80 src/scripting/lua_cpp_function.cpp 	lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/202.html#L82'>L</a>                  82 src/scripting/lua_cpp_function.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/202.html#L85'>L</a>                  85 src/scripting/lua_cpp_function.cpp void push_function( lua_State* L, const lua_function &amp; f )</span>
<span class='curline'><a href='../S/202.html#L87'>L</a>                  87 src/scripting/lua_cpp_function.cpp 	new(L) lua_function(f);</span>
<span class='curline'><a href='../S/202.html#L88'>L</a>                  88 src/scripting/lua_cpp_function.cpp 	luaL_setmetatable(L, cpp_function);</span>
<span class='curline'><a href='../S/202.html#L91'>L</a>                  91 src/scripting/lua_cpp_function.cpp void set_functions( lua_State* L, const std::vector&lt;lua_cpp::Reg&gt;&amp; functions)</span>
<span class='curline'><a href='../S/202.html#L93'>L</a>                  93 src/scripting/lua_cpp_function.cpp 	luaL_checkversion(L);</span>
<span class='curline'><a href='../S/202.html#L96'>L</a>                  96 src/scripting/lua_cpp_function.cpp 			push_function(L, l.func);</span>
<span class='curline'><a href='../S/202.html#L97'>L</a>                  97 src/scripting/lua_cpp_function.cpp 			lua_setfield(L, -2, l.name);</span>
<span class='curline'><a href='../S/202.html#L102'>L</a>                 102 src/scripting/lua_cpp_function.cpp static int intf_closure_dispatcher( lua_State* L )</span>
<span class='curline'><a href='../S/202.html#L104'>L</a>                 104 src/scripting/lua_cpp_function.cpp 	lua_function * f = static_cast&lt; lua_function *&gt; (luaL_checkudata(L, lua_upvalueindex(1), cpp_function)); //assume the std::function is the first upvalue</span>
<span class='curline'><a href='../S/202.html#L105'>L</a>                 105 src/scripting/lua_cpp_function.cpp 	return (*f)(L);</span>
<span class='curline'><a href='../S/202.html#L108'>L</a>                 108 src/scripting/lua_cpp_function.cpp void push_closure( lua_State* L, const lua_function &amp; f, int nup)</span>
<span class='curline'><a href='../S/202.html#L110'>L</a>                 110 src/scripting/lua_cpp_function.cpp 	push_function(L, f);</span>
<span class='curline'><a href='../S/202.html#L111'>L</a>                 111 src/scripting/lua_cpp_function.cpp 	lua_insert(L, -(1+nup)); //move the function beneath the upvalues</span>
<span class='curline'><a href='../S/202.html#L112'>L</a>                 112 src/scripting/lua_cpp_function.cpp 	lua_pushcclosure(L, &amp;intf_closure_dispatcher, 1+nup);</span>
<span class='curline'><a href='../S/202.html#L115'>L</a>                 115 src/scripting/lua_cpp_function.cpp void set_functions( lua_State* L, const std::vector&lt;lua_cpp::Reg&gt;&amp; functions, int nup )</span>
<span class='curline'><a href='../S/202.html#L117'>L</a>                 117 src/scripting/lua_cpp_function.cpp 	luaL_checkversion(L);</span>
<span class='curline'><a href='../S/202.html#L118'>L</a>                 118 src/scripting/lua_cpp_function.cpp 	luaL_checkstack(L, nup+1, "too many upvalues");</span>
<span class='curline'><a href='../S/202.html#L125'>L</a>                 125 src/scripting/lua_cpp_function.cpp 			lua_pushvalue(L, -nup);</span>
<span class='curline'><a href='../S/202.html#L126'>L</a>                 126 src/scripting/lua_cpp_function.cpp 		push_closure(L, l.func, nup);  /* closure with those upvalues */</span>
<span class='curline'><a href='../S/202.html#L127'>L</a>                 127 src/scripting/lua_cpp_function.cpp 		lua_setfield(L, -(nup + 2), l.name);</span>
<span class='curline'><a href='../S/202.html#L129'>L</a>                 129 src/scripting/lua_cpp_function.cpp 	lua_pop(L, nup);  /* remove upvalues */</span>
<span class='curline'><a href='../S/208.html#L142'>L</a>                 142 src/scripting/lua_cpp_function.hpp void register_metatable ( lua_State* L );</span>
<span class='curline'><a href='../S/208.html#L151'>L</a>                 151 src/scripting/lua_cpp_function.hpp void push_function( lua_State* L, const lua_function &amp; f );</span>
<span class='curline'><a href='../S/208.html#L159'>L</a>                 159 src/scripting/lua_cpp_function.hpp void set_functions( lua_State* L, const std::vector&lt;lua_cpp::Reg&gt;&amp; functions);</span>
<span class='curline'><a href='../S/208.html#L168'>L</a>                 168 src/scripting/lua_cpp_function.hpp void set_functions( lua_State* L, const lua_cpp::Reg(&amp; functions)[N])</span>
<span class='curline'><a href='../S/208.html#L175'>L</a>                 175 src/scripting/lua_cpp_function.hpp 	set_functions(L, l);</span>
<span class='curline'><a href='../S/208.html#L186'>L</a>                 186 src/scripting/lua_cpp_function.hpp void push_closure( lua_State* L, const lua_function &amp; f, int nup);</span>
<span class='curline'><a href='../S/208.html#L194'>L</a>                 194 src/scripting/lua_cpp_function.hpp void set_functions( lua_State* L, const std::vector&lt;lua_cpp::Reg&gt;&amp; functions, int nup);</span>
<span class='curline'><a href='../S/208.html#L203'>L</a>                 203 src/scripting/lua_cpp_function.hpp void set_functions( lua_State* L, const lua_cpp::Reg(&amp; functions)[N], int nup)</span>
<span class='curline'><a href='../S/208.html#L210'>L</a>                 210 src/scripting/lua_cpp_function.hpp 	set_functions(L, l, nup);</span>
<span class='curline'><a href='../S/205.html#L41'>L</a>                  41 src/scripting/lua_fileops.cpp static std::string get_calling_file(lua_State* L)</span>
<span class='curline'><a href='../S/205.html#L45'>L</a>                  45 src/scripting/lua_fileops.cpp 	if(lua_getstack(L, 1, &amp;ar)) {</span>
<span class='curline'><a href='../S/205.html#L46'>L</a>                  46 src/scripting/lua_fileops.cpp 		lua_getinfo(L, "S", &amp;ar);</span>
<span class='curline'><a href='../S/205.html#L50'>L</a>                  50 src/scripting/lua_fileops.cpp 				if(!lua_getstack(L, stack_pos, &amp;ar)) {</span>
<span class='curline'><a href='../S/205.html#L53'>L</a>                  53 src/scripting/lua_fileops.cpp 				lua_getinfo(L, "S", &amp;ar);</span>
<span class='curline'><a href='../S/205.html#L124'>L</a>                 124 src/scripting/lua_fileops.cpp int intf_have_file(lua_State *L)</span>
<span class='curline'><a href='../S/205.html#L126'>L</a>                 126 src/scripting/lua_fileops.cpp 	std::string m = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/205.html#L127'>L</a>                 127 src/scripting/lua_fileops.cpp 	if(!resolve_filename(m, get_calling_file(L))) {</span>
<span class='curline'><a href='../S/205.html#L128'>L</a>                 128 src/scripting/lua_fileops.cpp 		lua_pushboolean(L, false);</span>
<span class='curline'><a href='../S/205.html#L129'>L</a>                 129 src/scripting/lua_fileops.cpp 	} else if(luaW_toboolean(L, 2)) {</span>
<span class='curline'><a href='../S/205.html#L130'>L</a>                 130 src/scripting/lua_fileops.cpp 		lua_pushboolean(L, !filesystem::is_directory(m));</span>
<span class='curline'><a href='../S/205.html#L132'>L</a>                 132 src/scripting/lua_fileops.cpp 		lua_pushboolean(L, true);</span>
<span class='curline'><a href='../S/205.html#L142'>L</a>                 142 src/scripting/lua_fileops.cpp int intf_read_file(lua_State *L)</span>
<span class='curline'><a href='../S/205.html#L144'>L</a>                 144 src/scripting/lua_fileops.cpp 	std::string p = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/205.html#L146'>L</a>                 146 src/scripting/lua_fileops.cpp 	if(!resolve_filename(p, get_calling_file(L))) {</span>
<span class='curline'><a href='../S/205.html#L147'>L</a>                 147 src/scripting/lua_fileops.cpp 		return luaL_argerror(L, -1, "file not found");</span>
<span class='curline'><a href='../S/205.html#L155'>L</a>                 155 src/scripting/lua_fileops.cpp 		lua_push(L, dirs);</span>
<span class='curline'><a href='../S/205.html#L156'>L</a>                 156 src/scripting/lua_fileops.cpp 		lua_pushnumber(L, ndirs);</span>
<span class='curline'><a href='../S/205.html#L157'>L</a>                 157 src/scripting/lua_fileops.cpp 		lua_setfield(L, -2, "ndirs");</span>
<span class='curline'><a href='../S/205.html#L165'>L</a>                 165 src/scripting/lua_fileops.cpp 		return luaL_error(L, "Error when reading file");</span>
<span class='curline'><a href='../S/205.html#L170'>L</a>                 170 src/scripting/lua_fileops.cpp 		return luaL_error(L, "Error when reading file");</span>
<span class='curline'><a href='../S/205.html#L173'>L</a>                 173 src/scripting/lua_fileops.cpp 	luaL_buffinit(L, &amp;b);</span>
<span class='curline'><a href='../S/205.html#L213'>L</a>                 213 src/scripting/lua_fileops.cpp 	static int lua_loadfile(lua_State *L, const std::string&amp; fname, const std::string&amp; relativename)</span>
<span class='curline'><a href='../S/205.html#L219'>L</a>                 219 src/scripting/lua_fileops.cpp 		return  lua_load(L, &amp;lua_filestream::lua_read_data, &amp;lfs, chunkname.c_str(), nullptr);</span>
<span class='curline'><a href='../S/205.html#L231'>L</a>                 231 src/scripting/lua_fileops.cpp int load_file(lua_State *L)</span>
<span class='curline'><a href='../S/205.html#L233'>L</a>                 233 src/scripting/lua_fileops.cpp 	std::string p = luaL_checkstring(L, -1);</span>
<span class='curline'><a href='../S/205.html#L236'>L</a>                 236 src/scripting/lua_fileops.cpp 	if(!resolve_filename(p, get_calling_file(L), &amp;rel)) {</span>
<span class='curline'><a href='../S/205.html#L237'>L</a>                 237 src/scripting/lua_fileops.cpp 		return luaL_argerror(L, -1, "file not found");</span>
<span class='curline'><a href='../S/205.html#L242'>L</a>                 242 src/scripting/lua_fileops.cpp 		if(lua_filestream::lua_loadfile(L, p, rel)) {</span>
<span class='curline'><a href='../S/205.html#L243'>L</a>                 243 src/scripting/lua_fileops.cpp 			return lua_error(L);</span>
<span class='curline'><a href='../S/205.html#L248'>L</a>                 248 src/scripting/lua_fileops.cpp 		luaL_argerror(L, -1, ex.what());</span>
<span class='curline'><a href='../S/205.html#L250'>L</a>                 250 src/scripting/lua_fileops.cpp 	lua_remove(L, -2);	//remove the filename from the stack</span>
<span class='curline'><a href='../S/192.html#L35'>L</a>                  35 src/scripting/lua_formula_bridge.cpp void luaW_pushfaivariant(lua_State* L, variant val);</span>
<span class='curline'><a href='../S/192.html#L36'>L</a>                  36 src/scripting/lua_formula_bridge.cpp variant luaW_tofaivariant(lua_State* L, int i);</span>
<span class='curline'><a href='../S/192.html#L42'>L</a>                  42 src/scripting/lua_formula_bridge.cpp 	lua_callable(lua_State* L, int i) : mState(L), table_i(lua_absindex(L,i)) {}</span>
<span class='curline'><a href='../S/192.html#L118'>L</a>                 118 src/scripting/lua_formula_bridge.cpp void luaW_pushfaivariant(lua_State* L, variant val) {</span>
<span class='curline'><a href='../S/192.html#L120'>L</a>                 120 src/scripting/lua_formula_bridge.cpp 		lua_pushinteger(L, val.as_int());</span>
<span class='curline'><a href='../S/192.html#L122'>L</a>                 122 src/scripting/lua_formula_bridge.cpp 		lua_pushnumber(L, val.as_decimal() / 1000.0);</span>
<span class='curline'><a href='../S/192.html#L125'>L</a>                 125 src/scripting/lua_formula_bridge.cpp 		lua_pushlstring(L, result_string.c_str(), result_string.size());</span>
<span class='curline'><a href='../S/192.html#L127'>L</a>                 127 src/scripting/lua_formula_bridge.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/192.html#L129'>L</a>                 129 src/scripting/lua_formula_bridge.cpp 			lua_pushinteger(L, lua_rawlen(L, -1) + 1);</span>
<span class='curline'><a href='../S/192.html#L130'>L</a>                 130 src/scripting/lua_formula_bridge.cpp 			luaW_pushfaivariant(L, v);</span>
<span class='curline'><a href='../S/192.html#L131'>L</a>                 131 src/scripting/lua_formula_bridge.cpp 			lua_settable(L, -3);</span>
<span class='curline'><a href='../S/192.html#L135'>L</a>                 135 src/scripting/lua_formula_bridge.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/192.html#L137'>L</a>                 137 src/scripting/lua_formula_bridge.cpp 			luaW_pushfaivariant(L, v.first);</span>
<span class='curline'><a href='../S/192.html#L138'>L</a>                 138 src/scripting/lua_formula_bridge.cpp 			luaW_pushfaivariant(L, v.second);</span>
<span class='curline'><a href='../S/192.html#L139'>L</a>                 139 src/scripting/lua_formula_bridge.cpp 			lua_settable(L, -3);</span>
<span class='curline'><a href='../S/192.html#L147'>L</a>                 147 src/scripting/lua_formula_bridge.cpp 				luaW_pushunit(L, u.underlying_id());</span>
<span class='curline'><a href='../S/192.html#L149'>L</a>                 149 src/scripting/lua_formula_bridge.cpp 				luaW_pushunit(L, u.side(), u.underlying_id());</span>
<span class='curline'><a href='../S/192.html#L152'>L</a>                 152 src/scripting/lua_formula_bridge.cpp 			luaW_pushlocation(L, loc_ref-&gt;loc());</span>
<span class='curline'><a href='../S/192.html#L158'>L</a>                 158 src/scripting/lua_formula_bridge.cpp 			lua_newtable(L);</span>
<span class='curline'><a href='../S/192.html#L163'>L</a>                 163 src/scripting/lua_formula_bridge.cpp 				lua_pushstring(L, attr.name.c_str());</span>
<span class='curline'><a href='../S/192.html#L164'>L</a>                 164 src/scripting/lua_formula_bridge.cpp 				luaW_pushfaivariant(L, obj-&gt;query_value(attr.name));</span>
<span class='curline'><a href='../S/192.html#L165'>L</a>                 165 src/scripting/lua_formula_bridge.cpp 				lua_settable(L, -3);</span>
<span class='curline'><a href='../S/192.html#L169'>L</a>                 169 src/scripting/lua_formula_bridge.cpp 		lua_pushnil(L);</span>
<span class='curline'><a href='../S/192.html#L173'>L</a>                 173 src/scripting/lua_formula_bridge.cpp variant luaW_tofaivariant(lua_State* L, int i) {</span>
<span class='curline'><a href='../S/192.html#L174'>L</a>                 174 src/scripting/lua_formula_bridge.cpp 	switch(lua_type(L, i)) {</span>
<span class='curline'><a href='../S/192.html#L176'>L</a>                 176 src/scripting/lua_formula_bridge.cpp 			return variant(lua_tointeger(L, i));</span>
<span class='curline'><a href='../S/192.html#L178'>L</a>                 178 src/scripting/lua_formula_bridge.cpp 			return variant(lua_tonumber(L, i), variant::DECIMAL_VARIANT);</span>
<span class='curline'><a href='../S/192.html#L180'>L</a>                 180 src/scripting/lua_formula_bridge.cpp 			return variant(lua_tostring(L, i));</span>
<span class='curline'><a href='../S/192.html#L182'>L</a>                 182 src/scripting/lua_formula_bridge.cpp 			return variant(std::make_shared&lt;lua_callable&gt;(L, i));</span>
<span class='curline'><a href='../S/192.html#L187'>L</a>                 187 src/scripting/lua_formula_bridge.cpp 			if(luaW_totstring(L, i, tstr)) {</span>
<span class='curline'><a href='../S/192.html#L189'>L</a>                 189 src/scripting/lua_formula_bridge.cpp 			} else if(luaW_tovconfig(L, i, vcfg)) {</span>
<span class='curline'><a href='../S/192.html#L191'>L</a>                 191 src/scripting/lua_formula_bridge.cpp 			} else if(unit* u = luaW_tounit(L, i)) {</span>
<span class='curline'><a href='../S/192.html#L193'>L</a>                 193 src/scripting/lua_formula_bridge.cpp 			} else if(luaW_tolocation(L, i, loc)) {</span>
<span class='curline'><a href='../S/192.html#L207'>L</a>                 207 src/scripting/lua_formula_bridge.cpp int lua_formula_bridge::intf_eval_formula(lua_State *L)</span>
<span class='curline'><a href='../S/192.html#L211'>L</a>                 211 src/scripting/lua_formula_bridge.cpp 	if(void* ud = luaL_testudata(L, 1, formulaKey)) {</span>
<span class='curline'><a href='../S/192.html#L215'>L</a>                 215 src/scripting/lua_formula_bridge.cpp 		form = new fwrapper(luaL_checkstring(L, 1));</span>
<span class='curline'><a href='../S/192.html#L218'>L</a>                 218 src/scripting/lua_formula_bridge.cpp 	if(unit* u = luaW_tounit(L, 2)) {</span>
<span class='curline'><a href='../S/192.html#L220'>L</a>                 220 src/scripting/lua_formula_bridge.cpp 	} else if(lua_istable(L, 2)) {</span>
<span class='curline'><a href='../S/192.html#L221'>L</a>                 221 src/scripting/lua_formula_bridge.cpp 		context.reset(new lua_callable(L, 2));</span>
<span class='curline'><a href='../S/192.html#L226'>L</a>                 226 src/scripting/lua_formula_bridge.cpp 	luaW_pushfaivariant(L, result);</span>
<span class='curline'><a href='../S/192.html#L233'>L</a>                 233 src/scripting/lua_formula_bridge.cpp int lua_formula_bridge::intf_compile_formula(lua_State* L)</span>
<span class='curline'><a href='../S/192.html#L235'>L</a>                 235 src/scripting/lua_formula_bridge.cpp 	if(!lua_isstring(L, 1)) {</span>
<span class='curline'><a href='../S/192.html#L236'>L</a>                 236 src/scripting/lua_formula_bridge.cpp 		luaW_type_error(L, 1, "string");</span>
<span class='curline'><a href='../S/192.html#L238'>L</a>                 238 src/scripting/lua_formula_bridge.cpp 	new(L) fwrapper(lua_tostring(L, 1));</span>
<span class='curline'><a href='../S/192.html#L239'>L</a>                 239 src/scripting/lua_formula_bridge.cpp 	luaL_setmetatable(L, formulaKey);</span>
<span class='curline'><a href='../S/192.html#L264'>L</a>                 264 src/scripting/lua_formula_bridge.cpp static int impl_formula_collect(lua_State* L)</span>
<span class='curline'><a href='../S/192.html#L266'>L</a>                 266 src/scripting/lua_formula_bridge.cpp 	lua_formula_bridge::fwrapper* form = static_cast&lt;lua_formula_bridge::fwrapper*&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/192.html#L271'>L</a>                 271 src/scripting/lua_formula_bridge.cpp static int impl_formula_tostring(lua_State* L)</span>
<span class='curline'><a href='../S/192.html#L273'>L</a>                 273 src/scripting/lua_formula_bridge.cpp 	lua_formula_bridge::fwrapper* form = static_cast&lt;lua_formula_bridge::fwrapper*&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/192.html#L275'>L</a>                 275 src/scripting/lua_formula_bridge.cpp 	lua_pushlstring(L, str.c_str(), str.size());</span>
<span class='curline'><a href='../S/192.html#L279'>L</a>                 279 src/scripting/lua_formula_bridge.cpp std::string lua_formula_bridge::register_metatables(lua_State* L)</span>
<span class='curline'><a href='../S/192.html#L281'>L</a>                 281 src/scripting/lua_formula_bridge.cpp 	luaL_newmetatable(L, formulaKey);</span>
<span class='curline'><a href='../S/192.html#L282'>L</a>                 282 src/scripting/lua_formula_bridge.cpp 	lua_pushcfunction(L, impl_formula_collect);</span>
<span class='curline'><a href='../S/192.html#L283'>L</a>                 283 src/scripting/lua_formula_bridge.cpp 	lua_setfield(L, -2, "__gc");</span>
<span class='curline'><a href='../S/192.html#L284'>L</a>                 284 src/scripting/lua_formula_bridge.cpp 	lua_pushcfunction(L, impl_formula_tostring);</span>
<span class='curline'><a href='../S/192.html#L285'>L</a>                 285 src/scripting/lua_formula_bridge.cpp 	lua_setfield(L, -2, "__tostring");</span>
<span class='curline'><a href='../S/192.html#L286'>L</a>                 286 src/scripting/lua_formula_bridge.cpp 	lua_pushcfunction(L, intf_eval_formula);</span>
<span class='curline'><a href='../S/192.html#L287'>L</a>                 287 src/scripting/lua_formula_bridge.cpp 	lua_setfield(L, -2, "__call");</span>
<span class='curline'><a href='../S/192.html#L288'>L</a>                 288 src/scripting/lua_formula_bridge.cpp 	lua_pushstring(L, "formula");</span>
<span class='curline'><a href='../S/192.html#L289'>L</a>                 289 src/scripting/lua_formula_bridge.cpp 	lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/184.html#L81'>L</a>                  81 src/scripting/lua_gui2.cpp 		lua_State* L;</span>
<span class='curline'><a href='../S/184.html#L97'>L</a>                  97 src/scripting/lua_gui2.cpp 		: L(l), prev(current), window(w), callbacks()</span>
<span class='curline'><a href='../S/184.html#L99'>L</a>                  99 src/scripting/lua_gui2.cpp 		lua_pushstring(L, dlgclbkKey);</span>
<span class='curline'><a href='../S/184.html#L100'>L</a>                 100 src/scripting/lua_gui2.cpp 		lua_createtable(L, 1, 0);</span>
<span class='curline'><a href='../S/184.html#L101'>L</a>                 101 src/scripting/lua_gui2.cpp 		lua_pushvalue(L, -2);</span>
<span class='curline'><a href='../S/184.html#L102'>L</a>                 102 src/scripting/lua_gui2.cpp 		lua_rawget(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/184.html#L103'>L</a>                 103 src/scripting/lua_gui2.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/184.html#L104'>L</a>                 104 src/scripting/lua_gui2.cpp 		lua_rawset(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/184.html#L111'>L</a>                 111 src/scripting/lua_gui2.cpp 		lua_pushstring(L, dlgclbkKey);</span>
<span class='curline'><a href='../S/184.html#L112'>L</a>                 112 src/scripting/lua_gui2.cpp 		lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/184.html#L113'>L</a>                 113 src/scripting/lua_gui2.cpp 		lua_rawget(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/184.html#L114'>L</a>                 114 src/scripting/lua_gui2.cpp 		lua_rawgeti(L, -1, 1);</span>
<span class='curline'><a href='../S/184.html#L115'>L</a>                 115 src/scripting/lua_gui2.cpp 		lua_remove(L, -2);</span>
<span class='curline'><a href='../S/184.html#L116'>L</a>                 116 src/scripting/lua_gui2.cpp 		lua_rawset(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/184.html#L120'>L</a>                 120 src/scripting/lua_gui2.cpp static gui2::widget* find_widget(lua_State* L, int i, bool readonly)</span>
<span class='curline'><a href='../S/184.html#L123'>L</a>                 123 src/scripting/lua_gui2.cpp 		luaL_error(L, "no visible dialog");</span>
<span class='curline'><a href='../S/184.html#L125'>L</a>                 125 src/scripting/lua_gui2.cpp 		luaL_argerror(L, i, "out of bounds");</span>
<span class='curline'><a href='../S/184.html#L127'>L</a>                 127 src/scripting/lua_gui2.cpp 		luaW_type_error(L, i, "string");</span>
<span class='curline'><a href='../S/184.html#L129'>L</a>                 129 src/scripting/lua_gui2.cpp 		luaL_argerror(L, i, "widget not found");</span>
<span class='curline'><a href='../S/184.html#L134'>L</a>                 134 src/scripting/lua_gui2.cpp 	for(; !lua_isnoneornil(L, i); ++i)</span>
<span class='curline'><a href='../S/184.html#L142'>L</a>                 142 src/scripting/lua_gui2.cpp 			int v = lua_tointeger(L, i);</span>
<span class='curline'><a href='../S/184.html#L158'>L</a>                 158 src/scripting/lua_gui2.cpp 			int v = lua_tointeger(L, i);</span>
<span class='curline'><a href='../S/184.html#L175'>L</a>                 175 src/scripting/lua_gui2.cpp 			if(lua_isnumber(L, i)) {</span>
<span class='curline'><a href='../S/184.html#L176'>L</a>                 176 src/scripting/lua_gui2.cpp 				int v = lua_tointeger(L, i);</span>
<span class='curline'><a href='../S/184.html#L187'>L</a>                 187 src/scripting/lua_gui2.cpp 				std::string m = luaL_checkstring(L, i);</span>
<span class='curline'><a href='../S/184.html#L191'>L</a>                 191 src/scripting/lua_gui2.cpp 			if(lua_isnumber(L, i)) {</span>
<span class='curline'><a href='../S/184.html#L192'>L</a>                 192 src/scripting/lua_gui2.cpp 				int v = lua_tointeger(L, i);</span>
<span class='curline'><a href='../S/184.html#L203'>L</a>                 203 src/scripting/lua_gui2.cpp 				std::string m = luaL_checkstring(L, i);</span>
<span class='curline'><a href='../S/184.html#L207'>L</a>                 207 src/scripting/lua_gui2.cpp 			if(lua_isnumber(L, i)) {</span>
<span class='curline'><a href='../S/184.html#L208'>L</a>                 208 src/scripting/lua_gui2.cpp 				int v = lua_tointeger(L, i);</span>
<span class='curline'><a href='../S/184.html#L218'>L</a>                 218 src/scripting/lua_gui2.cpp 				std::string m = luaL_checkstring(L, i);</span>
<span class='curline'><a href='../S/184.html#L222'>L</a>                 222 src/scripting/lua_gui2.cpp 			char const *m = lua_tostring(L, i);</span>
<span class='curline'><a href='../S/184.html#L245'>L</a>                 245 src/scripting/lua_gui2.cpp int show_dialog(lua_State* L, CVideo&amp; video)</span>
<span class='curline'><a href='../S/184.html#L247'>L</a>                 247 src/scripting/lua_gui2.cpp 	config def_cfg = luaW_checkconfig(L, 1);</span>
<span class='curline'><a href='../S/184.html#L250'>L</a>                 250 src/scripting/lua_gui2.cpp 	scoped_dialog w(L, gui2::build(video, &amp;def));</span>
<span class='curline'><a href='../S/184.html#L252'>L</a>                 252 src/scripting/lua_gui2.cpp 	if(!lua_isnoneornil(L, 2)) {</span>
<span class='curline'><a href='../S/184.html#L253'>L</a>                 253 src/scripting/lua_gui2.cpp 		lua_pushvalue(L, 2);</span>
<span class='curline'><a href='../S/184.html#L254'>L</a>                 254 src/scripting/lua_gui2.cpp 		lua_call(L, 0, 0);</span>
<span class='curline'><a href='../S/184.html#L259'>L</a>                 259 src/scripting/lua_gui2.cpp 	if (!lua_isnoneornil(L, 3)) {</span>
<span class='curline'><a href='../S/184.html#L260'>L</a>                 260 src/scripting/lua_gui2.cpp 		lua_pushvalue(L, 3);</span>
<span class='curline'><a href='../S/184.html#L261'>L</a>                 261 src/scripting/lua_gui2.cpp 		lua_call(L, 0, 0);</span>
<span class='curline'><a href='../S/184.html#L264'>L</a>                 264 src/scripting/lua_gui2.cpp 	lua_pushinteger(L, v);</span>
<span class='curline'><a href='../S/184.html#L276'>L</a>                 276 src/scripting/lua_gui2.cpp int show_message_dialog(lua_State* L, CVideo&amp; video)</span>
<span class='curline'><a href='../S/184.html#L279'>L</a>                 279 src/scripting/lua_gui2.cpp 	const bool has_input = !lua_isnoneornil(L, 3) &amp;&amp; luaW_toconfig(L, 3, txt_cfg) &amp;&amp; !txt_cfg.empty();</span>
<span class='curline'><a href='../S/184.html#L288'>L</a>                 288 src/scripting/lua_gui2.cpp 	if(!lua_isnoneornil(L, 2)) {</span>
<span class='curline'><a href='../S/184.html#L289'>L</a>                 289 src/scripting/lua_gui2.cpp 		luaL_checktype(L, 2, LUA_TTABLE);</span>
<span class='curline'><a href='../S/184.html#L290'>L</a>                 290 src/scripting/lua_gui2.cpp 		size_t n = lua_rawlen(L, 2);</span>
<span class='curline'><a href='../S/184.html#L292'>L</a>                 292 src/scripting/lua_gui2.cpp 			lua_rawgeti(L, 2, i);</span>
<span class='curline'><a href='../S/184.html#L295'>L</a>                 295 src/scripting/lua_gui2.cpp 			if(luaW_totstring(L, -1, short_opt)) {</span>
<span class='curline'><a href='../S/184.html#L315'>L</a>                 315 src/scripting/lua_gui2.cpp 			} else if(!luaW_toconfig(L, -1, opt)) {</span>
<span class='curline'><a href='../S/184.html#L318'>L</a>                 318 src/scripting/lua_gui2.cpp 				error &lt;&lt; i &lt;&lt; " was a " &lt;&lt; lua_typename(L, lua_type(L, -1));</span>
<span class='curline'><a href='../S/184.html#L319'>L</a>                 319 src/scripting/lua_gui2.cpp 				return luaL_argerror(L, 2, error.str().c_str());</span>
<span class='curline'><a href='../S/184.html#L326'>L</a>                 326 src/scripting/lua_gui2.cpp 			lua_pop(L, 1);</span>
<span class='curline'><a href='../S/184.html#L328'>L</a>                 328 src/scripting/lua_gui2.cpp 		lua_getfield(L, 2, "default");</span>
<span class='curline'><a href='../S/184.html#L329'>L</a>                 329 src/scripting/lua_gui2.cpp 		if(lua_isnumber(L, -1)) {</span>
<span class='curline'><a href='../S/184.html#L330'>L</a>                 330 src/scripting/lua_gui2.cpp 			int i = lua_tointeger(L, -1);</span>
<span class='curline'><a href='../S/184.html#L334'>L</a>                 334 src/scripting/lua_gui2.cpp 				return luaL_argerror(L, 2, error.str().c_str());</span>
<span class='curline'><a href='../S/184.html#L338'>L</a>                 338 src/scripting/lua_gui2.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/184.html#L341'>L</a>                 341 src/scripting/lua_gui2.cpp 	const config&amp; def_cfg = luaW_checkconfig(L, 1);</span>
<span class='curline'><a href='../S/184.html#L363'>L</a>                 363 src/scripting/lua_gui2.cpp 		lua_pushinteger(L, dlg_result);</span>
<span class='curline'><a href='../S/184.html#L365'>L</a>                 365 src/scripting/lua_gui2.cpp 		lua_pushinteger(L, options.chosen_option + 1);</span>
<span class='curline'><a href='../S/184.html#L369'>L</a>                 369 src/scripting/lua_gui2.cpp 		lua_pushlstring(L, input.text.c_str(), input.text.length());</span>
<span class='curline'><a href='../S/184.html#L371'>L</a>                 371 src/scripting/lua_gui2.cpp 		lua_pushnil(L);</span>
<span class='curline'><a href='../S/184.html#L383'>L</a>                 383 src/scripting/lua_gui2.cpp int show_popup_dialog(lua_State *L, CVideo &amp; video) {</span>
<span class='curline'><a href='../S/184.html#L384'>L</a>                 384 src/scripting/lua_gui2.cpp 	std::string title = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/184.html#L385'>L</a>                 385 src/scripting/lua_gui2.cpp 	std::string msg = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/184.html#L386'>L</a>                 386 src/scripting/lua_gui2.cpp 	std::string image = lua_isnoneornil(L, 3) ? "" : luaL_checkstring(L, 3);</span>
<span class='curline'><a href='../S/184.html#L397'>L</a>                 397 src/scripting/lua_gui2.cpp int show_story(lua_State* L, CVideo&amp; video) {</span>
<span class='curline'><a href='../S/184.html#L398'>L</a>                 398 src/scripting/lua_gui2.cpp 	config story = luaW_checkconfig(L, 1);</span>
<span class='curline'><a href='../S/184.html#L399'>L</a>                 399 src/scripting/lua_gui2.cpp 	t_string title = luaW_checktstring(L, 2);</span>
<span class='curline'><a href='../S/184.html#L410'>L</a>                 410 src/scripting/lua_gui2.cpp int show_menu(lua_State* L, CVideo&amp; video) {</span>
<span class='curline'><a href='../S/184.html#L411'>L</a>                 411 src/scripting/lua_gui2.cpp 	std::vector&lt;config&gt; items = lua_check&lt;std::vector&lt;config&gt;&gt;(L, 1);</span>
<span class='curline'><a href='../S/184.html#L417'>L</a>                 417 src/scripting/lua_gui2.cpp 	if(lua_isnumber(L, 2)) {</span>
<span class='curline'><a href='../S/184.html#L418'>L</a>                 418 src/scripting/lua_gui2.cpp 		initial = lua_tointeger(L, 2) - 1;</span>
<span class='curline'><a href='../S/184.html#L419'>L</a>                 419 src/scripting/lua_gui2.cpp 		markup = luaW_toboolean(L, 3);</span>
<span class='curline'><a href='../S/184.html#L420'>L</a>                 420 src/scripting/lua_gui2.cpp 	} else if(lua_isnumber(L, 3)) {</span>
<span class='curline'><a href='../S/184.html#L421'>L</a>                 421 src/scripting/lua_gui2.cpp 		initial = lua_tointeger(L, 3) - 1;</span>
<span class='curline'><a href='../S/184.html#L422'>L</a>                 422 src/scripting/lua_gui2.cpp 		markup = luaW_toboolean(L, 2);</span>
<span class='curline'><a href='../S/184.html#L427'>L</a>                 427 src/scripting/lua_gui2.cpp 	lua_pushinteger(L, menu.selected_item() + 1);</span>
<span class='curline'><a href='../S/184.html#L434'>L</a>                 434 src/scripting/lua_gui2.cpp int show_message_box(lua_State* L, CVideo&amp; video) {</span>
<span class='curline'><a href='../S/184.html#L435'>L</a>                 435 src/scripting/lua_gui2.cpp 	const std::string title = luaL_checkstring(L, 1), message = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/184.html#L436'>L</a>                 436 src/scripting/lua_gui2.cpp 	std::string button = luaL_optstring(L, 3, "ok");</span>
<span class='curline'><a href='../S/184.html#L438'>L</a>                 438 src/scripting/lua_gui2.cpp 	bool markup = lua_isnoneornil(L, 3) ? luaW_toboolean(L, 3) : luaW_toboolean(L, 4);</span>
<span class='curline'><a href='../S/184.html#L457'>L</a>                 457 src/scripting/lua_gui2.cpp 			lua_pushboolean(L, result == gui2::window::OK);</span>
<span class='curline'><a href='../S/184.html#L471'>L</a>                 471 src/scripting/lua_gui2.cpp int intf_set_dialog_value(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L473'>L</a>                 473 src/scripting/lua_gui2.cpp 	gui2::widget *w = find_widget(L, 2, false);</span>
<span class='curline'><a href='../S/184.html#L481'>L</a>                 481 src/scripting/lua_gui2.cpp 		if(lua_istable(L, 1)) {</span>
<span class='curline'><a href='../S/184.html#L484'>L</a>                 484 src/scripting/lua_gui2.cpp 			std::vector&lt;int&gt; selected_vec = lua_check&lt;std::vector&lt;int&gt;&gt;(L, 1);</span>
<span class='curline'><a href='../S/184.html#L493'>L</a>                 493 src/scripting/lua_gui2.cpp 			int v = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/184.html#L498'>L</a>                 498 src/scripting/lua_gui2.cpp 				return luaL_argerror(L, 1, "out of bounds");</span>
<span class='curline'><a href='../S/184.html#L502'>L</a>                 502 src/scripting/lua_gui2.cpp 		int v = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/184.html#L507'>L</a>                 507 src/scripting/lua_gui2.cpp 			return luaL_argerror(L, 1, "out of bounds");</span>
<span class='curline'><a href='../S/184.html#L511'>L</a>                 511 src/scripting/lua_gui2.cpp 			selectable-&gt;set_value_bool(luaW_toboolean(L, 1));</span>
<span class='curline'><a href='../S/184.html#L513'>L</a>                 513 src/scripting/lua_gui2.cpp 			selectable-&gt;set_value(luaL_checkinteger(L, 1) -1);</span>
<span class='curline'><a href='../S/184.html#L516'>L</a>                 516 src/scripting/lua_gui2.cpp 		const t_string&amp; text = luaW_checktstring(L, 1);</span>
<span class='curline'><a href='../S/184.html#L519'>L</a>                 519 src/scripting/lua_gui2.cpp 		const int v = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/184.html#L525'>L</a>                 525 src/scripting/lua_gui2.cpp 			return luaL_argerror(L, 1, "out of bounds");</span>
<span class='curline'><a href='../S/184.html#L528'>L</a>                 528 src/scripting/lua_gui2.cpp 		const int v = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/184.html#L532'>L</a>                 532 src/scripting/lua_gui2.cpp 			return luaL_argerror(L, 1, "out of bounds");</span>
<span class='curline'><a href='../S/184.html#L535'>L</a>                 535 src/scripting/lua_gui2.cpp 		if(lua_istable(L, 1)) {</span>
<span class='curline'><a href='../S/184.html#L538'>L</a>                 538 src/scripting/lua_gui2.cpp 			for(unsigned i : lua_check&lt;std::vector&lt;unsigned&gt;&gt;(L, 1)) {</span>
<span class='curline'><a href='../S/184.html#L545'>L</a>                 545 src/scripting/lua_gui2.cpp 			const int v = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/184.html#L552'>L</a>                 552 src/scripting/lua_gui2.cpp 		if(const unit_type* ut = luaW_tounittype(L, 1)) {</span>
<span class='curline'><a href='../S/184.html#L554'>L</a>                 554 src/scripting/lua_gui2.cpp 		} else if(unit* u = luaW_tounit(L, 1)) {</span>
<span class='curline'><a href='../S/184.html#L557'>L</a>                 557 src/scripting/lua_gui2.cpp 			return luaW_type_error(L, 1, "unit or unit type");</span>
<span class='curline'><a href='../S/184.html#L560'>L</a>                 560 src/scripting/lua_gui2.cpp 		const bool unfolded = luaW_toboolean(L, 1);</span>
<span class='curline'><a href='../S/184.html#L567'>L</a>                 567 src/scripting/lua_gui2.cpp 		if(lua_istable(L, 1)) {</span>
<span class='curline'><a href='../S/184.html#L570'>L</a>                 570 src/scripting/lua_gui2.cpp 			for(unsigned i : lua_check&lt;std::vector&lt;unsigned&gt;&gt;(L, 1)) {</span>
<span class='curline'><a href='../S/184.html#L577'>L</a>                 577 src/scripting/lua_gui2.cpp 			int v = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/184.html#L582'>L</a>                 582 src/scripting/lua_gui2.cpp 				return luaL_argerror(L, 1, "out of bounds");</span>
<span class='curline'><a href='../S/184.html#L586'>L</a>                 586 src/scripting/lua_gui2.cpp 		t_string v = luaW_checktstring(L, 1);</span>
<span class='curline'><a href='../S/184.html#L589'>L</a>                 589 src/scripting/lua_gui2.cpp 			return luaL_argerror(L, lua_gettop(L), "unsupported widget");</span>
<span class='curline'><a href='../S/184.html#L602'>L</a>                 602 src/scripting/lua_gui2.cpp int intf_get_dialog_value(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L604'>L</a>                 604 src/scripting/lua_gui2.cpp 	gui2::widget *w = find_widget(L, 1, true);</span>
<span class='curline'><a href='../S/184.html#L613'>L</a>                 613 src/scripting/lua_gui2.cpp 		lua_pushinteger(L, list-&gt;get_selected_row() + 1);</span>
<span class='curline'><a href='../S/184.html#L615'>L</a>                 615 src/scripting/lua_gui2.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/184.html#L620'>L</a>                 620 src/scripting/lua_gui2.cpp 				lua_pushnumber(L, i + 1);</span>
<span class='curline'><a href='../S/184.html#L621'>L</a>                 621 src/scripting/lua_gui2.cpp 				lua_rawseti(L, -2, count);</span>
<span class='curline'><a href='../S/184.html#L625'>L</a>                 625 src/scripting/lua_gui2.cpp 		lua_pushinteger(L, multi_page-&gt;get_selected_page() + 1);</span>
<span class='curline'><a href='../S/184.html#L628'>L</a>                 628 src/scripting/lua_gui2.cpp 			lua_pushboolean(L, selectable-&gt;get_value_bool());</span>
<span class='curline'><a href='../S/184.html#L630'>L</a>                 630 src/scripting/lua_gui2.cpp 			lua_pushinteger(L, selectable-&gt;get_value() + 1);</span>
<span class='curline'><a href='../S/184.html#L633'>L</a>                 633 src/scripting/lua_gui2.cpp 		lua_pushstring(L, text_box-&gt;get_value().c_str());</span>
<span class='curline'><a href='../S/184.html#L635'>L</a>                 635 src/scripting/lua_gui2.cpp 		lua_pushinteger(L, slider-&gt;get_value());</span>
<span class='curline'><a href='../S/184.html#L637'>L</a>                 637 src/scripting/lua_gui2.cpp 		lua_pushinteger(L, progress_bar-&gt;get_percentage());</span>
<span class='curline'><a href='../S/184.html#L640'>L</a>                 640 src/scripting/lua_gui2.cpp 		lua_createtable(L, path.size(), 0);</span>
<span class='curline'><a href='../S/184.html#L642'>L</a>                 642 src/scripting/lua_gui2.cpp 			lua_pushinteger(L, path[i] + 1);</span>
<span class='curline'><a href='../S/184.html#L643'>L</a>                 643 src/scripting/lua_gui2.cpp 			lua_rawseti(L, -2, i + 1);</span>
<span class='curline'><a href='../S/184.html#L646'>L</a>                 646 src/scripting/lua_gui2.cpp 		lua_pushinteger(L, stacked_widget-&gt;current_layer());</span>
<span class='curline'><a href='../S/184.html#L648'>L</a>                 648 src/scripting/lua_gui2.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/184.html#L653'>L</a>                 653 src/scripting/lua_gui2.cpp 				lua_pushnumber(L, i + 1);</span>
<span class='curline'><a href='../S/184.html#L654'>L</a>                 654 src/scripting/lua_gui2.cpp 				lua_rawseti(L, -2, count);</span>
<span class='curline'><a href='../S/184.html#L660'>L</a>                 660 src/scripting/lua_gui2.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/184.html#L664'>L</a>                 664 src/scripting/lua_gui2.cpp 				lua_pushnumber(L, i + 1);</span>
<span class='curline'><a href='../S/184.html#L665'>L</a>                 665 src/scripting/lua_gui2.cpp 				lua_rawseti(L, -2, count);</span>
<span class='curline'><a href='../S/184.html#L669'>L</a>                 669 src/scripting/lua_gui2.cpp 		return luaL_argerror(L, lua_gettop(L), "unsupported widget");</span>
<span class='curline'><a href='../S/184.html#L697'>L</a>                 697 src/scripting/lua_gui2.cpp int intf_remove_dialog_item(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L699'>L</a>                 699 src/scripting/lua_gui2.cpp 	int pos = luaL_checkinteger(L, 1) - 1;</span>
<span class='curline'><a href='../S/184.html#L700'>L</a>                 700 src/scripting/lua_gui2.cpp 	int number = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/184.html#L701'>L</a>                 701 src/scripting/lua_gui2.cpp 	gui2::widget* w = find_widget(L, 3, true);</span>
<span class='curline'><a href='../S/184.html#L717'>L</a>                 717 src/scripting/lua_gui2.cpp 		return luaL_argerror(L, lua_gettop(L), "unsupported widget");</span>
<span class='curline'><a href='../S/184.html#L735'>L</a>                 735 src/scripting/lua_gui2.cpp 		lua_State *L = scoped_dialog::current-&gt;L;</span>
<span class='curline'><a href='../S/184.html#L736'>L</a>                 736 src/scripting/lua_gui2.cpp 		lua_pushstring(L, dlgclbkKey);</span>
<span class='curline'><a href='../S/184.html#L737'>L</a>                 737 src/scripting/lua_gui2.cpp 		lua_rawget(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/184.html#L738'>L</a>                 738 src/scripting/lua_gui2.cpp 		lua_rawgeti(L, -1, cb);</span>
<span class='curline'><a href='../S/184.html#L739'>L</a>                 739 src/scripting/lua_gui2.cpp 		lua_remove(L, -2);</span>
<span class='curline'><a href='../S/184.html#L740'>L</a>                 740 src/scripting/lua_gui2.cpp 		lua_call(L, 0, 0);</span>
<span class='curline'><a href='../S/184.html#L759'>L</a>                 759 src/scripting/lua_gui2.cpp int intf_set_dialog_callback(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L761'>L</a>                 761 src/scripting/lua_gui2.cpp 	gui2::widget* w = find_widget(L, 2, true);</span>
<span class='curline'><a href='../S/184.html#L766'>L</a>                 766 src/scripting/lua_gui2.cpp 		lua_pushstring(L, dlgclbkKey);</span>
<span class='curline'><a href='../S/184.html#L767'>L</a>                 767 src/scripting/lua_gui2.cpp 		lua_rawget(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/184.html#L768'>L</a>                 768 src/scripting/lua_gui2.cpp 		lua_pushnil(L);</span>
<span class='curline'><a href='../S/184.html#L769'>L</a>                 769 src/scripting/lua_gui2.cpp 		lua_rawseti(L, -2, i-&gt;second);</span>
<span class='curline'><a href='../S/184.html#L770'>L</a>                 770 src/scripting/lua_gui2.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/184.html#L774'>L</a>                 774 src/scripting/lua_gui2.cpp 	if(lua_isnil(L, 1)) {</span>
<span class='curline'><a href='../S/184.html#L802'>L</a>                 802 src/scripting/lua_gui2.cpp 		return luaL_argerror(L, lua_gettop(L), "unsupported widget");</span>
<span class='curline'><a href='../S/184.html#L805'>L</a>                 805 src/scripting/lua_gui2.cpp 	lua_pushstring(L, dlgclbkKey);</span>
<span class='curline'><a href='../S/184.html#L806'>L</a>                 806 src/scripting/lua_gui2.cpp 	lua_rawget(L, LUA_REGISTRYINDEX);</span>
<span class='curline'><a href='../S/184.html#L807'>L</a>                 807 src/scripting/lua_gui2.cpp 	int n = lua_rawlen(L, -1) + 1;</span>
<span class='curline'><a href='../S/184.html#L809'>L</a>                 809 src/scripting/lua_gui2.cpp 	lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/184.html#L810'>L</a>                 810 src/scripting/lua_gui2.cpp 	lua_rawseti(L, -2, n);</span>
<span class='curline'><a href='../S/184.html#L811'>L</a>                 811 src/scripting/lua_gui2.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/184.html#L821'>L</a>                 821 src/scripting/lua_gui2.cpp int intf_set_dialog_markup(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L823'>L</a>                 823 src/scripting/lua_gui2.cpp 	bool b = luaW_toboolean(L, 1);</span>
<span class='curline'><a href='../S/184.html#L824'>L</a>                 824 src/scripting/lua_gui2.cpp 	gui2::widget* w = find_widget(L, 2, true);</span>
<span class='curline'><a href='../S/184.html#L827'>L</a>                 827 src/scripting/lua_gui2.cpp 		return luaL_argerror(L, lua_gettop(L), "unsupported widget");</span>
<span class='curline'><a href='../S/184.html#L840'>L</a>                 840 src/scripting/lua_gui2.cpp int intf_set_dialog_canvas(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L842'>L</a>                 842 src/scripting/lua_gui2.cpp 	int i = luaL_checkinteger(L, 1);</span>
<span class='curline'><a href='../S/184.html#L843'>L</a>                 843 src/scripting/lua_gui2.cpp 	gui2::widget* w = find_widget(L, 3, true);</span>
<span class='curline'><a href='../S/184.html#L846'>L</a>                 846 src/scripting/lua_gui2.cpp 		return luaL_argerror(L, lua_gettop(L), "unsupported widget");</span>
<span class='curline'><a href='../S/184.html#L851'>L</a>                 851 src/scripting/lua_gui2.cpp 		return luaL_argerror(L, 1, "out of bounds");</span>
<span class='curline'><a href='../S/184.html#L854'>L</a>                 854 src/scripting/lua_gui2.cpp 	config cfg = luaW_checkconfig(L, 2);</span>
<span class='curline'><a href='../S/184.html#L864'>L</a>                 864 src/scripting/lua_gui2.cpp int intf_set_dialog_focus(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L866'>L</a>                 866 src/scripting/lua_gui2.cpp 	gui2::widget* w = find_widget(L, 1, true);</span>
<span class='curline'><a href='../S/184.html#L876'>L</a>                 876 src/scripting/lua_gui2.cpp int intf_set_dialog_active(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L878'>L</a>                 878 src/scripting/lua_gui2.cpp 	const bool b = luaW_toboolean(L, 1);</span>
<span class='curline'><a href='../S/184.html#L879'>L</a>                 879 src/scripting/lua_gui2.cpp 	gui2::widget* w = find_widget(L, 2, true);</span>
<span class='curline'><a href='../S/184.html#L882'>L</a>                 882 src/scripting/lua_gui2.cpp 		return luaL_argerror(L, lua_gettop(L), "unsupported widget");</span>
<span class='curline'><a href='../S/184.html#L894'>L</a>                 894 src/scripting/lua_gui2.cpp int intf_set_dialog_visible(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L900'>L</a>                 900 src/scripting/lua_gui2.cpp 	switch(lua_type(L, 1)) {</span>
<span class='curline'><a href='../S/184.html#L902'>L</a>                 902 src/scripting/lua_gui2.cpp 			flag = luaW_toboolean(L, 1)</span>
<span class='curline'><a href='../S/184.html#L908'>L</a>                 908 src/scripting/lua_gui2.cpp 				const std::string&amp; str = lua_tostring(L, 1);</span>
<span class='curline'><a href='../S/184.html#L916'>L</a>                 916 src/scripting/lua_gui2.cpp 					return luaL_argerror(L, 1, "string must be one of: visible, hidden, invisible");</span>
<span class='curline'><a href='../S/184.html#L921'>L</a>                 921 src/scripting/lua_gui2.cpp 			return luaW_type_error(L, 1, "boolean or string");</span>
<span class='curline'><a href='../S/184.html#L924'>L</a>                 924 src/scripting/lua_gui2.cpp 	gui2::widget* w = find_widget(L, 2, true);</span>
<span class='curline'><a href='../S/184.html#L927'>L</a>                 927 src/scripting/lua_gui2.cpp 		return luaL_argerror(L, lua_gettop(L), "unsupported widget");</span>
<span class='curline'><a href='../S/184.html#L961'>L</a>                 961 src/scripting/lua_gui2.cpp int intf_add_dialog_tree_node(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L963'>L</a>                 963 src/scripting/lua_gui2.cpp 	const std::string node_type = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/184.html#L964'>L</a>                 964 src/scripting/lua_gui2.cpp 	const int insert_pos = luaL_checkinteger(L, 2);</span>
<span class='curline'><a href='../S/184.html#L966'>L</a>                 966 src/scripting/lua_gui2.cpp 	gui2::widget* w = find_widget(L, 3, false);</span>
<span class='curline'><a href='../S/184.html#L975'>L</a>                 975 src/scripting/lua_gui2.cpp 		return luaL_argerror(L, lua_gettop(L), "unsupported widget");</span>
<span class='curline'><a href='../S/184.html#L986'>L</a>                 986 src/scripting/lua_gui2.cpp int intf_add_widget_definition(lua_State* L)</span>
<span class='curline'><a href='../S/184.html#L988'>L</a>                 988 src/scripting/lua_gui2.cpp 	std::string type = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/184.html#L989'>L</a>                 989 src/scripting/lua_gui2.cpp 	std::string id = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/184.html#L991'>L</a>                 991 src/scripting/lua_gui2.cpp 		if(gui2::add_single_widget_definition(type, id, luaW_checkconfig(L, 3))) {</span>
<span class='curline'><a href='../S/184.html#L992'>L</a>                 992 src/scripting/lua_gui2.cpp 			lua_kernel_base::get_lua_kernel&lt;lua_kernel_base&gt;(L).add_widget_definition(type, id);</span>
<span class='curline'><a href='../S/184.html#L995'>L</a>                 995 src/scripting/lua_gui2.cpp 		return luaL_argerror(L, 1, e.what());</span>
<span class='curline'><a href='../S/182.html#L26'>L</a>                  26 src/scripting/lua_gui2.hpp int intf_set_dialog_value(lua_State *L);</span>
<span class='curline'><a href='../S/182.html#L27'>L</a>                  27 src/scripting/lua_gui2.hpp int intf_get_dialog_value(lua_State *L);</span>
<span class='curline'><a href='../S/182.html#L28'>L</a>                  28 src/scripting/lua_gui2.hpp int intf_set_dialog_callback(lua_State *L);</span>
<span class='curline'><a href='../S/182.html#L29'>L</a>                  29 src/scripting/lua_gui2.hpp int intf_set_dialog_markup(lua_State *L);</span>
<span class='curline'><a href='../S/182.html#L30'>L</a>                  30 src/scripting/lua_gui2.hpp int intf_set_dialog_canvas(lua_State *L);</span>
<span class='curline'><a href='../S/182.html#L31'>L</a>                  31 src/scripting/lua_gui2.hpp int intf_set_dialog_focus(lua_State *L);</span>
<span class='curline'><a href='../S/182.html#L32'>L</a>                  32 src/scripting/lua_gui2.hpp int intf_set_dialog_active(lua_State *L);</span>
<span class='curline'><a href='../S/182.html#L33'>L</a>                  33 src/scripting/lua_gui2.hpp int intf_set_dialog_visible(lua_State *L);</span>
<span class='curline'><a href='../S/182.html#L34'>L</a>                  34 src/scripting/lua_gui2.hpp int intf_add_dialog_tree_node(lua_State *L);</span>
<span class='curline'><a href='../S/182.html#L35'>L</a>                  35 src/scripting/lua_gui2.hpp int intf_add_widget_definition(lua_State *L);</span>
<span class='curline'><a href='../S/182.html#L36'>L</a>                  36 src/scripting/lua_gui2.hpp int show_dialog(lua_State *L, CVideo &amp; video);</span>
<span class='curline'><a href='../S/182.html#L37'>L</a>                  37 src/scripting/lua_gui2.hpp int show_message_dialog(lua_State *L, CVideo &amp; video);</span>
<span class='curline'><a href='../S/182.html#L38'>L</a>                  38 src/scripting/lua_gui2.hpp int show_popup_dialog(lua_State *L, CVideo &amp; video);</span>
<span class='curline'><a href='../S/182.html#L39'>L</a>                  39 src/scripting/lua_gui2.hpp int show_menu(lua_State* L, CVideo&amp; video);</span>
<span class='curline'><a href='../S/182.html#L40'>L</a>                  40 src/scripting/lua_gui2.hpp int show_story(lua_State* L, CVideo&amp; video);</span>
<span class='curline'><a href='../S/182.html#L41'>L</a>                  41 src/scripting/lua_gui2.hpp int show_message_box(lua_State* L, CVideo&amp; video);</span>
<span class='curline'><a href='../S/182.html#L42'>L</a>                  42 src/scripting/lua_gui2.hpp int show_lua_console(lua_State*L, CVideo &amp; video, lua_kernel_base * lk);</span>
<span class='curline'><a href='../S/182.html#L44'>L</a>                  44 src/scripting/lua_gui2.hpp int intf_remove_dialog_item(lua_State *L);</span>
<span class='curline'><a href='../S/173.html#L80'>L</a>                  80 src/scripting/lua_kernel_base.cpp static int intf_compare_versions(lua_State* L)</span>
<span class='curline'><a href='../S/173.html#L82'>L</a>                  82 src/scripting/lua_kernel_base.cpp 	char const *v1 = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/173.html#L84'>L</a>                  84 src/scripting/lua_kernel_base.cpp 	const VERSION_COMP_OP vop = parse_version_op(luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/173.html#L85'>L</a>                  85 src/scripting/lua_kernel_base.cpp 	if(vop == OP_INVALID) return luaL_argerror(L, 2, "unknown version comparison operator - allowed are ==, !=, &lt;, &lt;=, &gt; and &gt;=");</span>
<span class='curline'><a href='../S/173.html#L87'>L</a>                  87 src/scripting/lua_kernel_base.cpp 	char const *v2 = luaL_checkstring(L, 3);</span>
<span class='curline'><a href='../S/173.html#L90'>L</a>                  90 src/scripting/lua_kernel_base.cpp 	lua_pushboolean(L, result);</span>
<span class='curline'><a href='../S/173.html#L99'>L</a>                  99 src/scripting/lua_kernel_base.cpp int lua_kernel_base::intf_print(lua_State* L)</span>
<span class='curline'><a href='../S/173.html#L102'>L</a>                 102 src/scripting/lua_kernel_base.cpp 	size_t nargs = lua_gettop(L);</span>
<span class='curline'><a href='../S/173.html#L105'>L</a>                 105 src/scripting/lua_kernel_base.cpp 		const char * str = lua_tostring(L,i);</span>
<span class='curline'><a href='../S/173.html#L123'>L</a>                 123 src/scripting/lua_kernel_base.cpp int video_dispatch(lua_State *L) {</span>
<span class='curline'><a href='../S/173.html#L124'>L</a>                 124 src/scripting/lua_kernel_base.cpp 	return lua_kernel_base::get_lua_kernel&lt;lua_kernel_base&gt;(L).video_dispatch_impl(L, callback);</span>
<span class='curline'><a href='../S/173.html#L128'>L</a>                 128 src/scripting/lua_kernel_base.cpp int lua_kernel_base::video_dispatch_impl(lua_State* L, lua_kernel_base::video_function callback)</span>
<span class='curline'><a href='../S/173.html#L130'>L</a>                 130 src/scripting/lua_kernel_base.cpp 	return callback(L, CVideo::get_singleton());</span>
<span class='curline'><a href='../S/173.html#L134'>L</a>                 134 src/scripting/lua_kernel_base.cpp int lua_kernel_base::intf_show_lua_console(lua_State *L)</span>
<span class='curline'><a href='../S/173.html#L143'>L</a>                 143 src/scripting/lua_kernel_base.cpp 	return lua_gui2::show_lua_console(L, CVideo::get_singleton(), this);</span>
<span class='curline'><a href='../S/173.html#L146'>L</a>                 146 src/scripting/lua_kernel_base.cpp static int impl_name_generator_call(lua_State *L)</span>
<span class='curline'><a href='../S/173.html#L148'>L</a>                 148 src/scripting/lua_kernel_base.cpp 	name_generator* gen = static_cast&lt;name_generator*&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/173.html#L149'>L</a>                 149 src/scripting/lua_kernel_base.cpp 	lua_pushstring(L, gen-&gt;generate().c_str());</span>
<span class='curline'><a href='../S/173.html#L153'>L</a>                 153 src/scripting/lua_kernel_base.cpp static int impl_name_generator_collect(lua_State *L)</span>
<span class='curline'><a href='../S/173.html#L155'>L</a>                 155 src/scripting/lua_kernel_base.cpp 	name_generator* gen = static_cast&lt;name_generator*&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/173.html#L160'>L</a>                 160 src/scripting/lua_kernel_base.cpp static int intf_name_generator(lua_State *L)</span>
<span class='curline'><a href='../S/173.html#L162'>L</a>                 162 src/scripting/lua_kernel_base.cpp 	std::string type = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/173.html#L167'>L</a>                 167 src/scripting/lua_kernel_base.cpp 			if(lua_istable(L, 2)) {</span>
<span class='curline'><a href='../S/173.html#L168'>L</a>                 168 src/scripting/lua_kernel_base.cpp 				input = lua_check&lt;std::vector&lt;std::string&gt;&gt;(L, 2);</span>
<span class='curline'><a href='../S/173.html#L170'>L</a>                 170 src/scripting/lua_kernel_base.cpp 				input = utils::parenthetical_split(luaL_checkstring(L, 2), ',');</span>
<span class='curline'><a href='../S/173.html#L172'>L</a>                 172 src/scripting/lua_kernel_base.cpp 			int chain_sz = luaL_optinteger(L, 3, 2);</span>
<span class='curline'><a href='../S/173.html#L173'>L</a>                 173 src/scripting/lua_kernel_base.cpp 			int max_len = luaL_optinteger(L, 4, 12);</span>
<span class='curline'><a href='../S/173.html#L174'>L</a>                 174 src/scripting/lua_kernel_base.cpp 			gen = new(L) markov_generator(input, chain_sz, max_len);</span>
<span class='curline'><a href='../S/173.html#L178'>L</a>                 178 src/scripting/lua_kernel_base.cpp 			if(lua_istable(L, 2)) {</span>
<span class='curline'><a href='../S/173.html#L180'>L</a>                 180 src/scripting/lua_kernel_base.cpp 				for(lua_pushnil(L); lua_next(L, 2); lua_pop(L, 1)) {</span>
<span class='curline'><a href='../S/173.html#L181'>L</a>                 181 src/scripting/lua_kernel_base.cpp 					if(!lua_isstring(L, -2)) {</span>
<span class='curline'><a href='../S/173.html#L182'>L</a>                 182 src/scripting/lua_kernel_base.cpp 						lua_pushstring(L, "CFG generator: invalid nonterminal name (must be a string)");</span>
<span class='curline'><a href='../S/173.html#L183'>L</a>                 183 src/scripting/lua_kernel_base.cpp 						return lua_error(L);</span>
<span class='curline'><a href='../S/173.html#L185'>L</a>                 185 src/scripting/lua_kernel_base.cpp 					if(lua_isstring(L, -1)) {</span>
<span class='curline'><a href='../S/173.html#L186'>L</a>                 186 src/scripting/lua_kernel_base.cpp 						data[lua_tostring(L,-2)] = utils::split(lua_tostring(L,-1),'|');</span>
<span class='curline'><a href='../S/173.html#L187'>L</a>                 187 src/scripting/lua_kernel_base.cpp 					} else if(lua_istable(L, -1)) {</span>
<span class='curline'><a href='../S/173.html#L188'>L</a>                 188 src/scripting/lua_kernel_base.cpp 						data[lua_tostring(L,-2)] = lua_check&lt;std::vector&lt;std::string&gt;&gt;(L, -1);</span>
<span class='curline'><a href='../S/173.html#L190'>L</a>                 190 src/scripting/lua_kernel_base.cpp 						lua_pushstring(L, "CFG generator: invalid noterminal value (must be a string or list of strings)");</span>
<span class='curline'><a href='../S/173.html#L191'>L</a>                 191 src/scripting/lua_kernel_base.cpp 						return lua_error(L);</span>
<span class='curline'><a href='../S/173.html#L195'>L</a>                 195 src/scripting/lua_kernel_base.cpp 					gen = new(L) context_free_grammar_generator(data);</span>
<span class='curline'><a href='../S/173.html#L198'>L</a>                 198 src/scripting/lua_kernel_base.cpp 				gen = new(L) context_free_grammar_generator(luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/173.html#L204'>L</a>                 204 src/scripting/lua_kernel_base.cpp 			return luaL_argerror(L, 1, "should be either 'markov_chain' or 'context_free'");</span>
<span class='curline'><a href='../S/173.html#L208'>L</a>                 208 src/scripting/lua_kernel_base.cpp 		lua_pushstring(L, ex.what());</span>
<span class='curline'><a href='../S/173.html#L209'>L</a>                 209 src/scripting/lua_kernel_base.cpp 		return lua_error(L);</span>
<span class='curline'><a href='../S/173.html#L214'>L</a>                 214 src/scripting/lua_kernel_base.cpp 	luaL_getmetatable(L, Gen);</span>
<span class='curline'><a href='../S/173.html#L215'>L</a>                 215 src/scripting/lua_kernel_base.cpp 	lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/173.html#L223'>L</a>                 223 src/scripting/lua_kernel_base.cpp static int intf_random(lua_State *L)</span>
<span class='curline'><a href='../S/173.html#L225'>L</a>                 225 src/scripting/lua_kernel_base.cpp 	if (lua_isnoneornil(L, 1)) {</span>
<span class='curline'><a href='../S/173.html#L228'>L</a>                 228 src/scripting/lua_kernel_base.cpp 		lua_push(L, r / (r_max + 1));</span>
<span class='curline'><a href='../S/173.html#L234'>L</a>                 234 src/scripting/lua_kernel_base.cpp 		if (lua_isnumber(L, 2)) {</span>
<span class='curline'><a href='../S/173.html#L235'>L</a>                 235 src/scripting/lua_kernel_base.cpp 			min = lua_check&lt;int32_t&gt;(L, 1);</span>
<span class='curline'><a href='../S/173.html#L236'>L</a>                 236 src/scripting/lua_kernel_base.cpp 			max = lua_check&lt;int32_t&gt;(L, 2);</span>
<span class='curline'><a href='../S/173.html#L240'>L</a>                 240 src/scripting/lua_kernel_base.cpp 			max = lua_check&lt;int32_t&gt;(L, 1);</span>
<span class='curline'><a href='../S/173.html#L243'>L</a>                 243 src/scripting/lua_kernel_base.cpp 			return luaL_argerror(L, 1, "min &gt; max");</span>
<span class='curline'><a href='../S/173.html#L245'>L</a>                 245 src/scripting/lua_kernel_base.cpp 		lua_push(L, randomness::generator-&gt;get_random_int(min, max));</span>
<span class='curline'><a href='../S/173.html#L250'>L</a>                 250 src/scripting/lua_kernel_base.cpp static int intf_wml_matches_filter(lua_State* L)</span>
<span class='curline'><a href='../S/173.html#L252'>L</a>                 252 src/scripting/lua_kernel_base.cpp 	config cfg = luaW_checkconfig(L, 1);</span>
<span class='curline'><a href='../S/173.html#L253'>L</a>                 253 src/scripting/lua_kernel_base.cpp 	config filter = luaW_checkconfig(L, 2);</span>
<span class='curline'><a href='../S/173.html#L254'>L</a>                 254 src/scripting/lua_kernel_base.cpp 	lua_pushboolean(L, cfg.matches(filter));</span>
<span class='curline'><a href='../S/173.html#L263'>L</a>                 263 src/scripting/lua_kernel_base.cpp int intf_log(lua_State *L) {</span>
<span class='curline'><a href='../S/173.html#L264'>L</a>                 264 src/scripting/lua_kernel_base.cpp 	const std::string&amp; logger = lua_isstring(L, 2) ? luaL_checkstring(L, 1) : "";</span>
<span class='curline'><a href='../S/173.html#L265'>L</a>                 265 src/scripting/lua_kernel_base.cpp 	std::string msg = lua_isstring(L, 2) ? luaL_checkstring(L, 2) : luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/173.html#L288'>L</a>                 288 src/scripting/lua_kernel_base.cpp static int intf_get_image_size(lua_State *L) {</span>
<span class='curline'><a href='../S/173.html#L289'>L</a>                 289 src/scripting/lua_kernel_base.cpp 	char const *m = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/173.html#L293'>L</a>                 293 src/scripting/lua_kernel_base.cpp 	lua_pushinteger(L, s-&gt;w);</span>
<span class='curline'><a href='../S/173.html#L294'>L</a>                 294 src/scripting/lua_kernel_base.cpp 	lua_pushinteger(L, s-&gt;h);</span>
<span class='curline'><a href='../S/173.html#L302'>L</a>                 302 src/scripting/lua_kernel_base.cpp static int intf_get_time_stamp(lua_State *L) {</span>
<span class='curline'><a href='../S/173.html#L303'>L</a>                 303 src/scripting/lua_kernel_base.cpp 	lua_pushinteger(L, SDL_GetTicks());</span>
<span class='curline'><a href='../S/173.html#L307'>L</a>                 307 src/scripting/lua_kernel_base.cpp static int intf_format(lua_State* L)</span>
<span class='curline'><a href='../S/173.html#L309'>L</a>                 309 src/scripting/lua_kernel_base.cpp 	config cfg = luaW_checkconfig(L, 2);</span>
<span class='curline'><a href='../S/173.html#L311'>L</a>                 311 src/scripting/lua_kernel_base.cpp 	if(lua_isstring(L, 1)) {</span>
<span class='curline'><a href='../S/173.html#L312'>L</a>                 312 src/scripting/lua_kernel_base.cpp 		std::string str = lua_tostring(L, 1);</span>
<span class='curline'><a href='../S/173.html#L313'>L</a>                 313 src/scripting/lua_kernel_base.cpp 		lua_push(L, utils::interpolate_variables_into_string(str, variables));</span>
<span class='curline'><a href='../S/173.html#L316'>L</a>                 316 src/scripting/lua_kernel_base.cpp 	t_string str = luaW_checktstring(L, 1);</span>
<span class='curline'><a href='../S/173.html#L317'>L</a>                 317 src/scripting/lua_kernel_base.cpp 	lua_push(L, utils::interpolate_variables_into_tstring(str, variables));</span>
<span class='curline'><a href='../S/173.html#L322'>L</a>                 322 src/scripting/lua_kernel_base.cpp static int intf_format_list(lua_State* L)</span>
<span class='curline'><a href='../S/173.html#L324'>L</a>                 324 src/scripting/lua_kernel_base.cpp 	const t_string empty = luaW_checktstring(L, 1);</span>
<span class='curline'><a href='../S/173.html#L325'>L</a>                 325 src/scripting/lua_kernel_base.cpp 	auto values = lua_check&lt;std::vector&lt;t_string&gt;&gt;(L, 2);</span>
<span class='curline'><a href='../S/173.html#L326'>L</a>                 326 src/scripting/lua_kernel_base.cpp 	lua_push(L, (conjunct ? utils::format_conjunct_list : utils::format_disjunct_list)(empty, values));</span>
<span class='curline'><a href='../S/173.html#L335'>L</a>                 335 src/scripting/lua_kernel_base.cpp static int intf_debug(lua_State* L) {</span>
<span class='curline'><a href='../S/173.html#L336'>L</a>                 336 src/scripting/lua_kernel_base.cpp 	const config&amp; arg = luaW_checkconfig(L, 1);</span>
<span class='curline'><a href='../S/173.html#L338'>L</a>                 338 src/scripting/lua_kernel_base.cpp 	lua_pushstring(L, result.c_str());</span>
<span class='curline'><a href='../S/173.html#L345'>L</a>                 345 src/scripting/lua_kernel_base.cpp typedef int (lua_kernel_base::*member_callback)(lua_State *L);</span>
<span class='curline'><a href='../S/173.html#L348'>L</a>                 348 src/scripting/lua_kernel_base.cpp int dispatch(lua_State *L) {</span>
<span class='curline'><a href='../S/173.html#L349'>L</a>                 349 src/scripting/lua_kernel_base.cpp 	return ((lua_kernel_base::get_lua_kernel&lt;lua_kernel_base&gt;(L)).*method)(L);</span>
<span class='curline'><a href='../S/173.html#L358'>L</a>                 358 src/scripting/lua_kernel_base.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/173.html#L379'>L</a>                 379 src/scripting/lua_kernel_base.cpp 		luaL_requiref(L, lib-&gt;name, lib-&gt;func, 1);</span>
<span class='curline'><a href='../S/173.html#L380'>L</a>                 380 src/scripting/lua_kernel_base.cpp 		lua_pop(L, 1);  /* remove lib */</span>
<span class='curline'><a href='../S/173.html#L384'>L</a>                 384 src/scripting/lua_kernel_base.cpp 	lua_getglobal(L, "os");</span>
<span class='curline'><a href='../S/173.html#L385'>L</a>                 385 src/scripting/lua_kernel_base.cpp 	lua_pushnil(L);</span>
<span class='curline'><a href='../S/173.html#L386'>L</a>                 386 src/scripting/lua_kernel_base.cpp 	while(lua_next(L, -2) != 0) {</span>
<span class='curline'><a href='../S/173.html#L387'>L</a>                 387 src/scripting/lua_kernel_base.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/173.html#L388'>L</a>                 388 src/scripting/lua_kernel_base.cpp 		char const* function = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/173.html#L391'>L</a>                 391 src/scripting/lua_kernel_base.cpp 		lua_pushnil(L);</span>
<span class='curline'><a href='../S/173.html#L392'>L</a>                 392 src/scripting/lua_kernel_base.cpp 		lua_setfield(L, -3, function);</span>
<span class='curline'><a href='../S/173.html#L394'>L</a>                 394 src/scripting/lua_kernel_base.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/173.html#L397'>L</a>                 397 src/scripting/lua_kernel_base.cpp 	lua_getglobal(L, "debug");</span>
<span class='curline'><a href='../S/173.html#L398'>L</a>                 398 src/scripting/lua_kernel_base.cpp 	lua_pushnil(L);</span>
<span class='curline'><a href='../S/173.html#L399'>L</a>                 399 src/scripting/lua_kernel_base.cpp 	while(lua_next(L, -2) != 0) {</span>
<span class='curline'><a href='../S/173.html#L400'>L</a>                 400 src/scripting/lua_kernel_base.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/173.html#L401'>L</a>                 401 src/scripting/lua_kernel_base.cpp 		char const* function = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/173.html#L403'>L</a>                 403 src/scripting/lua_kernel_base.cpp 		lua_pushnil(L);										//getinfo is needed for ilua strict mode</span>
<span class='curline'><a href='../S/173.html#L404'>L</a>                 404 src/scripting/lua_kernel_base.cpp 		lua_setfield(L, -3, function);</span>
<span class='curline'><a href='../S/173.html#L406'>L</a>                 406 src/scripting/lua_kernel_base.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/173.html#L409'>L</a>                 409 src/scripting/lua_kernel_base.cpp 	lua_pushnil(L);</span>
<span class='curline'><a href='../S/173.html#L410'>L</a>                 410 src/scripting/lua_kernel_base.cpp 	lua_setglobal(L, "dofile");</span>
<span class='curline'><a href='../S/173.html#L411'>L</a>                 411 src/scripting/lua_kernel_base.cpp 	lua_pushnil(L);</span>
<span class='curline'><a href='../S/173.html#L412'>L</a>                 412 src/scripting/lua_kernel_base.cpp 	lua_setglobal(L, "loadfile");</span>
<span class='curline'><a href='../S/173.html#L416'>L</a>                 416 src/scripting/lua_kernel_base.cpp 	push_error_handler(L);</span>
<span class='curline'><a href='../S/173.html#L419'>L</a>                 419 src/scripting/lua_kernel_base.cpp 	cmd_log_ &lt;&lt; lua_common::register_gettext_metatable(L);</span>
<span class='curline'><a href='../S/173.html#L422'>L</a>                 422 src/scripting/lua_kernel_base.cpp 	cmd_log_ &lt;&lt; lua_common::register_tstring_metatable(L);</span>
<span class='curline'><a href='../S/173.html#L425'>L</a>                 425 src/scripting/lua_kernel_base.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/173.html#L430'>L</a>                 430 src/scripting/lua_kernel_base.cpp 	lua_cpp::register_metatable(L);</span>
<span class='curline'><a href='../S/173.html#L477'>L</a>                 477 src/scripting/lua_kernel_base.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/173.html#L478'>L</a>                 478 src/scripting/lua_kernel_base.cpp 	if (!lua_istable(L,-1)) {</span>
<span class='curline'><a href='../S/173.html#L479'>L</a>                 479 src/scripting/lua_kernel_base.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/173.html#L481'>L</a>                 481 src/scripting/lua_kernel_base.cpp 	luaL_setfuncs(L, callbacks, 0);</span>
<span class='curline'><a href='../S/173.html#L483'>L</a>                 483 src/scripting/lua_kernel_base.cpp 	lua_setglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/173.html#L488'>L</a>                 488 src/scripting/lua_kernel_base.cpp 	lua_getglobal(L, "print");</span>
<span class='curline'><a href='../S/173.html#L489'>L</a>                 489 src/scripting/lua_kernel_base.cpp 	lua_setglobal(L, "std_print"); //storing original impl as 'std_print'</span>
<span class='curline'><a href='../S/173.html#L490'>L</a>                 490 src/scripting/lua_kernel_base.cpp 	lua_settop(L, 0); //clear stack, just to be sure</span>
<span class='curline'><a href='../S/173.html#L492'>L</a>                 492 src/scripting/lua_kernel_base.cpp 	lua_pushcfunction(L, &amp;dispatch&lt;&amp;lua_kernel_base::intf_print&gt;);</span>
<span class='curline'><a href='../S/173.html#L493'>L</a>                 493 src/scripting/lua_kernel_base.cpp 	lua_setglobal(L, "print");</span>
<span class='curline'><a href='../S/173.html#L497'>L</a>                 497 src/scripting/lua_kernel_base.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/173.html#L498'>L</a>                 498 src/scripting/lua_kernel_base.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/173.html#L499'>L</a>                 499 src/scripting/lua_kernel_base.cpp 	lua_setfield(L, -2, "package");</span>
<span class='curline'><a href='../S/173.html#L500'>L</a>                 500 src/scripting/lua_kernel_base.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/173.html#L501'>L</a>                 501 src/scripting/lua_kernel_base.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/173.html#L502'>L</a>                 502 src/scripting/lua_kernel_base.cpp 	lua_pushstring(L, "lua/package.lua");</span>
<span class='curline'><a href='../S/173.html#L503'>L</a>                 503 src/scripting/lua_kernel_base.cpp 	int res = intf_require(L);</span>
<span class='curline'><a href='../S/173.html#L526'>L</a>                 526 src/scripting/lua_kernel_base.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/173.html#L527'>L</a>                 527 src/scripting/lua_kernel_base.cpp 	lua_newtable(L);</span>
<span class='curline'><a href='../S/173.html#L528'>L</a>                 528 src/scripting/lua_kernel_base.cpp 	luaL_setfuncs(L, map_callbacks, 0);</span>
<span class='curline'><a href='../S/173.html#L529'>L</a>                 529 src/scripting/lua_kernel_base.cpp 	lua_setfield(L, -2, "map");</span>
<span class='curline'><a href='../S/173.html#L530'>L</a>                 530 src/scripting/lua_kernel_base.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/173.html#L535'>L</a>                 535 src/scripting/lua_kernel_base.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/173.html#L536'>L</a>                 536 src/scripting/lua_kernel_base.cpp 	lua_newuserdata(L, 0);</span>
<span class='curline'><a href='../S/173.html#L537'>L</a>                 537 src/scripting/lua_kernel_base.cpp 	lua_createtable(L, 0, 3);</span>
<span class='curline'><a href='../S/173.html#L538'>L</a>                 538 src/scripting/lua_kernel_base.cpp 	lua_pushcfunction(L, &amp;dispatch&lt;&amp;lua_kernel_base::impl_game_config_get&gt;);</span>
<span class='curline'><a href='../S/173.html#L539'>L</a>                 539 src/scripting/lua_kernel_base.cpp 	lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/173.html#L540'>L</a>                 540 src/scripting/lua_kernel_base.cpp 	lua_pushcfunction(L, &amp;dispatch&lt;&amp;lua_kernel_base::impl_game_config_set&gt;);</span>
<span class='curline'><a href='../S/173.html#L541'>L</a>                 541 src/scripting/lua_kernel_base.cpp 	lua_setfield(L, -2, "__newindex");</span>
<span class='curline'><a href='../S/173.html#L542'>L</a>                 542 src/scripting/lua_kernel_base.cpp 	lua_pushstring(L, "game config");</span>
<span class='curline'><a href='../S/173.html#L543'>L</a>                 543 src/scripting/lua_kernel_base.cpp 	lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/173.html#L544'>L</a>                 544 src/scripting/lua_kernel_base.cpp 	lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/173.html#L545'>L</a>                 545 src/scripting/lua_kernel_base.cpp 	lua_setfield(L, -2, "game_config");</span>
<span class='curline'><a href='../S/173.html#L546'>L</a>                 546 src/scripting/lua_kernel_base.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/173.html#L550'>L</a>                 550 src/scripting/lua_kernel_base.cpp 	lua_rng::load_tables(L);</span>
<span class='curline'><a href='../S/173.html#L553'>L</a>                 553 src/scripting/lua_kernel_base.cpp 	luaL_newmetatable(L, Gen);</span>
<span class='curline'><a href='../S/173.html#L559'>L</a>                 559 src/scripting/lua_kernel_base.cpp 	luaL_setfuncs(L, generator, 0);</span>
<span class='curline'><a href='../S/173.html#L562'>L</a>                 562 src/scripting/lua_kernel_base.cpp 	cmd_log_ &lt;&lt; lua_formula_bridge::register_metatables(L);</span>
<span class='curline'><a href='../S/173.html#L567'>L</a>                 567 src/scripting/lua_kernel_base.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/173.html#L568'>L</a>                 568 src/scripting/lua_kernel_base.cpp 	luaW_getglobal(L, "wesnoth", "require");</span>
<span class='curline'><a href='../S/173.html#L569'>L</a>                 569 src/scripting/lua_kernel_base.cpp 	lua_pushstring(L, "lua/ilua.lua");</span>
<span class='curline'><a href='../S/173.html#L572'>L</a>                 572 src/scripting/lua_kernel_base.cpp 		lua_pushstring(L, "set_strict");</span>
<span class='curline'><a href='../S/173.html#L573'>L</a>                 573 src/scripting/lua_kernel_base.cpp 		lua_gettable(L, -2);</span>
<span class='curline'><a href='../S/173.html#L580'>L</a>                 580 src/scripting/lua_kernel_base.cpp 		lua_setglobal(L, "ilua"); //save ilua table as a global</span>
<span class='curline'><a href='../S/173.html#L584'>L</a>                 584 src/scripting/lua_kernel_base.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/173.html#L622'>L</a>                 622 src/scripting/lua_kernel_base.cpp bool lua_kernel_base::protected_call(lua_State * L, int nArgs, int nRets, error_handler e_h)</span>
<span class='curline'><a href='../S/173.html#L624'>L</a>                 624 src/scripting/lua_kernel_base.cpp 	int errcode = luaW_pcall_internal(L, nArgs, nRets);</span>
<span class='curline'><a href='../S/173.html#L627'>L</a>                 627 src/scripting/lua_kernel_base.cpp 		char const * msg = lua_tostring(L, -1);</span>
<span class='curline'><a href='../S/173.html#L641'>L</a>                 641 src/scripting/lua_kernel_base.cpp 		if(lua_isstring(L, -1)) {</span>
<span class='curline'><a href='../S/173.html#L644'>L</a>                 644 src/scripting/lua_kernel_base.cpp 			context += lua_typename(L, lua_type(L, -1));</span>
<span class='curline'><a href='../S/173.html#L647'>L</a>                 647 src/scripting/lua_kernel_base.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/173.html#L740'>L</a>                 740 src/scripting/lua_kernel_base.cpp int lua_kernel_base::intf_dofile(lua_State* L)</span>
<span class='curline'><a href='../S/173.html#L742'>L</a>                 742 src/scripting/lua_kernel_base.cpp 	luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/173.html#L743'>L</a>                 743 src/scripting/lua_kernel_base.cpp 	lua_rotate(L, 1, -1);</span>
<span class='curline'><a href='../S/173.html#L744'>L</a>                 744 src/scripting/lua_kernel_base.cpp 	if (lua_fileops::load_file(L) != 1) return 0;</span>
<span class='curline'><a href='../S/173.html#L746'>L</a>                 746 src/scripting/lua_kernel_base.cpp 	lua_rotate(L, 1, 1);</span>
<span class='curline'><a href='../S/173.html#L750'>L</a>                 750 src/scripting/lua_kernel_base.cpp 	lua_call(L, lua_gettop(L) - 1, LUA_MULTRET);</span>
<span class='curline'><a href='../S/173.html#L751'>L</a>                 751 src/scripting/lua_kernel_base.cpp 	return lua_gettop(L);</span>
<span class='curline'><a href='../S/173.html#L760'>L</a>                 760 src/scripting/lua_kernel_base.cpp int lua_kernel_base::intf_require(lua_State* L)</span>
<span class='curline'><a href='../S/173.html#L762'>L</a>                 762 src/scripting/lua_kernel_base.cpp 	const char * m = luaL_checkstring(L, 1);</span>
<span class='curline'><a href='../S/173.html#L764'>L</a>                 764 src/scripting/lua_kernel_base.cpp 		return luaL_argerror(L, 1, "found a null string argument to wesnoth require");</span>
<span class='curline'><a href='../S/173.html#L769'>L</a>                 769 src/scripting/lua_kernel_base.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/173.html#L770'>L</a>                 770 src/scripting/lua_kernel_base.cpp 	lua_pushstring(L, "package");</span>
<span class='curline'><a href='../S/173.html#L771'>L</a>                 771 src/scripting/lua_kernel_base.cpp 	lua_rawget(L, -2);</span>
<span class='curline'><a href='../S/173.html#L772'>L</a>                 772 src/scripting/lua_kernel_base.cpp 	lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/173.html#L773'>L</a>                 773 src/scripting/lua_kernel_base.cpp 	lua_rawget(L, -2);</span>
<span class='curline'><a href='../S/173.html#L774'>L</a>                 774 src/scripting/lua_kernel_base.cpp 	if(!lua_isnil(L, -1) &amp;&amp; !game_config::debug_lua) {</span>
<span class='curline'><a href='../S/173.html#L777'>L</a>                 777 src/scripting/lua_kernel_base.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/173.html#L778'>L</a>                 778 src/scripting/lua_kernel_base.cpp 	lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/173.html#L781'>L</a>                 781 src/scripting/lua_kernel_base.cpp 	if(lua_fileops::load_file(L) != 1) {</span>
<span class='curline'><a href='../S/173.html#L788'>L</a>                 788 src/scripting/lua_kernel_base.cpp 	if (!this-&gt;protected_call(L, 0, 1, std::bind(&amp;lua_kernel_base::log_error, this, _1, _2))) {</span>
<span class='curline'><a href='../S/173.html#L794'>L</a>                 794 src/scripting/lua_kernel_base.cpp 	lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/173.html#L795'>L</a>                 795 src/scripting/lua_kernel_base.cpp 	lua_pushvalue(L, -2);</span>
<span class='curline'><a href='../S/173.html#L799'>L</a>                 799 src/scripting/lua_kernel_base.cpp 	lua_settable(L, -4);</span>
<span class='curline'><a href='../S/173.html#L803'>L</a>                 803 src/scripting/lua_kernel_base.cpp int lua_kernel_base::intf_kernel_type(lua_State* L)</span>
<span class='curline'><a href='../S/173.html#L805'>L</a>                 805 src/scripting/lua_kernel_base.cpp 	lua_push(L, my_name());</span>
<span class='curline'><a href='../S/173.html#L808'>L</a>                 808 src/scripting/lua_kernel_base.cpp int lua_kernel_base::impl_game_config_get(lua_State* L)</span>
<span class='curline'><a href='../S/173.html#L810'>L</a>                 810 src/scripting/lua_kernel_base.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/173.html#L824'>L</a>                 824 src/scripting/lua_kernel_base.cpp int lua_kernel_base::impl_game_config_set(lua_State* L)</span>
<span class='curline'><a href='../S/173.html#L827'>L</a>                 827 src/scripting/lua_kernel_base.cpp 	err_msg += luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/173.html#L828'>L</a>                 828 src/scripting/lua_kernel_base.cpp 	return luaL_argerror(L, 2, err_msg.c_str());</span>
<span class='curline'><a href='../S/173.html#L838'>L</a>                 838 src/scripting/lua_kernel_base.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/173.html#L839'>L</a>                 839 src/scripting/lua_kernel_base.cpp 	lua_pushcfunction(L, luaopen_package);</span>
<span class='curline'><a href='../S/173.html#L840'>L</a>                 840 src/scripting/lua_kernel_base.cpp 	lua_pushstring(L, "package");</span>
<span class='curline'><a href='../S/173.html#L841'>L</a>                 841 src/scripting/lua_kernel_base.cpp 	lua_call(L, 1, 0);</span>
<span class='curline'><a href='../S/173.html#L846'>L</a>                 846 src/scripting/lua_kernel_base.cpp 	lua_State* L = mState;</span>
<span class='curline'><a href='../S/173.html#L847'>L</a>                 847 src/scripting/lua_kernel_base.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/173.html#L849'>L</a>                 849 src/scripting/lua_kernel_base.cpp 	luaW_getglobal(L, "wesnoth", "require");</span>
<span class='curline'><a href='../S/173.html#L850'>L</a>                 850 src/scripting/lua_kernel_base.cpp 	lua_pushstring(L, "lua/core.lua");</span>
<span class='curline'><a href='../S/173.html#L854'>L</a>                 854 src/scripting/lua_kernel_base.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/173.html#L864'>L</a>                 864 src/scripting/lua_kernel_base.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/173.html#L866'>L</a>                 866 src/scripting/lua_kernel_base.cpp 	int idx = lua_gettop(L);</span>
<span class='curline'><a href='../S/173.html#L867'>L</a>                 867 src/scripting/lua_kernel_base.cpp 	lua_getglobal(L, "_G");</span>
<span class='curline'><a href='../S/173.html#L868'>L</a>                 868 src/scripting/lua_kernel_base.cpp 	lua_pushnil(L);</span>
<span class='curline'><a href='../S/173.html#L870'>L</a>                 870 src/scripting/lua_kernel_base.cpp 	while (lua_next(L, idx+1) != 0) {</span>
<span class='curline'><a href='../S/173.html#L871'>L</a>                 871 src/scripting/lua_kernel_base.cpp 		if (lua_isstring(L, -2)) {</span>
<span class='curline'><a href='../S/173.html#L872'>L</a>                 872 src/scripting/lua_kernel_base.cpp 			ret.push_back(lua_tostring(L,-2));</span>
<span class='curline'><a href='../S/173.html#L874'>L</a>                 874 src/scripting/lua_kernel_base.cpp 		lua_pop(L,1);</span>
<span class='curline'><a href='../S/173.html#L876'>L</a>                 876 src/scripting/lua_kernel_base.cpp 	lua_settop(L, idx);</span>
<span class='curline'><a href='../S/173.html#L892'>L</a>                 892 src/scripting/lua_kernel_base.cpp 	lua_State* L = mState;</span>
<span class='curline'><a href='../S/173.html#L893'>L</a>                 893 src/scripting/lua_kernel_base.cpp 	int save_stack = lua_gettop(L);</span>
<span class='curline'><a href='../S/173.html#L894'>L</a>                 894 src/scripting/lua_kernel_base.cpp 	int result = luaL_loadstring(L, load.c_str());</span>
<span class='curline'><a href='../S/173.html#L898'>L</a>                 898 src/scripting/lua_kernel_base.cpp 		LOG_LUA &lt;&lt; luaL_checkstring(L, -1) &lt;&lt; '\n';</span>
<span class='curline'><a href='../S/173.html#L900'>L</a>                 900 src/scripting/lua_kernel_base.cpp 		lua_settop(L, save_stack);</span>
<span class='curline'><a href='../S/173.html#L904'>L</a>                 904 src/scripting/lua_kernel_base.cpp 	luaW_pcall(L, 0, 1);</span>
<span class='curline'><a href='../S/173.html#L905'>L</a>                 905 src/scripting/lua_kernel_base.cpp 	if(lua_istable(L, -1) || lua_isuserdata(L, -1)) {</span>
<span class='curline'><a href='../S/173.html#L906'>L</a>                 906 src/scripting/lua_kernel_base.cpp 		int top = lua_gettop(L);</span>
<span class='curline'><a href='../S/173.html#L907'>L</a>                 907 src/scripting/lua_kernel_base.cpp 		int obj = lua_absindex(L, -1);</span>
<span class='curline'><a href='../S/173.html#L908'>L</a>                 908 src/scripting/lua_kernel_base.cpp 		if(luaL_getmetafield(L, obj, "__tab_enum") == LUA_TFUNCTION) {</span>
<span class='curline'><a href='../S/173.html#L909'>L</a>                 909 src/scripting/lua_kernel_base.cpp 			lua_pushvalue(L, obj);</span>
<span class='curline'><a href='../S/173.html#L910'>L</a>                 910 src/scripting/lua_kernel_base.cpp 			lua_pushlstring(L, partial_name.c_str(), partial_name.size());</span>
<span class='curline'><a href='../S/173.html#L911'>L</a>                 911 src/scripting/lua_kernel_base.cpp 			luaW_pcall(L, 2, 1);</span>
<span class='curline'><a href='../S/173.html#L912'>L</a>                 912 src/scripting/lua_kernel_base.cpp 			ret = lua_check&lt;std::vector&lt;std::string&gt;&gt;(L, -1);</span>
<span class='curline'><a href='../S/173.html#L914'>L</a>                 914 src/scripting/lua_kernel_base.cpp 			lua_settop(L, top);</span>
<span class='curline'><a href='../S/173.html#L916'>L</a>                 916 src/scripting/lua_kernel_base.cpp 			for(lua_pushnil(L); lua_next(L, obj); lua_pop(L, 1)) {</span>
<span class='curline'><a href='../S/173.html#L917'>L</a>                 917 src/scripting/lua_kernel_base.cpp 				if(lua_isstring(L, -2)) {</span>
<span class='curline'><a href='../S/173.html#L918'>L</a>                 918 src/scripting/lua_kernel_base.cpp 					std::string attr = lua_tostring(L, -2);</span>
<span class='curline'><a href='../S/173.html#L937'>L</a>                 937 src/scripting/lua_kernel_base.cpp 	lua_settop(L, save_stack);</span>
<span class='curline'><a href='../S/173.html#L941'>L</a>                 941 src/scripting/lua_kernel_base.cpp lua_kernel_base*&amp; lua_kernel_base::get_lua_kernel_base_ptr(lua_State *L)</span>
<span class='curline'><a href='../S/173.html#L947'>L</a>                 947 src/scripting/lua_kernel_base.cpp 	return *reinterpret_cast&lt;lua_kernel_base**&gt;(lua_getextraspace(L));</span>
<span class='curline'><a href='../S/191.html#L72'>L</a>                  72 src/scripting/lua_kernel_base.hpp 	static T&amp; get_lua_kernel(lua_State *L)</span>
<span class='curline'><a href='../S/191.html#L74'>L</a>                  74 src/scripting/lua_kernel_base.hpp 		return *static_cast&lt;T*&gt;(get_lua_kernel_base_ptr(L));</span>
<span class='curline'><a href='../S/191.html#L116'>L</a>                 116 src/scripting/lua_kernel_base.hpp 	int intf_print(lua_State * L);</span>
<span class='curline'><a href='../S/191.html#L120'>L</a>                 120 src/scripting/lua_kernel_base.hpp 	int video_dispatch_impl(lua_State* L, video_function callback);</span>
<span class='curline'><a href='../S/191.html#L123'>L</a>                 123 src/scripting/lua_kernel_base.hpp 	int intf_show_lua_console(lua_State * L);</span>
<span class='curline'><a href='../S/191.html#L128'>L</a>                 128 src/scripting/lua_kernel_base.hpp 	static bool protected_call(lua_State * L, int nArgs, int nRets, error_handler);</span>
<span class='curline'><a href='../S/191.html#L136'>L</a>                 136 src/scripting/lua_kernel_base.hpp 	int intf_dofile(lua_State * L);</span>
<span class='curline'><a href='../S/191.html#L139'>L</a>                 139 src/scripting/lua_kernel_base.hpp 	int intf_require(lua_State * L);</span>
<span class='curline'><a href='../S/191.html#L141'>L</a>                 141 src/scripting/lua_kernel_base.hpp 	int intf_kernel_type(lua_State* L);</span>
<span class='curline'><a href='../S/191.html#L143'>L</a>                 143 src/scripting/lua_kernel_base.hpp 	virtual int impl_game_config_get(lua_State* L);</span>
<span class='curline'><a href='../S/191.html#L144'>L</a>                 144 src/scripting/lua_kernel_base.hpp 	virtual int impl_game_config_set(lua_State* L);</span>
<span class='curline'><a href='../S/191.html#L146'>L</a>                 146 src/scripting/lua_kernel_base.hpp 	static lua_kernel_base*&amp; get_lua_kernel_base_ptr(lua_State *L);</span>
<span class='curline'><a href='../S/183.html#L35'>L</a>                  35 src/scripting/lua_map_location_ops.cpp int intf_get_direction(lua_State* L)</span>
<span class='curline'><a href='../S/183.html#L38'>L</a>                  38 src/scripting/lua_map_location_ops.cpp 	if(!luaW_tolocation(L, 1, l)) {</span>
<span class='curline'><a href='../S/183.html#L39'>L</a>                  39 src/scripting/lua_map_location_ops.cpp 		return luaL_argerror(L, 1, "get_direction: first argument(S) must be a location");</span>
<span class='curline'><a href='../S/183.html#L41'>L</a>                  41 src/scripting/lua_map_location_ops.cpp 	int nargs = lua_gettop(L);</span>
<span class='curline'><a href='../S/183.html#L43'>L</a>                  43 src/scripting/lua_map_location_ops.cpp 		luaL_error(L, "get_direction: not missing direction argument");</span>
<span class='curline'><a href='../S/183.html#L49'>L</a>                  49 src/scripting/lua_map_location_ops.cpp 		n = luaL_checkinteger(L, -1);</span>
<span class='curline'><a href='../S/183.html#L50'>L</a>                  50 src/scripting/lua_map_location_ops.cpp 		lua_pop(L,1);</span>
<span class='curline'><a href='../S/183.html#L54'>L</a>                  54 src/scripting/lua_map_location_ops.cpp 	if (lua_isstring(L, -1)) {</span>
<span class='curline'><a href='../S/183.html#L55'>L</a>                  55 src/scripting/lua_map_location_ops.cpp 		d = map_location::parse_direction(luaL_checkstring(L,-1));</span>
<span class='curline'><a href='../S/183.html#L56'>L</a>                  56 src/scripting/lua_map_location_ops.cpp 		lua_pop(L,1);</span>
<span class='curline'><a href='../S/183.html#L59'>L</a>                  59 src/scripting/lua_map_location_ops.cpp 		msg += lua_typename(L, lua_type(L, -1));</span>
<span class='curline'><a href='../S/183.html#L60'>L</a>                  60 src/scripting/lua_map_location_ops.cpp 		return luaL_argerror(L, -1, msg.c_str());</span>
<span class='curline'><a href='../S/183.html#L64'>L</a>                  64 src/scripting/lua_map_location_ops.cpp 	luaW_pushlocation(L, result);</span>
<span class='curline'><a href='../S/183.html#L71'>L</a>                  71 src/scripting/lua_map_location_ops.cpp int intf_vector_sum(lua_State* L)</span>
<span class='curline'><a href='../S/183.html#L74'>L</a>                  74 src/scripting/lua_map_location_ops.cpp 	if(!luaW_tolocation(L, 1, l1) || !luaW_tolocation(L, 2, l2)) {</span>
<span class='curline'><a href='../S/183.html#L75'>L</a>                  75 src/scripting/lua_map_location_ops.cpp 		lua_pushstring(L, "vector_sum: requires two locations");</span>
<span class='curline'><a href='../S/183.html#L76'>L</a>                  76 src/scripting/lua_map_location_ops.cpp 		return lua_error(L);</span>
<span class='curline'><a href='../S/183.html#L79'>L</a>                  79 src/scripting/lua_map_location_ops.cpp 	luaW_pushlocation(L, l1.vector_sum_assign(l2));</span>
<span class='curline'><a href='../S/183.html#L86'>L</a>                  86 src/scripting/lua_map_location_ops.cpp int intf_vector_diff(lua_State* L)</span>
<span class='curline'><a href='../S/183.html#L89'>L</a>                  89 src/scripting/lua_map_location_ops.cpp 	if(!luaW_tolocation(L, 1, l1) || !luaW_tolocation(L, 2, l2)) {</span>
<span class='curline'><a href='../S/183.html#L90'>L</a>                  90 src/scripting/lua_map_location_ops.cpp 		lua_pushstring(L, "vector_sum: requires two locations");</span>
<span class='curline'><a href='../S/183.html#L91'>L</a>                  91 src/scripting/lua_map_location_ops.cpp 		return lua_error(L);</span>
<span class='curline'><a href='../S/183.html#L94'>L</a>                  94 src/scripting/lua_map_location_ops.cpp 	luaW_pushlocation(L, l1.vector_difference_assign(l2));</span>
<span class='curline'><a href='../S/183.html#L103'>L</a>                 103 src/scripting/lua_map_location_ops.cpp int intf_vector_negation(lua_State* L)</span>
<span class='curline'><a href='../S/183.html#L106'>L</a>                 106 src/scripting/lua_map_location_ops.cpp 	if(!luaW_tolocation(L, 1, l1)) {</span>
<span class='curline'><a href='../S/183.html#L107'>L</a>                 107 src/scripting/lua_map_location_ops.cpp 		return luaL_argerror(L, 1, "expected a location");</span>
<span class='curline'><a href='../S/183.html#L110'>L</a>                 110 src/scripting/lua_map_location_ops.cpp 	luaW_pushlocation(L, l1.vector_negation());</span>
<span class='curline'><a href='../S/183.html#L117'>L</a>                 117 src/scripting/lua_map_location_ops.cpp int intf_rotate_right_around_center(lua_State* L)</span>
<span class='curline'><a href='../S/183.html#L119'>L</a>                 119 src/scripting/lua_map_location_ops.cpp 	int k = luaL_checkinteger(L, -1);</span>
<span class='curline'><a href='../S/183.html#L120'>L</a>                 120 src/scripting/lua_map_location_ops.cpp 	lua_pop(L,1);</span>
<span class='curline'><a href='../S/183.html#L122'>L</a>                 122 src/scripting/lua_map_location_ops.cpp 	if(!luaW_tolocation(L, 1, loc) || !luaW_tolocation(L, 2, center)) {</span>
<span class='curline'><a href='../S/183.html#L123'>L</a>                 123 src/scripting/lua_map_location_ops.cpp 		lua_pushstring(L, "rotate_right_around_center: requires two locations");</span>
<span class='curline'><a href='../S/183.html#L124'>L</a>                 124 src/scripting/lua_map_location_ops.cpp 		return lua_error(L);</span>
<span class='curline'><a href='../S/183.html#L127'>L</a>                 127 src/scripting/lua_map_location_ops.cpp 	luaW_pushlocation(L, loc.rotate_right_around_center(center, k));</span>
<span class='curline'><a href='../S/183.html#L136'>L</a>                 136 src/scripting/lua_map_location_ops.cpp int intf_tiles_adjacent(lua_State* L)</span>
<span class='curline'><a href='../S/183.html#L139'>L</a>                 139 src/scripting/lua_map_location_ops.cpp 	if(!luaW_tolocation(L, 1, l1) || !luaW_tolocation(L, 2, l2)) {</span>
<span class='curline'><a href='../S/183.html#L140'>L</a>                 140 src/scripting/lua_map_location_ops.cpp 		lua_pushstring(L, "vector_sum: requires two locations");</span>
<span class='curline'><a href='../S/183.html#L141'>L</a>                 141 src/scripting/lua_map_location_ops.cpp 		return lua_error(L);</span>
<span class='curline'><a href='../S/183.html#L144'>L</a>                 144 src/scripting/lua_map_location_ops.cpp 	lua_pushboolean(L, tiles_adjacent(l1,l2));</span>
<span class='curline'><a href='../S/183.html#L153'>L</a>                 153 src/scripting/lua_map_location_ops.cpp int intf_get_adjacent_tiles(lua_State* L)</span>
<span class='curline'><a href='../S/183.html#L156'>L</a>                 156 src/scripting/lua_map_location_ops.cpp 	if(!luaW_tolocation(L, 1, l1)) {</span>
<span class='curline'><a href='../S/183.html#L157'>L</a>                 157 src/scripting/lua_map_location_ops.cpp 		return luaL_argerror(L, 1, "expected a location");</span>
<span class='curline'><a href='../S/183.html#L164'>L</a>                 164 src/scripting/lua_map_location_ops.cpp 		luaW_pushlocation(L, locs[i]);</span>
<span class='curline'><a href='../S/183.html#L175'>L</a>                 175 src/scripting/lua_map_location_ops.cpp int intf_distance_between(lua_State* L)</span>
<span class='curline'><a href='../S/183.html#L178'>L</a>                 178 src/scripting/lua_map_location_ops.cpp 	if(!luaW_tolocation(L, 1, l1) || !luaW_tolocation(L, 2, l2)) {</span>
<span class='curline'><a href='../S/183.html#L179'>L</a>                 179 src/scripting/lua_map_location_ops.cpp 		lua_pushstring(L, "distance_between: requires two locations");</span>
<span class='curline'><a href='../S/183.html#L180'>L</a>                 180 src/scripting/lua_map_location_ops.cpp 		return lua_error(L);</span>
<span class='curline'><a href='../S/183.html#L183'>L</a>                 183 src/scripting/lua_map_location_ops.cpp 	lua_pushinteger(L, distance_between(l1,l2));</span>
<span class='curline'><a href='../S/183.html#L190'>L</a>                 190 src/scripting/lua_map_location_ops.cpp int intf_get_in_basis_N_NE(lua_State* L)</span>
<span class='curline'><a href='../S/183.html#L193'>L</a>                 193 src/scripting/lua_map_location_ops.cpp 	if(!luaW_tolocation(L, 1, l1)) {</span>
<span class='curline'><a href='../S/183.html#L194'>L</a>                 194 src/scripting/lua_map_location_ops.cpp 		return luaL_argerror(L, 1, "expected a location");</span>
<span class='curline'><a href='../S/183.html#L198'>L</a>                 198 src/scripting/lua_map_location_ops.cpp 	lua_pushinteger(L, r.first);</span>
<span class='curline'><a href='../S/183.html#L199'>L</a>                 199 src/scripting/lua_map_location_ops.cpp 	lua_pushinteger(L, r.second);</span>
<span class='curline'><a href='../S/183.html#L208'>L</a>                 208 src/scripting/lua_map_location_ops.cpp int intf_get_relative_dir(lua_State* L)</span>
<span class='curline'><a href='../S/183.html#L211'>L</a>                 211 src/scripting/lua_map_location_ops.cpp 	if(!luaW_tolocation(L, 1, l1) || !luaW_tolocation(L, 2, l2)) {</span>
<span class='curline'><a href='../S/183.html#L212'>L</a>                 212 src/scripting/lua_map_location_ops.cpp 		lua_pushstring(L, "get_relative_dir: requires two locations");</span>
<span class='curline'><a href='../S/183.html#L213'>L</a>                 213 src/scripting/lua_map_location_ops.cpp 		return lua_error(L);</span>
<span class='curline'><a href='../S/183.html#L217'>L</a>                 217 src/scripting/lua_map_location_ops.cpp 	lua_pushlstring(L, dir.c_str(), dir.length());</span>
<span class='curline'><a href='../S/181.html#L25'>L</a>                  25 src/scripting/lua_pathfind_cost_calculator.hpp 	lua_State *L;</span>
<span class='curline'><a href='../S/181.html#L28'>L</a>                  28 src/scripting/lua_pathfind_cost_calculator.hpp 	lua_pathfind_cost_calculator(lua_State *L_, int i): L(L_), index(i) {}</span>
<span class='curline'><a href='../S/181.html#L32'>L</a>                  32 src/scripting/lua_pathfind_cost_calculator.hpp 		lua_pushvalue(L, index);</span>
<span class='curline'><a href='../S/181.html#L33'>L</a>                  33 src/scripting/lua_pathfind_cost_calculator.hpp 		lua_pushinteger(L, loc.wml_x());</span>
<span class='curline'><a href='../S/181.html#L34'>L</a>                  34 src/scripting/lua_pathfind_cost_calculator.hpp 		lua_pushinteger(L, loc.wml_y());</span>
<span class='curline'><a href='../S/181.html#L35'>L</a>                  35 src/scripting/lua_pathfind_cost_calculator.hpp 		lua_pushnumber(L, so_far);</span>
<span class='curline'><a href='../S/181.html#L37'>L</a>                  37 src/scripting/lua_pathfind_cost_calculator.hpp 		if (!luaW_pcall(L, 3, 1)) {</span>
<span class='curline'><a href='../S/181.html#L42'>L</a>                  42 src/scripting/lua_pathfind_cost_calculator.hpp 		double cost = lua_tonumber(L, -1);</span>
<span class='curline'><a href='../S/181.html#L43'>L</a>                  43 src/scripting/lua_pathfind_cost_calculator.hpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/188.html#L29'>L</a>                  29 src/scripting/lua_preferences.cpp static int impl_preferences_get(lua_State* L)</span>
<span class='curline'><a href='../S/188.html#L31'>L</a>                  31 src/scripting/lua_preferences.cpp 	std::string preference_name = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/188.html#L32'>L</a>                  32 src/scripting/lua_preferences.cpp 	luaW_pushscalar(L, preferences::get_as_attribute(preference_name));</span>
<span class='curline'><a href='../S/188.html#L43'>L</a>                  43 src/scripting/lua_preferences.cpp static int impl_preferences_set(lua_State* L)</span>
<span class='curline'><a href='../S/188.html#L45'>L</a>                  45 src/scripting/lua_preferences.cpp 	std::string preference_name = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/188.html#L47'>L</a>                  47 src/scripting/lua_preferences.cpp 	luaW_toscalar(L, 3, value);</span>
<span class='curline'><a href='../S/188.html#L54'>L</a>                  54 src/scripting/lua_preferences.cpp 	std::string register_table(lua_State* L)</span>
<span class='curline'><a href='../S/188.html#L57'>L</a>                  57 src/scripting/lua_preferences.cpp 		lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/188.html#L60'>L</a>                  60 src/scripting/lua_preferences.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/188.html#L61'>L</a>                  61 src/scripting/lua_preferences.cpp 		lua_pushcfunction(L, impl_preferences_get);</span>
<span class='curline'><a href='../S/188.html#L62'>L</a>                  62 src/scripting/lua_preferences.cpp 		lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/188.html#L63'>L</a>                  63 src/scripting/lua_preferences.cpp 		lua_pushcfunction(L, impl_preferences_set);</span>
<span class='curline'><a href='../S/188.html#L64'>L</a>                  64 src/scripting/lua_preferences.cpp 		lua_setfield(L, -2, "__newindex");</span>
<span class='curline'><a href='../S/188.html#L65'>L</a>                  65 src/scripting/lua_preferences.cpp 		lua_pushstring(L, "src/scripting/lua_preferences.cpp");</span>
<span class='curline'><a href='../S/188.html#L66'>L</a>                  66 src/scripting/lua_preferences.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/188.html#L69'>L</a>                  69 src/scripting/lua_preferences.cpp 		lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/188.html#L70'>L</a>                  70 src/scripting/lua_preferences.cpp 		lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/188.html#L73'>L</a>                  73 src/scripting/lua_preferences.cpp 		lua_setfield(L, -2, "preferences");</span>
<span class='curline'><a href='../S/188.html#L76'>L</a>                  76 src/scripting/lua_preferences.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/172.html#L23'>L</a>                  23 src/scripting/lua_preferences.hpp 	std::string register_table(lua_State* L);</span>
<span class='curline'><a href='../S/175.html#L42'>L</a>                  42 src/scripting/lua_race.cpp static int impl_race_get(lua_State* L)</span>
<span class='curline'><a href='../S/175.html#L44'>L</a>                  44 src/scripting/lua_race.cpp 	char const* m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/175.html#L45'>L</a>                  45 src/scripting/lua_race.cpp 	lua_pushstring(L, "id");</span>
<span class='curline'><a href='../S/175.html#L46'>L</a>                  46 src/scripting/lua_race.cpp 	lua_rawget(L, 1);</span>
<span class='curline'><a href='../S/175.html#L47'>L</a>                  47 src/scripting/lua_race.cpp 	const unit_race* raceptr = unit_types.find_race(lua_tostring(L, -1));</span>
<span class='curline'><a href='../S/175.html#L48'>L</a>                  48 src/scripting/lua_race.cpp 	if(!raceptr) return luaL_argerror(L, 1, "unknown race");</span>
<span class='curline'><a href='../S/175.html#L59'>L</a>                  59 src/scripting/lua_race.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/175.html#L63'>L</a>                  63 src/scripting/lua_race.cpp 				lua_pushlstring(L, id.c_str(), id.length());</span>
<span class='curline'><a href='../S/175.html#L64'>L</a>                  64 src/scripting/lua_race.cpp 				luaW_pushconfig(L, trait);</span>
<span class='curline'><a href='../S/175.html#L65'>L</a>                  65 src/scripting/lua_race.cpp 				lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/175.html#L70'>L</a>                  70 src/scripting/lua_race.cpp 			lua_pushlstring(L, id.c_str(), id.length());</span>
<span class='curline'><a href='../S/175.html#L71'>L</a>                  71 src/scripting/lua_race.cpp 			luaW_pushconfig(L, trait);</span>
<span class='curline'><a href='../S/175.html#L72'>L</a>                  72 src/scripting/lua_race.cpp 			lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/175.html#L77'>L</a>                  77 src/scripting/lua_race.cpp 		new(L) proxy_name_generator(race.generator(unit_race::MALE));</span>
<span class='curline'><a href='../S/175.html#L78'>L</a>                  78 src/scripting/lua_race.cpp 		luaL_getmetatable(L, Gen);</span>
<span class='curline'><a href='../S/175.html#L79'>L</a>                  79 src/scripting/lua_race.cpp 		lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/175.html#L83'>L</a>                  83 src/scripting/lua_race.cpp 		new(L) proxy_name_generator(race.generator(unit_race::FEMALE));</span>
<span class='curline'><a href='../S/175.html#L84'>L</a>                  84 src/scripting/lua_race.cpp 		luaL_getmetatable(L, Gen);</span>
<span class='curline'><a href='../S/175.html#L85'>L</a>                  85 src/scripting/lua_race.cpp 		lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/175.html#L94'>L</a>                  94 src/scripting/lua_race.cpp 	std::string register_metatable(lua_State * L)</span>
<span class='curline'><a href='../S/175.html#L96'>L</a>                  96 src/scripting/lua_race.cpp 		luaL_newmetatable(L, Race);</span>
<span class='curline'><a href='../S/175.html#L102'>L</a>                 102 src/scripting/lua_race.cpp 		luaL_setfuncs(L, callbacks, 0);</span>
<span class='curline'><a href='../S/175.html#L104'>L</a>                 104 src/scripting/lua_race.cpp 		lua_pushstring(L, "race");</span>
<span class='curline'><a href='../S/175.html#L105'>L</a>                 105 src/scripting/lua_race.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/175.html#L111'>L</a>                 111 src/scripting/lua_race.cpp void luaW_pushrace(lua_State *L, const unit_race &amp; race)</span>
<span class='curline'><a href='../S/175.html#L113'>L</a>                 113 src/scripting/lua_race.cpp 	lua_createtable(L, 0, 1);</span>
<span class='curline'><a href='../S/175.html#L114'>L</a>                 114 src/scripting/lua_race.cpp 	lua_pushstring(L, race.id().c_str());</span>
<span class='curline'><a href='../S/175.html#L115'>L</a>                 115 src/scripting/lua_race.cpp 	lua_setfield(L, -2, "id");</span>
<span class='curline'><a href='../S/175.html#L116'>L</a>                 116 src/scripting/lua_race.cpp 	luaL_setmetatable(L, Race);</span>
<span class='curline'><a href='../S/175.html#L119'>L</a>                 119 src/scripting/lua_race.cpp void luaW_pushracetable(lua_State *L)</span>
<span class='curline'><a href='../S/175.html#L122'>L</a>                 122 src/scripting/lua_race.cpp 	lua_createtable(L, 0, races.size());</span>
<span class='curline'><a href='../S/175.html#L127'>L</a>                 127 src/scripting/lua_race.cpp 		luaW_pushrace(L, race.second);</span>
<span class='curline'><a href='../S/175.html#L128'>L</a>                 128 src/scripting/lua_race.cpp 		lua_setfield(L, -2, race.first.c_str());</span>
<span class='curline'><a href='../S/176.html#L38'>L</a>                  38 src/scripting/lua_rng.cpp int impl_rng_create(lua_State* L)</span>
<span class='curline'><a href='../S/176.html#L40'>L</a>                  40 src/scripting/lua_rng.cpp 	uint32_t seed = lua_kernel_base::get_lua_kernel&lt;lua_kernel_base&gt;(L).get_random_seed();</span>
<span class='curline'><a href='../S/176.html#L41'>L</a>                  41 src/scripting/lua_rng.cpp 	new(L) mt_rng(seed);</span>
<span class='curline'><a href='../S/176.html#L42'>L</a>                  42 src/scripting/lua_rng.cpp 	luaL_setmetatable(L, Rng);</span>
<span class='curline'><a href='../S/176.html#L47'>L</a>                  47 src/scripting/lua_rng.cpp int impl_rng_destroy(lua_State* L)</span>
<span class='curline'><a href='../S/176.html#L49'>L</a>                  49 src/scripting/lua_rng.cpp 	mt_rng * d = static_cast&lt; mt_rng *&gt; (luaL_testudata(L, 1, Rng));</span>
<span class='curline'><a href='../S/176.html#L51'>L</a>                  51 src/scripting/lua_rng.cpp 		ERR_LUA &lt;&lt; "rng_destroy called on data of type: " &lt;&lt; lua_typename( L, lua_type( L, 1 ) ) &lt;&lt; std::endl;</span>
<span class='curline'><a href='../S/176.html#L53'>L</a>                  53 src/scripting/lua_rng.cpp 		lua_pushstring(L, "Rng object garbage collection failure");</span>
<span class='curline'><a href='../S/176.html#L54'>L</a>                  54 src/scripting/lua_rng.cpp 		lua_error(L);</span>
<span class='curline'><a href='../S/176.html#L61'>L</a>                  61 src/scripting/lua_rng.cpp int impl_rng_seed(lua_State* L)</span>
<span class='curline'><a href='../S/176.html#L63'>L</a>                  63 src/scripting/lua_rng.cpp 	mt_rng * rng = static_cast&lt;mt_rng *&gt;(luaL_checkudata(L, 1, Rng));</span>
<span class='curline'><a href='../S/176.html#L64'>L</a>                  64 src/scripting/lua_rng.cpp 	std::string seed = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/176.html#L70'>L</a>                  70 src/scripting/lua_rng.cpp int impl_rng_draw(lua_State* L)</span>
<span class='curline'><a href='../S/176.html#L72'>L</a>                  72 src/scripting/lua_rng.cpp 	mt_rng * rng = static_cast&lt;mt_rng *&gt;(luaL_checkudata(L, 1, Rng));</span>
<span class='curline'><a href='../S/176.html#L74'>L</a>                  74 src/scripting/lua_rng.cpp 	lua_pushnumber(L, rng-&gt;get_next_random());</span>
<span class='curline'><a href='../S/176.html#L80'>L</a>                  80 src/scripting/lua_rng.cpp void load_tables(lua_State* L)</span>
<span class='curline'><a href='../S/176.html#L82'>L</a>                  82 src/scripting/lua_rng.cpp 	luaL_newmetatable(L, Rng);</span>
<span class='curline'><a href='../S/176.html#L91'>L</a>                  91 src/scripting/lua_rng.cpp 	luaL_setfuncs(L, callbacks, 0);</span>
<span class='curline'><a href='../S/176.html#L93'>L</a>                  93 src/scripting/lua_rng.cpp 	lua_pushvalue(L, -1); //make a copy of this table, set it to be its own __index table</span>
<span class='curline'><a href='../S/176.html#L94'>L</a>                  94 src/scripting/lua_rng.cpp 	lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/176.html#L96'>L</a>                  96 src/scripting/lua_rng.cpp 	lua_setglobal(L, Rng);</span>
<span class='curline'><a href='../S/200.html#L48'>L</a>                  48 src/scripting/lua_team.cpp static int impl_side_get(lua_State *L)</span>
<span class='curline'><a href='../S/200.html#L51'>L</a>                  51 src/scripting/lua_team.cpp 	team &amp;t = luaW_checkteam(L, 1);</span>
<span class='curline'><a href='../S/200.html#L52'>L</a>                  52 src/scripting/lua_team.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/200.html#L92'>L</a>                  92 src/scripting/lua_team.cpp 		lua_createtable(L, recruits.size(), 0);</span>
<span class='curline'><a href='../S/200.html#L95'>L</a>                  95 src/scripting/lua_team.cpp 			lua_pushstring(L, r.c_str());</span>
<span class='curline'><a href='../S/200.html#L96'>L</a>                  96 src/scripting/lua_team.cpp 			lua_rawseti(L, -2, i++);</span>
<span class='curline'><a href='../S/200.html#L111'>L</a>                 111 src/scripting/lua_team.cpp 	if(luaW_getmetafield(L, 1, m)) {</span>
<span class='curline'><a href='../S/200.html#L123'>L</a>                 123 src/scripting/lua_team.cpp static int impl_side_set(lua_State *L)</span>
<span class='curline'><a href='../S/200.html#L126'>L</a>                 126 src/scripting/lua_team.cpp 	team &amp;t = luaW_checkteam(L, 1);</span>
<span class='curline'><a href='../S/200.html#L127'>L</a>                 127 src/scripting/lua_team.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/200.html#L158'>L</a>                 158 src/scripting/lua_team.cpp 			return luaL_argerror(L, 3, "Invalid share_vision value (should be 'all', 'none', or 'shroud')");</span>
<span class='curline'><a href='../S/200.html#L163'>L</a>                 163 src/scripting/lua_team.cpp 		t.set_carryover_bonus(luaL_checknumber(L, 3));</span>
<span class='curline'><a href='../S/200.html#L169'>L</a>                 169 src/scripting/lua_team.cpp 		if (!lua_istable(L, 3)) return 0;</span>
<span class='curline'><a href='../S/200.html#L171'>L</a>                 171 src/scripting/lua_team.cpp 			lua_rawgeti(L, 3, i);</span>
<span class='curline'><a href='../S/200.html#L172'>L</a>                 172 src/scripting/lua_team.cpp 			if (lua_isnil(L, -1)) break;</span>
<span class='curline'><a href='../S/200.html#L173'>L</a>                 173 src/scripting/lua_team.cpp 			t.add_recruit(lua_tostring(L, -1));</span>
<span class='curline'><a href='../S/200.html#L174'>L</a>                 174 src/scripting/lua_team.cpp 			lua_pop(L, 1);</span>
<span class='curline'><a href='../S/200.html#L181'>L</a>                 181 src/scripting/lua_team.cpp 	return luaL_argerror(L, 2, err_msg.c_str());</span>
<span class='curline'><a href='../S/200.html#L184'>L</a>                 184 src/scripting/lua_team.cpp static int impl_side_equal(lua_State *L)</span>
<span class='curline'><a href='../S/200.html#L187'>L</a>                 187 src/scripting/lua_team.cpp 	team &amp;t1 = luaW_checkteam(L, 1);</span>
<span class='curline'><a href='../S/200.html#L188'>L</a>                 188 src/scripting/lua_team.cpp 	if(team* t2 = luaW_toteam(L, 2)) {</span>
<span class='curline'><a href='../S/200.html#L189'>L</a>                 189 src/scripting/lua_team.cpp 		lua_pushboolean(L, t1.side() == t2-&gt;side());</span>
<span class='curline'><a href='../S/200.html#L191'>L</a>                 191 src/scripting/lua_team.cpp 		lua_pushboolean(L, false);</span>
<span class='curline'><a href='../S/200.html#L198'>L</a>                 198 src/scripting/lua_team.cpp 	std::string register_metatable(lua_State * L)</span>
<span class='curline'><a href='../S/200.html#L200'>L</a>                 200 src/scripting/lua_team.cpp 		luaL_newmetatable(L, Team);</span>
<span class='curline'><a href='../S/200.html#L208'>L</a>                 208 src/scripting/lua_team.cpp 		luaL_setfuncs(L, callbacks, 0);</span>
<span class='curline'><a href='../S/200.html#L210'>L</a>                 210 src/scripting/lua_team.cpp 		lua_pushstring(L, Team);</span>
<span class='curline'><a href='../S/200.html#L211'>L</a>                 211 src/scripting/lua_team.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/200.html#L213'>L</a>                 213 src/scripting/lua_team.cpp 		luaW_getglobal(L, "wesnoth", "match_side");</span>
<span class='curline'><a href='../S/200.html#L214'>L</a>                 214 src/scripting/lua_team.cpp 		lua_setfield(L, -2, "matches");</span>
<span class='curline'><a href='../S/200.html#L220'>L</a>                 220 src/scripting/lua_team.cpp void luaW_pushteam(lua_State *L, team &amp; tm)</span>
<span class='curline'><a href='../S/200.html#L222'>L</a>                 222 src/scripting/lua_team.cpp 	team** t = static_cast&lt;team**&gt;(lua_newuserdata(L, sizeof(team*)));</span>
<span class='curline'><a href='../S/200.html#L224'>L</a>                 224 src/scripting/lua_team.cpp 	luaL_setmetatable(L, Team);</span>
<span class='curline'><a href='../S/200.html#L227'>L</a>                 227 src/scripting/lua_team.cpp team&amp; luaW_checkteam(lua_State* L, int idx)</span>
<span class='curline'><a href='../S/200.html#L229'>L</a>                 229 src/scripting/lua_team.cpp 	return **static_cast&lt;team **&gt;(luaL_checkudata(L, idx, Team));</span>
<span class='curline'><a href='../S/200.html#L232'>L</a>                 232 src/scripting/lua_team.cpp team* luaW_toteam(lua_State* L, int idx)</span>
<span class='curline'><a href='../S/200.html#L234'>L</a>                 234 src/scripting/lua_team.cpp 	if(void* p = luaL_testudata(L, idx, Team)) {</span>
<span class='curline'><a href='../S/190.html#L108'>L</a>                 108 src/scripting/lua_unit.cpp bool luaW_isunit(lua_State* L, int index)</span>
<span class='curline'><a href='../S/190.html#L110'>L</a>                 110 src/scripting/lua_unit.cpp 	return luaL_testudata(L, index,getunitKey) != nullptr;</span>
<span class='curline'><a href='../S/190.html#L120'>L</a>                 120 src/scripting/lua_unit.cpp static lua_unit* internal_get_unit(lua_State *L, int index, bool only_on_map, int&amp; error)</span>
<span class='curline'><a href='../S/190.html#L123'>L</a>                 123 src/scripting/lua_unit.cpp 	if(!luaW_isunit(L, index)) {</span>
<span class='curline'><a href='../S/190.html#L127'>L</a>                 127 src/scripting/lua_unit.cpp 	lua_unit* lu = static_cast&lt;lua_unit*&gt;(lua_touserdata(L, index));</span>
<span class='curline'><a href='../S/190.html#L137'>L</a>                 137 src/scripting/lua_unit.cpp unit* luaW_tounit(lua_State *L, int index, bool only_on_map)</span>
<span class='curline'><a href='../S/190.html#L140'>L</a>                 140 src/scripting/lua_unit.cpp 	lua_unit* lu = internal_get_unit(L, index, only_on_map, error);</span>
<span class='curline'><a href='../S/190.html#L147'>L</a>                 147 src/scripting/lua_unit.cpp unit_ptr luaW_tounit_ptr(lua_State *L, int index, bool only_on_map)</span>
<span class='curline'><a href='../S/190.html#L150'>L</a>                 150 src/scripting/lua_unit.cpp 	lua_unit* lu = internal_get_unit(L, index, only_on_map, error);</span>
<span class='curline'><a href='../S/190.html#L157'>L</a>                 157 src/scripting/lua_unit.cpp lua_unit* luaW_tounit_ref(lua_State *L, int index)</span>
<span class='curline'><a href='../S/190.html#L160'>L</a>                 160 src/scripting/lua_unit.cpp 	return internal_get_unit(L, index, false, error);</span>
<span class='curline'><a href='../S/190.html#L163'>L</a>                 163 src/scripting/lua_unit.cpp static void unit_show_error(lua_State *L, int index, int error)</span>
<span class='curline'><a href='../S/190.html#L167'>L</a>                 167 src/scripting/lua_unit.cpp 			luaW_type_error(L, index, "unit");</span>
<span class='curline'><a href='../S/190.html#L170'>L</a>                 170 src/scripting/lua_unit.cpp 			luaL_argerror(L, index, "unit not found");</span>
<span class='curline'><a href='../S/190.html#L173'>L</a>                 173 src/scripting/lua_unit.cpp 			luaL_argerror(L, index, "unit not found on map");</span>
<span class='curline'><a href='../S/190.html#L178'>L</a>                 178 src/scripting/lua_unit.cpp unit_ptr luaW_checkunit_ptr(lua_State *L, int index, bool only_on_map)</span>
<span class='curline'><a href='../S/190.html#L181'>L</a>                 181 src/scripting/lua_unit.cpp 	lua_unit* lu = internal_get_unit(L, index, only_on_map, error);</span>
<span class='curline'><a href='../S/190.html#L182'>L</a>                 182 src/scripting/lua_unit.cpp 	unit_show_error(L, index, error);</span>
<span class='curline'><a href='../S/190.html#L186'>L</a>                 186 src/scripting/lua_unit.cpp unit&amp; luaW_checkunit(lua_State *L, int index, bool only_on_map)</span>
<span class='curline'><a href='../S/190.html#L189'>L</a>                 189 src/scripting/lua_unit.cpp 	lua_unit* lu = internal_get_unit(L, index, only_on_map, error);</span>
<span class='curline'><a href='../S/190.html#L190'>L</a>                 190 src/scripting/lua_unit.cpp 	unit_show_error(L, index, error);</span>
<span class='curline'><a href='../S/190.html#L194'>L</a>                 194 src/scripting/lua_unit.cpp lua_unit* luaW_checkunit_ref(lua_State *L, int index)</span>
<span class='curline'><a href='../S/190.html#L197'>L</a>                 197 src/scripting/lua_unit.cpp 	lua_unit* lu = internal_get_unit(L, index, false, error);</span>
<span class='curline'><a href='../S/190.html#L198'>L</a>                 198 src/scripting/lua_unit.cpp 	unit_show_error(L, index, error);</span>
<span class='curline'><a href='../S/190.html#L202'>L</a>                 202 src/scripting/lua_unit.cpp void lua_unit::setmetatable(lua_State *L)</span>
<span class='curline'><a href='../S/190.html#L204'>L</a>                 204 src/scripting/lua_unit.cpp 	luaL_setmetatable(L, getunitKey);</span>
<span class='curline'><a href='../S/190.html#L207'>L</a>                 207 src/scripting/lua_unit.cpp lua_unit* luaW_pushlocalunit(lua_State *L, unit&amp; u)</span>
<span class='curline'><a href='../S/190.html#L209'>L</a>                 209 src/scripting/lua_unit.cpp 	lua_unit* res = new(L) lua_unit(u);</span>
<span class='curline'><a href='../S/190.html#L210'>L</a>                 210 src/scripting/lua_unit.cpp 	lua_unit::setmetatable(L);</span>
<span class='curline'><a href='../S/190.html#L217'>L</a>                 217 src/scripting/lua_unit.cpp static int impl_unit_collect(lua_State *L)</span>
<span class='curline'><a href='../S/190.html#L219'>L</a>                 219 src/scripting/lua_unit.cpp 	lua_unit *u = static_cast&lt;lua_unit *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/190.html#L227'>L</a>                 227 src/scripting/lua_unit.cpp static int impl_unit_equality(lua_State* L)</span>
<span class='curline'><a href='../S/190.html#L229'>L</a>                 229 src/scripting/lua_unit.cpp 	unit&amp; left = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/190.html#L230'>L</a>                 230 src/scripting/lua_unit.cpp 	unit&amp; right = luaW_checkunit(L, 2);</span>
<span class='curline'><a href='../S/190.html#L232'>L</a>                 232 src/scripting/lua_unit.cpp 	lua_pushboolean(L, equal);</span>
<span class='curline'><a href='../S/190.html#L242'>L</a>                 242 src/scripting/lua_unit.cpp static int impl_unit_get(lua_State *L)</span>
<span class='curline'><a href='../S/190.html#L244'>L</a>                 244 src/scripting/lua_unit.cpp 	lua_unit *lu = static_cast&lt;lua_unit *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/190.html#L245'>L</a>                 245 src/scripting/lua_unit.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/190.html#L253'>L</a>                 253 src/scripting/lua_unit.cpp 			lua_pushstring(L, "map");</span>
<span class='curline'><a href='../S/190.html#L255'>L</a>                 255 src/scripting/lua_unit.cpp 			lua_pushstring(L, "recall");</span>
<span class='curline'><a href='../S/190.html#L257'>L</a>                 257 src/scripting/lua_unit.cpp 			lua_pushstring(L, "private");</span>
<span class='curline'><a href='../S/190.html#L263'>L</a>                 263 src/scripting/lua_unit.cpp 		return luaL_argerror(L, 1, "unknown unit");</span>
<span class='curline'><a href='../S/190.html#L272'>L</a>                 272 src/scripting/lua_unit.cpp 		lua_pushinteger(L, u.get_location().wml_x());</span>
<span class='curline'><a href='../S/190.html#L273'>L</a>                 273 src/scripting/lua_unit.cpp 		lua_pushinteger(L, u.get_location().wml_y());</span>
<span class='curline'><a href='../S/190.html#L299'>L</a>                 299 src/scripting/lua_unit.cpp 		lua_push(L, u.alignment());</span>
<span class='curline'><a href='../S/190.html#L308'>L</a>                 308 src/scripting/lua_unit.cpp 			lua_push(L, *v);</span>
<span class='curline'><a href='../S/190.html#L311'>L</a>                 311 src/scripting/lua_unit.cpp 			lua_push(L, type);</span>
<span class='curline'><a href='../S/190.html#L317'>L</a>                 317 src/scripting/lua_unit.cpp 		lua_push(L, u.modification_advancements());</span>
<span class='curline'><a href='../S/190.html#L321'>L</a>                 321 src/scripting/lua_unit.cpp 		lua_push(L, u.overlays());</span>
<span class='curline'><a href='../S/190.html#L325'>L</a>                 325 src/scripting/lua_unit.cpp 		lua_push(L, u.get_traits_list());</span>
<span class='curline'><a href='../S/190.html#L329'>L</a>                 329 src/scripting/lua_unit.cpp 		lua_push(L, u.get_ability_list());</span>
<span class='curline'><a href='../S/190.html#L333'>L</a>                 333 src/scripting/lua_unit.cpp 		lua_createtable(L, 1, 0);</span>
<span class='curline'><a href='../S/190.html#L334'>L</a>                 334 src/scripting/lua_unit.cpp 		lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/190.html#L335'>L</a>                 335 src/scripting/lua_unit.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/190.html#L336'>L</a>                 336 src/scripting/lua_unit.cpp 		luaL_setmetatable(L, ustatusKey);</span>
<span class='curline'><a href='../S/190.html#L340'>L</a>                 340 src/scripting/lua_unit.cpp 		lua_createtable(L, 1, 0);</span>
<span class='curline'><a href='../S/190.html#L341'>L</a>                 341 src/scripting/lua_unit.cpp 		lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/190.html#L342'>L</a>                 342 src/scripting/lua_unit.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/190.html#L343'>L</a>                 343 src/scripting/lua_unit.cpp 		luaL_setmetatable(L, unitvarKey);</span>
<span class='curline'><a href='../S/190.html#L347'>L</a>                 347 src/scripting/lua_unit.cpp 		push_unit_attacks_table(L, 1);</span>
<span class='curline'><a href='../S/190.html#L364'>L</a>                 364 src/scripting/lua_unit.cpp 	if(luaW_getmetafield(L, 1, m)) {</span>
<span class='curline'><a href='../S/190.html#L376'>L</a>                 376 src/scripting/lua_unit.cpp static int impl_unit_set(lua_State *L)</span>
<span class='curline'><a href='../S/190.html#L378'>L</a>                 378 src/scripting/lua_unit.cpp 	lua_unit *lu = static_cast&lt;lua_unit *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/190.html#L379'>L</a>                 379 src/scripting/lua_unit.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/190.html#L381'>L</a>                 381 src/scripting/lua_unit.cpp 	if (!pu) return luaL_argerror(L, 1, "unknown unit");</span>
<span class='curline'><a href='../S/190.html#L404'>L</a>                 404 src/scripting/lua_unit.cpp 		u.set_alignment(lua_check&lt;unit_type::ALIGNMENT&gt;(L, 3));</span>
<span class='curline'><a href='../S/190.html#L409'>L</a>                 409 src/scripting/lua_unit.cpp 		u.set_advancements(lua_check&lt;std::vector&lt;config&gt; &gt;(L, 3));</span>
<span class='curline'><a href='../S/190.html#L414'>L</a>                 414 src/scripting/lua_unit.cpp 		if(lua_isnumber(L, 3)) {</span>
<span class='curline'><a href='../S/190.html#L415'>L</a>                 415 src/scripting/lua_unit.cpp 			u.set_upkeep(luaL_checkinteger(L, 3));</span>
<span class='curline'><a href='../S/190.html#L418'>L</a>                 418 src/scripting/lua_unit.cpp 		const char* v = luaL_checkstring(L, 3);</span>
<span class='curline'><a href='../S/190.html#L426'>L</a>                 426 src/scripting/lua_unit.cpp 			return luaL_argerror(L, 2, err_msg.c_str());</span>
<span class='curline'><a href='../S/190.html#L438'>L</a>                 438 src/scripting/lua_unit.cpp 	return luaL_argerror(L, 2, err_msg.c_str());</span>
<span class='curline'><a href='../S/190.html#L447'>L</a>                 447 src/scripting/lua_unit.cpp static int impl_unit_status_get(lua_State *L)</span>
<span class='curline'><a href='../S/190.html#L449'>L</a>                 449 src/scripting/lua_unit.cpp 	if(!lua_istable(L, 1)) {</span>
<span class='curline'><a href='../S/190.html#L450'>L</a>                 450 src/scripting/lua_unit.cpp 		return luaW_type_error(L, 1, "unit status");</span>
<span class='curline'><a href='../S/190.html#L452'>L</a>                 452 src/scripting/lua_unit.cpp 	lua_rawgeti(L, 1, 1);</span>
<span class='curline'><a href='../S/190.html#L453'>L</a>                 453 src/scripting/lua_unit.cpp 	const unit* u = luaW_tounit(L, -1);</span>
<span class='curline'><a href='../S/190.html#L455'>L</a>                 455 src/scripting/lua_unit.cpp 		return luaL_argerror(L, 1, "unknown unit");</span>
<span class='curline'><a href='../S/190.html#L457'>L</a>                 457 src/scripting/lua_unit.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/190.html#L458'>L</a>                 458 src/scripting/lua_unit.cpp 	lua_pushboolean(L, u-&gt;get_state(m));</span>
<span class='curline'><a href='../S/190.html#L468'>L</a>                 468 src/scripting/lua_unit.cpp static int impl_unit_status_set(lua_State *L)</span>
<span class='curline'><a href='../S/190.html#L470'>L</a>                 470 src/scripting/lua_unit.cpp 	if(!lua_istable(L, 1)) {</span>
<span class='curline'><a href='../S/190.html#L471'>L</a>                 471 src/scripting/lua_unit.cpp 		return luaW_type_error(L, 1, "unit status");</span>
<span class='curline'><a href='../S/190.html#L473'>L</a>                 473 src/scripting/lua_unit.cpp 	lua_rawgeti(L, 1, 1);</span>
<span class='curline'><a href='../S/190.html#L474'>L</a>                 474 src/scripting/lua_unit.cpp 	unit* u = luaW_tounit(L, -1);</span>
<span class='curline'><a href='../S/190.html#L476'>L</a>                 476 src/scripting/lua_unit.cpp 		return luaL_argerror(L, 1, "unknown unit");</span>
<span class='curline'><a href='../S/190.html#L478'>L</a>                 478 src/scripting/lua_unit.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/190.html#L479'>L</a>                 479 src/scripting/lua_unit.cpp 	u-&gt;set_state(m, luaW_toboolean(L, 3));</span>
<span class='curline'><a href='../S/190.html#L489'>L</a>                 489 src/scripting/lua_unit.cpp static int impl_unit_variables_get(lua_State *L)</span>
<span class='curline'><a href='../S/190.html#L491'>L</a>                 491 src/scripting/lua_unit.cpp 	if(!lua_istable(L, 1)) {</span>
<span class='curline'><a href='../S/190.html#L492'>L</a>                 492 src/scripting/lua_unit.cpp 		return luaW_type_error(L, 1, "unit variables");</span>
<span class='curline'><a href='../S/190.html#L494'>L</a>                 494 src/scripting/lua_unit.cpp 	lua_rawgeti(L, 1, 1);</span>
<span class='curline'><a href='../S/190.html#L495'>L</a>                 495 src/scripting/lua_unit.cpp 	const unit* u = luaW_tounit(L, -1);</span>
<span class='curline'><a href='../S/190.html#L497'>L</a>                 497 src/scripting/lua_unit.cpp 		return luaL_argerror(L, 2, "unknown unit");</span>
<span class='curline'><a href='../S/190.html#L499'>L</a>                 499 src/scripting/lua_unit.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/190.html#L503'>L</a>                 503 src/scripting/lua_unit.cpp 	return luaW_pushvariable(L, v) ? 1 : 0;</span>
<span class='curline'><a href='../S/190.html#L512'>L</a>                 512 src/scripting/lua_unit.cpp static int impl_unit_variables_set(lua_State *L)</span>
<span class='curline'><a href='../S/190.html#L514'>L</a>                 514 src/scripting/lua_unit.cpp 	if(!lua_istable(L, 1)) {</span>
<span class='curline'><a href='../S/190.html#L515'>L</a>                 515 src/scripting/lua_unit.cpp 		return luaW_type_error(L, 1, "unit variables");</span>
<span class='curline'><a href='../S/190.html#L517'>L</a>                 517 src/scripting/lua_unit.cpp 	lua_rawgeti(L, 1, 1);</span>
<span class='curline'><a href='../S/190.html#L518'>L</a>                 518 src/scripting/lua_unit.cpp 	unit* u = luaW_tounit(L, -1);</span>
<span class='curline'><a href='../S/190.html#L520'>L</a>                 520 src/scripting/lua_unit.cpp 		return luaL_argerror(L, 2, "unknown unit");</span>
<span class='curline'><a href='../S/190.html#L522'>L</a>                 522 src/scripting/lua_unit.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/190.html#L524'>L</a>                 524 src/scripting/lua_unit.cpp 		u-&gt;variables() = luaW_checkconfig(L, 3);</span>
<span class='curline'><a href='../S/190.html#L528'>L</a>                 528 src/scripting/lua_unit.cpp 	if(lua_isnoneornil(L, 3)) {</span>
<span class='curline'><a href='../S/190.html#L536'>L</a>                 536 src/scripting/lua_unit.cpp 	luaW_checkvariable(L, v, 3);</span>
<span class='curline'><a href='../S/190.html#L541'>L</a>                 541 src/scripting/lua_unit.cpp 	std::string register_metatables(lua_State* L)</span>
<span class='curline'><a href='../S/190.html#L548'>L</a>                 548 src/scripting/lua_unit.cpp 		luaL_newmetatable(L, getunitKey);</span>
<span class='curline'><a href='../S/190.html#L549'>L</a>                 549 src/scripting/lua_unit.cpp 		lua_pushcfunction(L, impl_unit_collect);</span>
<span class='curline'><a href='../S/190.html#L550'>L</a>                 550 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__gc");</span>
<span class='curline'><a href='../S/190.html#L551'>L</a>                 551 src/scripting/lua_unit.cpp 		lua_pushcfunction(L, impl_unit_equality);</span>
<span class='curline'><a href='../S/190.html#L552'>L</a>                 552 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__eq");</span>
<span class='curline'><a href='../S/190.html#L553'>L</a>                 553 src/scripting/lua_unit.cpp 		lua_pushcfunction(L, impl_unit_get);</span>
<span class='curline'><a href='../S/190.html#L554'>L</a>                 554 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/190.html#L555'>L</a>                 555 src/scripting/lua_unit.cpp 		lua_pushcfunction(L, impl_unit_set);</span>
<span class='curline'><a href='../S/190.html#L556'>L</a>                 556 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__newindex");</span>
<span class='curline'><a href='../S/190.html#L557'>L</a>                 557 src/scripting/lua_unit.cpp 		lua_pushstring(L, "unit");</span>
<span class='curline'><a href='../S/190.html#L558'>L</a>                 558 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/190.html#L560'>L</a>                 560 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "match_unit");</span>
<span class='curline'><a href='../S/190.html#L561'>L</a>                 561 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "matches");</span>
<span class='curline'><a href='../S/190.html#L562'>L</a>                 562 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "put_recall_unit");</span>
<span class='curline'><a href='../S/190.html#L563'>L</a>                 563 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "to_recall");</span>
<span class='curline'><a href='../S/190.html#L564'>L</a>                 564 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "put_unit");</span>
<span class='curline'><a href='../S/190.html#L565'>L</a>                 565 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "to_map");</span>
<span class='curline'><a href='../S/190.html#L566'>L</a>                 566 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "erase_unit");</span>
<span class='curline'><a href='../S/190.html#L567'>L</a>                 567 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "erase");</span>
<span class='curline'><a href='../S/190.html#L568'>L</a>                 568 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "copy_unit");</span>
<span class='curline'><a href='../S/190.html#L569'>L</a>                 569 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "clone");</span>
<span class='curline'><a href='../S/190.html#L570'>L</a>                 570 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "extract_unit");</span>
<span class='curline'><a href='../S/190.html#L571'>L</a>                 571 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "extract");</span>
<span class='curline'><a href='../S/190.html#L572'>L</a>                 572 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "advance_unit");</span>
<span class='curline'><a href='../S/190.html#L573'>L</a>                 573 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "advance");</span>
<span class='curline'><a href='../S/190.html#L574'>L</a>                 574 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "add_modification");</span>
<span class='curline'><a href='../S/190.html#L575'>L</a>                 575 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "add_modification");</span>
<span class='curline'><a href='../S/190.html#L576'>L</a>                 576 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "unit_resistance");</span>
<span class='curline'><a href='../S/190.html#L577'>L</a>                 577 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "resistance");</span>
<span class='curline'><a href='../S/190.html#L578'>L</a>                 578 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "remove_modifications");</span>
<span class='curline'><a href='../S/190.html#L579'>L</a>                 579 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "remove_modifications");</span>
<span class='curline'><a href='../S/190.html#L580'>L</a>                 580 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "unit_defense");</span>
<span class='curline'><a href='../S/190.html#L581'>L</a>                 581 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "defense");</span>
<span class='curline'><a href='../S/190.html#L582'>L</a>                 582 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "unit_movement_cost");</span>
<span class='curline'><a href='../S/190.html#L583'>L</a>                 583 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "movement");</span>
<span class='curline'><a href='../S/190.html#L584'>L</a>                 584 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "unit_vision_cost");</span>
<span class='curline'><a href='../S/190.html#L585'>L</a>                 585 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "vision");</span>
<span class='curline'><a href='../S/190.html#L586'>L</a>                 586 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "unit_jamming_cost");</span>
<span class='curline'><a href='../S/190.html#L587'>L</a>                 587 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "jamming");</span>
<span class='curline'><a href='../S/190.html#L588'>L</a>                 588 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "unit_ability");</span>
<span class='curline'><a href='../S/190.html#L589'>L</a>                 589 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "ability");</span>
<span class='curline'><a href='../S/190.html#L590'>L</a>                 590 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "transform_unit");</span>
<span class='curline'><a href='../S/190.html#L591'>L</a>                 591 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "transform");</span>
<span class='curline'><a href='../S/190.html#L592'>L</a>                 592 src/scripting/lua_unit.cpp 		luaW_getglobal(L, "wesnoth", "select_unit");</span>
<span class='curline'><a href='../S/190.html#L593'>L</a>                 593 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "select");</span>
<span class='curline'><a href='../S/190.html#L598'>L</a>                 598 src/scripting/lua_unit.cpp 		luaL_newmetatable(L, ustatusKey);</span>
<span class='curline'><a href='../S/190.html#L599'>L</a>                 599 src/scripting/lua_unit.cpp 		lua_pushcfunction(L, impl_unit_status_get);</span>
<span class='curline'><a href='../S/190.html#L600'>L</a>                 600 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/190.html#L601'>L</a>                 601 src/scripting/lua_unit.cpp 		lua_pushcfunction(L, impl_unit_status_set);</span>
<span class='curline'><a href='../S/190.html#L602'>L</a>                 602 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__newindex");</span>
<span class='curline'><a href='../S/190.html#L603'>L</a>                 603 src/scripting/lua_unit.cpp 		lua_pushstring(L, "unit status");</span>
<span class='curline'><a href='../S/190.html#L604'>L</a>                 604 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/190.html#L609'>L</a>                 609 src/scripting/lua_unit.cpp 		luaL_newmetatable(L, unitvarKey);</span>
<span class='curline'><a href='../S/190.html#L610'>L</a>                 610 src/scripting/lua_unit.cpp 		lua_pushcfunction(L, impl_unit_variables_get);</span>
<span class='curline'><a href='../S/190.html#L611'>L</a>                 611 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/190.html#L612'>L</a>                 612 src/scripting/lua_unit.cpp 		lua_pushcfunction(L, impl_unit_variables_set);</span>
<span class='curline'><a href='../S/190.html#L613'>L</a>                 613 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__newindex");</span>
<span class='curline'><a href='../S/190.html#L614'>L</a>                 614 src/scripting/lua_unit.cpp 		lua_pushstring(L, "unit variables");</span>
<span class='curline'><a href='../S/190.html#L615'>L</a>                 615 src/scripting/lua_unit.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/194.html#L34'>L</a>                  34 src/scripting/lua_unit.hpp unit* luaW_tounit(lua_State *L, int index, bool only_on_map = false);</span>
<span class='curline'><a href='../S/194.html#L39'>L</a>                  39 src/scripting/lua_unit.hpp unit&amp; luaW_checkunit(lua_State *L, int index, bool only_on_map = false);</span>
<span class='curline'><a href='../S/194.html#L44'>L</a>                  44 src/scripting/lua_unit.hpp lua_unit* luaW_pushlocalunit(lua_State *L, unit&amp; u);</span>
<span class='curline'><a href='../S/194.html#L50'>L</a>                  50 src/scripting/lua_unit.hpp unit_ptr luaW_tounit_ptr(lua_State *L, int index, bool only_on_map);</span>
<span class='curline'><a href='../S/194.html#L56'>L</a>                  56 src/scripting/lua_unit.hpp unit_ptr luaW_checkunit_ptr(lua_State *L, int index, bool only_on_map);</span>
<span class='curline'><a href='../S/194.html#L65'>L</a>                  65 src/scripting/lua_unit.hpp lua_unit* luaW_tounit_ref(lua_State *L, int index);</span>
<span class='curline'><a href='../S/194.html#L71'>L</a>                  71 src/scripting/lua_unit.hpp lua_unit* luaW_checkunit_ref(lua_State *L, int index);</span>
<span class='curline'><a href='../S/194.html#L89'>L</a>                  89 src/scripting/lua_unit.hpp 	friend lua_unit* luaW_pushunit(lua_State *L, Args... args);</span>
<span class='curline'><a href='../S/194.html#L90'>L</a>                  90 src/scripting/lua_unit.hpp 	friend lua_unit* luaW_pushlocalunit(lua_State *L, unit&amp; u);</span>
<span class='curline'><a href='../S/194.html#L91'>L</a>                  91 src/scripting/lua_unit.hpp 	static void setmetatable(lua_State *L);</span>
<span class='curline'><a href='../S/194.html#L114'>L</a>                 114 src/scripting/lua_unit.hpp inline lua_unit* luaW_pushunit(lua_State *L, Args... args) {</span>
<span class='curline'><a href='../S/194.html#L115'>L</a>                 115 src/scripting/lua_unit.hpp 	lua_unit* lu = new(L) lua_unit(args...);</span>
<span class='curline'><a href='../S/194.html#L116'>L</a>                 116 src/scripting/lua_unit.hpp 	lua_unit::setmetatable(L);</span>
<span class='curline'><a href='../S/194.html#L121'>L</a>                 121 src/scripting/lua_unit.hpp 	std::string register_metatables(lua_State *L);</span>
<span class='curline'><a href='../S/210.html#L40'>L</a>                  40 src/scripting/lua_unit_attacks.cpp void push_unit_attacks_table(lua_State* L, int idx)</span>
<span class='curline'><a href='../S/210.html#L42'>L</a>                  42 src/scripting/lua_unit_attacks.cpp 	idx = lua_absindex(L, idx);</span>
<span class='curline'><a href='../S/210.html#L43'>L</a>                  43 src/scripting/lua_unit_attacks.cpp 	lua_createtable(L, 1, 0);</span>
<span class='curline'><a href='../S/210.html#L44'>L</a>                  44 src/scripting/lua_unit_attacks.cpp 	lua_pushvalue(L, idx);</span>
<span class='curline'><a href='../S/210.html#L46'>L</a>                  46 src/scripting/lua_unit_attacks.cpp 	lua_rawseti(L, -2, 0);</span>
<span class='curline'><a href='../S/210.html#L47'>L</a>                  47 src/scripting/lua_unit_attacks.cpp 	luaL_setmetatable(L, uattacksKey);</span>
<span class='curline'><a href='../S/210.html#L50'>L</a>                  50 src/scripting/lua_unit_attacks.cpp void luaW_pushweapon(lua_State* L, attack_ptr weapon)</span>
<span class='curline'><a href='../S/210.html#L52'>L</a>                  52 src/scripting/lua_unit_attacks.cpp 	new(L) attack_ref(weapon);</span>
<span class='curline'><a href='../S/210.html#L53'>L</a>                  53 src/scripting/lua_unit_attacks.cpp 	luaL_setmetatable(L, uattackKey);</span>
<span class='curline'><a href='../S/210.html#L56'>L</a>                  56 src/scripting/lua_unit_attacks.cpp void luaW_pushweapon(lua_State* L, const_attack_ptr weapon)</span>
<span class='curline'><a href='../S/210.html#L58'>L</a>                  58 src/scripting/lua_unit_attacks.cpp 	new(L) attack_ref(weapon);</span>
<span class='curline'><a href='../S/210.html#L59'>L</a>                  59 src/scripting/lua_unit_attacks.cpp 	luaL_setmetatable(L, uattackKey);</span>
<span class='curline'><a href='../S/210.html#L62'>L</a>                  62 src/scripting/lua_unit_attacks.cpp static attack_ref&amp; luaW_checkweapon_ref(lua_State* L, int idx)</span>
<span class='curline'><a href='../S/210.html#L64'>L</a>                  64 src/scripting/lua_unit_attacks.cpp 	return *static_cast&lt;attack_ref*&gt;(luaL_checkudata(L, idx, uattackKey));</span>
<span class='curline'><a href='../S/210.html#L67'>L</a>                  67 src/scripting/lua_unit_attacks.cpp const_attack_ptr luaW_toweapon(lua_State* L, int idx)</span>
<span class='curline'><a href='../S/210.html#L69'>L</a>                  69 src/scripting/lua_unit_attacks.cpp 	if(void* p = luaL_testudata(L, idx, uattackKey)) {</span>
<span class='curline'><a href='../S/210.html#L75'>L</a>                  75 src/scripting/lua_unit_attacks.cpp attack_type&amp; luaW_checkweapon(lua_State* L, int idx)</span>
<span class='curline'><a href='../S/210.html#L77'>L</a>                  77 src/scripting/lua_unit_attacks.cpp 	attack_ref&amp; atk = luaW_checkweapon_ref(L, idx);</span>
<span class='curline'><a href='../S/210.html#L79'>L</a>                  79 src/scripting/lua_unit_attacks.cpp 		luaL_argerror(L, idx, "attack is read-only");</span>
<span class='curline'><a href='../S/210.html#L118'>L</a>                 118 src/scripting/lua_unit_attacks.cpp static int impl_unit_attacks_get(lua_State *L)</span>
<span class='curline'><a href='../S/210.html#L120'>L</a>                 120 src/scripting/lua_unit_attacks.cpp 	if(!lua_istable(L, 1)) {</span>
<span class='curline'><a href='../S/210.html#L121'>L</a>                 121 src/scripting/lua_unit_attacks.cpp 		return luaW_type_error(L, 1, "unit attacks");</span>
<span class='curline'><a href='../S/210.html#L123'>L</a>                 123 src/scripting/lua_unit_attacks.cpp 	lua_rawgeti(L, 1, 0);</span>
<span class='curline'><a href='../S/210.html#L124'>L</a>                 124 src/scripting/lua_unit_attacks.cpp 	lua_unit* lu = luaW_tounit_ref(L, -1);</span>
<span class='curline'><a href='../S/210.html#L125'>L</a>                 125 src/scripting/lua_unit_attacks.cpp 	const unit_type* ut = luaW_tounittype(L, -1);</span>
<span class='curline'><a href='../S/210.html#L128'>L</a>                 128 src/scripting/lua_unit_attacks.cpp 		attack_ptr atk = lua_isnumber(L, 2) ? find_attack(u, luaL_checkinteger(L, 2) - 1) : find_attack(u, luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/210.html#L129'>L</a>                 129 src/scripting/lua_unit_attacks.cpp 		luaW_pushweapon(L, atk);</span>
<span class='curline'><a href='../S/210.html#L131'>L</a>                 131 src/scripting/lua_unit_attacks.cpp 		const_attack_ptr atk = lua_isnumber(L, 2) ? find_attack(ut, luaL_checkinteger(L, 2) - 1) : find_attack(ut, luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/210.html#L132'>L</a>                 132 src/scripting/lua_unit_attacks.cpp 		luaW_pushweapon(L, atk);</span>
<span class='curline'><a href='../S/210.html#L134'>L</a>                 134 src/scripting/lua_unit_attacks.cpp 		return luaL_argerror(L, 1, "unit not found");</span>
<span class='curline'><a href='../S/210.html#L147'>L</a>                 147 src/scripting/lua_unit_attacks.cpp static int impl_unit_attacks_set(lua_State* L)</span>
<span class='curline'><a href='../S/210.html#L149'>L</a>                 149 src/scripting/lua_unit_attacks.cpp 	if(!lua_istable(L, 1)) {</span>
<span class='curline'><a href='../S/210.html#L150'>L</a>                 150 src/scripting/lua_unit_attacks.cpp 		return luaW_type_error(L, 1, "unit attacks");</span>
<span class='curline'><a href='../S/210.html#L152'>L</a>                 152 src/scripting/lua_unit_attacks.cpp 	lua_rawgeti(L, 1, 0);</span>
<span class='curline'><a href='../S/210.html#L153'>L</a>                 153 src/scripting/lua_unit_attacks.cpp 	const unit_type* ut = luaW_tounittype(L, -1);</span>
<span class='curline'><a href='../S/210.html#L155'>L</a>                 155 src/scripting/lua_unit_attacks.cpp 		return luaL_argerror(L, 1, "unit type attack table is immutable");</span>
<span class='curline'><a href='../S/210.html#L158'>L</a>                 158 src/scripting/lua_unit_attacks.cpp 	unit&amp; u = luaW_checkunit(L, -1);</span>
<span class='curline'><a href='../S/210.html#L159'>L</a>                 159 src/scripting/lua_unit_attacks.cpp 	attack_ptr atk = lua_isnumber(L, 2) ? find_attack(&amp;u, luaL_checkinteger(L, 2) - 1) : find_attack(&amp;u, luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/210.html#L160'>L</a>                 160 src/scripting/lua_unit_attacks.cpp 	if(lua_isnumber(L, 2) &amp;&amp; lua_tonumber(L, 2) - 1 &gt; u.attacks().size()) {</span>
<span class='curline'><a href='../S/210.html#L161'>L</a>                 161 src/scripting/lua_unit_attacks.cpp 		return luaL_argerror(L, 2, "attack can only be added at the end of the list");</span>
<span class='curline'><a href='../S/210.html#L164'>L</a>                 164 src/scripting/lua_unit_attacks.cpp 	if(lua_isnil(L, 3)) {</span>
<span class='curline'><a href='../S/210.html#L171'>L</a>                 171 src/scripting/lua_unit_attacks.cpp 	if(const_attack_ptr atk2 = luaW_toweapon(L, 3)) {</span>
<span class='curline'><a href='../S/210.html#L179'>L</a>                 179 src/scripting/lua_unit_attacks.cpp 		config cfg = luaW_checkconfig(L, 3);</span>
<span class='curline'><a href='../S/210.html#L187'>L</a>                 187 src/scripting/lua_unit_attacks.cpp 	if(!lua_isnumber(L, 2)) {</span>
<span class='curline'><a href='../S/210.html#L188'>L</a>                 188 src/scripting/lua_unit_attacks.cpp 		atk-&gt;set_id(lua_tostring(L, 2));</span>
<span class='curline'><a href='../S/210.html#L198'>L</a>                 198 src/scripting/lua_unit_attacks.cpp static int impl_unit_attacks_len(lua_State *L)</span>
<span class='curline'><a href='../S/210.html#L200'>L</a>                 200 src/scripting/lua_unit_attacks.cpp 	if(!lua_istable(L, 1)) {</span>
<span class='curline'><a href='../S/210.html#L201'>L</a>                 201 src/scripting/lua_unit_attacks.cpp 		return luaW_type_error(L, 1, "unit attacks");</span>
<span class='curline'><a href='../S/210.html#L203'>L</a>                 203 src/scripting/lua_unit_attacks.cpp 	lua_rawgeti(L, 1, 0);</span>
<span class='curline'><a href='../S/210.html#L204'>L</a>                 204 src/scripting/lua_unit_attacks.cpp 	const unit* u = luaW_tounit(L, -1);</span>
<span class='curline'><a href='../S/210.html#L205'>L</a>                 205 src/scripting/lua_unit_attacks.cpp 	const unit_type* ut = luaW_tounittype(L, -1);</span>
<span class='curline'><a href='../S/210.html#L207'>L</a>                 207 src/scripting/lua_unit_attacks.cpp 		return luaL_argerror(L, 1, "unknown unit");</span>
<span class='curline'><a href='../S/210.html#L209'>L</a>                 209 src/scripting/lua_unit_attacks.cpp 	lua_pushinteger(L, (u ? u-&gt;attacks() : ut-&gt;attacks()).size());</span>
<span class='curline'><a href='../S/210.html#L213'>L</a>                 213 src/scripting/lua_unit_attacks.cpp static int impl_unit_attacks_next(lua_State *L)</span>
<span class='curline'><a href='../S/210.html#L215'>L</a>                 215 src/scripting/lua_unit_attacks.cpp 	lua_len(L, 1);</span>
<span class='curline'><a href='../S/210.html#L216'>L</a>                 216 src/scripting/lua_unit_attacks.cpp 	int n = luaL_checknumber(L, 2) + 1;</span>
<span class='curline'><a href='../S/210.html#L217'>L</a>                 217 src/scripting/lua_unit_attacks.cpp 	int max_n = luaL_checknumber(L, -1);</span>
<span class='curline'><a href='../S/210.html#L221'>L</a>                 221 src/scripting/lua_unit_attacks.cpp 	lua_pushnumber(L, n);</span>
<span class='curline'><a href='../S/210.html#L222'>L</a>                 222 src/scripting/lua_unit_attacks.cpp 	lua_pushvalue(L, -1);</span>
<span class='curline'><a href='../S/210.html#L223'>L</a>                 223 src/scripting/lua_unit_attacks.cpp 	lua_gettable(L, 1);</span>
<span class='curline'><a href='../S/210.html#L227'>L</a>                 227 src/scripting/lua_unit_attacks.cpp static int impl_unit_attacks_iter(lua_State* L)</span>
<span class='curline'><a href='../S/210.html#L229'>L</a>                 229 src/scripting/lua_unit_attacks.cpp 	lua_pushcfunction(L, impl_unit_attacks_next);</span>
<span class='curline'><a href='../S/210.html#L230'>L</a>                 230 src/scripting/lua_unit_attacks.cpp 	lua_pushvalue(L, 1);</span>
<span class='curline'><a href='../S/210.html#L231'>L</a>                 231 src/scripting/lua_unit_attacks.cpp 	lua_pushnumber(L, 0);</span>
<span class='curline'><a href='../S/210.html#L241'>L</a>                 241 src/scripting/lua_unit_attacks.cpp static int impl_unit_attack_get(lua_State *L)</span>
<span class='curline'><a href='../S/210.html#L243'>L</a>                 243 src/scripting/lua_unit_attacks.cpp 	attack_ref&amp; atk_ref = luaW_checkweapon_ref(L, 1);</span>
<span class='curline'><a href='../S/210.html#L245'>L</a>                 245 src/scripting/lua_unit_attacks.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/210.html#L261'>L</a>                 261 src/scripting/lua_unit_attacks.cpp 	if(luaW_getmetafield(L, 1, m)) {</span>
<span class='curline'><a href='../S/210.html#L266'>L</a>                 266 src/scripting/lua_unit_attacks.cpp 	return luaL_argerror(L, 2, err_msg.c_str());</span>
<span class='curline'><a href='../S/210.html#L275'>L</a>                 275 src/scripting/lua_unit_attacks.cpp static int impl_unit_attack_set(lua_State *L)</span>
<span class='curline'><a href='../S/210.html#L277'>L</a>                 277 src/scripting/lua_unit_attacks.cpp 	attack_type&amp; attack = luaW_checkweapon(L, 1);</span>
<span class='curline'><a href='../S/210.html#L278'>L</a>                 278 src/scripting/lua_unit_attacks.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/210.html#L293'>L</a>                 293 src/scripting/lua_unit_attacks.cpp 		attack.set_specials(luaW_checkconfig(L, 3));</span>
<span class='curline'><a href='../S/210.html#L299'>L</a>                 299 src/scripting/lua_unit_attacks.cpp 	return luaL_argerror(L, 2, err_msg.c_str());</span>
<span class='curline'><a href='../S/210.html#L302'>L</a>                 302 src/scripting/lua_unit_attacks.cpp static int impl_unit_attack_equal(lua_State* L)</span>
<span class='curline'><a href='../S/210.html#L304'>L</a>                 304 src/scripting/lua_unit_attacks.cpp 	const_attack_ptr ut1 = luaW_toweapon(L, 1);</span>
<span class='curline'><a href='../S/210.html#L305'>L</a>                 305 src/scripting/lua_unit_attacks.cpp 	const_attack_ptr ut2 = luaW_toweapon(L, 2);</span>
<span class='curline'><a href='../S/210.html#L306'>L</a>                 306 src/scripting/lua_unit_attacks.cpp 	lua_pushboolean(L, ut1 == ut2);</span>
<span class='curline'><a href='../S/210.html#L310'>L</a>                 310 src/scripting/lua_unit_attacks.cpp static int impl_unit_attack_match(lua_State* L)</span>
<span class='curline'><a href='../S/210.html#L312'>L</a>                 312 src/scripting/lua_unit_attacks.cpp 	const_attack_ptr atk = luaW_toweapon(L, 1);</span>
<span class='curline'><a href='../S/210.html#L313'>L</a>                 313 src/scripting/lua_unit_attacks.cpp 	config cfg = luaW_checkconfig(L, 2);</span>
<span class='curline'><a href='../S/210.html#L314'>L</a>                 314 src/scripting/lua_unit_attacks.cpp 	lua_pushboolean(L, atk-&gt;matches_filter(cfg));</span>
<span class='curline'><a href='../S/210.html#L318'>L</a>                 318 src/scripting/lua_unit_attacks.cpp static int impl_unit_attack_collect(lua_State* L)</span>
<span class='curline'><a href='../S/210.html#L320'>L</a>                 320 src/scripting/lua_unit_attacks.cpp 	attack_ref* atk = static_cast&lt;attack_ref*&gt;(luaL_checkudata(L, 1, uattackKey));</span>
<span class='curline'><a href='../S/210.html#L325'>L</a>                 325 src/scripting/lua_unit_attacks.cpp static int intf_create_attack(lua_State* L)</span>
<span class='curline'><a href='../S/210.html#L327'>L</a>                 327 src/scripting/lua_unit_attacks.cpp 	auto atk = std::make_shared&lt;attack_type&gt;(luaW_checkconfig(L, 1));</span>
<span class='curline'><a href='../S/210.html#L328'>L</a>                 328 src/scripting/lua_unit_attacks.cpp 	luaW_pushweapon(L, atk);</span>
<span class='curline'><a href='../S/210.html#L333'>L</a>                 333 src/scripting/lua_unit_attacks.cpp 	std::string register_attacks_metatables(lua_State* L)</span>
<span class='curline'><a href='../S/210.html#L340'>L</a>                 340 src/scripting/lua_unit_attacks.cpp 		luaL_newmetatable(L, uattacksKey);</span>
<span class='curline'><a href='../S/210.html#L341'>L</a>                 341 src/scripting/lua_unit_attacks.cpp 		lua_pushcfunction(L, impl_unit_attacks_get);</span>
<span class='curline'><a href='../S/210.html#L342'>L</a>                 342 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/210.html#L343'>L</a>                 343 src/scripting/lua_unit_attacks.cpp 		lua_pushcfunction(L, impl_unit_attacks_set);</span>
<span class='curline'><a href='../S/210.html#L344'>L</a>                 344 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "__newindex");</span>
<span class='curline'><a href='../S/210.html#L345'>L</a>                 345 src/scripting/lua_unit_attacks.cpp 		lua_pushcfunction(L, impl_unit_attacks_len);</span>
<span class='curline'><a href='../S/210.html#L346'>L</a>                 346 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "__len");</span>
<span class='curline'><a href='../S/210.html#L347'>L</a>                 347 src/scripting/lua_unit_attacks.cpp 		lua_pushcfunction(L, impl_unit_attacks_iter);</span>
<span class='curline'><a href='../S/210.html#L348'>L</a>                 348 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "__ipairs");</span>
<span class='curline'><a href='../S/210.html#L349'>L</a>                 349 src/scripting/lua_unit_attacks.cpp 		lua_pushstring(L, uattacksKey);</span>
<span class='curline'><a href='../S/210.html#L350'>L</a>                 350 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/210.html#L353'>L</a>                 353 src/scripting/lua_unit_attacks.cpp 		luaL_newmetatable(L, uattackKey);</span>
<span class='curline'><a href='../S/210.html#L354'>L</a>                 354 src/scripting/lua_unit_attacks.cpp 		lua_pushcfunction(L, impl_unit_attack_get);</span>
<span class='curline'><a href='../S/210.html#L355'>L</a>                 355 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/210.html#L356'>L</a>                 356 src/scripting/lua_unit_attacks.cpp 		lua_pushcfunction(L, impl_unit_attack_set);</span>
<span class='curline'><a href='../S/210.html#L357'>L</a>                 357 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "__newindex");</span>
<span class='curline'><a href='../S/210.html#L358'>L</a>                 358 src/scripting/lua_unit_attacks.cpp 		lua_pushcfunction(L, impl_unit_attack_equal);</span>
<span class='curline'><a href='../S/210.html#L359'>L</a>                 359 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "__eq");</span>
<span class='curline'><a href='../S/210.html#L360'>L</a>                 360 src/scripting/lua_unit_attacks.cpp 		lua_pushcfunction(L, impl_unit_attack_collect);</span>
<span class='curline'><a href='../S/210.html#L361'>L</a>                 361 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "__gc");</span>
<span class='curline'><a href='../S/210.html#L362'>L</a>                 362 src/scripting/lua_unit_attacks.cpp 		lua_pushstring(L, uattackKey);</span>
<span class='curline'><a href='../S/210.html#L363'>L</a>                 363 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/210.html#L364'>L</a>                 364 src/scripting/lua_unit_attacks.cpp 		lua_pushcfunction(L, impl_unit_attack_match);</span>
<span class='curline'><a href='../S/210.html#L365'>L</a>                 365 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "matches");</span>
<span class='curline'><a href='../S/210.html#L368'>L</a>                 368 src/scripting/lua_unit_attacks.cpp 		luaW_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/210.html#L369'>L</a>                 369 src/scripting/lua_unit_attacks.cpp 		lua_pushcfunction(L, intf_create_attack);</span>
<span class='curline'><a href='../S/210.html#L370'>L</a>                 370 src/scripting/lua_unit_attacks.cpp 		lua_setfield(L, -2, "create_weapon");</span>
<span class='curline'><a href='../S/210.html#L371'>L</a>                 371 src/scripting/lua_unit_attacks.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/213.html#L24'>L</a>                  24 src/scripting/lua_unit_attacks.hpp void push_unit_attacks_table(lua_State* L, int idx);</span>
<span class='curline'><a href='../S/213.html#L27'>L</a>                  27 src/scripting/lua_unit_attacks.hpp 	std::string register_attacks_metatables(lua_State* L);</span>
<span class='curline'><a href='../S/213.html#L30'>L</a>                  30 src/scripting/lua_unit_attacks.hpp void luaW_pushweapon(lua_State* L, attack_ptr weapon);</span>
<span class='curline'><a href='../S/213.html#L31'>L</a>                  31 src/scripting/lua_unit_attacks.hpp void luaW_pushweapon(lua_State* L, const_attack_ptr weapon);</span>
<span class='curline'><a href='../S/213.html#L32'>L</a>                  32 src/scripting/lua_unit_attacks.hpp const_attack_ptr luaW_toweapon(lua_State* L, int idx);</span>
<span class='curline'><a href='../S/213.html#L33'>L</a>                  33 src/scripting/lua_unit_attacks.hpp attack_type&amp; luaW_checkweapon(lua_State* L, int idx);</span>
<span class='curline'><a href='../S/170.html#L42'>L</a>                  42 src/scripting/lua_unit_type.cpp static int impl_unit_type_get(lua_State *L)</span>
<span class='curline'><a href='../S/170.html#L44'>L</a>                  44 src/scripting/lua_unit_type.cpp 	const unit_type&amp; ut = luaW_checkunittype(L, 1);</span>
<span class='curline'><a href='../S/170.html#L45'>L</a>                  45 src/scripting/lua_unit_type.cpp 	char const *m = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/170.html#L62'>L</a>                  62 src/scripting/lua_unit_type.cpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/170.html#L65'>L</a>                  65 src/scripting/lua_unit_type.cpp 			lua_pushlstring(L, id.c_str(), id.length());</span>
<span class='curline'><a href='../S/170.html#L66'>L</a>                  66 src/scripting/lua_unit_type.cpp 			luaW_pushconfig(L, trait);</span>
<span class='curline'><a href='../S/170.html#L67'>L</a>                  67 src/scripting/lua_unit_type.cpp 			lua_rawset(L, -3);</span>
<span class='curline'><a href='../S/170.html#L72'>L</a>                  72 src/scripting/lua_unit_type.cpp 		lua_push(L, ut.get_ability_list());</span>
<span class='curline'><a href='../S/170.html#L76'>L</a>                  76 src/scripting/lua_unit_type.cpp 		push_unit_attacks_table(L, 1);</span>
<span class='curline'><a href='../S/170.html#L81'>L</a>                  81 src/scripting/lua_unit_type.cpp 		*new(L) const unit_type* = &amp;ut;</span>
<span class='curline'><a href='../S/170.html#L82'>L</a>                  82 src/scripting/lua_unit_type.cpp 		luaL_setmetatable(L, UnitTypeTable);</span>
<span class='curline'><a href='../S/170.html#L88'>L</a>                  88 src/scripting/lua_unit_type.cpp static int impl_unit_type_equal(lua_State* L)</span>
<span class='curline'><a href='../S/170.html#L90'>L</a>                  90 src/scripting/lua_unit_type.cpp 	const unit_type&amp; ut1 = luaW_checkunittype(L, 1);</span>
<span class='curline'><a href='../S/170.html#L91'>L</a>                  91 src/scripting/lua_unit_type.cpp 	if(const unit_type* ut2 = luaW_tounittype(L, 2)) {</span>
<span class='curline'><a href='../S/170.html#L92'>L</a>                  92 src/scripting/lua_unit_type.cpp 		lua_pushboolean(L, &amp;ut1 == ut2);</span>
<span class='curline'><a href='../S/170.html#L94'>L</a>                  94 src/scripting/lua_unit_type.cpp 		lua_pushboolean(L, false);</span>
<span class='curline'><a href='../S/170.html#L99'>L</a>                  99 src/scripting/lua_unit_type.cpp static int impl_unit_type_lookup(lua_State* L)</span>
<span class='curline'><a href='../S/170.html#L101'>L</a>                 101 src/scripting/lua_unit_type.cpp 	std::string id = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/170.html#L103'>L</a>                 103 src/scripting/lua_unit_type.cpp 	if(const unit_type* base = *static_cast&lt;const unit_type**&gt;(luaL_testudata(L, 1, UnitTypeTable))) {</span>
<span class='curline'><a href='../S/170.html#L113'>L</a>                 113 src/scripting/lua_unit_type.cpp 		luaW_pushunittype(L, *ut);</span>
<span class='curline'><a href='../S/170.html#L119'>L</a>                 119 src/scripting/lua_unit_type.cpp static int impl_unit_type_new(lua_State* L)</span>
<span class='curline'><a href='../S/170.html#L123'>L</a>                 123 src/scripting/lua_unit_type.cpp 	lua_pushstring(L, "unit_types table is read-only");</span>
<span class='curline'><a href='../S/170.html#L124'>L</a>                 124 src/scripting/lua_unit_type.cpp 	return lua_error(L);</span>
<span class='curline'><a href='../S/170.html#L127'>L</a>                 127 src/scripting/lua_unit_type.cpp static int impl_unit_type_count(lua_State* L)</span>
<span class='curline'><a href='../S/170.html#L129'>L</a>                 129 src/scripting/lua_unit_type.cpp 	lua_pushstring(L, "base");</span>
<span class='curline'><a href='../S/170.html#L130'>L</a>                 130 src/scripting/lua_unit_type.cpp 	lua_rawget(L, 1);</span>
<span class='curline'><a href='../S/170.html#L131'>L</a>                 131 src/scripting/lua_unit_type.cpp 	if(const unit_type* base = luaW_tounittype(L, -1)) {</span>
<span class='curline'><a href='../S/170.html#L132'>L</a>                 132 src/scripting/lua_unit_type.cpp 		lua_pushnumber(L, base-&gt;variations().size() + base-&gt;genders().size());</span>
<span class='curline'><a href='../S/170.html#L134'>L</a>                 134 src/scripting/lua_unit_type.cpp 		lua_pushnumber(L, unit_types.types().size());</span>
<span class='curline'><a href='../S/170.html#L139'>L</a>                 139 src/scripting/lua_unit_type.cpp static int impl_unit_type_next(lua_State* L)</span>
<span class='curline'><a href='../S/170.html#L141'>L</a>                 141 src/scripting/lua_unit_type.cpp 	const unit_type* base = *static_cast&lt;const unit_type**&gt;(luaL_checkudata(L, 1, UnitTypeTable));</span>
<span class='curline'><a href='../S/170.html#L144'>L</a>                 144 src/scripting/lua_unit_type.cpp 	if(lua_isnoneornil(L, 2)) {</span>
<span class='curline'><a href='../S/170.html#L147'>L</a>                 147 src/scripting/lua_unit_type.cpp 				lua_pushstring(L, "male");</span>
<span class='curline'><a href='../S/170.html#L148'>L</a>                 148 src/scripting/lua_unit_type.cpp 				luaW_pushunittype(L, base-&gt;get_gender_unit_type(unit_race::MALE));</span>
<span class='curline'><a href='../S/170.html#L151'>L</a>                 151 src/scripting/lua_unit_type.cpp 				lua_pushstring(L, "female");</span>
<span class='curline'><a href='../S/170.html#L152'>L</a>                 152 src/scripting/lua_unit_type.cpp 				luaW_pushunittype(L, base-&gt;get_gender_unit_type(unit_race::FEMALE));</span>
<span class='curline'><a href='../S/170.html#L158'>L</a>                 158 src/scripting/lua_unit_type.cpp 		const std::string id = luaL_checkstring(L, 2);</span>
<span class='curline'><a href='../S/170.html#L161'>L</a>                 161 src/scripting/lua_unit_type.cpp 				lua_pushstring(L, "female");</span>
<span class='curline'><a href='../S/170.html#L162'>L</a>                 162 src/scripting/lua_unit_type.cpp 				luaW_pushunittype(L, base-&gt;get_gender_unit_type(unit_race::FEMALE));</span>
<span class='curline'><a href='../S/170.html#L179'>L</a>                 179 src/scripting/lua_unit_type.cpp 	lua_pushlstring(L, it-&gt;first.c_str(), it-&gt;first.size());</span>
<span class='curline'><a href='../S/170.html#L180'>L</a>                 180 src/scripting/lua_unit_type.cpp 	luaW_pushunittype(L, it-&gt;second);</span>
<span class='curline'><a href='../S/170.html#L184'>L</a>                 184 src/scripting/lua_unit_type.cpp static int impl_unit_type_pairs(lua_State* L) {</span>
<span class='curline'><a href='../S/170.html#L185'>L</a>                 185 src/scripting/lua_unit_type.cpp 	lua_pushcfunction(L, &amp;impl_unit_type_next);</span>
<span class='curline'><a href='../S/170.html#L186'>L</a>                 186 src/scripting/lua_unit_type.cpp 	lua_pushvalue(L, -2);</span>
<span class='curline'><a href='../S/170.html#L187'>L</a>                 187 src/scripting/lua_unit_type.cpp 	lua_pushnil(L);</span>
<span class='curline'><a href='../S/170.html#L192'>L</a>                 192 src/scripting/lua_unit_type.cpp 	std::string register_metatable(lua_State * L)</span>
<span class='curline'><a href='../S/170.html#L194'>L</a>                 194 src/scripting/lua_unit_type.cpp 		luaL_newmetatable(L, UnitType);</span>
<span class='curline'><a href='../S/170.html#L196'>L</a>                 196 src/scripting/lua_unit_type.cpp 		lua_pushcfunction(L, impl_unit_type_get);</span>
<span class='curline'><a href='../S/170.html#L197'>L</a>                 197 src/scripting/lua_unit_type.cpp 		lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/170.html#L198'>L</a>                 198 src/scripting/lua_unit_type.cpp 		lua_pushcfunction(L, impl_unit_type_equal);</span>
<span class='curline'><a href='../S/170.html#L199'>L</a>                 199 src/scripting/lua_unit_type.cpp 		lua_setfield(L, -2, "__eq");</span>
<span class='curline'><a href='../S/170.html#L200'>L</a>                 200 src/scripting/lua_unit_type.cpp 		lua_pushstring(L, UnitType);</span>
<span class='curline'><a href='../S/170.html#L201'>L</a>                 201 src/scripting/lua_unit_type.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/170.html#L206'>L</a>                 206 src/scripting/lua_unit_type.cpp 	std::string register_table(lua_State* L)</span>
<span class='curline'><a href='../S/170.html#L208'>L</a>                 208 src/scripting/lua_unit_type.cpp 		lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/170.html#L209'>L</a>                 209 src/scripting/lua_unit_type.cpp 		*new(L) unit_type* = nullptr;</span>
<span class='curline'><a href='../S/170.html#L210'>L</a>                 210 src/scripting/lua_unit_type.cpp 		luaL_newmetatable(L, UnitTypeTable);</span>
<span class='curline'><a href='../S/170.html#L211'>L</a>                 211 src/scripting/lua_unit_type.cpp 		lua_pushcfunction(L, impl_unit_type_lookup);</span>
<span class='curline'><a href='../S/170.html#L212'>L</a>                 212 src/scripting/lua_unit_type.cpp 		lua_setfield(L, -2, "__index");</span>
<span class='curline'><a href='../S/170.html#L213'>L</a>                 213 src/scripting/lua_unit_type.cpp 		lua_pushcfunction(L, impl_unit_type_new);</span>
<span class='curline'><a href='../S/170.html#L214'>L</a>                 214 src/scripting/lua_unit_type.cpp 		lua_setfield(L, -2, "__newindex");</span>
<span class='curline'><a href='../S/170.html#L215'>L</a>                 215 src/scripting/lua_unit_type.cpp 		lua_pushcfunction(L, impl_unit_type_count);</span>
<span class='curline'><a href='../S/170.html#L216'>L</a>                 216 src/scripting/lua_unit_type.cpp 		lua_setfield(L, -2, "__len");</span>
<span class='curline'><a href='../S/170.html#L217'>L</a>                 217 src/scripting/lua_unit_type.cpp 		lua_pushcfunction(L, impl_unit_type_pairs);</span>
<span class='curline'><a href='../S/170.html#L218'>L</a>                 218 src/scripting/lua_unit_type.cpp 		lua_setfield(L, -2, "__pairs");</span>
<span class='curline'><a href='../S/170.html#L219'>L</a>                 219 src/scripting/lua_unit_type.cpp 		lua_pushstring(L, UnitTypeTable);</span>
<span class='curline'><a href='../S/170.html#L220'>L</a>                 220 src/scripting/lua_unit_type.cpp 		lua_setfield(L, -2, "__metatable");</span>
<span class='curline'><a href='../S/170.html#L221'>L</a>                 221 src/scripting/lua_unit_type.cpp 		lua_setmetatable(L, -2);</span>
<span class='curline'><a href='../S/170.html#L222'>L</a>                 222 src/scripting/lua_unit_type.cpp 		lua_setfield(L, -2, "unit_types");</span>
<span class='curline'><a href='../S/170.html#L223'>L</a>                 223 src/scripting/lua_unit_type.cpp 		lua_pop(L, 1);</span>
<span class='curline'><a href='../S/170.html#L229'>L</a>                 229 src/scripting/lua_unit_type.cpp void luaW_pushunittype(lua_State *L, const unit_type&amp; ut)</span>
<span class='curline'><a href='../S/170.html#L231'>L</a>                 231 src/scripting/lua_unit_type.cpp 	*static_cast&lt;const unit_type**&gt;(lua_newuserdata(L, sizeof(unit_type*))) = &amp;ut;</span>
<span class='curline'><a href='../S/170.html#L232'>L</a>                 232 src/scripting/lua_unit_type.cpp 	luaL_setmetatable(L, UnitType);</span>
<span class='curline'><a href='../S/170.html#L235'>L</a>                 235 src/scripting/lua_unit_type.cpp const unit_type* luaW_tounittype(lua_State* L, int idx)</span>
<span class='curline'><a href='../S/170.html#L237'>L</a>                 237 src/scripting/lua_unit_type.cpp 	if(void* p = luaL_testudata(L, idx, UnitType)) {</span>
<span class='curline'><a href='../S/170.html#L243'>L</a>                 243 src/scripting/lua_unit_type.cpp const unit_type&amp; luaW_checkunittype(lua_State* L, int idx)</span>
<span class='curline'><a href='../S/170.html#L245'>L</a>                 245 src/scripting/lua_unit_type.cpp 	return **static_cast&lt;const unit_type**&gt;(luaL_checkudata(L, idx, UnitType));;</span>
<span class='curline'><a href='../S/195.html#L44'>L</a>                  44 src/scripting/mapgen_lua_kernel.cpp static int intf_random(lua_State *L)</span>
<span class='curline'><a href='../S/195.html#L46'>L</a>                  46 src/scripting/mapgen_lua_kernel.cpp 	std::mt19937&amp; rng = lua_kernel_base::get_lua_kernel&lt;mapgen_lua_kernel&gt;(L).get_default_rng();</span>
<span class='curline'><a href='../S/195.html#L47'>L</a>                  47 src/scripting/mapgen_lua_kernel.cpp 	if(lua_isnoneornil(L, 1)) {</span>
<span class='curline'><a href='../S/195.html#L50'>L</a>                  50 src/scripting/mapgen_lua_kernel.cpp 		lua_push(L, r / (r_max + 1));</span>
<span class='curline'><a href='../S/195.html#L56'>L</a>                  56 src/scripting/mapgen_lua_kernel.cpp 		if(lua_isnumber(L, 2)) {</span>
<span class='curline'><a href='../S/195.html#L57'>L</a>                  57 src/scripting/mapgen_lua_kernel.cpp 			min = lua_check&lt;int32_t&gt;(L, 1);</span>
<span class='curline'><a href='../S/195.html#L58'>L</a>                  58 src/scripting/mapgen_lua_kernel.cpp 			max = lua_check&lt;int32_t&gt;(L, 2);</span>
<span class='curline'><a href='../S/195.html#L62'>L</a>                  62 src/scripting/mapgen_lua_kernel.cpp 			max = lua_check&lt;int32_t&gt;(L, 1);</span>
<span class='curline'><a href='../S/195.html#L65'>L</a>                  65 src/scripting/mapgen_lua_kernel.cpp 			return luaL_argerror(L, 1, "min &gt; max");</span>
<span class='curline'><a href='../S/195.html#L67'>L</a>                  67 src/scripting/mapgen_lua_kernel.cpp 		lua_push(L, min + static_cast&lt;int&gt;(rng() % (max - min + 1)));</span>
<span class='curline'><a href='../S/195.html#L82'>L</a>                  82 src/scripting/mapgen_lua_kernel.cpp static int intf_find_path(lua_State *L)</span>
<span class='curline'><a href='../S/195.html#L86'>L</a>                  86 src/scripting/mapgen_lua_kernel.cpp 	src.set_wml_x(luaL_checkinteger(L, 1));</span>
<span class='curline'><a href='../S/195.html#L87'>L</a>                  87 src/scripting/mapgen_lua_kernel.cpp 	src.set_wml_y(luaL_checkinteger(L, 2));</span>
<span class='curline'><a href='../S/195.html#L88'>L</a>                  88 src/scripting/mapgen_lua_kernel.cpp 	dst.set_wml_x(luaL_checkinteger(L, 3));</span>
<span class='curline'><a href='../S/195.html#L89'>L</a>                  89 src/scripting/mapgen_lua_kernel.cpp 	dst.set_wml_y(luaL_checkinteger(L, 4));</span>
<span class='curline'><a href='../S/195.html#L90'>L</a>                  90 src/scripting/mapgen_lua_kernel.cpp 	if(lua_isfunction(L, arg)) {</span>
<span class='curline'><a href='../S/195.html#L91'>L</a>                  91 src/scripting/mapgen_lua_kernel.cpp 		const char *msg = lua_pushfstring(L, "%s expected, got %s", lua_typename(L, LUA_TFUNCTION), luaL_typename(L, 5));</span>
<span class='curline'><a href='../S/195.html#L92'>L</a>                  92 src/scripting/mapgen_lua_kernel.cpp 		return luaL_argerror(L, 5, msg);</span>
<span class='curline'><a href='../S/195.html#L94'>L</a>                  94 src/scripting/mapgen_lua_kernel.cpp 	lua_pathfind_cost_calculator calc(L, 5);</span>
<span class='curline'><a href='../S/195.html#L95'>L</a>                  95 src/scripting/mapgen_lua_kernel.cpp 	int width = luaL_checkinteger(L, 6);</span>
<span class='curline'><a href='../S/195.html#L96'>L</a>                  96 src/scripting/mapgen_lua_kernel.cpp 	int height = luaL_checkinteger(L, 7);</span>
<span class='curline'><a href='../S/195.html#L98'>L</a>                  98 src/scripting/mapgen_lua_kernel.cpp 	if(lua_isboolean(L, 8)) {</span>
<span class='curline'><a href='../S/195.html#L99'>L</a>                  99 src/scripting/mapgen_lua_kernel.cpp 		border = luaW_toboolean(L, 8);</span>
<span class='curline'><a href='../S/195.html#L104'>L</a>                 104 src/scripting/mapgen_lua_kernel.cpp 	lua_createtable(L, nb, 0);</span>
<span class='curline'><a href='../S/195.html#L107'>L</a>                 107 src/scripting/mapgen_lua_kernel.cpp 		lua_createtable(L, 2, 0);</span>
<span class='curline'><a href='../S/195.html#L108'>L</a>                 108 src/scripting/mapgen_lua_kernel.cpp 		lua_pushinteger(L, res.steps[i].wml_x());</span>
<span class='curline'><a href='../S/195.html#L109'>L</a>                 109 src/scripting/mapgen_lua_kernel.cpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/195.html#L110'>L</a>                 110 src/scripting/mapgen_lua_kernel.cpp 		lua_pushinteger(L, res.steps[i].wml_y());</span>
<span class='curline'><a href='../S/195.html#L111'>L</a>                 111 src/scripting/mapgen_lua_kernel.cpp 		lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/195.html#L112'>L</a>                 112 src/scripting/mapgen_lua_kernel.cpp 		lua_rawseti(L, -2, i + 1);</span>
<span class='curline'><a href='../S/195.html#L114'>L</a>                 114 src/scripting/mapgen_lua_kernel.cpp 	lua_pushinteger(L, res.move_cost);</span>
<span class='curline'><a href='../S/195.html#L125'>L</a>                 125 src/scripting/mapgen_lua_kernel.cpp 	lua_State *L = mState;</span>
<span class='curline'><a href='../S/195.html#L129'>L</a>                 129 src/scripting/mapgen_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/195.html#L130'>L</a>                 130 src/scripting/mapgen_lua_kernel.cpp 	lua_pushnil(L);</span>
<span class='curline'><a href='../S/195.html#L131'>L</a>                 131 src/scripting/mapgen_lua_kernel.cpp 	lua_setfield(L, -2, "random");</span>
<span class='curline'><a href='../S/195.html#L133'>L</a>                 133 src/scripting/mapgen_lua_kernel.cpp 	lua_settop(L, 0);</span>
<span class='curline'><a href='../S/195.html#L141'>L</a>                 141 src/scripting/mapgen_lua_kernel.cpp 	lua_getglobal(L, "wesnoth");</span>
<span class='curline'><a href='../S/195.html#L142'>L</a>                 142 src/scripting/mapgen_lua_kernel.cpp 	assert(lua_istable(L,-1));</span>
<span class='curline'><a href='../S/195.html#L143'>L</a>                 143 src/scripting/mapgen_lua_kernel.cpp 	luaL_setfuncs(L, callbacks, 0);</span>
<span class='curline'><a href='../S/195.html#L144'>L</a>                 144 src/scripting/mapgen_lua_kernel.cpp 	lua_pop(L, 1);</span>
<span class='curline'><a href='../S/195.html#L145'>L</a>                 145 src/scripting/mapgen_lua_kernel.cpp 	assert(lua_gettop(L) == 0);</span>
<span class='curline'><a href='../S/207.html#L79'>L</a>                  79 src/scripting/push_check.hpp 	lua_check(lua_State *L, int n)</span>
<span class='curline'><a href='../S/207.html#L81'>L</a>                  81 src/scripting/push_check.hpp 		return luaL_checkstring(L, n);</span>
<span class='curline'><a href='../S/207.html#L85'>L</a>                  85 src/scripting/push_check.hpp 	lua_push(lua_State *L, const T&amp; val)</span>
<span class='curline'><a href='../S/207.html#L87'>L</a>                  87 src/scripting/push_check.hpp 		lua_pushlstring(L, val.c_str(), val.size());</span>
<span class='curline'><a href='../S/207.html#L93'>L</a>                  93 src/scripting/push_check.hpp 	lua_check(lua_State *L, int n)</span>
<span class='curline'><a href='../S/207.html#L95'>L</a>                  95 src/scripting/push_check.hpp 		return luaW_checkconfig(L, n);</span>
<span class='curline'><a href='../S/207.html#L99'>L</a>                  99 src/scripting/push_check.hpp 	lua_push(lua_State *L, const config&amp; val)</span>
<span class='curline'><a href='../S/207.html#L101'>L</a>                 101 src/scripting/push_check.hpp 		luaW_pushconfig(L, val);</span>
<span class='curline'><a href='../S/207.html#L107'>L</a>                 107 src/scripting/push_check.hpp 	lua_check(lua_State *L, int n)</span>
<span class='curline'><a href='../S/207.html#L109'>L</a>                 109 src/scripting/push_check.hpp 		return luaW_checklocation(L, n);</span>
<span class='curline'><a href='../S/207.html#L113'>L</a>                 113 src/scripting/push_check.hpp 	lua_push(lua_State *L, const map_location&amp; val)</span>
<span class='curline'><a href='../S/207.html#L115'>L</a>                 115 src/scripting/push_check.hpp 		luaW_pushlocation(L, val);</span>
<span class='curline'><a href='../S/207.html#L121'>L</a>                 121 src/scripting/push_check.hpp 	lua_check(lua_State *L, int n)</span>
<span class='curline'><a href='../S/207.html#L124'>L</a>                 124 src/scripting/push_check.hpp 		std::string str = lua_check_impl::lua_check&lt;std::string&gt;(L, n);</span>
<span class='curline'><a href='../S/207.html#L127'>L</a>                 127 src/scripting/push_check.hpp 			luaL_argerror(L, n, ("cannot convert " + str + " to enum " + T::name()).c_str());</span>
<span class='curline'><a href='../S/207.html#L133'>L</a>                 133 src/scripting/push_check.hpp 	lua_push(lua_State *L, T val)</span>
<span class='curline'><a href='../S/207.html#L135'>L</a>                 135 src/scripting/push_check.hpp 		lua_check_impl::lua_push(L, val.to_string());</span>
<span class='curline'><a href='../S/207.html#L141'>L</a>                 141 src/scripting/push_check.hpp 	lua_check(lua_State *L, int n)</span>
<span class='curline'><a href='../S/207.html#L143'>L</a>                 143 src/scripting/push_check.hpp 		return luaW_checktstring(L, n);</span>
<span class='curline'><a href='../S/207.html#L147'>L</a>                 147 src/scripting/push_check.hpp 	lua_push(lua_State *L, const t_string&amp; val)</span>
<span class='curline'><a href='../S/207.html#L149'>L</a>                 149 src/scripting/push_check.hpp 		luaW_pushtstring(L, val);</span>
<span class='curline'><a href='../S/207.html#L155'>L</a>                 155 src/scripting/push_check.hpp 	lua_check(lua_State *L, int n)</span>
<span class='curline'><a href='../S/207.html#L157'>L</a>                 157 src/scripting/push_check.hpp 		return luaW_toboolean(L, n);</span>
<span class='curline'><a href='../S/207.html#L161'>L</a>                 161 src/scripting/push_check.hpp 	lua_push(lua_State *L, bool val)</span>
<span class='curline'><a href='../S/207.html#L163'>L</a>                 163 src/scripting/push_check.hpp 		lua_pushboolean(L, val);</span>
<span class='curline'><a href='../S/207.html#L169'>L</a>                 169 src/scripting/push_check.hpp 	lua_check(lua_State *L, int n)</span>
<span class='curline'><a href='../S/207.html#L171'>L</a>                 171 src/scripting/push_check.hpp 		return luaL_checknumber(L, n);</span>
<span class='curline'><a href='../S/207.html#L175'>L</a>                 175 src/scripting/push_check.hpp 	lua_push(lua_State *L, T val)</span>
<span class='curline'><a href='../S/207.html#L177'>L</a>                 177 src/scripting/push_check.hpp 		lua_pushnumber(L, val);</span>
<span class='curline'><a href='../S/207.html#L183'>L</a>                 183 src/scripting/push_check.hpp 	lua_check(lua_State *L, int n)</span>
<span class='curline'><a href='../S/207.html#L185'>L</a>                 185 src/scripting/push_check.hpp 		return luaL_checkinteger(L, n);</span>
<span class='curline'><a href='../S/207.html#L190'>L</a>                 190 src/scripting/push_check.hpp 	lua_push(lua_State *L, T val)</span>
<span class='curline'><a href='../S/207.html#L192'>L</a>                 192 src/scripting/push_check.hpp 		lua_pushnumber(L, val);</span>
<span class='curline'><a href='../S/207.html#L199'>L</a>                 199 src/scripting/push_check.hpp 	lua_check(lua_State *L, int n)</span>
<span class='curline'><a href='../S/207.html#L202'>L</a>                 202 src/scripting/push_check.hpp 		if (lua_istable(L, n)) {</span>
<span class='curline'><a href='../S/207.html#L203'>L</a>                 203 src/scripting/push_check.hpp 			lua_rawgeti(L, n, 1);</span>
<span class='curline'><a href='../S/207.html#L204'>L</a>                 204 src/scripting/push_check.hpp 			result.first = lua_check&lt;const typename T::first_type&amp;&gt;(L, -1);</span>
<span class='curline'><a href='../S/207.html#L205'>L</a>                 205 src/scripting/push_check.hpp 			lua_rawgeti(L, n, 2);</span>
<span class='curline'><a href='../S/207.html#L206'>L</a>                 206 src/scripting/push_check.hpp 			result.second = lua_check&lt;const typename T::second_type&amp;&gt;(L, -1);</span>
<span class='curline'><a href='../S/207.html#L207'>L</a>                 207 src/scripting/push_check.hpp 			lua_pop(L, 2);</span>
<span class='curline'><a href='../S/207.html#L213'>L</a>                 213 src/scripting/push_check.hpp 	lua_push(lua_State *L, const T&amp; val)</span>
<span class='curline'><a href='../S/207.html#L215'>L</a>                 215 src/scripting/push_check.hpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/207.html#L216'>L</a>                 216 src/scripting/push_check.hpp 		lua_push&lt;const typename T::first_type&amp;&gt;(L, val.first);</span>
<span class='curline'><a href='../S/207.html#L217'>L</a>                 217 src/scripting/push_check.hpp 		lua_rawseti(L, -2, 1);</span>
<span class='curline'><a href='../S/207.html#L218'>L</a>                 218 src/scripting/push_check.hpp 		lua_push&lt;const typename T::second_type&amp;&gt;(L, val.second);</span>
<span class='curline'><a href='../S/207.html#L219'>L</a>                 219 src/scripting/push_check.hpp 		lua_rawseti(L, -2, 2);</span>
<span class='curline'><a href='../S/207.html#L225'>L</a>                 225 src/scripting/push_check.hpp 	lua_check(lua_State * L, int n)</span>
<span class='curline'><a href='../S/207.html#L227'>L</a>                 227 src/scripting/push_check.hpp 		if (lua_istable(L, n))</span>
<span class='curline'><a href='../S/207.html#L230'>L</a>                 230 src/scripting/push_check.hpp 			for (int i = 1, i_end = lua_rawlen(L, n); i &lt;= i_end; ++i)</span>
<span class='curline'><a href='../S/207.html#L232'>L</a>                 232 src/scripting/push_check.hpp 				lua_rawgeti(L, n, i);</span>
<span class='curline'><a href='../S/207.html#L233'>L</a>                 233 src/scripting/push_check.hpp 				res.push_back(lua_check_impl::lua_check&lt;remove_constref&lt;typename T::reference&gt;&gt;(L, -1));</span>
<span class='curline'><a href='../S/207.html#L234'>L</a>                 234 src/scripting/push_check.hpp 				lua_pop(L, 1);</span>
<span class='curline'><a href='../S/207.html#L240'>L</a>                 240 src/scripting/push_check.hpp 			luaL_argerror(L, n, "Table expected");</span>
<span class='curline'><a href='../S/207.html#L258'>L</a>                 258 src/scripting/push_check.hpp 	lua_push(lua_State * L, const T&amp; list )</span>
<span class='curline'><a href='../S/207.html#L262'>L</a>                 262 src/scripting/push_check.hpp 		lua_createtable(L, list.size(), 0);</span>
<span class='curline'><a href='../S/207.html#L265'>L</a>                 265 src/scripting/push_check.hpp 			lua_check_impl::lua_push&lt;remove_constref&lt;typename T::reference&gt;&gt;(L, *iter);</span>
<span class='curline'><a href='../S/207.html#L266'>L</a>                 266 src/scripting/push_check.hpp 			lua_rawseti(L, -2, i++);</span>
<span class='curline'><a href='../S/207.html#L274'>L</a>                 274 src/scripting/push_check.hpp 	lua_push(lua_State * L, const T&amp; map )</span>
<span class='curline'><a href='../S/207.html#L276'>L</a>                 276 src/scripting/push_check.hpp 		lua_newtable(L);</span>
<span class='curline'><a href='../S/207.html#L279'>L</a>                 279 src/scripting/push_check.hpp 			lua_check_impl::lua_push&lt;remove_constref&lt;typename T::key_type&gt;&gt;(L, pair.first);</span>
<span class='curline'><a href='../S/207.html#L280'>L</a>                 280 src/scripting/push_check.hpp 			lua_check_impl::lua_push&lt;remove_constref&lt;typename T::mapped_type&gt;&gt;(L, pair.second);</span>
<span class='curline'><a href='../S/207.html#L281'>L</a>                 281 src/scripting/push_check.hpp 			lua_settable(L, -3);</span>
<span class='curline'><a href='../S/207.html#L288'>L</a>                 288 src/scripting/push_check.hpp lua_check_impl::remove_constref&lt;T&gt; lua_check(lua_State *L, int n)</span>
<span class='curline'><a href='../S/207.html#L291'>L</a>                 291 src/scripting/push_check.hpp 	return lua_check_impl::lua_check&lt;lua_check_impl::remove_constref&lt;T&gt;&gt;(L, n);</span>
<span class='curline'><a href='../S/207.html#L295'>L</a>                 295 src/scripting/push_check.hpp void lua_push(lua_State *L, const T&amp; val)</span>
<span class='curline'><a href='../S/207.html#L297'>L</a>                 297 src/scripting/push_check.hpp 	return lua_check_impl::lua_push&lt;lua_check_impl::remove_constref&lt;T&gt;&gt;(L, val);</span>
<span class='curline'><a href='../S/863.html#L282'>L</a>                 282 src/utils/smart_list.hpp 	void splice(const iterator &amp; pos, smart_list &amp; L);</span>
<span class='curline'><a href='../S/863.html#L283'>L</a>                 283 src/utils/smart_list.hpp 	void splice(const iterator &amp; pos, smart_list &amp; L, const iterator &amp; i);</span>
<span class='curline'><a href='../S/863.html#L284'>L</a>                 284 src/utils/smart_list.hpp 	void splice(const iterator &amp; pos, smart_list &amp; L, const iterator &amp; f, const iterator &amp; l);</span>
<span class='curline'><a href='../S/863.html#L294'>L</a>                 294 src/utils/smart_list.hpp 	void merge(smart_list &amp; L)             { merge(L, std::less&lt;value_type&gt;()); }</span>
<span class='curline'><a href='../S/863.html#L296'>L</a>                 296 src/utils/smart_list.hpp 	void merge(smart_list &amp; L, const BinaryPredicate &amp; p);</span>
<span class='curline'><a href='../S/863.html#L460'>L</a>                 460 src/utils/smart_list.hpp inline void smart_list&lt;Data&gt;::splice(const iterator &amp; pos, smart_list &amp; L)</span>
<span class='curline'><a href='../S/863.html#L462'>L</a>                 462 src/utils/smart_list.hpp 	if ( L.root_.next != &amp;L.root ) // if L has nodes to splice.</span>
<span class='curline'><a href='../S/863.html#L463'>L</a>                 463 src/utils/smart_list.hpp 		splice(pos.ptr_, *L.root_.next, *L.root_.prev);</span>
<span class='curline'><a href='../S/863.html#L543'>L</a>                 543 src/utils/smart_list.hpp inline void smart_list&lt;Data&gt;::merge(smart_list &amp; L, const BinaryPredicate &amp; p)</span>
<span class='curline'><a href='../S/863.html#L546'>L</a>                 546 src/utils/smart_list.hpp 	if ( this == &amp;L )</span>
<span class='curline'><a href='../S/863.html#L550'>L</a>                 550 src/utils/smart_list.hpp 	node_t * source = L.root_.next;</span>
<span class='curline'><a href='../S/863.html#L573'>L</a>                 573 src/utils/smart_list.hpp 		splice(&amp;root_, *source, *(L.root_.prev));</span>
<span class='curline'><a href='../S/953.html#L84'>L</a>                  84 src/wesnoth_lua_config.h #define LUAI_THROW(L,c) throw(c)</span>
<span class='curline'><a href='../S/953.html#L86'>L</a>                  86 src/wesnoth_lua_config.h #define LUAI_TRY(L,c,a) \</span>
<span class='curline'><a href='../S/953.html#L94'>L</a>                  94 src/wesnoth_lua_config.h 			lua_pushstring(L, e.what()); \</span>
<span class='curline'><a href='../S/953.html#L95'>L</a>                  95 src/wesnoth_lua_config.h 			luaG_errormsg(L); \</span>
<span class='curline'><a href='../S/1090.html#L300'>L</a>                 300 src/xBRZ/xbrz.cpp void rgbtoLab(uint32_t c, unsigned char&amp; L, signed char&amp; A, signed char&amp; B)</span>
<span class='curline'><a href='../S/1090.html#L332'>L</a>                 332 src/xBRZ/xbrz.cpp     L = static_cast&lt;unsigned char&gt;(116 * var_Y  - 16);</span>
</pre>
</body>
</html>
