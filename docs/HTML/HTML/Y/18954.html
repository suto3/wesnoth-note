<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>sock</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/4093.html#L77'>sock</a>               77 data/tools/wesnoth/campaignserver_client.py             self.sock = socket.socket(addr[0], addr[1], addr[2])</span>
<span class='curline'><a href='../S/4093.html#L78'>sock</a>               78 data/tools/wesnoth/campaignserver_client.py             self.sock.connect(addr[4])</span>
<span class='curline'><a href='../S/4093.html#L79'>sock</a>               79 data/tools/wesnoth/campaignserver_client.py             self.sock.send(struct.pack("!I", 0))</span>
<span class='curline'><a href='../S/4093.html#L81'>sock</a>               81 data/tools/wesnoth/campaignserver_client.py                 connection_num = self.sock.recv(4)</span>
<span class='curline'><a href='../S/4093.html#L104'>sock</a>              104 data/tools/wesnoth/campaignserver_client.py             self.sock.shutdown(2)</span>
<span class='curline'><a href='../S/4093.html#L126'>sock</a>              126 data/tools/wesnoth/campaignserver_client.py         self.sock.sendall(zpacket)</span>
<span class='curline'><a href='../S/4093.html#L134'>sock</a>              134 data/tools/wesnoth/campaignserver_client.py             r = self.sock.recv(4 - len(packet))</span>
<span class='curline'><a href='../S/4093.html#L148'>sock</a>              148 data/tools/wesnoth/campaignserver_client.py             r = self.sock.recv(l - len(packet))</span>
<span class='curline'><a href='../S/921.html#L425'>sock</a>              425 src/campaign_server/campaign_server.cpp void server::send_message(const std::string&amp; msg, socket_ptr sock)</span>
<span class='curline'><a href='../S/921.html#L429'>sock</a>              429 src/campaign_server/campaign_server.cpp 	async_send_doc(sock, doc, std::bind(&amp;server::handle_new_client, this, _1), null_handler);</span>
<span class='curline'><a href='../S/921.html#L432'>sock</a>              432 src/campaign_server/campaign_server.cpp void server::send_error(const std::string&amp; msg, socket_ptr sock)</span>
<span class='curline'><a href='../S/921.html#L434'>sock</a>              434 src/campaign_server/campaign_server.cpp 	ERR_CS &lt;&lt; "[" &lt;&lt; client_address(sock) &lt;&lt; "]: " &lt;&lt; msg &lt;&lt; '\n';</span>
<span class='curline'><a href='../S/921.html#L437'>sock</a>              437 src/campaign_server/campaign_server.cpp 	async_send_doc(sock, doc, std::bind(&amp;server::handle_new_client, this, _1), null_handler);</span>
<span class='curline'><a href='../S/921.html#L546'>sock</a>              546 src/campaign_server/campaign_server.cpp 	async_send_doc(req.sock, doc, std::bind(&amp;server::handle_new_client, this, _1));</span>
<span class='curline'><a href='../S/921.html#L556'>sock</a>              556 src/campaign_server/campaign_server.cpp 		send_error("Add-on '" + req.cfg["name"].str() + "' not found.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L563'>sock</a>              563 src/campaign_server/campaign_server.cpp 			send_error("Add-on '" + req.cfg["name"].str() + "' could not be read by the server.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L568'>sock</a>              568 src/campaign_server/campaign_server.cpp 		async_send_file(req.sock, campaign["filename"],</span>
<span class='curline'><a href='../S/921.html#L586'>sock</a>              586 src/campaign_server/campaign_server.cpp 		send_error("The server is currently in read-only mode, add-on uploads are disabled.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L602'>sock</a>              602 src/campaign_server/campaign_server.cpp 	send_message(terms, req.sock);</span>
<span class='curline'><a href='../S/921.html#L633'>sock</a>              633 src/campaign_server/campaign_server.cpp 			send_error("Add-on rejected: The add-on name contains an invalid UTF-8 sequence.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L637'>sock</a>              637 src/campaign_server/campaign_server.cpp 			send_error("Server error: The server add-ons list is damaged.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L645'>sock</a>              645 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: The server is currently in read-only mode.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L648'>sock</a>              648 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: No add-on data was supplied.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L651'>sock</a>              651 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: The name of the add-on is invalid.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L654'>sock</a>              654 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: The name of the add-on starts with an illegal formatting character.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L657'>sock</a>              657 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: You did not specify the title of the add-on in the pbl file!", req.sock);</span>
<span class='curline'><a href='../S/921.html#L660'>sock</a>              660 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: The title of the add-on starts with an illegal formatting character.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L663'>sock</a>              663 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: You did not specify a known type for the add-on in the pbl file! (See PblWML: wiki.wesnoth.org/PblWML)", req.sock);</span>
<span class='curline'><a href='../S/921.html#L666'>sock</a>              666 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: You did not specify the author(s) of the add-on in the pbl file!", req.sock);</span>
<span class='curline'><a href='../S/921.html#L669'>sock</a>              669 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: You did not specify the version of the add-on in the pbl file!", req.sock);</span>
<span class='curline'><a href='../S/921.html#L672'>sock</a>              672 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: You did not specify a description of the add-on in the pbl file!", req.sock);</span>
<span class='curline'><a href='../S/921.html#L675'>sock</a>              675 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: You did not specify your email address in the pbl file!", req.sock);</span>
<span class='curline'><a href='../S/921.html#L680'>sock</a>              680 src/campaign_server/campaign_server.cpp 				   req.sock);</span>
<span class='curline'><a href='../S/921.html#L683'>sock</a>              683 src/campaign_server/campaign_server.cpp 		send_error("Add-on rejected: The add-on already exists, and your passphrase was incorrect.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L698'>sock</a>              698 src/campaign_server/campaign_server.cpp 				send_error("Add-on upload denied. Please contact the server administration for assistance.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L704'>sock</a>              704 src/campaign_server/campaign_server.cpp 			send_error("Add-on rejected: The add-on publish information contains an invalid UTF-8 sequence.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L774'>sock</a>              774 src/campaign_server/campaign_server.cpp 		send_message(message, req.sock);</span>
<span class='curline'><a href='../S/921.html#L786'>sock</a>              786 src/campaign_server/campaign_server.cpp 		send_error("Cannot delete add-on: The server is currently in read-only mode.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L795'>sock</a>              795 src/campaign_server/campaign_server.cpp 		send_error("The add-on does not exist.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L803'>sock</a>              803 src/campaign_server/campaign_server.cpp 		send_error("The passphrase is incorrect.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L826'>sock</a>              826 src/campaign_server/campaign_server.cpp 	send_message("Add-on deleted.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L838'>sock</a>              838 src/campaign_server/campaign_server.cpp 		send_error("Cannot change passphrase: The server is currently in read-only mode.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L845'>sock</a>              845 src/campaign_server/campaign_server.cpp 		send_error("No add-on with that name exists.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L847'>sock</a>              847 src/campaign_server/campaign_server.cpp 		send_error("Your old passphrase was incorrect.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L849'>sock</a>              849 src/campaign_server/campaign_server.cpp 		send_error("No new passphrase was supplied.", req.sock);</span>
<span class='curline'><a href='../S/921.html#L853'>sock</a>              853 src/campaign_server/campaign_server.cpp 		send_message("Passphrase changed.", req.sock);</span>
<span class='curline'><a href='../S/922.html#L54'>sock</a>               54 src/campaign_server/campaign_server.hpp 		const socket_ptr sock;</span>
<span class='curline'><a href='../S/922.html#L73'>sock</a>               73 src/campaign_server/campaign_server.hpp 			, sock(reqsock)</span>
<span class='curline'><a href='../S/922.html#L74'>sock</a>               74 src/campaign_server/campaign_server.hpp 			, addr(client_address(sock))</span>
<span class='curline'><a href='../S/922.html#L179'>sock</a>              179 src/campaign_server/campaign_server.hpp 	void send_message(const std::string&amp; msg, socket_ptr sock);</span>
<span class='curline'><a href='../S/922.html#L189'>sock</a>              189 src/campaign_server/campaign_server.hpp 	void send_error(const std::string&amp; msg, socket_ptr sock);</span>
<span class='curline'><a href='../S/1128.html#L67'>sock</a>               67 src/game_initialization/multiplayer.cpp 	wesnothd_connection_ptr sock;</span>
<span class='curline'><a href='../S/1128.html#L87'>sock</a>               87 src/game_initialization/multiplayer.cpp 	sock = gui2::dialogs::network_transmission::wesnothd_connect_dialog(video, "connect to server", host, port);</span>
<span class='curline'><a href='../S/1128.html#L89'>sock</a>               89 src/game_initialization/multiplayer.cpp 		if(!sock) {</span>
<span class='curline'><a href='../S/1128.html#L90'>sock</a>               90 src/game_initialization/multiplayer.cpp 			return sock;</span>
<span class='curline'><a href='../S/1128.html#L94'>sock</a>               94 src/game_initialization/multiplayer.cpp 		gui2::dialogs::network_transmission::wesnothd_receive_dialog(video, "waiting", data, *sock);</span>
<span class='curline'><a href='../S/1128.html#L123'>sock</a>              123 src/game_initialization/multiplayer.cpp 			sock = wesnothd_connection_ptr();</span>
<span class='curline'><a href='../S/1128.html#L124'>sock</a>              124 src/game_initialization/multiplayer.cpp 			sock = gui2::dialogs::network_transmission::wesnothd_connect_dialog(video, "redirect", host, port);</span>
<span class='curline'><a href='../S/1128.html#L133'>sock</a>              133 src/game_initialization/multiplayer.cpp 			sock-&gt;send_data(res);</span>
<span class='curline'><a href='../S/1128.html#L164'>sock</a>              164 src/game_initialization/multiplayer.cpp 			sock-&gt;send_data(response);</span>
<span class='curline'><a href='../S/1128.html#L165'>sock</a>              165 src/game_initialization/multiplayer.cpp 			gui2::dialogs::network_transmission::wesnothd_receive_dialog(video, "login response", data, *sock);</span>
<span class='curline'><a href='../S/1128.html#L239'>sock</a>              239 src/game_initialization/multiplayer.cpp 					sock-&gt;send_data(response);</span>
<span class='curline'><a href='../S/1128.html#L240'>sock</a>              240 src/game_initialization/multiplayer.cpp 					gui2::dialogs::network_transmission::wesnothd_receive_dialog(video, "login response", data, *sock);</span>
<span class='curline'><a href='../S/1128.html#L323'>sock</a>              323 src/game_initialization/multiplayer.cpp 		return sock;</span>
<span class='curline'><a href='../S/146.html#L464'>sock</a>              464 src/server/game.cpp void game::transfer_side_control(const socket_ptr sock, const simple_wml::node&amp; cfg) {</span>
<span class='curline'><a href='../S/146.html#L466'>sock</a>              466 src/server/game.cpp 	if (!is_player(sock) &amp;&amp; sock != owner_) {</span>
<span class='curline'><a href='../S/146.html#L467'>sock</a>              467 src/server/game.cpp 		send_server_message("You cannot change controllers: not a player.", sock);</span>
<span class='curline'><a href='../S/146.html#L477'>sock</a>              477 src/server/game.cpp 		send_server_message(msg.str(), sock);</span>
<span class='curline'><a href='../S/146.html#L482'>sock</a>              482 src/server/game.cpp 		send_server_message("Invalid side number.", sock);</span>
<span class='curline'><a href='../S/146.html#L497'>sock</a>              497 src/server/game.cpp 		send_server_message(msg.str(), sock);</span>
<span class='curline'><a href='../S/146.html#L502'>sock</a>              502 src/server/game.cpp 	if (!(sock == old_player || sock == owner_)) {</span>
<span class='curline'><a href='../S/146.html#L507'>sock</a>              507 src/server/game.cpp 		send_server_message(msg.str(), sock);</span>
<span class='curline'><a href='../S/146.html#L515'>sock</a>              515 src/server/game.cpp 		send_server_message(newplayer_name.to_string() + " is not in this game", sock);</span>
<span class='curline'><a href='../S/146.html#L522'>sock</a>              522 src/server/game.cpp 		send_server_message(msg.str(), sock);</span>
<span class='curline'><a href='../S/146.html#L552'>sock</a>              552 src/server/game.cpp 		const socket_ptr sock,</span>
<span class='curline'><a href='../S/146.html#L559'>sock</a>              559 src/server/game.cpp 	sides_[side_index] = sock;</span>
<span class='curline'><a href='../S/146.html#L579'>sock</a>              579 src/server/game.cpp 	send_data(response, sock);</span>
<span class='curline'><a href='../S/146.html#L590'>sock</a>              590 src/server/game.cpp 		send_to_player(sock, response);</span>
<span class='curline'><a href='../S/146.html#L631'>sock</a>              631 src/server/game.cpp bool game::player_is_banned(const socket_ptr sock) const {</span>
<span class='curline'><a href='../S/146.html#L633'>sock</a>              633 src/server/game.cpp 		std::find(bans_.begin(), bans_.end(), client_address(sock));</span>
<span class='curline'><a href='../S/146.html#L1451'>sock</a>             1451 src/server/game.cpp void game::send_observerjoins(const socket_ptr sock) const {</span>
<span class='curline'><a href='../S/146.html#L1453'>sock</a>             1453 src/server/game.cpp 		if (*ob == sock) continue;</span>
<span class='curline'><a href='../S/146.html#L1457'>sock</a>             1457 src/server/game.cpp 		if (sock == socket_ptr()) {</span>
<span class='curline'><a href='../S/146.html#L1462'>sock</a>             1462 src/server/game.cpp 			send_to_player(sock, cfg);</span>
<span class='curline'><a href='../S/146.html#L1671'>sock</a>             1671 src/server/game.cpp void game::send_server_message(const char* message, socket_ptr sock, simple_wml::document* docptr) const</span>
<span class='curline'><a href='../S/146.html#L1692'>sock</a>             1692 src/server/game.cpp 	if(sock) {</span>
<span class='curline'><a href='../S/146.html#L1693'>sock</a>             1693 src/server/game.cpp 		send_to_player(sock, doc);</span>
<span class='curline'><a href='../S/149.html#L162'>sock</a>              162 src/server/game.hpp 	void transfer_side_control(const socket_ptr sock, const simple_wml::node&amp; cfg);</span>
<span class='curline'><a href='../S/149.html#L195'>sock</a>              195 src/server/game.hpp 	void send_server_message(const char* message, socket_ptr sock=socket_ptr(), simple_wml::document* doc=nullptr) const;</span>
<span class='curline'><a href='../S/149.html#L196'>sock</a>              196 src/server/game.hpp 	void send_server_message(const std::string&amp; message, socket_ptr sock=socket_ptr(), simple_wml::document* doc=nullptr) const</span>
<span class='curline'><a href='../S/149.html#L198'>sock</a>              198 src/server/game.hpp 		send_server_message(message.c_str(), sock, doc);</span>
<span class='curline'><a href='../S/149.html#L279'>sock</a>              279 src/server/game.hpp 			const socket_ptr sock,</span>
<span class='curline'><a href='../S/149.html#L295'>sock</a>              295 src/server/game.hpp 	void send_observerjoins(const socket_ptr sock=socket_ptr()) const;</span>
<span class='curline'><a href='../S/149.html#L297'>sock</a>              297 src/server/game.hpp 	void send_history(const socket_ptr sock) const;</span>
<span class='curline'><a href='../S/149.html#L417'>sock</a>              417 src/server/game.hpp 	game_is_member(socket_ptr sock) : sock_(sock) {}</span>
<span class='curline'><a href='../S/1367.html#L54'>sock</a>               54 utils/wesnothd.pl 		my $sock = $socks_map{$socket};</span>
<span class='curline'><a href='../S/1367.html#L55'>sock</a>               55 utils/wesnothd.pl 		my $packet = &amp;wml::write_binary($outgoing_schemas{$sock}, $doc) . chr 0;</span>
<span class='curline'><a href='../S/1367.html#L58'>sock</a>               58 utils/wesnothd.pl 		my $res = syswrite($sock, $packet, length $packet);</span>
<span class='curline'><a href='../S/1367.html#L59'>sock</a>               59 utils/wesnothd.pl 		&amp;socket_disconnected($sock) unless $res == length $packet;</span>
<span class='curline'><a href='../S/1367.html#L64'>sock</a>               64 utils/wesnothd.pl 	my ($sock, $msg) = @_;</span>
<span class='curline'><a href='../S/1367.html#L67'>sock</a>               67 utils/wesnothd.pl 	&amp;send_data($doc,$sock);</span>
<span class='curline'><a href='../S/1367.html#L78'>sock</a>               78 utils/wesnothd.pl 	my ($sock) = @_;</span>
<span class='curline'><a href='../S/1367.html#L80'>sock</a>               80 utils/wesnothd.pl 	$read_set-&gt;add($sock);</span>
<span class='curline'><a href='../S/1367.html#L81'>sock</a>               81 utils/wesnothd.pl 	$outgoing_schemas{$sock} = [];</span>
<span class='curline'><a href='../S/1367.html#L82'>sock</a>               82 utils/wesnothd.pl 	$incoming_schemas{$sock} = [];</span>
<span class='curline'><a href='../S/1367.html#L83'>sock</a>               83 utils/wesnothd.pl 	$pending_handshake{$sock} = 1;</span>
<span class='curline'><a href='../S/1367.html#L84'>sock</a>               84 utils/wesnothd.pl 	$socks_map{$sock} = $sock;</span>
<span class='curline'><a href='../S/1367.html#L86'>sock</a>               86 utils/wesnothd.pl 	fcntl($sock, F_GETFL, $flags) or die "Couldn't get flags: $!";</span>
<span class='curline'><a href='../S/1367.html#L88'>sock</a>               88 utils/wesnothd.pl 	fcntl($sock, F_SETFL, $flags) or die "Couldn't set flags: $!";</span>
<span class='curline'><a href='../S/1367.html#L92'>sock</a>               92 utils/wesnothd.pl 	my ($sock) = @_;</span>
<span class='curline'><a href='../S/1367.html#L93'>sock</a>               93 utils/wesnothd.pl 	$sock = $socks_map{$sock};</span>
<span class='curline'><a href='../S/1367.html#L95'>sock</a>               95 utils/wesnothd.pl 	delete $socks_map{$sock};</span>
<span class='curline'><a href='../S/1367.html#L96'>sock</a>               96 utils/wesnothd.pl 	delete $outgoing_schemas{$sock};</span>
<span class='curline'><a href='../S/1367.html#L97'>sock</a>               97 utils/wesnothd.pl 	delete $incoming_schemas{$sock};</span>
<span class='curline'><a href='../S/1367.html#L98'>sock</a>               98 utils/wesnothd.pl 	delete $incoming_bufs{$sock};</span>
<span class='curline'><a href='../S/1367.html#L99'>sock</a>               99 utils/wesnothd.pl 	delete $pending_handshake{$sock};</span>
<span class='curline'><a href='../S/1367.html#L100'>sock</a>              100 utils/wesnothd.pl 	delete $connection_nums{$sock};</span>
<span class='curline'><a href='../S/1367.html#L101'>sock</a>              101 utils/wesnothd.pl 	delete $lobby_players{$sock};</span>
<span class='curline'><a href='../S/1367.html#L102'>sock</a>              102 utils/wesnothd.pl 	if(my $username = $socket_user_name{$sock}) {</span>
<span class='curline'><a href='../S/1367.html#L104'>sock</a>              104 utils/wesnothd.pl 		delete $socket_user_name{$sock};</span>
<span class='curline'><a href='../S/1367.html#L126'>sock</a>              126 utils/wesnothd.pl 	$read_set-&gt;remove($sock);</span>
<span class='curline'><a href='../S/1367.html#L127'>sock</a>              127 utils/wesnothd.pl 	close $sock;</span>
<span class='curline'><a href='../S/1367.html#L132'>sock</a>              132 utils/wesnothd.pl 	while(my $sock = each %lobby_players) {</span>
<span class='curline'><a href='../S/1367.html#L133'>sock</a>              133 utils/wesnothd.pl 		&amp;send_data($diff, $sock);</span>
<span class='curline'><a href='../S/1367.html#L140'>sock</a>              140 utils/wesnothd.pl 	my ($sock, $packet) = @_;</span>
<span class='curline'><a href='../S/1367.html#L143'>sock</a>              143 utils/wesnothd.pl 	my $doc = &amp;wml::read_binary($incoming_schemas{$sock}, $packet);</span>
<span class='curline'><a href='../S/1367.html#L147'>sock</a>              147 utils/wesnothd.pl 	if(not $socket_user_name{$sock}) {</span>
<span class='curline'><a href='../S/1367.html#L153'>sock</a>              153 utils/wesnothd.pl 				&amp;send_error($sock, 'This username is not valid.');</span>
<span class='curline'><a href='../S/1367.html#L159'>sock</a>              159 utils/wesnothd.pl 					&amp;send_error($sock, 'This username is disallowed.');</span>
<span class='curline'><a href='../S/1367.html#L165'>sock</a>              165 utils/wesnothd.pl 				&amp;send_error($sock, 'This username is already taken.');</span>
<span class='curline'><a href='../S/1367.html#L170'>sock</a>              170 utils/wesnothd.pl 			&amp;send_data($join_lobby_response, $sock);</span>
<span class='curline'><a href='../S/1367.html#L174'>sock</a>              174 utils/wesnothd.pl 			&amp;send_data($initial_response, $sock);</span>
<span class='curline'><a href='../S/1367.html#L176'>sock</a>              176 utils/wesnothd.pl 			$lobby_players{$sock} = 1;</span>
<span class='curline'><a href='../S/1367.html#L177'>sock</a>              177 utils/wesnothd.pl 			$user_name_socket{$username} = $sock;</span>
<span class='curline'><a href='../S/1367.html#L178'>sock</a>              178 utils/wesnothd.pl 			$socket_user_name{$sock} = $username;</span>
<span class='curline'><a href='../S/1367.html#L181'>sock</a>              181 utils/wesnothd.pl 			&amp;send_error($sock, 'You must login first.');</span>
<span class='curline'><a href='../S/1367.html#L184'>sock</a>              184 utils/wesnothd.pl 	} elsif($lobby_players{$sock}) {</span>
<span class='curline'><a href='../S/1367.html#L187'>sock</a>              187 utils/wesnothd.pl 			push @games, &amp;create_game($create_game, $sock);</span>
<span class='curline'><a href='../S/1367.html#L188'>sock</a>              188 utils/wesnothd.pl 			delete $lobby_players{$sock};</span>
<span class='curline'><a href='../S/1367.html#L191'>sock</a>              191 utils/wesnothd.pl 			$attr-&gt;{'sender'} = $socket_user_name{$sock};</span>
<span class='curline'><a href='../S/1367.html#L192'>sock</a>              192 utils/wesnothd.pl 			&amp;send_to_lobby($doc, $sock, keys %lobby_players);</span>
<span class='curline'><a href='../S/1367.html#L195'>sock</a>              195 utils/wesnothd.pl 			$attr-&gt;{'sender'} = $socket_user_name{$sock};</span>
<span class='curline'><a href='../S/1367.html#L206'>sock</a>              206 utils/wesnothd.pl 			if($players-&gt;{$sock}) {</span>
<span class='curline'><a href='../S/1367.html#L213'>sock</a>              213 utils/wesnothd.pl 		if($game-&gt;{'owner'} eq $sock and</span>
<span class='curline'><a href='../S/1367.html#L246'>sock</a>              246 utils/wesnothd.pl 	my ($sock) = @_;</span>
<span class='curline'><a href='../S/1367.html#L248'>sock</a>              248 utils/wesnothd.pl 	my $res = sysread($sock, $buf, 4);</span>
<span class='curline'><a href='../S/1367.html#L250'>sock</a>              250 utils/wesnothd.pl 		&amp;socket_disconnected($sock);</span>
<span class='curline'><a href='../S/1367.html#L253'>sock</a>              253 utils/wesnothd.pl 		$connection_nums{$sock} = $current_connection_num++;</span>
<span class='curline'><a href='../S/1367.html#L254'>sock</a>              254 utils/wesnothd.pl 		my $res = syswrite($sock, $buf, 4);</span>
<span class='curline'><a href='../S/1367.html#L256'>sock</a>              256 utils/wesnothd.pl 			&amp;socket_disconnected($sock);</span>
<span class='curline'><a href='../S/1367.html#L258'>sock</a>              258 utils/wesnothd.pl 			delete $pending_handshake{$sock};</span>
<span class='curline'><a href='../S/1367.html#L259'>sock</a>              259 utils/wesnothd.pl 			&amp;send_data($login_response, $sock);</span>
<span class='curline'><a href='../S/1367.html#L274'>sock</a>              274 utils/wesnothd.pl 	foreach my $sock (@$rh_set) {</span>
<span class='curline'><a href='../S/1367.html#L275'>sock</a>              275 utils/wesnothd.pl 		if($sock == $server_sock) {</span>
<span class='curline'><a href='../S/1367.html#L276'>sock</a>              276 utils/wesnothd.pl 			my $new_sock = $sock-&gt;accept();</span>
<span class='curline'><a href='../S/1367.html#L278'>sock</a>              278 utils/wesnothd.pl 		} elsif($pending_handshake{$sock}) {</span>
<span class='curline'><a href='../S/1367.html#L279'>sock</a>              279 utils/wesnothd.pl 			&amp;handshake($sock);</span>
<span class='curline'><a href='../S/1367.html#L282'>sock</a>              282 utils/wesnothd.pl 			if(my $buf = $incoming_bufs{$sock}) {</span>
<span class='curline'><a href='../S/1367.html#L285'>sock</a>              285 utils/wesnothd.pl 				my $res = sysread($sock, $new_buf, $len - length($buf-&gt;{'buf'}));</span>
<span class='curline'><a href='../S/1367.html#L287'>sock</a>              287 utils/wesnothd.pl 					&amp;socket_disconnected($sock);</span>
<span class='curline'><a href='../S/1367.html#L292'>sock</a>              292 utils/wesnothd.pl 						delete $incoming_bufs{$sock};</span>
<span class='curline'><a href='../S/1367.html#L297'>sock</a>              297 utils/wesnothd.pl 				my $res = sysread($sock, $header, 4);</span>
<span class='curline'><a href='../S/1367.html#L299'>sock</a>              299 utils/wesnothd.pl 					&amp;socket_disconnected($sock);</span>
<span class='curline'><a href='../S/1367.html#L303'>sock</a>              303 utils/wesnothd.pl 					my $res = sysread($sock, $buffer, $len);</span>
<span class='curline'><a href='../S/1367.html#L305'>sock</a>              305 utils/wesnothd.pl 						$incoming_bufs{$sock} = {'length' =&gt; $len, 'buf' =&gt; $buffer};</span>
<span class='curline'><a href='../S/1367.html#L311'>sock</a>              311 utils/wesnothd.pl 			&amp;received_packet($sock, $buffer) if $buffer;</span>
<span class='curline'><a href='../S/1335.html#L12'>sock</a>               12 utils/wml_net.pm 	my $sock = IO::Socket::INET-&gt;new(PeerAddr =&gt; $host,</span>
<span class='curline'><a href='../S/1335.html#L17'>sock</a>               17 utils/wml_net.pm 	print $sock pack('N',0) or die "Could not send initial handshake";</span>
<span class='curline'><a href='../S/1335.html#L20'>sock</a>               20 utils/wml_net.pm 	read $sock, $connection_num, 4;</span>
<span class='curline'><a href='../S/1335.html#L23'>sock</a>               23 utils/wml_net.pm 	$wml_net::outgoing_schemas{$sock} = [];</span>
<span class='curline'><a href='../S/1335.html#L24'>sock</a>               24 utils/wml_net.pm 	$wml_net::incoming_schemas{$sock} = [];</span>
<span class='curline'><a href='../S/1335.html#L25'>sock</a>               25 utils/wml_net.pm 	return $sock;</span>
<span class='curline'><a href='../S/1335.html#L30'>sock</a>               30 utils/wml_net.pm 	my ($sock) = @_;</span>
<span class='curline'><a href='../S/1335.html#L31'>sock</a>               31 utils/wml_net.pm 	delete($wml_net::outgoing_schemas{$sock});</span>
<span class='curline'><a href='../S/1335.html#L32'>sock</a>               32 utils/wml_net.pm 	delete($wml_net::incoming_schemas{$sock});</span>
<span class='curline'><a href='../S/1335.html#L33'>sock</a>               33 utils/wml_net.pm 	close $sock;</span>
<span class='curline'><a href='../S/1335.html#L38'>sock</a>               38 utils/wml_net.pm 	my ($sock) = @_;</span>
<span class='curline'><a href='../S/1335.html#L40'>sock</a>               40 utils/wml_net.pm 	read $sock, $buf, 4;</span>
<span class='curline'><a href='../S/1335.html#L50'>sock</a>               50 utils/wml_net.pm 		read $sock, $buf, $bytes or die "Error reading socket: $!";</span>
<span class='curline'><a href='../S/1335.html#L57'>sock</a>               57 utils/wml_net.pm 	return &amp;wml::read_binary($wml_net::incoming_schemas{$sock},$res);</span>
<span class='curline'><a href='../S/1335.html#L62'>sock</a>               62 utils/wml_net.pm 	my ($sock,$doc) = @_;</span>
<span class='curline'><a href='../S/1335.html#L64'>sock</a>               64 utils/wml_net.pm 	my $data = &amp;wml::write_binary($wml_net::outgoing_schemas{$sock},$doc);</span>
<span class='curline'><a href='../S/1335.html#L67'>sock</a>               67 utils/wml_net.pm 	print $sock "$header$data" or die "Error writing to socket: $!";</span>
</pre>
</body>
</html>
