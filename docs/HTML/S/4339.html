<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>data/ai/micro_ais/cas/ca_herding_f_herding_area.lua</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<a id='TOP' name='TOP'></a><h2 class='header'><a href='../mains.html'>root</a>/<a href='../files/5638.html'>data</a>/<a href='../files/5639.html'>ai</a>/<a href='../files/5644.html'>micro_ais</a>/<a href='../files/5645.html'>cas</a>/ca_herding_f_herding_area.lua</h2>
<em class='comment'>/* [&lt;][&gt;][^][v][top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</em>
<hr />
<pre>
<a id='L1' name='L1'></a>   1 local <a href='../Y/1282.html' title='Multiple used in 255 places.'>H</a> = <a href='../Y/21697.html' title='Multiple used in 2574 places.'>wesnoth</a>.<a href='../Y/17390.html' title='Multiple used in 267 places.'>require</a> "helper"
<a id='L2' name='L2'></a>   2 local <a href='../Y/1789.html' title='Multiple used in 99 places.'>LS</a> = <a href='../Y/21697.html' title='Multiple used in 2574 places.'>wesnoth</a>.<a href='../Y/17390.html' title='Multiple used in 267 places.'>require</a> "location_set"
<a id='L3' name='L3'></a>   3 
<a id='L4' name='L4'></a>   4 <strong class='reserved'>return</strong> function(<a href='../D/4164.html' title='Multiple defined in 5 places.'>cfg</a>)
<a id='L5' name='L5'></a>   5     -- Find the area that the sheep can occupy
<a id='L6' name='L6'></a>   6     -- First, find all contiguous hexes around center hex that are inside herding_perimeter
<a id='L7' name='L7'></a>   7     local <a href='../Y/13254.html' title='Multiple used in 11 places.'>location_filter</a> = <a href='../Y/1282.html' title='Multiple used in 255 places.'>H</a>.<a href='../D/7357.html' title='Multiple defined in 6 places.'>get_child</a>(<a href='../D/4164.html' title='Multiple defined in 5 places.'>cfg</a>, "filter_location")
<a id='L8' name='L8'></a>   8     local <a href='../Y/11418.html' title='Multiple used in 10 places.'>herding_area</a> = <a href='../Y/1789.html' title='Multiple used in 99 places.'>LS</a>.<a href='../Y/15330.html' title='Multiple used in 25 places.'>of_pairs</a>(<a href='../Y/21697.html' title='Multiple used in 2574 places.'>wesnoth</a>.<a href='../D/7667.html' title='Multiple defined in 3 places.'>get_locations</a> <em class='brace'>{</em>
<a id='L9' name='L9'></a>   9         <a href='../D/16538.html' title='Multiple defined in 2 places.'>x</a> = <a href='../D/4164.html' title='Multiple defined in 5 places.'>cfg</a>.<a href='../Y/11415.html' title='Multiple used in 6 places.'>herd_x</a>,
<a id='L10' name='L10'></a>  10         <a href='../D/16553.html' title='Multiple defined in 8 places.'>y</a> = <a href='../D/4164.html' title='Multiple defined in 5 places.'>cfg</a>.<a href='../Y/11416.html' title='Multiple used in 6 places.'>herd_y</a>,
<a id='L11' name='L11'></a>  11         <a href='../Y/16850.html' title='Multiple used in 316 places.'>radius</a> = 999,
<a id='L12' name='L12'></a>  12         <em class='brace'>{</em> "filter_radius", <em class='brace'>{</em> <em class='brace'>{</em> "not", <a href='../Y/13254.html' title='Multiple used in 11 places.'>location_filter</a> <em class='brace'>}</em> <em class='brace'>}</em> <em class='brace'>}</em>
<a id='L13' name='L13'></a>  13     <em class='brace'>}</em>)
<a id='L14' name='L14'></a>  14 
<a id='L15' name='L15'></a>  15     -- Then, also exclude hexes next to herding_perimeter; some of the functions work better like that
<a id='L16' name='L16'></a>  16     <a href='../Y/11418.html' title='Multiple used in 10 places.'>herding_area</a>:<a href='../Y/12431.html' title='Multiple used in 297 places.'>iter</a>( function(<a href='../D/16538.html' title='Multiple defined in 2 places.'>x</a>, <a href='../D/16553.html' title='Multiple defined in 8 places.'>y</a>, <a href='../Y/21230.html' title='Multiple used in 1404 places.'>v</a>)
<a id='L17' name='L17'></a>  17         <strong class='reserved'>for</strong> <a href='../Y/22035.html' title='Multiple used in 99 places.'>xa</a>, <a href='../Y/22150.html' title='Multiple used in 99 places.'>ya</a> in <a href='../Y/1282.html' title='Multiple used in 255 places.'>H</a>.<a href='../Y/5297.html' title='Multiple used in 37 places.'>adjacent_tiles</a>(<a href='../D/16538.html' title='Multiple defined in 2 places.'>x</a>, <a href='../D/16553.html' title='Multiple defined in 8 places.'>y</a>) <strong class='reserved'>do</strong>
<a id='L18' name='L18'></a>  18             <strong class='reserved'>if</strong> (<a href='../Y/21697.html' title='Multiple used in 2574 places.'>wesnoth</a>.<a href='../Y/13759.html' title='Multiple used in 7 places.'>match_location</a>(<a href='../Y/22035.html' title='Multiple used in 99 places.'>xa</a>, <a href='../Y/22150.html' title='Multiple used in 99 places.'>ya</a>, <a href='../Y/13254.html' title='Multiple used in 11 places.'>location_filter</a>) ) then
<a id='L19' name='L19'></a>  19                 <a href='../Y/11418.html' title='Multiple used in 10 places.'>herding_area</a>:<a href='../D/12605.html' title='Multiple defined in 8 places.'>remove</a>(<a href='../D/16538.html' title='Multiple defined in 2 places.'>x</a>, <a href='../D/16553.html' title='Multiple defined in 8 places.'>y</a>)
<a id='L20' name='L20'></a>  20             end
<a id='L21' name='L21'></a>  21         end
<a id='L22' name='L22'></a>  22     end)
<a id='L23' name='L23'></a>  23 
<a id='L24' name='L24'></a>  24     <strong class='reserved'>return</strong> <a href='../Y/11418.html' title='Multiple used in 10 places.'>herding_area</a>
<a id='L25' name='L25'></a>  25 end
</pre>
<hr />
<a id='BOTTOM' name='BOTTOM'></a>
<em class='comment'>/* [&lt;][&gt;][^][v]<a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</em>
</body>
</html>
