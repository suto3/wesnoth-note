<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>opponent</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1223.html#L2250'>opponent</a>         2250 src/attack_prediction.cpp void combatant::fight(combatant&amp; opponent, bool levelup_considered)</span>
<span class='curline'><a href='../S/1223.html#L2253'>opponent</a>         2253 src/attack_prediction.cpp 	if(opponent.u_.firststrike &amp;&amp; !u_.firststrike) {</span>
<span class='curline'><a href='../S/1223.html#L2254'>opponent</a>         2254 src/attack_prediction.cpp 		opponent.fight(*this, levelup_considered);</span>
<span class='curline'><a href='../S/1223.html#L2262'>opponent</a>         2262 src/attack_prediction.cpp 	dump(opponent.u_);</span>
<span class='curline'><a href='../S/1223.html#L2266'>opponent</a>         2266 src/attack_prediction.cpp 	std::vector&lt;double&gt; prev = summary[0], opp_prev = opponent.summary[0];</span>
<span class='curline'><a href='../S/1223.html#L2267'>opponent</a>         2267 src/attack_prediction.cpp 	complex_fight(opponent, 1);</span>
<span class='curline'><a href='../S/1223.html#L2268'>opponent</a>         2268 src/attack_prediction.cpp 	std::vector&lt;double&gt; res = summary[0], opp_res = opponent.summary[0];</span>
<span class='curline'><a href='../S/1223.html#L2270'>opponent</a>         2270 src/attack_prediction.cpp 	opponent.summary[0] = opp_prev;</span>
<span class='curline'><a href='../S/1223.html#L2280'>opponent</a>         2280 src/attack_prediction.cpp 	const std::vector&lt;combat_slice&gt; opp_split = split_summary(opponent.u_, opponent.summary);</span>
<span class='curline'><a href='../S/1223.html#L2283'>opponent</a>         2283 src/attack_prediction.cpp 		fight_complexity(split.size(), opp_split.size(), u_, opponent.u_) &gt; MONTE_CARLO_SIMULATION_THRESHOLD</span>
<span class='curline'><a href='../S/1223.html#L2289'>opponent</a>         2289 src/attack_prediction.cpp 		complex_fight(attack_prediction_mode::monte_carlo_simulation, u_, opponent.u_, u_.num_blows,</span>
<span class='curline'><a href='../S/1223.html#L2290'>opponent</a>         2290 src/attack_prediction.cpp 		              opponent.u_.num_blows, summary, opponent.summary, self_not_hit, opp_not_hit, levelup_considered, split,</span>
<span class='curline'><a href='../S/1223.html#L2291'>opponent</a>         2291 src/attack_prediction.cpp 		              opp_split, slowed, opponent.slowed);</span>
<span class='curline'><a href='../S/1223.html#L2294'>opponent</a>         2294 src/attack_prediction.cpp 		do_fight(u_, opponent.u_, u_.num_blows, opponent.u_.num_blows, summary, opponent.summary, self_not_hit,</span>
<span class='curline'><a href='../S/1223.html#L2312'>opponent</a>         2312 src/attack_prediction.cpp 				init_slice_summary(sit_opp_summary[0], opponent.summary[0], opp_split[t].begin_hp, opp_split[t].end_hp,</span>
<span class='curline'><a href='../S/1223.html#L2314'>opponent</a>         2314 src/attack_prediction.cpp 				init_slice_summary(sit_opp_summary[1], opponent.summary[1], opp_split[t].begin_hp, opp_split[t].end_hp,</span>
<span class='curline'><a href='../S/1223.html#L2322'>opponent</a>         2322 src/attack_prediction.cpp 				do_fight(u_, opponent.u_, split[s].strikes, opp_split[t].strikes, sit_summary, sit_opp_summary,</span>
<span class='curline'><a href='../S/1223.html#L2338'>opponent</a>         2338 src/attack_prediction.cpp 		opponent.summary[0].swap(opp_summary_result[0]);</span>
<span class='curline'><a href='../S/1223.html#L2339'>opponent</a>         2339 src/attack_prediction.cpp 		opponent.summary[1].swap(opp_summary_result[1]);</span>
<span class='curline'><a href='../S/1223.html#L2344'>opponent</a>         2344 src/attack_prediction.cpp 	assert(opponent.summary[0].size() == opp_res.size());</span>
<span class='curline'><a href='../S/1223.html#L2351'>opponent</a>         2351 src/attack_prediction.cpp 	for(unsigned int i = 0; i &lt; opponent.summary[0].size(); ++i) {</span>
<span class='curline'><a href='../S/1223.html#L2352'>opponent</a>         2352 src/attack_prediction.cpp 		if(std::fabs(opponent.summary[0][i] - opp_res[i]) &gt; 0.000001) {</span>
<span class='curline'><a href='../S/1223.html#L2353'>opponent</a>         2353 src/attack_prediction.cpp 			std::cerr &lt;&lt; "Mismatch for " &lt;&lt; i &lt;&lt; " hp: " &lt;&lt; opponent.summary[0][i] &lt;&lt; " should have been " &lt;&lt; opp_res[i] &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/1223.html#L2369'>opponent</a>         2369 src/attack_prediction.cpp 	if(opponent.summary[1].empty()) {</span>
<span class='curline'><a href='../S/1223.html#L2370'>opponent</a>         2370 src/attack_prediction.cpp 		opponent.hp_dist = opponent.summary[0];</span>
<span class='curline'><a href='../S/1223.html#L2372'>opponent</a>         2372 src/attack_prediction.cpp 		const unsigned size = opponent.summary[0].size();</span>
<span class='curline'><a href='../S/1223.html#L2373'>opponent</a>         2373 src/attack_prediction.cpp 		opponent.hp_dist.resize(size);</span>
<span class='curline'><a href='../S/1223.html#L2375'>opponent</a>         2375 src/attack_prediction.cpp 			opponent.hp_dist[i] = opponent.summary[0][i] + opponent.summary[1][i];</span>
<span class='curline'><a href='../S/1223.html#L2382'>opponent</a>         2382 src/attack_prediction.cpp 	poisoned = calculate_probability_of_debuff(poisoned, opponent.u_.poisons, touched, 1.0 - hp_dist[0],</span>
<span class='curline'><a href='../S/1223.html#L2383'>opponent</a>         2383 src/attack_prediction.cpp 		u_.experience + game_config::kill_xp(opponent.u_.level) &gt;= u_.max_experience, opponent.hp_dist[0]);</span>
<span class='curline'><a href='../S/1223.html#L2384'>opponent</a>         2384 src/attack_prediction.cpp 	opponent.poisoned = calculate_probability_of_debuff(opponent.poisoned, u_.poisons, opp_touched, 1.0 - opponent.hp_dist[0],</span>
<span class='curline'><a href='../S/1223.html#L2385'>opponent</a>         2385 src/attack_prediction.cpp 		opponent.u_.experience + game_config::kill_xp(u_.level) &gt;= opponent.u_.max_experience, hp_dist[0]);</span>
<span class='curline'><a href='../S/1223.html#L2388'>opponent</a>         2388 src/attack_prediction.cpp 		slowed = calculate_probability_of_debuff(slowed, opponent.u_.slows, touched, 1.0 - hp_dist[0],</span>
<span class='curline'><a href='../S/1223.html#L2389'>opponent</a>         2389 src/attack_prediction.cpp 			u_.experience + game_config::kill_xp(opponent.u_.level) &gt;= u_.max_experience, opponent.hp_dist[0]);</span>
<span class='curline'><a href='../S/1223.html#L2390'>opponent</a>         2390 src/attack_prediction.cpp 		opponent.slowed = calculate_probability_of_debuff(opponent.slowed, u_.slows, opp_touched, 1.0 - opponent.hp_dist[0],</span>
<span class='curline'><a href='../S/1223.html#L2391'>opponent</a>         2391 src/attack_prediction.cpp 			opponent.u_.experience + game_config::kill_xp(u_.level) &gt;= opponent.u_.max_experience, hp_dist[0]);</span>
<span class='curline'><a href='../S/1223.html#L2398'>opponent</a>         2398 src/attack_prediction.cpp 		opponent.slowed = std::accumulate(opponent.summary[1].begin(), opponent.summary[1].end(), 0.0);</span>
<span class='curline'><a href='../S/1223.html#L2401'>opponent</a>         2401 src/attack_prediction.cpp 	if(u_.experience + opponent.u_.level &gt;= u_.max_experience) {</span>
<span class='curline'><a href='../S/1223.html#L2406'>opponent</a>         2406 src/attack_prediction.cpp 	if(opponent.u_.experience + u_.level &gt;= opponent.u_.max_experience) {</span>
<span class='curline'><a href='../S/1223.html#L2407'>opponent</a>         2407 src/attack_prediction.cpp 		opponent.poisoned = 0.0;</span>
<span class='curline'><a href='../S/1223.html#L2408'>opponent</a>         2408 src/attack_prediction.cpp 		opponent.slowed = 0.0;</span>
<span class='curline'><a href='../S/1223.html#L2412'>opponent</a>         2412 src/attack_prediction.cpp 	opponent.untouched *= opp_not_hit;</span>
<span class='curline'><a href='../S/985.html#L39'>opponent</a>           39 src/attack_prediction.hpp 	void fight(combatant &amp;opponent, bool levelup_considered=true);</span>
</pre>
</body>
</html>
