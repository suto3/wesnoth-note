<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>u</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/4378.html#L1388'>u</a>                1388 data/ai/lua/ai_helper.lua             for _,u in ipairs(all_units) do</span>
<span class='curline'><a href='../S/4378.html#L1389'>u</a>                1389 data/ai/lua/ai_helper.lua                 if (u.side ~= viewing_side)</span>
<span class='curline'><a href='../S/4378.html#L1390'>u</a>                1390 data/ai/lua/ai_helper.lua                     and (not ai_helper.is_visible_unit(viewing_side, u))</span>
<span class='curline'><a href='../S/4378.html#L1392'>u</a>                1392 data/ai/lua/ai_helper.lua                     wesnoth.extract_unit(u)</span>
<span class='curline'><a href='../S/4378.html#L1393'>u</a>                1393 data/ai/lua/ai_helper.lua                     table.insert(extracted_units, u)</span>
<span class='curline'><a href='../S/4380.html#L1264'>u</a>                1264 data/ai/lua/battle_calcs.lua         unit_ratings[i] = { rating = max_rating, unit_id = u.id, enemy_id = best_enemy.id }</span>
<span class='curline'><a href='../S/4382.html#L332'>u</a>                 332 data/ai/lua/generic_recruit_engine.lua             for i,u in ipairs(my_units) do my_hp = my_hp + u.hitpoints end</span>
<span class='curline'><a href='../S/4382.html#L333'>u</a>                 333 data/ai/lua/generic_recruit_engine.lua             for i,u in ipairs(enemies) do enemy_hp = enemy_hp + u.hitpoints end</span>
<span class='curline'><a href='../S/4382.html#L885'>u</a>                 885 data/ai/lua/generic_recruit_engine.lua                 for u,unit in ipairs(test_units) do</span>
<span class='curline'><a href='../S/4382.html#L886'>u</a>                 886 data/ai/lua/generic_recruit_engine.lua                     test_units[u].x = v[1]</span>
<span class='curline'><a href='../S/4382.html#L887'>u</a>                 887 data/ai/lua/generic_recruit_engine.lua                     test_units[u].y = v[2]</span>
<span class='curline'><a href='../S/4375.html#L42'>u</a>                  42 data/ai/lua/generic_rush_engine.lua                 for i,u in ipairs(units) do total_hp = total_hp + u.hitpoints end</span>
<span class='curline'><a href='../S/4375.html#L333'>u</a>                 333 data/ai/lua/generic_rush_engine.lua                 for i,u in ipairs(units) do</span>
<span class='curline'><a href='../S/4375.html#L336'>u</a>                 336 data/ai/lua/generic_rush_engine.lua                     if AH.is_visible_unit(wesnoth.current.side, unit_in_way) and ((unit_in_way ~= u)) then</span>
<span class='curline'><a href='../S/4375.html#L344'>u</a>                 344 data/ai/lua/generic_rush_engine.lua                         local dist = M.distance_between(u.x, u.y, v[1], v[2])</span>
<span class='curline'><a href='../S/4375.html#L345'>u</a>                 345 data/ai/lua/generic_rush_engine.lua                         if (dist &lt;= u.moves) then</span>
<span class='curline'><a href='../S/4375.html#L346'>u</a>                 346 data/ai/lua/generic_rush_engine.lua                             local path, cost = wesnoth.find_path(u, v[1], v[2])</span>
<span class='curline'><a href='../S/4375.html#L347'>u</a>                 347 data/ai/lua/generic_rush_engine.lua                             if (cost &lt;= u.moves) then</span>
<span class='curline'><a href='../S/4375.html#L355'>u</a>                 355 data/ai/lua/generic_rush_engine.lua                                     rating = rating + u.hitpoints</span>
<span class='curline'><a href='../S/4375.html#L357'>u</a>                 357 data/ai/lua/generic_rush_engine.lua                                     rating = rating + u.max_hitpoints - u.hitpoints</span>
<span class='curline'><a href='../S/4375.html#L361'>u</a>                 361 data/ai/lua/generic_rush_engine.lua                                 local enemy_distance_from_unit = AH.get_closest_enemy({u.x, u.y})</span>
<span class='curline'><a href='../S/4375.html#L365'>u</a>                 365 data/ai/lua/generic_rush_engine.lua                                     best_unit_rating, best_unit = rating, u</span>
<span class='curline'><a href='../S/4377.html#L21'>u</a>                  21 data/ai/lua/move_to_any_target.lua             for i,u in ipairs(units) do</span>
<span class='curline'><a href='../S/4377.html#L22'>u</a>                  22 data/ai/lua/move_to_any_target.lua                 local distance, target = AH.get_closest_enemy({u.x, u.y})</span>
<span class='curline'><a href='../S/4377.html#L24'>u</a>                  24 data/ai/lua/move_to_any_target.lua                     unit = u</span>
<span class='curline'><a href='../S/4379.html#L39'>u</a>                  39 data/ai/lua/retreat.lua     for i,u in ipairs(units) do</span>
<span class='curline'><a href='../S/4379.html#L40'>u</a>                  40 data/ai/lua/retreat.lua         if u.hitpoints &lt; retreat_functions.min_hp(u) then</span>
<span class='curline'><a href='../S/4379.html#L41'>u</a>                  41 data/ai/lua/retreat.lua             if wesnoth.unit_ability(u, 'regenerate') then</span>
<span class='curline'><a href='../S/4379.html#L42'>u</a>                  42 data/ai/lua/retreat.lua                 table.insert(regen, u)</span>
<span class='curline'><a href='../S/4379.html#L44'>u</a>                  44 data/ai/lua/retreat.lua                 table.insert(non_regen, u)</span>
<span class='curline'><a href='../S/4379.html#L82'>u</a>                  82 data/ai/lua/retreat.lua     for i,u in ipairs(possible_healers) do</span>
<span class='curline'><a href='../S/4379.html#L84'>u</a>                  84 data/ai/lua/retreat.lua         if u.moves == 0 or u.side ~= wesnoth.current.side then</span>
<span class='curline'><a href='../S/4379.html#L87'>u</a>                  87 data/ai/lua/retreat.lua             local abilities = H.get_child(u.__cfg, "abilities") or {}</span>
<span class='curline'><a href='../S/4379.html#L97'>u</a>                  97 data/ai/lua/retreat.lua                 for x, y in H.adjacent_tiles(u.x, u.y) do</span>
<span class='curline'><a href='../S/4379.html#L101'>u</a>                 101 data/ai/lua/retreat.lua                     healing_locs:insert(u.x, u.y, {best_heal, best_cure})</span>
<span class='curline'><a href='../S/4379.html#L118'>u</a>                 118 data/ai/lua/retreat.lua     for i,u in ipairs(healees) do</span>
<span class='curline'><a href='../S/4379.html#L119'>u</a>                 119 data/ai/lua/retreat.lua         local possible_locations = wesnoth.find_reach(u)</span>
<span class='curline'><a href='../S/4379.html#L145'>u</a>                 145 data/ai/lua/retreat.lua         local base_rating = - u.hitpoints + u.max_hitpoints / 2.</span>
<span class='curline'><a href='../S/4379.html#L146'>u</a>                 146 data/ai/lua/retreat.lua         if u.status.poisoned then base_rating = base_rating + 8 end</span>
<span class='curline'><a href='../S/4379.html#L147'>u</a>                 147 data/ai/lua/retreat.lua         if u.status.slowed then base_rating = base_rating + 4 end</span>
<span class='curline'><a href='../S/4379.html#L158'>u</a>                 158 data/ai/lua/retreat.lua                     heal_score = math.min(8, u.max_hitpoints - u.hitpoints)</span>
<span class='curline'><a href='../S/4379.html#L160'>u</a>                 160 data/ai/lua/retreat.lua                     if u.status.poisoned then</span>
<span class='curline'><a href='../S/4379.html#L162'>u</a>                 162 data/ai/lua/retreat.lua                             heal_score = math.min(8, u.hitpoints - 1)</span>
<span class='curline'><a href='../S/4379.html#L169'>u</a>                 169 data/ai/lua/retreat.lua                         heal_score = math.min(loc[3], u.max_hitpoints - u.hitpoints)</span>
<span class='curline'><a href='../S/4379.html#L179'>u</a>                 179 data/ai/lua/retreat.lua                 rating = rating - wesnoth.unit_defense(u, wesnoth.get_terrain(loc[1], loc[2]))/10</span>
<span class='curline'><a href='../S/4379.html#L181'>u</a>                 181 data/ai/lua/retreat.lua                 if (loc[1] == u.x) and (loc[2] == u.y) and (not u.status.poisoned) then</span>
<span class='curline'><a href='../S/4379.html#L196'>u</a>                 196 data/ai/lua/retreat.lua                     max_rating, best_loc, best_unit = rating, loc, u</span>
<span class='curline'><a href='../S/4308.html#L13'>u</a>                  13 data/ai/micro_ais/cas/ca_protect_unit_attack.lua     for u in H.child_range(cfg, "unit") do</span>
<span class='curline'><a href='../S/4308.html#L14'>u</a>                  14 data/ai/micro_ais/cas/ca_protect_unit_attack.lua         table.insert(units, AH.get_units_with_attacks { id = u.id }[1])</span>
<span class='curline'><a href='../S/4300.html#L8'>u</a>                   8 data/ai/micro_ais/cas/ca_protect_unit_finish.lua     for u in H.child_range(cfg, "unit") do</span>
<span class='curline'><a href='../S/4300.html#L9'>u</a>                   9 data/ai/micro_ais/cas/ca_protect_unit_finish.lua         local unit = AH.get_units_with_moves { id = u.id }[1]</span>
<span class='curline'><a href='../S/4300.html#L11'>u</a>                  11 data/ai/micro_ais/cas/ca_protect_unit_finish.lua             local path, cost = AH.find_path_with_shroud(unit, u.goal_x, u.goal_y)</span>
<span class='curline'><a href='../S/4300.html#L12'>u</a>                  12 data/ai/micro_ais/cas/ca_protect_unit_finish.lua             if (cost &lt;= unit.moves) and ((unit.x ~= u.goal_x) or (unit.y ~= u.goal_y)) then</span>
<span class='curline'><a href='../S/4300.html#L14'>u</a>                  14 data/ai/micro_ais/cas/ca_protect_unit_finish.lua                 PU_goal = { u.goal_x, u.goal_y }</span>
<span class='curline'><a href='../S/4328.html#L8'>u</a>                   8 data/ai/micro_ais/cas/ca_protect_unit_move.lua     for u in H.child_range(cfg, "unit") do</span>
<span class='curline'><a href='../S/4328.html#L9'>u</a>                   9 data/ai/micro_ais/cas/ca_protect_unit_move.lua         table.insert(units, AH.get_units_with_moves { id = u.id }[1])</span>
<span class='curline'><a href='../S/4328.html#L39'>u</a>                  39 data/ai/micro_ais/cas/ca_protect_unit_move.lua     local unit = AH.choose(protected_units, function(u) return - u.hitpoints end)</span>
<span class='curline'><a href='../S/4328.html#L41'>u</a>                  41 data/ai/micro_ais/cas/ca_protect_unit_move.lua     for u in H.child_range(cfg, "unit") do</span>
<span class='curline'><a href='../S/4328.html#L42'>u</a>                  42 data/ai/micro_ais/cas/ca_protect_unit_move.lua         if (unit.id == u.id) then goal = { u.goal_x, u.goal_y } end</span>
<span class='curline'><a href='../S/4275.html#L14'>u</a>                  14 data/ai/micro_ais/mai-defs/protect.lua 	for u in H.child_range(cfg, "unit") do</span>
<span class='curline'><a href='../S/4275.html#L15'>u</a>                  15 data/ai/micro_ais/mai-defs/protect.lua 		if not u.id then</span>
<span class='curline'><a href='../S/4275.html#L18'>u</a>                  18 data/ai/micro_ais/mai-defs/protect.lua 		if not u.goal_x then</span>
<span class='curline'><a href='../S/4275.html#L21'>u</a>                  21 data/ai/micro_ais/mai-defs/protect.lua 		if not u.goal_y then</span>
<span class='curline'><a href='../S/4275.html#L24'>u</a>                  24 data/ai/micro_ais/mai-defs/protect.lua 		table.insert(unit_ids, u.id)</span>
<span class='curline'><a href='../S/4639.html#L80'>u</a>                  80 data/campaigns/Dead_Water/_main.cfg 		local u = wesnoth.get_displayed_unit()</span>
<span class='curline'><a href='../S/4639.html#L81'>u</a>                  81 data/campaigns/Dead_Water/_main.cfg 		if not u then return {} end</span>
<span class='curline'><a href='../S/4639.html#L84'>u</a>                  84 data/campaigns/Dead_Water/_main.cfg 		if u.status.stunned then</span>
<span class='curline'><a href='../S/4541.html#L33'>u</a>                  33 data/campaigns/Eastern_Invasion/ai/ca_ogres_flee.lua     for i,u in ipairs(units) do</span>
<span class='curline'><a href='../S/4541.html#L34'>u</a>                  34 data/campaigns/Eastern_Invasion/ai/ca_ogres_flee.lua         local reach = wesnoth.find_reach(u)</span>
<span class='curline'><a href='../S/4541.html#L41'>u</a>                  41 data/campaigns/Eastern_Invasion/ai/ca_ogres_flee.lua             if (not unit_in_way) or (unit_in_way == u) then</span>
<span class='curline'><a href='../S/4541.html#L81'>u</a>                  81 data/campaigns/Eastern_Invasion/ai/ca_ogres_flee.lua                     best_unit = u</span>
<span class='curline'><a href='../S/4766.html#L118'>u</a>                 118 data/campaigns/Legend_of_Wesmere/lua/wml_tags.lua 			local u = wesnoth.get_unit(V[string.format("side_store.unit[%d].id", i - 1)])</span>
<span class='curline'><a href='../S/4766.html#L120'>u</a>                 120 data/campaigns/Legend_of_Wesmere/lua/wml_tags.lua 			if u then</span>
<span class='curline'><a href='../S/4766.html#L121'>u</a>                 121 data/campaigns/Legend_of_Wesmere/lua/wml_tags.lua 				V[string.format("side_store.unit[%d].x", i - 1)] = u.x</span>
<span class='curline'><a href='../S/4766.html#L122'>u</a>                 122 data/campaigns/Legend_of_Wesmere/lua/wml_tags.lua 				V[string.format("side_store.unit[%d].y", i - 1)] = u.y</span>
<span class='curline'><a href='../S/4766.html#L123'>u</a>                 123 data/campaigns/Legend_of_Wesmere/lua/wml_tags.lua 				u:extract()</span>
<span class='curline'><a href='../S/4640.html#L17'>u</a>                  17 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua     for i,u in ipairs(units) do</span>
<span class='curline'><a href='../S/4640.html#L18'>u</a>                  18 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua         if u.variables.destination_x and u.variables.destination_y then</span>
<span class='curline'><a href='../S/4640.html#L34'>u</a>                  34 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua     for i,u in ipairs(units) do</span>
<span class='curline'><a href='../S/4640.html#L35'>u</a>                  35 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua         unit_map:insert(u.x, u.y)</span>
<span class='curline'><a href='../S/4640.html#L37'>u</a>                  37 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua         if (u.side == wesnoth.current.side) and (u.moves &gt; 0)</span>
<span class='curline'><a href='../S/4640.html#L38'>u</a>                  38 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua             and u.variables.destination_x and u.variables.destination_x</span>
<span class='curline'><a href='../S/4640.html#L40'>u</a>                  40 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua             transport_map:insert(u.x, u.y)</span>
<span class='curline'><a href='../S/4640.html#L41'>u</a>                  41 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua             table.insert(transports, u)</span>
<span class='curline'><a href='../S/4640.html#L44'>u</a>                  44 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua             blocked_hex_map:insert(u.x, u.y)</span>
<span class='curline'><a href='../S/4640.html#L57'>u</a>                  57 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua     for i,u in ipairs(transports) do</span>
<span class='curline'><a href='../S/4640.html#L58'>u</a>                  58 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua         local dst = { u.variables.destination_x, u.variables.destination_y }</span>
<span class='curline'><a href='../S/4640.html#L60'>u</a>                  60 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua         if (not u.variables.landed) and (M.distance_between(u.x, u.y, dst[1], dst[2]) &lt;= u.moves) then</span>
<span class='curline'><a href='../S/4640.html#L61'>u</a>                  61 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua             local reach = wesnoth.find_reach(u)</span>
<span class='curline'><a href='../S/4640.html#L98'>u</a>                  98 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua                         best_unit = u</span>
<span class='curline'><a href='../S/4640.html#L149'>u</a>                 149 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua     for i,u in ipairs(transports) do</span>
<span class='curline'><a href='../S/4640.html#L150'>u</a>                 150 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua         local dst = { u.variables.destination_x, u.variables.destination_y }</span>
<span class='curline'><a href='../S/4640.html#L151'>u</a>                 151 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua         local reach = wesnoth.find_reach(u)</span>
<span class='curline'><a href='../S/4640.html#L177'>u</a>                 177 data/campaigns/Son_Of_The_Black_Eye/ai/ca_transport_S6.lua                 best_unit = u</span>
<span class='curline'><a href='../S/5291.html#L7'>u</a>                   7 data/campaigns/Under_the_Burning_Suns/lua/theme.lua 	local u = wesnoth.get_displayed_unit()</span>
<span class='curline'><a href='../S/5291.html#L8'>u</a>                   8 data/campaigns/Under_the_Burning_Suns/lua/theme.lua 	if not u then return {} end</span>
<span class='curline'><a href='../S/5291.html#L11'>u</a>                  11 data/campaigns/Under_the_Burning_Suns/lua/theme.lua 	if u.status.dehydrated then</span>
<span class='curline'><a href='../S/5291.html#L18'>u</a>                  18 data/campaigns/Under_the_Burning_Suns/lua/theme.lua 	if u.status.stunned then</span>
<span class='curline'><a href='../S/5291.html#L24'>u</a>                  24 data/campaigns/Under_the_Burning_Suns/lua/theme.lua 	if u.status.dazed then</span>
<span class='curline'><a href='../S/5553.html#L48'>u</a>                  48 data/lua/helper.lua 		local u = string.format("LUA_modify_unit[%d]", i)</span>
<span class='curline'><a href='../S/5553.html#L50'>u</a>                  50 data/lua/helper.lua 			wesnoth.set_variable(u .. '.' .. k, v)</span>
<span class='curline'><a href='../S/5553.html#L53'>u</a>                  53 data/lua/helper.lua 			variable = u,</span>
<span class='curline'><a href='../S/5553.html#L188'>u</a>                 188 data/lua/helper.lua 			local u, v = adj[i][1], adj[i][2]</span>
<span class='curline'><a href='../S/5553.html#L189'>u</a>                 189 data/lua/helper.lua 			if u &gt;= x1 and u &lt;= x2 and v &gt;= y1 and v &lt;= y2 then</span>
<span class='curline'><a href='../S/5553.html#L190'>u</a>                 190 data/lua/helper.lua 				return u, v</span>
<span class='curline'><a href='../S/5525.html#L260'>u</a>                 260 data/lua/wml-tags.lua 	local u = wesnoth.get_units(cfg)[1] or</span>
<span class='curline'><a href='../S/5525.html#L262'>u</a>                 262 data/lua/wml-tags.lua 	local ut = wesnoth.unit_types[u.type]</span>
<span class='curline'><a href='../S/5525.html#L263'>u</a>                 263 data/lua/wml-tags.lua 	local hp = u.hitpoints / u.max_hitpoints</span>
<span class='curline'><a href='../S/5525.html#L264'>u</a>                 264 data/lua/wml-tags.lua 	local xp = u.experience / u.max_experience</span>
<span class='curline'><a href='../S/5525.html#L329'>u</a>                 329 data/lua/wml-tags.lua 	local u = wesnoth.get_units(cfg)[1]</span>
<span class='curline'><a href='../S/5525.html#L330'>u</a>                 330 data/lua/wml-tags.lua 	if not u then return end</span>
<span class='curline'><a href='../S/5525.html#L332'>u</a>                 332 data/lua/wml-tags.lua 	wesnoth.scroll_to_tile(u.x, u.y, cfg.check_fogged, cfg.immediate)</span>
<span class='curline'><a href='../S/5525.html#L334'>u</a>                 334 data/lua/wml-tags.lua 		wesnoth.highlight_hex(u.x, u.y)</span>
<span class='curline'><a href='../S/5525.html#L348'>u</a>                 348 data/lua/wml-tags.lua 	local u = wesnoth.get_units(cfg)[1]</span>
<span class='curline'><a href='../S/5525.html#L349'>u</a>                 349 data/lua/wml-tags.lua 	if not u then return end</span>
<span class='curline'><a href='../S/5525.html#L350'>u</a>                 350 data/lua/wml-tags.lua 	wesnoth.select_unit(u.x, u.y, cfg.highlight, cfg.fire_event)</span>
<span class='curline'><a href='../S/5525.html#L355'>u</a>                 355 data/lua/wml-tags.lua 	for i,u in ipairs(wesnoth.get_units(cfg)) do</span>
<span class='curline'><a href='../S/5525.html#L356'>u</a>                 356 data/lua/wml-tags.lua 		local ucfg = u.__cfg</span>
<span class='curline'><a href='../S/5525.html#L371'>u</a>                 371 data/lua/wml-tags.lua 	for i,u in ipairs(wesnoth.get_units(cfg)) do</span>
<span class='curline'><a href='../S/5525.html#L372'>u</a>                 372 data/lua/wml-tags.lua 		local ucfg = u.__cfg</span>
<span class='curline'><a href='../S/5525.html#L400'>u</a>                 400 data/lua/wml-tags.lua 	for i,u in ipairs(units) do</span>
<span class='curline'><a href='../S/5525.html#L401'>u</a>                 401 data/lua/wml-tags.lua 		utils.vwriter.write(writer, u.__cfg)</span>
<span class='curline'><a href='../S/5525.html#L402'>u</a>                 402 data/lua/wml-tags.lua 		if kill_units then wesnoth.erase_unit(u) end</span>
<span class='curline'><a href='../S/5525.html#L406'>u</a>                 406 data/lua/wml-tags.lua 		for i,u in ipairs(recall_units) do</span>
<span class='curline'><a href='../S/5525.html#L407'>u</a>                 407 data/lua/wml-tags.lua 			local ucfg = u.__cfg</span>
<span class='curline'><a href='../S/5525.html#L411'>u</a>                 411 data/lua/wml-tags.lua 			if kill_units then wesnoth.erase_unit(u) end</span>
<span class='curline'><a href='../S/5525.html#L466'>u</a>                 466 data/lua/wml-tags.lua 				for u,v in helper.adjacent_tiles(x, y) do</span>
<span class='curline'><a href='../S/5525.html#L467'>u</a>                 467 data/lua/wml-tags.lua 					reach:insert(u, v)</span>
<span class='curline'><a href='../S/5525.html#L484'>u</a>                 484 data/lua/wml-tags.lua 	for i,u in ipairs(wesnoth.get_units(cfg)) do</span>
<span class='curline'><a href='../S/5525.html#L485'>u</a>                 485 data/lua/wml-tags.lua 		u.hidden = true</span>
<span class='curline'><a href='../S/5525.html#L491'>u</a>                 491 data/lua/wml-tags.lua 	for i,u in ipairs(wesnoth.get_units(cfg)) do</span>
<span class='curline'><a href='../S/5525.html#L492'>u</a>                 492 data/lua/wml-tags.lua 		u.hidden = false</span>
<span class='curline'><a href='../S/5535.html#L28'>u</a>                  28 data/lua/wml/heal_unit.lua 	for i,u in ipairs(who) do</span>
<span class='curline'><a href='../S/5535.html#L29'>u</a>                  29 data/lua/wml/heal_unit.lua 		local heal_amount = u.max_hitpoints - u.hitpoints</span>
<span class='curline'><a href='../S/5535.html#L31'>u</a>                  31 data/lua/wml/heal_unit.lua 			u.hitpoints = u.max_hitpoints</span>
<span class='curline'><a href='../S/5535.html#L34'>u</a>                  34 data/lua/wml/heal_unit.lua 			local new_hitpoints = math.max(1, math.min(u.max_hitpoints, u.hitpoints + heal_amount))</span>
<span class='curline'><a href='../S/5535.html#L35'>u</a>                  35 data/lua/wml/heal_unit.lua 			heal_amount = new_hitpoints - u.hitpoints</span>
<span class='curline'><a href='../S/5535.html#L36'>u</a>                  36 data/lua/wml/heal_unit.lua 			u.hitpoints = new_hitpoints</span>
<span class='curline'><a href='../S/5535.html#L40'>u</a>                  40 data/lua/wml/heal_unit.lua 			u.moves = u.max_moves</span>
<span class='curline'><a href='../S/5535.html#L42'>u</a>                  42 data/lua/wml/heal_unit.lua 			u.moves = math.min(u.max_moves, u.moves + (cfg.moves or 0))</span>
<span class='curline'><a href='../S/5535.html#L46'>u</a>                  46 data/lua/wml/heal_unit.lua 			u.attacks_left = u.max_attacks</span>
<span class='curline'><a href='../S/5535.html#L50'>u</a>                  50 data/lua/wml/heal_unit.lua 			u.status.poisoned = false</span>
<span class='curline'><a href='../S/5535.html#L51'>u</a>                  51 data/lua/wml/heal_unit.lua 			u.status.petrified = false</span>
<span class='curline'><a href='../S/5535.html#L52'>u</a>                  52 data/lua/wml/heal_unit.lua 			u.status.slowed = false</span>
<span class='curline'><a href='../S/5535.html#L53'>u</a>                  53 data/lua/wml/heal_unit.lua 			u.status.unhealable = false</span>
<span class='curline'><a href='../S/5535.html#L63'>u</a>                  63 data/lua/wml/heal_unit.lua 			animator:add(u, 'healed', 'hits', {value = heal_amount})</span>
<span class='curline'><a href='../S/4170.html#L216'>u</a>                 216 data/multiplayer/scenarios/2p_Dark_Forecast.lua 		local u = wesnoth.create_unit { type = v, generate_name = true, side = 2 }</span>
<span class='curline'><a href='../S/4170.html#L217'>u</a>                 217 data/multiplayer/scenarios/2p_Dark_Forecast.lua 		u:add_modification("object", {</span>
<span class='curline'><a href='../S/4170.html#L232'>u</a>                 232 data/multiplayer/scenarios/2p_Dark_Forecast.lua 		u.status.slowed = true</span>
<span class='curline'><a href='../S/4170.html#L233'>u</a>                 233 data/multiplayer/scenarios/2p_Dark_Forecast.lua 		u:add_modification("object", {</span>
<span class='curline'><a href='../S/4170.html#L240'>u</a>                 240 data/multiplayer/scenarios/2p_Dark_Forecast.lua 		local dst_x, dst_y = wesnoth.find_vacant_tile(x, y, u)</span>
<span class='curline'><a href='../S/4170.html#L241'>u</a>                 241 data/multiplayer/scenarios/2p_Dark_Forecast.lua 		u:to_map(dst_x, dst_y)</span>
<span class='curline'><a href='../S/4099.html#L1165'>u</a>                1165 data/scenario-test.cfg                 function has_teleport(u)</span>
<span class='curline'><a href='../S/4099.html#L1166'>u</a>                1166 data/scenario-test.cfg                     return wesnoth.unit_ability(u, "teleport")</span>
<span class='curline'><a href='../S/4099.html#L1170'>u</a>                1170 data/scenario-test.cfg                     local u = wesnoth.get_displayed_unit()</span>
<span class='curline'><a href='../S/4099.html#L1171'>u</a>                1171 data/scenario-test.cfg                     if not u then return {} end</span>
<span class='curline'><a href='../S/4099.html#L1173'>u</a>                1173 data/scenario-test.cfg                     if u.status.entangled then</span>
<span class='curline'><a href='../S/4099.html#L1190'>u</a>                1190 data/scenario-test.cfg                 for i,u in ipairs(wesnoth.get_units()) do</span>
<span class='curline'><a href='../S/4099.html#L1191'>u</a>                1191 data/scenario-test.cfg                     if u.status.entangled then</span>
<span class='curline'><a href='../S/4099.html#L1192'>u</a>                1192 data/scenario-test.cfg                         u.moves = 0</span>
<span class='curline'><a href='../S/4099.html#L1447'>u</a>                1447 data/scenario-test.cfg                 local u = wesnoth.get_units({ lua_function = "has_teleport" })[1]</span>
<span class='curline'><a href='../S/4099.html#L1448'>u</a>                1448 data/scenario-test.cfg                 local t, c = wesnoth.find_path(u, 23, 7)</span>
<span class='curline'><a href='../S/4099.html#L3030'>u</a>                3030 data/scenario-test.cfg                 local u = wesnoth.get_recall_units()[2]</span>
<span class='curline'><a href='../S/4099.html#L3032'>u</a>                3032 data/scenario-test.cfg                 local x, y = wesnoth.find_vacant_tile(l.x, l.y, u)</span>
<span class='curline'><a href='../S/4099.html#L3033'>u</a>                3033 data/scenario-test.cfg                 u.side = 3</span>
<span class='curline'><a href='../S/4099.html#L3034'>u</a>                3034 data/scenario-test.cfg                 wesnoth.put_unit(u, x, y)</span>
<span class='curline'><a href='../S/4099.html#L3037'>u</a>                3037 data/scenario-test.cfg                 for i,u in ipairs(ul) do table.insert(t, u.type) end</span>
<span class='curline'><a href='../S/4050.html#L122'>u</a>                 122 data/tools/unit_tree/animations.py     def by_race(u):</span>
<span class='curline'><a href='../S/4050.html#L123'>u</a>                 123 data/tools/unit_tree/animations.py         return u.rid + u.id</span>
<span class='curline'><a href='../S/4050.html#L127'>u</a>                 127 data/tools/unit_tree/animations.py     for u in us:</span>
<span class='curline'><a href='../S/4050.html#L128'>u</a>                 128 data/tools/unit_tree/animations.py         if u.race != race:</span>
<span class='curline'><a href='../S/4050.html#L129'>u</a>                 129 data/tools/unit_tree/animations.py             race = u.race</span>
<span class='curline'><a href='../S/4050.html#L131'>u</a>                 131 data/tools/unit_tree/animations.py         write_table_row(f, u, color)</span>
<span class='curline'><a href='../S/4054.html#L215'>u</a>                 215 data/tools/unit_tree/helpers.py             for u in units:</span>
<span class='curline'><a href='../S/4054.html#L216'>u</a>                 216 data/tools/unit_tree/helpers.py                 uid = u.strip()</span>
<span class='curline'><a href='../S/4054.html#L219'>u</a>                 219 data/tools/unit_tree/helpers.py             for u in leaders:</span>
<span class='curline'><a href='../S/4054.html#L220'>u</a>                 220 data/tools/unit_tree/helpers.py                 uid = u.strip()</span>
<span class='curline'><a href='../S/4054.html#L438'>u</a>                 438 data/tools/unit_tree/helpers.py         for uid, u in list(self.lookup.items()):</span>
<span class='curline'><a href='../S/4054.html#L439'>u</a>                 439 data/tools/unit_tree/helpers.py             for cid in u.child_ids:</span>
<span class='curline'><a href='../S/4054.html#L442'>u</a>                 442 data/tools/unit_tree/helpers.py                 u.children.append(c)</span>
<span class='curline'><a href='../S/4054.html#L447'>u</a>                 447 data/tools/unit_tree/helpers.py         for uid, u in list(self.lookup.items()):</span>
<span class='curline'><a href='../S/4054.html#L448'>u</a>                 448 data/tools/unit_tree/helpers.py             if not u.parent_ids:</span>
<span class='curline'><a href='../S/4054.html#L449'>u</a>                 449 data/tools/unit_tree/helpers.py                 self.trees[uid] = u</span>
<span class='curline'><a href='../S/4054.html#L454'>u</a>                 454 data/tools/unit_tree/helpers.py         def recurse(u, already):</span>
<span class='curline'><a href='../S/4054.html#L456'>u</a>                 456 data/tools/unit_tree/helpers.py             for c in u.children[:]:</span>
<span class='curline'><a href='../S/4054.html#L461'>u</a>                 461 data/tools/unit_tree/helpers.py                         (u.id, c.id)) +</span>
<span class='curline'><a href='../S/4054.html#L463'>u</a>                 463 data/tools/unit_tree/helpers.py                     u.children.remove(c)</span>
<span class='curline'><a href='../S/4054.html#L464'>u</a>                 464 data/tools/unit_tree/helpers.py             for c in u.children:</span>
<span class='curline'><a href='../S/4054.html#L466'>u</a>                 466 data/tools/unit_tree/helpers.py         for u in list(self.trees.values()):</span>
<span class='curline'><a href='../S/4054.html#L467'>u</a>                 467 data/tools/unit_tree/helpers.py             already = {u.id : True}</span>
<span class='curline'><a href='../S/4054.html#L468'>u</a>                 468 data/tools/unit_tree/helpers.py             recurse(u, already)</span>
<span class='curline'><a href='../S/4052.html#L190'>u</a>                 190 data/tools/unit_tree/html_output.py         for uid, u in list(self.wesnoth.unit_lookup.items()):</span>
<span class='curline'><a href='../S/4052.html#L191'>u</a>                 191 data/tools/unit_tree/html_output.py             if u.hidden: continue</span>
<span class='curline'><a href='../S/4052.html#L192'>u</a>                 192 data/tools/unit_tree/html_output.py             if grouper.unitfilter(u):</span>
<span class='curline'><a href='../S/4052.html#L193'>u</a>                 193 data/tools/unit_tree/html_output.py                 forest.add_node(helpers.UnitNode(u))</span>
<span class='curline'><a href='../S/4052.html#L194'>u</a>                 194 data/tools/unit_tree/html_output.py                 units_added[uid] = u</span>
<span class='curline'><a href='../S/4052.html#L201'>u</a>                 201 data/tools/unit_tree/html_output.py             for uid, u in list(units_added.items()):</span>
<span class='curline'><a href='../S/4052.html#L202'>u</a>                 202 data/tools/unit_tree/html_output.py                 for auid in u.advance:</span>
<span class='curline'><a href='../S/4052.html#L220'>u</a>                 220 data/tools/unit_tree/html_output.py                 for uid, u in list(self.wesnoth.unit_lookup.items()):</span>
<span class='curline'><a href='../S/4052.html#L222'>u</a>                 222 data/tools/unit_tree/html_output.py                     for auid in u.advance:</span>
<span class='curline'><a href='../S/4052.html#L224'>u</a>                 224 data/tools/unit_tree/html_output.py                             forest.add_node(helpers.UnitNode(u))</span>
<span class='curline'><a href='../S/4052.html#L235'>u</a>                 235 data/tools/unit_tree/html_output.py             u = tree.unit</span>
<span class='curline'><a href='../S/4052.html#L236'>u</a>                 236 data/tools/unit_tree/html_output.py             ugroups = grouper.groups(u)</span>
<span class='curline'><a href='../S/4052.html#L355'>u</a>                 355 data/tools/unit_tree/html_output.py             for u in list(self.wesnoth.unit_lookup.values()):</span>
<span class='curline'><a href='../S/4052.html#L357'>u</a>                 357 data/tools/unit_tree/html_output.py                 race = u.race</span>
<span class='curline'><a href='../S/4052.html#L361'>u</a>                 361 data/tools/unit_tree/html_output.py                 if u:</span>
<span class='curline'><a href='../S/4052.html#L401'>u</a>                 401 data/tools/unit_tree/html_output.py             for uid, u in list(self.wesnoth.unit_lookup.items()):</span>
<span class='curline'><a href='../S/4052.html#L403'>u</a>                 403 data/tools/unit_tree/html_output.py                     if self.campaign not in u.campaigns: continue</span>
<span class='curline'><a href='../S/4052.html#L404'>u</a>                 404 data/tools/unit_tree/html_output.py                 if u.race:</span>
<span class='curline'><a href='../S/4052.html#L405'>u</a>                 405 data/tools/unit_tree/html_output.py                     racename = T(u.race, "plural_name")</span>
<span class='curline'><a href='../S/4052.html#L477'>u</a>                 477 data/tools/unit_tree/html_output.py     def pic(self, u, x, recursion = 0):</span>
<span class='curline'><a href='../S/4052.html#L481'>u</a>                 481 data/tools/unit_tree/html_output.py                 u.get_text_val("id"), x.name.decode("utf8")))</span>
<span class='curline'><a href='../S/4052.html#L486'>u</a>                 486 data/tools/unit_tree/html_output.py             bu = self.wesnoth.get_base_unit(u)</span>
<span class='curline'><a href='../S/4052.html#L493'>u</a>                 493 data/tools/unit_tree/html_output.py                 baseunit = self.wesnoth.get_base_unit(u)</span>
<span class='curline'><a href='../S/4052.html#L496'>u</a>                 496 data/tools/unit_tree/html_output.py                     return self.pic(u, female[0], recursion = recursion + 1)</span>
<span class='curline'><a href='../S/4052.html#L498'>u</a>                 498 data/tools/unit_tree/html_output.py                     return self.pic(u, u, recursion = recursion + 1)</span>
<span class='curline'><a href='../S/4052.html#L501'>u</a>                 501 data/tools/unit_tree/html_output.py                 u.get_text_val("id"), x.name.decode("utf8")))</span>
<span class='curline'><a href='../S/4052.html#L506'>u</a>                 506 data/tools/unit_tree/html_output.py                 (image, u.get_text_val("id")))</span>
<span class='curline'><a href='../S/4052.html#L515'>u</a>                 515 data/tools/unit_tree/html_output.py     def get_abilities(self, u):</span>
<span class='curline'><a href='../S/4052.html#L518'>u</a>                 518 data/tools/unit_tree/html_output.py         for abilities in u.get_all(tag="abilities"):</span>
<span class='curline'><a href='../S/4052.html#L603'>u</a>                 603 data/tools/unit_tree/html_output.py                         u = un.unit</span>
<span class='curline'><a href='../S/4052.html#L607'>u</a>                 607 data/tools/unit_tree/html_output.py                         uid = u.get_text_val("id")</span>
<span class='curline'><a href='../S/4052.html#L609'>u</a>                 609 data/tools/unit_tree/html_output.py                             return self.wesnoth.get_unit_value(u, name,</span>
<span class='curline'><a href='../S/4052.html#L626'>u</a>                 626 data/tools/unit_tree/html_output.py                         if "mainline" not in u.campaigns: uaddon = self.addon</span>
<span class='curline'><a href='../S/4052.html#L635'>u</a>                 635 data/tools/unit_tree/html_output.py                         image, portrait = self.pic(u, u)</span>
<span class='curline'><a href='../S/4052.html#L654'>u</a>                 654 data/tools/unit_tree/html_output.py                         anames = self.get_abilities(u)</span>
<span class='curline'><a href='../S/4052.html#L662'>u</a>                 662 data/tools/unit_tree/html_output.py                         attacks = self.get_recursive_attacks(u)</span>
<span class='curline'><a href='../S/4053.html#L135'>u</a>                 135 data/tools/unit_tree/wiki_output.py         for u in units:</span>
<span class='curline'><a href='../S/4053.html#L136'>u</a>                 136 data/tools/unit_tree/wiki_output.py             if not u.parents:</span>
<span class='curline'><a href='../S/4053.html#L137'>u</a>                 137 data/tools/unit_tree/wiki_output.py                  roots.append(u)</span>
<span class='curline'><a href='../S/4053.html#L139'>u</a>                 139 data/tools/unit_tree/wiki_output.py             if not [x for x in u.parents if x.race == u.race]:</span>
<span class='curline'><a href='../S/4053.html#L140'>u</a>                 140 data/tools/unit_tree/wiki_output.py                 roots.append(u)</span>
<span class='curline'><a href='../S/4053.html#L142'>u</a>                 142 data/tools/unit_tree/wiki_output.py         roots.sort(key = lambda u: u.name)</span>
<span class='curline'><a href='../S/4091.html#L105'>u</a>                 105 data/tools/wesnoth/wmlparser.py             u = text.decode("utf8")</span>
<span class='curline'><a href='../S/4091.html#L107'>u</a>                 107 data/tools/wesnoth/wmlparser.py             u = text.decode("latin1")</span>
<span class='curline'><a href='../S/4091.html#L108'>u</a>                 108 data/tools/wesnoth/wmlparser.py         text = u</span>
<span class='curline'><a href='../S/1790.html#L67'>u</a>                  67 doc/design/gui2/unit_attack.cpp static void set_attacker_info(twindow&amp; w, unit&amp; u)</span>
<span class='curline'><a href='../S/1790.html#L69'>u</a>                  69 doc/design/gui2/unit_attack.cpp 	set_label&lt;timage&gt;(w, "attacker_portrait", u.absolute_image());</span>
<span class='curline'><a href='../S/1790.html#L70'>u</a>                  70 doc/design/gui2/unit_attack.cpp 	set_label&lt;timage&gt;(w, "attacker_icon", u.absolute_image());</span>
<span class='curline'><a href='../S/1790.html#L71'>u</a>                  71 doc/design/gui2/unit_attack.cpp 	set_label&lt;tcontrol&gt;(w, "attacker_name", u.name());</span>
<span class='curline'><a href='../S/1790.html#L74'>u</a>                  74 doc/design/gui2/unit_attack.cpp static void set_defender_info(twindow&amp; w, unit&amp; u)</span>
<span class='curline'><a href='../S/1790.html#L76'>u</a>                  76 doc/design/gui2/unit_attack.cpp 	set_label&lt;timage&gt;(w, "defender_portrait", u.absolute_image());</span>
<span class='curline'><a href='../S/1790.html#L77'>u</a>                  77 doc/design/gui2/unit_attack.cpp 	set_label&lt;timage&gt;(w, "defender_icon", u.absolute_image());</span>
<span class='curline'><a href='../S/1790.html#L78'>u</a>                  78 doc/design/gui2/unit_attack.cpp 	set_label&lt;tcontrol&gt;(w, "defender_name", u.name());</span>
<span class='curline'><a href='../S/894.html#L59'>u</a>                  59 src/actions/advancement.cpp 		const unit&amp; u = *resources::gameboard-&gt;units().find(loc);</span>
<span class='curline'><a href='../S/894.html#L62'>u</a>                  62 src/actions/advancement.cpp 		for (const std::string&amp; advance : u.advances_to()) {</span>
<span class='curline'><a href='../S/894.html#L64'>u</a>                  64 src/actions/advancement.cpp 			previews.push_back(get_advanced_unit(u, advance));</span>
<span class='curline'><a href='../S/894.html#L70'>u</a>                  70 src/actions/advancement.cpp 		for (const config&amp; advance : u.get_modification_advances()) {</span>
<span class='curline'><a href='../S/894.html#L74'>u</a>                  74 src/actions/advancement.cpp 			previews.push_back(get_amla_unit(u, advance));</span>
<span class='curline'><a href='../S/894.html#L97'>u</a>                  97 src/actions/advancement.cpp 		unit_map::iterator u = resources::gameboard-&gt;units().find(loc);</span>
<span class='curline'><a href='../S/894.html#L98'>u</a>                  98 src/actions/advancement.cpp 		if (u == resources::gameboard-&gt;units().end()) {</span>
<span class='curline'><a href='../S/894.html#L102'>u</a>                 102 src/actions/advancement.cpp 		else if (!u-&gt;advances()) {</span>
<span class='curline'><a href='../S/894.html#L107'>u</a>                 107 src/actions/advancement.cpp 		const std::vector&lt;std::string&gt;&amp; options = u-&gt;advances_to();</span>
<span class='curline'><a href='../S/894.html#L108'>u</a>                 108 src/actions/advancement.cpp 		std::vector&lt;config&gt; mod_options = u-&gt;get_modification_advances();</span>
<span class='curline'><a href='../S/894.html#L121'>u</a>                 121 src/actions/advancement.cpp 			animator.add_animation(&amp;*u, "levelout", u-&gt;get_location(), map_location(), 0, with_bars);</span>
<span class='curline'><a href='../S/894.html#L136'>u</a>                 136 src/actions/advancement.cpp 		u = resources::gameboard-&gt;units().find(loc);</span>
<span class='curline'><a href='../S/894.html#L139'>u</a>                 139 src/actions/advancement.cpp 		if (animate &amp;&amp; u != resources::gameboard-&gt;units().end() &amp;&amp; !resources::screen-&gt;video().update_locked()) {</span>
<span class='curline'><a href='../S/894.html#L141'>u</a>                 141 src/actions/advancement.cpp 			animator.add_animation(&amp;*u, "levelin", u-&gt;get_location(), map_location(), 0, true);</span>
<span class='curline'><a href='../S/894.html#L192'>u</a>                 192 src/actions/advancement.cpp 					unit_map::iterator u = resources::gameboard-&gt;units().find(loc_);</span>
<span class='curline'><a href='../S/894.html#L193'>u</a>                 193 src/actions/advancement.cpp 					const std::vector&lt;std::string&gt;&amp; options = u-&gt;advances_to();</span>
<span class='curline'><a href='../S/894.html#L194'>u</a>                 194 src/actions/advancement.cpp 					const std::vector&lt;std::string&gt;&amp; allowed = ai_advancement_-&gt;get_advancements(u);</span>
<span class='curline'><a href='../S/894.html#L246'>u</a>                 246 src/actions/advancement.cpp 		unit_map::iterator u = resources::gameboard-&gt;units().find(params.loc_);</span>
<span class='curline'><a href='../S/894.html#L248'>u</a>                 248 src/actions/advancement.cpp 		if(!unit_helper::will_certainly_advance(u)) {</span>
<span class='curline'><a href='../S/894.html#L257'>u</a>                 257 src/actions/advancement.cpp 			u = resources::gameboard-&gt;units().find(params.loc_);</span>
<span class='curline'><a href='../S/894.html#L258'>u</a>                 258 src/actions/advancement.cpp 			if(!unit_helper::will_certainly_advance(u))</span>
<span class='curline'><a href='../S/894.html#L265'>u</a>                 265 src/actions/advancement.cpp 		int side_for = resources::gamedata-&gt;phase() == game_data::PLAY ? 0: u-&gt;side();</span>
<span class='curline'><a href='../S/894.html#L267'>u</a>                 267 src/actions/advancement.cpp 			unit_advancement_choice(params.loc_, unit_helper::number_of_possible_advances(*u), u-&gt;side(), params.ai_advancements_, params.force_dialog_), side_for);</span>
<span class='curline'><a href='../S/894.html#L272'>u</a>                 272 src/actions/advancement.cpp 		u = resources::gameboard-&gt;units().find(params.loc_);</span>
<span class='curline'><a href='../S/894.html#L274'>u</a>                 274 src/actions/advancement.cpp 		if (u.valid() &amp;&amp; u-&gt;experience() &gt; 80)</span>
<span class='curline'><a href='../S/894.html#L276'>u</a>                 276 src/actions/advancement.cpp 			WRN_NG &lt;&lt; "Unit has too many (" &lt;&lt; u-&gt;experience() &lt;&lt; ") XP left; cascade leveling goes on still." &lt;&lt; std::endl;</span>
<span class='curline'><a href='../S/894.html#L282'>u</a>                 282 src/actions/advancement.cpp unit_ptr get_advanced_unit(const unit &amp;u, const std::string&amp; advance_to)</span>
<span class='curline'><a href='../S/894.html#L289'>u</a>                 289 src/actions/advancement.cpp 	unit_ptr new_unit(new unit(u));</span>
<span class='curline'><a href='../S/894.html#L305'>u</a>                 305 src/actions/advancement.cpp unit_ptr get_amla_unit(const unit &amp;u, const config &amp;mod_option)</span>
<span class='curline'><a href='../S/894.html#L307'>u</a>                 307 src/actions/advancement.cpp 	unit_ptr amla_unit(new unit(u));</span>
<span class='curline'><a href='../S/894.html#L316'>u</a>                 316 src/actions/advancement.cpp 	unit_map::unit_iterator u = resources::gameboard-&gt;units().find(loc);</span>
<span class='curline'><a href='../S/894.html#L317'>u</a>                 317 src/actions/advancement.cpp 	if(!u.valid()) {</span>
<span class='curline'><a href='../S/894.html#L321'>u</a>                 321 src/actions/advancement.cpp 	std::string original_type = u-&gt;type_id();</span>
<span class='curline'><a href='../S/894.html#L329'>u</a>                 329 src/actions/advancement.cpp 		if (!u.valid() || u-&gt;experience() &lt; u-&gt;max_experience() ||</span>
<span class='curline'><a href='../S/894.html#L330'>u</a>                 330 src/actions/advancement.cpp 			u-&gt;type_id() != original_type)</span>
<span class='curline'><a href='../S/894.html#L336'>u</a>                 336 src/actions/advancement.cpp 		loc = u-&gt;get_location();</span>
<span class='curline'><a href='../S/894.html#L342'>u</a>                 342 src/actions/advancement.cpp 	std::vector&lt;int&gt; not_seeing = actions::get_sides_not_seeing(*u);</span>
<span class='curline'><a href='../S/894.html#L346'>u</a>                 346 src/actions/advancement.cpp 	unit_ptr new_unit = use_amla ? get_amla_unit(*u, *boost::get&lt;const config*&gt;(advance_to)) :</span>
<span class='curline'><a href='../S/894.html#L347'>u</a>                 347 src/actions/advancement.cpp 	                           get_advanced_unit(*u, boost::get&lt;std::string&gt;(advance_to));</span>
<span class='curline'><a href='../S/894.html#L356'>u</a>                 356 src/actions/advancement.cpp 	u = resources::gameboard-&gt;units().insert(new_unit).first;</span>
<span class='curline'><a href='../S/894.html#L371'>u</a>                 371 src/actions/advancement.cpp 	if ( u.valid() )</span>
<span class='curline'><a href='../S/894.html#L372'>u</a>                 372 src/actions/advancement.cpp 		actions::actor_sighted(*u, &amp;not_seeing);</span>
<span class='curline'><a href='../S/887.html#L59'>u</a>                  59 src/actions/advancement.hpp unit_ptr get_advanced_unit(const unit &amp;u, const std::string &amp;advance_to);</span>
<span class='curline'><a href='../S/887.html#L64'>u</a>                  64 src/actions/advancement.hpp unit_ptr get_amla_unit(const unit &amp;u, const config &amp;mod_option);</span>
<span class='curline'><a href='../S/896.html#L65'>u</a>                  65 src/actions/attack.cpp battle_context_unit_stats::battle_context_unit_stats(const unit &amp;u,</span>
<span class='curline'><a href='../S/896.html#L72'>u</a>                  72 src/actions/attack.cpp 	is_poisoned(u.get_state(unit::STATE_POISONED)),</span>
<span class='curline'><a href='../S/896.html#L73'>u</a>                  73 src/actions/attack.cpp 	is_slowed(u.get_state(unit::STATE_SLOWED)),</span>
<span class='curline'><a href='../S/896.html#L83'>u</a>                  83 src/actions/attack.cpp 	experience(u.experience()),</span>
<span class='curline'><a href='../S/896.html#L84'>u</a>                  84 src/actions/attack.cpp 	max_experience(u.max_experience()),</span>
<span class='curline'><a href='../S/896.html#L85'>u</a>                  85 src/actions/attack.cpp 	level(u.level()),</span>
<span class='curline'><a href='../S/896.html#L88'>u</a>                  88 src/actions/attack.cpp 	max_hp(u.max_hitpoints()),</span>
<span class='curline'><a href='../S/896.html#L101'>u</a>                 101 src/actions/attack.cpp 		weapon = u.attacks()[attack_num].shared_from_this();</span>
<span class='curline'><a href='../S/896.html#L103'>u</a>                 103 src/actions/attack.cpp 	if(u.hitpoints() &lt; 0) {</span>
<span class='curline'><a href='../S/896.html#L104'>u</a>                 104 src/actions/attack.cpp 		LOG_CF &lt;&lt; "Unit with " &lt;&lt; u.hitpoints() &lt;&lt; " hitpoints found, set to 0 for damage calculations\n";</span>
<span class='curline'><a href='../S/896.html#L106'>u</a>                 106 src/actions/attack.cpp 	} else if(u.hitpoints() &gt; u.max_hitpoints()) {</span>
<span class='curline'><a href='../S/896.html#L110'>u</a>                 110 src/actions/attack.cpp 		hp = u.max_hitpoints();</span>
<span class='curline'><a href='../S/896.html#L112'>u</a>                 112 src/actions/attack.cpp 		hp = u.hitpoints();</span>
<span class='curline'><a href='../S/896.html#L141'>u</a>                 141 src/actions/attack.cpp 				plague_type = u.type().base_id();</span>
<span class='curline'><a href='../S/896.html#L167'>u</a>                 167 src/actions/attack.cpp 		damage_multiplier += combat_modifier(resources::gameboard-&gt;units(), resources::gameboard-&gt;map(), u_loc, u.alignment(), u.is_fearless());</span>
<span class='curline'><a href='../S/896.html#L1309'>u</a>                1309 src/actions/attack.cpp 			unit &amp;u = a_.get_unit();</span>
<span class='curline'><a href='../S/896.html#L1310'>u</a>                1310 src/actions/attack.cpp 			u.anim_comp().set_standing();</span>
<span class='curline'><a href='../S/896.html#L1311'>u</a>                1311 src/actions/attack.cpp 			u.set_experience(u.experience() + a_.xp_);</span>
<span class='curline'><a href='../S/896.html#L1315'>u</a>                1315 src/actions/attack.cpp 			unit &amp;u = d_.get_unit();</span>
<span class='curline'><a href='../S/896.html#L1316'>u</a>                1316 src/actions/attack.cpp 			u.anim_comp().set_standing();</span>
<span class='curline'><a href='../S/896.html#L1317'>u</a>                1317 src/actions/attack.cpp 			u.set_experience(u.experience() + d_.xp_);</span>
<span class='curline'><a href='../S/899.html#L84'>u</a>                  84 src/actions/attack.hpp 	battle_context_unit_stats(const unit &amp;u, const map_location&amp; u_loc,</span>
<span class='curline'><a href='../S/904.html#L66'>u</a>                  66 src/actions/create.cpp 	unit_map::const_iterator u = resources::gameboard-&gt;units().begin(),</span>
<span class='curline'><a href='../S/904.html#L95'>u</a>                  95 src/actions/create.cpp 		for( ; u != u_end; ++u ) {</span>
<span class='curline'><a href='../S/904.html#L97'>u</a>                  97 src/actions/create.cpp 			if ( !(u-&gt;can_recruit() &amp;&amp; u-&gt;side() == side) )</span>
<span class='curline'><a href='../S/904.html#L101'>u</a>                 101 src/actions/create.cpp 			if ( allow_local &amp;&amp; dynamic_cast&lt;game_state*&gt;(resources::filter_con)-&gt;can_recruit_on(*u, recruit_loc) ) {</span>
<span class='curline'><a href='../S/904.html#L103'>u</a>                 103 src/actions/create.cpp 				local_result.insert(u-&gt;recruits().begin(), u-&gt;recruits().end());</span>
<span class='curline'><a href='../S/904.html#L106'>u</a>                 106 src/actions/create.cpp 				global_result.insert(u-&gt;recruits().begin(), u-&gt;recruits().end());</span>
<span class='curline'><a href='../S/904.html#L196'>u</a>                 196 src/actions/create.cpp 		unit_map::const_iterator u = resources::gameboard-&gt;units().begin(),</span>
<span class='curline'><a href='../S/904.html#L200'>u</a>                 200 src/actions/create.cpp 		for(; u != u_end; ++u) {</span>
<span class='curline'><a href='../S/904.html#L202'>u</a>                 202 src/actions/create.cpp 			if (!(u-&gt;can_recruit() &amp;&amp; u-&gt;side() == side))</span>
<span class='curline'><a href='../S/904.html#L206'>u</a>                 206 src/actions/create.cpp 			if ( !dynamic_cast&lt;game_state*&gt;(resources::filter_con)-&gt;can_recruit_on(*u, recall_loc) )</span>
<span class='curline'><a href='../S/904.html#L210'>u</a>                 210 src/actions/create.cpp 			add_leader_filtered_recalls(u.get_shared_ptr(), result, &amp;valid_local_recalls);</span>
<span class='curline'><a href='../S/904.html#L218'>u</a>                 218 src/actions/create.cpp 		for(auto u = resources::gameboard-&gt;units().begin(); u != resources::gameboard-&gt;units().end(); ++u) {</span>
<span class='curline'><a href='../S/904.html#L220'>u</a>                 220 src/actions/create.cpp 			if(!u-&gt;can_recruit() || u-&gt;side() != side) {</span>
<span class='curline'><a href='../S/904.html#L224'>u</a>                 224 src/actions/create.cpp 			add_leader_filtered_recalls(u.get_shared_ptr(), result, &amp;valid_local_recalls);</span>
<span class='curline'><a href='../S/904.html#L296'>u</a>                 296 src/actions/create.cpp 	unit_map::const_iterator u = units.find(recall_from);</span>
<span class='curline'><a href='../S/904.html#L297'>u</a>                 297 src/actions/create.cpp 	if ( u != u_end  &amp;&amp;  u-&gt;side() == side ) {</span>
<span class='curline'><a href='../S/904.html#L299'>u</a>                 299 src/actions/create.cpp 			check_unit_recall_location(*u, unit_recall, check_location, alternative);</span>
<span class='curline'><a href='../S/904.html#L303'>u</a>                 303 src/actions/create.cpp 	for ( u = units.begin(); best_result &lt; goal_result  &amp;&amp;  u != u_end; ++u ) {</span>
<span class='curline'><a href='../S/904.html#L304'>u</a>                 304 src/actions/create.cpp 		if ( u-&gt;side() != side )</span>
<span class='curline'><a href='../S/904.html#L309'>u</a>                 309 src/actions/create.cpp 			check_unit_recall_location(*u, unit_recall, check_location, alternative);</span>
<span class='curline'><a href='../S/904.html#L318'>u</a>                 318 src/actions/create.cpp 			recall_from = u-&gt;get_location();</span>
<span class='curline'><a href='../S/904.html#L432'>u</a>                 432 src/actions/create.cpp 	unit_map::const_iterator u = units.find(recruited_from);</span>
<span class='curline'><a href='../S/904.html#L433'>u</a>                 433 src/actions/create.cpp 	if ( u != u_end  &amp;&amp;  u-&gt;side() == side ) {</span>
<span class='curline'><a href='../S/904.html#L435'>u</a>                 435 src/actions/create.cpp 			check_unit_recruit_location(*u, check_type, check_location, alternative);</span>
<span class='curline'><a href='../S/904.html#L439'>u</a>                 439 src/actions/create.cpp 	for ( u = units.begin(); best_result &lt; goal_result  &amp;&amp;  u != u_end; ++u ) {</span>
<span class='curline'><a href='../S/904.html#L440'>u</a>                 440 src/actions/create.cpp 		if ( u-&gt;side() != side )</span>
<span class='curline'><a href='../S/904.html#L445'>u</a>                 445 src/actions/create.cpp 			check_unit_recruit_location(*u, check_type, check_location, alternative);</span>
<span class='curline'><a href='../S/904.html#L454'>u</a>                 454 src/actions/create.cpp 			recruited_from = u-&gt;get_location();</span>
<span class='curline'><a href='../S/904.html#L610'>u</a>                 610 src/actions/create.cpp place_recruit_result place_recruit(unit_ptr u, const map_location &amp;recruit_location, const map_location&amp; recruited_from,</span>
<span class='curline'><a href='../S/904.html#L617'>u</a>                 617 src/actions/create.cpp 		u-&gt;set_movement(u-&gt;total_movement(), true);</span>
<span class='curline'><a href='../S/904.html#L619'>u</a>                 619 src/actions/create.cpp 		u-&gt;set_movement(0, true);</span>
<span class='curline'><a href='../S/904.html#L620'>u</a>                 620 src/actions/create.cpp 		u-&gt;set_attacks(0);</span>
<span class='curline'><a href='../S/904.html#L622'>u</a>                 622 src/actions/create.cpp 	u-&gt;heal_fully();</span>
<span class='curline'><a href='../S/904.html#L623'>u</a>                 623 src/actions/create.cpp 	u-&gt;set_hidden(true);</span>
<span class='curline'><a href='../S/904.html#L627'>u</a>                 627 src/actions/create.cpp 			find_recruit_leader(u-&gt;side(), recruit_location, recruited_from);</span>
<span class='curline'><a href='../S/904.html#L628'>u</a>                 628 src/actions/create.cpp 	u-&gt;set_location(recruit_location);</span>
<span class='curline'><a href='../S/904.html#L630'>u</a>                 630 src/actions/create.cpp 	std::pair&lt;unit_map::iterator, bool&gt; add_result = resources::gameboard-&gt;units().insert(u);</span>
<span class='curline'><a href='../S/904.html#L635'>u</a>                 635 src/actions/create.cpp 	set_recruit_facing(new_unit_itor, *u, recruit_location, leader_loc);</span>
<span class='curline'><a href='../S/904.html#L638'>u</a>                 638 src/actions/create.cpp 	recruit_checksums(*u, wml_triggered);</span>
<span class='curline'><a href='../S/904.html#L654'>u</a>                 654 src/actions/create.cpp 	resources::gameboard-&gt;get_team(u-&gt;side()).spend_gold(cost);</span>
<span class='curline'><a href='../S/879.html#L151'>u</a>                 151 src/actions/create.hpp place_recruit_result place_recruit(unit_ptr u, const map_location &amp;recruit_location, const map_location&amp; recruited_from,</span>
<span class='curline'><a href='../S/901.html#L59'>u</a>                  59 src/actions/move.cpp void move_unit_spectator::add_seen_friend(const unit_map::const_iterator &amp;u)</span>
<span class='curline'><a href='../S/901.html#L61'>u</a>                  61 src/actions/move.cpp 	seen_friends_.push_back(u);</span>
<span class='curline'><a href='../S/901.html#L65'>u</a>                  65 src/actions/move.cpp void move_unit_spectator::add_seen_enemy(const unit_map::const_iterator &amp;u)</span>
<span class='curline'><a href='../S/901.html#L67'>u</a>                  67 src/actions/move.cpp 	seen_enemies_.push_back(u);</span>
<span class='curline'><a href='../S/901.html#L121'>u</a>                 121 src/actions/move.cpp void move_unit_spectator::set_ambusher(const unit_map::const_iterator &amp;u)</span>
<span class='curline'><a href='../S/901.html#L123'>u</a>                 123 src/actions/move.cpp 	ambusher_ = u;</span>
<span class='curline'><a href='../S/901.html#L127'>u</a>                 127 src/actions/move.cpp void move_unit_spectator::set_failed_teleport(const unit_map::const_iterator &amp;u)</span>
<span class='curline'><a href='../S/901.html#L129'>u</a>                 129 src/actions/move.cpp 	failed_teleport_ = u;</span>
<span class='curline'><a href='../S/901.html#L133'>u</a>                 133 src/actions/move.cpp void move_unit_spectator::set_unit(const unit_map::const_iterator &amp;u)</span>
<span class='curline'><a href='../S/901.html#L135'>u</a>                 135 src/actions/move.cpp 	unit_ = u;</span>
<span class='curline'><a href='../S/900.html#L38'>u</a>                  38 src/actions/move.hpp 	void add_seen_friend(const unit_map::const_iterator &amp;u);</span>
<span class='curline'><a href='../S/900.html#L42'>u</a>                  42 src/actions/move.hpp 	void add_seen_enemy(const unit_map::const_iterator &amp;u);</span>
<span class='curline'><a href='../S/900.html#L77'>u</a>                  77 src/actions/move.hpp 	void set_ambusher(const unit_map::const_iterator &amp;u);</span>
<span class='curline'><a href='../S/900.html#L81'>u</a>                  81 src/actions/move.hpp 	void set_failed_teleport(const unit_map::const_iterator &amp;u);</span>
<span class='curline'><a href='../S/900.html#L85'>u</a>                  85 src/actions/move.hpp 	void set_unit(const unit_map::const_iterator &amp;u);</span>
<span class='curline'><a href='../S/880.html#L35'>u</a>                  35 src/actions/shroud_clearing_action.hpp 	shroud_clearing_action(const unit_const_ptr u, const map_location&amp; loc, int village_owner, bool village_bonus)</span>
<span class='curline'><a href='../S/880.html#L37'>u</a>                  37 src/actions/shroud_clearing_action.hpp 		, view_info(*u)</span>
<span class='curline'><a href='../S/880.html#L46'>u</a>                  46 src/actions/shroud_clearing_action.hpp 	shroud_clearing_action(const unit_const_ptr u, const route_t::const_iterator&amp; begin, const route_t::const_iterator&amp; end, int village_owner, bool village_bonus)</span>
<span class='curline'><a href='../S/880.html#L48'>u</a>                  48 src/actions/shroud_clearing_action.hpp 		, view_info(*u)</span>
<span class='curline'><a href='../S/898.html#L163'>u</a>                 163 src/actions/undo.cpp void undo_list::add_dismissal(const unit_const_ptr u)</span>
<span class='curline'><a href='../S/898.html#L165'>u</a>                 165 src/actions/undo.cpp 	add(new undo::dismiss_action(u));</span>
<span class='curline'><a href='../S/898.html#L171'>u</a>                 171 src/actions/undo.cpp void undo_list::add_move(const unit_const_ptr u,</span>
<span class='curline'><a href='../S/898.html#L177'>u</a>                 177 src/actions/undo.cpp 	add(new undo::move_action(u, begin, end, start_moves, timebonus, village_owner, dir));</span>
<span class='curline'><a href='../S/898.html#L183'>u</a>                 183 src/actions/undo.cpp void undo_list::add_recall(const unit_const_ptr u, const map_location&amp; loc,</span>
<span class='curline'><a href='../S/898.html#L186'>u</a>                 186 src/actions/undo.cpp 	add(new undo::recall_action(u, loc, from, orig_village_owner, time_bonus));</span>
<span class='curline'><a href='../S/898.html#L192'>u</a>                 192 src/actions/undo.cpp void undo_list::add_recruit(const unit_const_ptr u, const map_location&amp; loc,</span>
<span class='curline'><a href='../S/898.html#L195'>u</a>                 195 src/actions/undo.cpp 	add(new undo::recruit_action(u, loc, from, orig_village_owner, time_bonus));</span>
<span class='curline'><a href='../S/905.html#L58'>u</a>                  58 src/actions/undo.hpp 	void add_dismissal(const unit_const_ptr u);</span>
<span class='curline'><a href='../S/905.html#L60'>u</a>                  60 src/actions/undo.hpp 	void add_move(const unit_const_ptr u,</span>
<span class='curline'><a href='../S/905.html#L66'>u</a>                  66 src/actions/undo.hpp 	void add_recall(const unit_const_ptr u, const map_location&amp; loc,</span>
<span class='curline'><a href='../S/905.html#L69'>u</a>                  69 src/actions/undo.hpp 	void add_recruit(const unit_const_ptr u, const map_location&amp; loc,</span>
<span class='curline'><a href='../S/890.html#L66'>u</a>                  66 src/actions/undo_move_action.cpp 	unit_map::iterator u = units.find(rev_route.front());</span>
<span class='curline'><a href='../S/890.html#L68'>u</a>                  68 src/actions/undo_move_action.cpp 	if ( u == units.end()  ||  u_end != units.end() ) {</span>
<span class='curline'><a href='../S/890.html#L76'>u</a>                  76 src/actions/undo_move_action.cpp 	starting_moves = u-&gt;movement_left();</span>
<span class='curline'><a href='../S/890.html#L77'>u</a>                  77 src/actions/undo_move_action.cpp 	goto_hex = u-&gt;get_goto();</span>
<span class='curline'><a href='../S/890.html#L80'>u</a>                  80 src/actions/undo_move_action.cpp 	unit_display::move_unit(rev_route, u.get_shared_ptr(), true, starting_dir);</span>
<span class='curline'><a href='../S/890.html#L81'>u</a>                  81 src/actions/undo_move_action.cpp 	units.move(u-&gt;get_location(), rev_route.back());</span>
<span class='curline'><a href='../S/890.html#L85'>u</a>                  85 src/actions/undo_move_action.cpp 	u = units.find(rev_route.back());</span>
<span class='curline'><a href='../S/890.html#L86'>u</a>                  86 src/actions/undo_move_action.cpp 	u-&gt;set_goto(map_location());</span>
<span class='curline'><a href='../S/890.html#L87'>u</a>                  87 src/actions/undo_move_action.cpp 	u-&gt;set_movement(saved_moves, true);</span>
<span class='curline'><a href='../S/890.html#L88'>u</a>                  88 src/actions/undo_move_action.cpp 	u-&gt;anim_comp().set_standing();</span>
<span class='curline'><a href='../S/902.html#L58'>u</a>                  58 src/actions/vision.cpp 	for (const unit &amp;u : resources::gameboard-&gt;units())</span>
<span class='curline'><a href='../S/902.html#L60'>u</a>                  60 src/actions/vision.cpp 		if ( u.jamming() &lt; 1  ||  !view_team.is_enemy(u.side()) )</span>
<span class='curline'><a href='../S/902.html#L63'>u</a>                  63 src/actions/vision.cpp 		pathfind::jamming_path jam_path(u, u.get_location());</span>
<span class='curline'><a href='../S/902.html#L714'>u</a>                 714 src/actions/vision.cpp 	for (const unit &amp;u : resources::gameboard-&gt;units()) {</span>
<span class='curline'><a href='../S/902.html#L715'>u</a>                 715 src/actions/vision.cpp 		const map_location &amp; u_location = u.get_location();</span>
<span class='curline'><a href='../S/902.html#L727'>u</a>                 727 src/actions/vision.cpp 	for (const unit &amp;u : resources::gameboard-&gt;units())</span>
<span class='curline'><a href='../S/902.html#L729'>u</a>                 729 src/actions/vision.cpp 		if ( u.side() == side )</span>
<span class='curline'><a href='../S/902.html#L730'>u</a>                 730 src/actions/vision.cpp 			clearer.clear_unit(u.get_location(), u, tm, &amp;visible_locs);</span>
<span class='curline'><a href='../S/902.html#L763'>u</a>                 763 src/actions/vision.cpp 	for (const unit &amp;u : resources::gameboard-&gt;units())</span>
<span class='curline'><a href='../S/902.html#L765'>u</a>                 765 src/actions/vision.cpp 		if ( u.side() == side )</span>
<span class='curline'><a href='../S/902.html#L766'>u</a>                 766 src/actions/vision.cpp 			result |= clearer.clear_unit(u.get_location(), u, tm);</span>
<span class='curline'><a href='../S/233.html#L348'>u</a>                 348 src/ai/actions.cpp 	const unit *u = &amp;*un;</span>
<span class='curline'><a href='../S/233.html#L349'>u</a>                 349 src/ai/actions.cpp 	if (u-&gt;side() != get_side()) {</span>
<span class='curline'><a href='../S/233.html#L353'>u</a>                 353 src/ai/actions.cpp 	if (u-&gt;incapacitated()) {</span>
<span class='curline'><a href='../S/233.html#L357'>u</a>                 357 src/ai/actions.cpp 	return u;</span>
<span class='curline'><a href='../S/233.html#L398'>u</a>                 398 src/ai/actions.cpp 	const unit *u = get_unit();</span>
<span class='curline'><a href='../S/233.html#L399'>u</a>                 399 src/ai/actions.cpp 	if (!u) {</span>
<span class='curline'><a href='../S/233.html#L402'>u</a>                 402 src/ai/actions.cpp 	if (!test_route(*u)) {</span>
<span class='curline'><a href='../S/233.html#L787'>u</a>                 787 src/ai/actions.cpp 	const unit_type *u = unit_types.find(unit_name_);</span>
<span class='curline'><a href='../S/233.html#L793'>u</a>                 793 src/ai/actions.cpp 	assert(location_checked_  &amp;&amp;  u != nullptr);</span>
<span class='curline'><a href='../S/233.html#L796'>u</a>                 796 src/ai/actions.cpp 		bool gamestate_changed = simulated_recruit(get_side(), u, recruit_location_);</span>
<span class='curline'><a href='../S/233.html#L803'>u</a>                 803 src/ai/actions.cpp 	synced_context::run_in_synced_context_if_not_already("recruit", replay_helper::get_recruit(u-&gt;id(), recruit_location_, recruit_from_), false, !preferences::skip_ai_moves());</span>
<span class='curline'><a href='../S/233.html#L835'>u</a>                 835 src/ai/actions.cpp 	const unit *u = &amp;*un;</span>
<span class='curline'><a href='../S/233.html#L836'>u</a>                 836 src/ai/actions.cpp 	if (u-&gt;side() != get_side()) {</span>
<span class='curline'><a href='../S/233.html#L840'>u</a>                 840 src/ai/actions.cpp 	if (u-&gt;incapacitated()) {</span>
<span class='curline'><a href='../S/233.html#L844'>u</a>                 844 src/ai/actions.cpp 	return u;</span>
<span class='curline'><a href='../S/276.html#L149'>u</a>                 149 src/ai/composite/goal.cpp 	for (const unit &amp;u : resources::gameboard-&gt;units()) {</span>
<span class='curline'><a href='../S/276.html#L150'>u</a>                 150 src/ai/composite/goal.cpp 		if (ufilt( u )) {</span>
<span class='curline'><a href='../S/276.html#L151'>u</a>                 151 src/ai/composite/goal.cpp 			LOG_AI_GOAL &lt;&lt; "found explicit target unit at ... " &lt;&lt; u.get_location() &lt;&lt; " with value: " &lt;&lt; value() &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/276.html#L152'>u</a>                 152 src/ai/composite/goal.cpp 			*target_list = target(u.get_location(), value(), target::TYPE::EXPLICIT);</span>
<span class='curline'><a href='../S/276.html#L265'>u</a>                 265 src/ai/composite/goal.cpp 		for (const unit &amp;u : units)</span>
<span class='curline'><a href='../S/276.html#L268'>u</a>                 268 src/ai/composite/goal.cpp 			if (ufilt(u)) {</span>
<span class='curline'><a href='../S/276.html#L269'>u</a>                 269 src/ai/composite/goal.cpp 				DBG_AI_GOAL &lt;&lt; "side " &lt;&lt; get_side() &lt;&lt; ": in " &lt;&lt; goal_type &lt;&lt; ": " &lt;&lt; u.get_location() &lt;&lt; " should be protected\n";</span>
<span class='curline'><a href='../S/276.html#L270'>u</a>                 270 src/ai/composite/goal.cpp 				items.insert(u.get_location());</span>
<span class='curline'><a href='../S/276.html#L280'>u</a>                 280 src/ai/composite/goal.cpp 		for (const unit &amp;u : units)</span>
<span class='curline'><a href='../S/276.html#L282'>u</a>                 282 src/ai/composite/goal.cpp 			int distance = distance_between(u.get_location(), loc);</span>
<span class='curline'><a href='../S/276.html#L283'>u</a>                 283 src/ai/composite/goal.cpp 			if (current_team().is_enemy(u.side()) &amp;&amp; distance &lt; radius_ &amp;&amp;</span>
<span class='curline'><a href='../S/276.html#L284'>u</a>                 284 src/ai/composite/goal.cpp 			    !u.invisible(u.get_location(), *resources::gameboard))</span>
<span class='curline'><a href='../S/276.html#L286'>u</a>                 286 src/ai/composite/goal.cpp 				DBG_AI_GOAL &lt;&lt; "side " &lt;&lt; get_side() &lt;&lt; ": in " &lt;&lt; goal_type &lt;&lt; ": found threat target. " &lt;&lt; u.get_location() &lt;&lt; " is a threat to "&lt;&lt; loc &lt;&lt; '\n';</span>
<span class='curline'><a href='../S/276.html#L287'>u</a>                 287 src/ai/composite/goal.cpp 				*target_list = target(u.get_location(),</span>
<span class='curline'><a href='../S/286.html#L1096'>u</a>                1096 src/ai/contexts.cpp 			const unit_map::const_iterator u = units_.find(it-&gt;second);</span>
<span class='curline'><a href='../S/286.html#L1099'>u</a>                1099 src/ai/contexts.cpp 			if(u == units_.end()) {</span>
<span class='curline'><a href='../S/286.html#L1103'>u</a>                1103 src/ai/contexts.cpp 			const unit&amp; un = *u;</span>
<span class='curline'><a href='../S/240.html#L351'>u</a>                 351 src/ai/default/aspect_attacks.cpp int aspect_attacks_base::rate_terrain(const unit&amp; u, const map_location&amp; loc)</span>
<span class='curline'><a href='../S/240.html#L355'>u</a>                 355 src/ai/default/aspect_attacks.cpp 	const int defense = u.defense_modifier(terrain);</span>
<span class='curline'><a href='../S/240.html#L363'>u</a>                 363 src/ai/default/aspect_attacks.cpp 	if(map_.gives_healing(terrain) &amp;&amp; u.get_ability_bool("regenerate", loc, *resources::gameboard) == false) {</span>
<span class='curline'><a href='../S/240.html#L370'>u</a>                 370 src/ai/default/aspect_attacks.cpp 		if(owner == u.side()) {</span>
<span class='curline'><a href='../S/240.html#L395'>u</a>                 395 src/ai/default/aspect_attacks.cpp bool aspect_attacks::is_allowed_attacker(const unit&amp; u) const</span>
<span class='curline'><a href='../S/240.html#L397'>u</a>                 397 src/ai/default/aspect_attacks.cpp 	if(u.side() != get_side()) {</span>
<span class='curline'><a href='../S/240.html#L401'>u</a>                 401 src/ai/default/aspect_attacks.cpp 		return (*filter_own_)(u);</span>
<span class='curline'><a href='../S/240.html#L406'>u</a>                 406 src/ai/default/aspect_attacks.cpp bool aspect_attacks::is_allowed_enemy(const unit&amp; u) const</span>
<span class='curline'><a href='../S/240.html#L409'>u</a>                 409 src/ai/default/aspect_attacks.cpp 	if(!my_team.is_enemy(u.side())) {</span>
<span class='curline'><a href='../S/240.html#L413'>u</a>                 413 src/ai/default/aspect_attacks.cpp 		return (*filter_enemy_)(u);</span>
<span class='curline'><a href='../S/240.html#L468'>u</a>                 468 src/ai/default/aspect_attacks.cpp static bool call_lua_filter_fcn(lua_State* L, const unit&amp; u, int idx)</span>
<span class='curline'><a href='../S/240.html#L471'>u</a>                 471 src/ai/default/aspect_attacks.cpp 	luaW_pushunit(L, u.underlying_id());</span>
<span class='curline'><a href='../S/240.html#L478'>u</a>                 478 src/ai/default/aspect_attacks.cpp bool aspect_attacks_lua::is_allowed_attacker(const unit&amp; u) const</span>
<span class='curline'><a href='../S/240.html#L482'>u</a>                 482 src/ai/default/aspect_attacks.cpp 		return call_lua_filter_fcn(filt.lua, u, filt.ref_own_);</span>
<span class='curline'><a href='../S/240.html#L484'>u</a>                 484 src/ai/default/aspect_attacks.cpp 		return (*filt.filter_own_)(u);</span>
<span class='curline'><a href='../S/240.html#L490'>u</a>                 490 src/ai/default/aspect_attacks.cpp bool aspect_attacks_lua::is_allowed_enemy(const unit&amp; u) const</span>
<span class='curline'><a href='../S/240.html#L494'>u</a>                 494 src/ai/default/aspect_attacks.cpp 		return call_lua_filter_fcn(filt.lua, u, filt.ref_enemy_);</span>
<span class='curline'><a href='../S/240.html#L496'>u</a>                 496 src/ai/default/aspect_attacks.cpp 		return (*filt.filter_enemy_)(u);</span>
<span class='curline'><a href='../S/239.html#L47'>u</a>                  47 src/ai/default/aspect_attacks.hpp 	virtual bool is_allowed_attacker(const unit&amp; u) const = 0;</span>
<span class='curline'><a href='../S/239.html#L48'>u</a>                  48 src/ai/default/aspect_attacks.hpp 	virtual bool is_allowed_enemy(const unit&amp; u) const = 0;</span>
<span class='curline'><a href='../S/239.html#L63'>u</a>                  63 src/ai/default/aspect_attacks.hpp 	static int rate_terrain(const unit&amp; u, const map_location&amp; loc);</span>
<span class='curline'><a href='../S/239.html#L71'>u</a>                  71 src/ai/default/aspect_attacks.hpp 	virtual bool is_allowed_attacker(const unit&amp; u) const;</span>
<span class='curline'><a href='../S/239.html#L72'>u</a>                  72 src/ai/default/aspect_attacks.hpp 	virtual bool is_allowed_enemy(const unit&amp; u) const;</span>
<span class='curline'><a href='../S/239.html#L91'>u</a>                  91 src/ai/default/aspect_attacks.hpp 	virtual bool is_allowed_attacker(const unit&amp; u) const;</span>
<span class='curline'><a href='../S/239.html#L92'>u</a>                  92 src/ai/default/aspect_attacks.hpp 	virtual bool is_allowed_enemy(const unit&amp; u) const;</span>
<span class='curline'><a href='../S/238.html#L726'>u</a>                 726 src/ai/default/ca.cpp 		const unit_map::const_iterator u = resources::gameboard-&gt;units().find(j-&gt;second);</span>
<span class='curline'><a href='../S/238.html#L727'>u</a>                 727 src/ai/default/ca.cpp 		if (u == resources::gameboard-&gt;units().end() || u-&gt;get_state("guardian")) {</span>
<span class='curline'><a href='../S/238.html#L731'>u</a>                 731 src/ai/default/ca.cpp 		const unit  &amp;un = *u;</span>
<span class='curline'><a href='../S/238.html#L989'>u</a>                 989 src/ai/default/ca.cpp 	for(size_t u = 0; u &lt; unit_count; ++u, ++itor) {</span>
<span class='curline'><a href='../S/238.html#L990'>u</a>                 990 src/ai/default/ca.cpp 		units[u] = itor-&gt;first;</span>
<span class='curline'><a href='../S/238.html#L991'>u</a>                 991 src/ai/default/ca.cpp 		villages_per_unit[u] = itor-&gt;second.size();</span>
<span class='curline'><a href='../S/238.html#L992'>u</a>                 992 src/ai/default/ca.cpp 		unit_lookup.emplace(villages_per_unit[u], u);</span>
<span class='curline'><a href='../S/238.html#L1011'>u</a>                1011 src/ai/default/ca.cpp 			matrix[u][v_index] = true;</span>
<span class='curline'><a href='../S/238.html#L1023'>u</a>                1023 src/ai/default/ca.cpp 		size_t u, v;</span>
<span class='curline'><a href='../S/238.html#L1030'>u</a>                1030 src/ai/default/ca.cpp 		for(u = 0; u &lt; unit_count; ++u) {</span>
<span class='curline'><a href='../S/238.html#L1031'>u</a>                1031 src/ai/default/ca.cpp 			std::cerr &lt;&lt; units[u];</span>
<span class='curline'><a href='../S/238.html#L1034'>u</a>                1034 src/ai/default/ca.cpp 				std::cerr &lt;&lt; '\t' &lt;&lt; matrix[u][v];</span>
<span class='curline'><a href='../S/238.html#L1036'>u</a>                1036 src/ai/default/ca.cpp 			std::cerr &lt;&lt; "\t" &lt;&lt; villages_per_unit[u] &lt;&lt; '\n';</span>
<span class='curline'><a href='../S/238.html#L1157'>u</a>                1157 src/ai/default/ca.cpp 			for(size_t u = 0; u &lt; max_options; ++u) {</span>
<span class='curline'><a href='../S/238.html#L1158'>u</a>                1158 src/ai/default/ca.cpp 				if(matrix[u][perm[u]]) {</span>
<span class='curline'><a href='../S/238.html#L1159'>u</a>                1159 src/ai/default/ca.cpp 					result.emplace_back(villages[perm[u]], units[u]);</span>
<span class='curline'><a href='../S/238.html#L1195'>u</a>                1195 src/ai/default/ca.cpp 			for(size_t u = 0; u &lt; unit_count; ++u) {</span>
<span class='curline'><a href='../S/238.html#L1196'>u</a>                1196 src/ai/default/ca.cpp 				if(matrix[u][perm[u]]) {</span>
<span class='curline'><a href='../S/238.html#L1197'>u</a>                1197 src/ai/default/ca.cpp 					result.emplace_back(villages[perm[u]], units[u]);</span>
<span class='curline'><a href='../S/238.html#L1323'>u</a>                1323 src/ai/default/ca.cpp 		unit &amp;u = *u_it;</span>
<span class='curline'><a href='../S/238.html#L1325'>u</a>                1325 src/ai/default/ca.cpp 		if(u.can_recruit() &amp;&amp; get_passive_leader()){</span>
<span class='curline'><a href='../S/238.html#L1332'>u</a>                1332 src/ai/default/ca.cpp 		if(u.side() == get_side() &amp;&amp;</span>
<span class='curline'><a href='../S/238.html#L1333'>u</a>                1333 src/ai/default/ca.cpp 		   (u.max_hitpoints() - u.hitpoints() &gt;= game_config::poison_amount/2</span>
<span class='curline'><a href='../S/238.html#L1334'>u</a>                1334 src/ai/default/ca.cpp 		   || u.get_state(unit::STATE_POISONED)) &amp;&amp;</span>
<span class='curline'><a href='../S/238.html#L1335'>u</a>                1335 src/ai/default/ca.cpp 		    !u.get_ability_bool("regenerate", *resources::gameboard))</span>
<span class='curline'><a href='../S/238.html#L1342'>u</a>                1342 src/ai/default/ca.cpp 			const double leader_penalty = (u.can_recruit()?2.0:1.0);</span>
<span class='curline'><a href='../S/238.html#L1361'>u</a>                1361 src/ai/default/ca.cpp 			if(best_loc != it.second &amp;&amp; best_vulnerability*leader_penalty &lt; u.hitpoints()) {</span>
<span class='curline'><a href='../S/237.html#L49'>u</a>                  49 src/ai/default/ca_move_to_targets.cpp 	move_cost_calculator(const unit&amp; u, const gamemap&amp; map,</span>
<span class='curline'><a href='../S/237.html#L51'>u</a>                  51 src/ai/default/ca_move_to_targets.cpp 	  : unit_(u), map_(map), units_(units),</span>
<span class='curline'><a href='../S/237.html#L53'>u</a>                  53 src/ai/default/ca_move_to_targets.cpp 		max_moves_(u.total_movement()),</span>
<span class='curline'><a href='../S/237.html#L54'>u</a>                  54 src/ai/default/ca_move_to_targets.cpp 		avoid_enemies_(u.usage() == "scout")</span>
<span class='curline'><a href='../S/237.html#L205'>u</a>                 205 src/ai/default/ca_move_to_targets.cpp double move_to_targets_phase::rate_target(const target&amp; tg, const unit_map::iterator&amp; u,</span>
<span class='curline'><a href='../S/237.html#L216'>u</a>                 216 src/ai/default/ca_move_to_targets.cpp 			if (locRange.first-&gt;second == u-&gt;get_location()) {</span>
<span class='curline'><a href='../S/237.html#L237'>u</a>                 237 src/ai/default/ca_move_to_targets.cpp 		if (move_cost &lt;= u-&gt;movement_left() * 2) {</span>
<span class='curline'><a href='../S/237.html#L246'>u</a>                 246 src/ai/default/ca_move_to_targets.cpp 	if (u-&gt;usage() == "scout") {</span>
<span class='curline'><a href='../S/237.html#L279'>u</a>                 279 src/ai/default/ca_move_to_targets.cpp 	unit_map::iterator u;</span>
<span class='curline'><a href='../S/237.html#L282'>u</a>                 282 src/ai/default/ca_move_to_targets.cpp 	for(u = units_.begin(); u != units_.end(); ++u) {</span>
<span class='curline'><a href='../S/237.html#L283'>u</a>                 283 src/ai/default/ca_move_to_targets.cpp 		if (!(u-&gt;side() != get_side() || (u-&gt;can_recruit() &amp;&amp; !get_leader_ignores_keep()) || u-&gt;movement_left() &lt;= 0 || u-&gt;incapacitated())) {</span>
<span class='curline'><a href='../S/237.html#L284'>u</a>                 284 src/ai/default/ca_move_to_targets.cpp 			if (u-&gt;get_state("guardian")) {</span>
<span class='curline'><a href='../S/237.html#L285'>u</a>                 285 src/ai/default/ca_move_to_targets.cpp 				LOG_AI &lt;&lt; u-&gt;type_id() &lt;&lt; " is guardian, staying still\n";</span>
<span class='curline'><a href='../S/237.html#L286'>u</a>                 286 src/ai/default/ca_move_to_targets.cpp 				return std::make_pair(u-&gt;get_location(), u-&gt;get_location());</span>
<span class='curline'><a href='../S/237.html#L292'>u</a>                 292 src/ai/default/ca_move_to_targets.cpp 	for(u = units_.begin(); u != units_.end(); ++u) {</span>
<span class='curline'><a href='../S/237.html#L293'>u</a>                 293 src/ai/default/ca_move_to_targets.cpp 		if (!(u-&gt;side() != get_side() || (u-&gt;can_recruit() &amp;&amp; !get_leader_ignores_keep()) || u-&gt;movement_left() &lt;= 0 || u-&gt;incapacitated())) {</span>
<span class='curline'><a href='../S/237.html#L298'>u</a>                 298 src/ai/default/ca_move_to_targets.cpp 	if(u == units_.end()) {</span>
<span class='curline'><a href='../S/237.html#L316'>u</a>                 316 src/ai/default/ca_move_to_targets.cpp 		double max_rating = rate_target(*tg, u, dstsrc, enemy_dstsrc, dummy_route);</span>
<span class='curline'><a href='../S/237.html#L323'>u</a>                 323 src/ai/default/ca_move_to_targets.cpp 	const move_cost_calculator cost_calc(*u, map_, units_, enemy_dstsrc);</span>
<span class='curline'><a href='../S/237.html#L345'>u</a>                 345 src/ai/default/ca_move_to_targets.cpp 		const pathfind::teleport_map allowed_teleports = pathfind::get_teleport_locations(*u, current_team());</span>
<span class='curline'><a href='../S/237.html#L346'>u</a>                 346 src/ai/default/ca_move_to_targets.cpp 		pathfind::plain_route real_route = a_star_search(u-&gt;get_location(), tg.loc, locStopValue, cost_calc, map_.w(), map_.h(), &amp;allowed_teleports);</span>
<span class='curline'><a href='../S/237.html#L353'>u</a>                 353 src/ai/default/ca_move_to_targets.cpp 		double real_rating = rate_target(tg, u, dstsrc, enemy_dstsrc, real_route);</span>
<span class='curline'><a href='../S/237.html#L361'>u</a>                 361 src/ai/default/ca_move_to_targets.cpp 			best = u;</span>
<span class='curline'><a href='../S/237.html#L378'>u</a>                 378 src/ai/default/ca_move_to_targets.cpp 		LOG_AI &lt;&lt; "no eligible targets found for unit at " &lt;&lt; u-&gt;get_location() &lt;&lt; std::endl;</span>
<span class='curline'><a href='../S/237.html#L379'>u</a>                 379 src/ai/default/ca_move_to_targets.cpp 		return std::make_pair(u-&gt;get_location(), u-&gt;get_location());</span>
<span class='curline'><a href='../S/237.html#L393'>u</a>                 393 src/ai/default/ca_move_to_targets.cpp 		for(++u; u != units_.end(); ++u) {</span>
<span class='curline'><a href='../S/237.html#L394'>u</a>                 394 src/ai/default/ca_move_to_targets.cpp 			if (u-&gt;side() != get_side() || (u-&gt;can_recruit() &amp;&amp; !get_leader_ignores_keep()) ||</span>
<span class='curline'><a href='../S/237.html#L395'>u</a>                 395 src/ai/default/ca_move_to_targets.cpp 			    u-&gt;movement_left() &lt;= 0 || u-&gt;get_state("guardian") ||</span>
<span class='curline'><a href='../S/237.html#L396'>u</a>                 396 src/ai/default/ca_move_to_targets.cpp 			    u-&gt;incapacitated())</span>
<span class='curline'><a href='../S/237.html#L403'>u</a>                 403 src/ai/default/ca_move_to_targets.cpp 			const move_cost_calculator calc(*u, map_, units_, enemy_dstsrc);</span>
<span class='curline'><a href='../S/237.html#L412'>u</a>                 412 src/ai/default/ca_move_to_targets.cpp 			const pathfind::teleport_map allowed_teleports = pathfind::get_teleport_locations(*u, current_team());</span>
<span class='curline'><a href='../S/237.html#L413'>u</a>                 413 src/ai/default/ca_move_to_targets.cpp 			pathfind::plain_route cur_route = pathfind::a_star_search(u-&gt;get_location(), best_target-&gt;loc, locStopValue, calc, map_.w(), map_.h(), &amp;allowed_teleports);</span>
<span class='curline'><a href='../S/237.html#L419'>u</a>                 419 src/ai/default/ca_move_to_targets.cpp 			double rating = rate_target(*best_target, u, dstsrc, enemy_dstsrc, cur_route);</span>
<span class='curline'><a href='../S/237.html#L423'>u</a>                 423 src/ai/default/ca_move_to_targets.cpp 				best = u;</span>
<span class='curline'><a href='../S/237.html#L430'>u</a>                 430 src/ai/default/ca_move_to_targets.cpp 		u = units_.end();</span>
<span class='curline'><a href='../S/237.html#L630'>u</a>                 630 src/ai/default/ca_move_to_targets.cpp void move_to_targets_phase::access_points(const move_map&amp; srcdst, const map_location&amp; u, const map_location&amp; dst, std::vector&lt;map_location&gt;&amp; out)</span>
<span class='curline'><a href='../S/237.html#L634'>u</a>                 634 src/ai/default/ca_move_to_targets.cpp 	const unit_map::const_iterator u_it = units_.find(u);</span>
<span class='curline'><a href='../S/237.html#L641'>u</a>                 641 src/ai/default/ca_move_to_targets.cpp 	const std::pair&lt;move_map::const_iterator,move_map::const_iterator&gt; locs = srcdst.equal_range(u);</span>
<span class='curline'><a href='../S/237.html#L831'>u</a>                 831 src/ai/default/ca_move_to_targets.cpp 		const unit_map::const_iterator u = units_.find(*i);</span>
<span class='curline'><a href='../S/237.html#L832'>u</a>                 832 src/ai/default/ca_move_to_targets.cpp 		if(u == units_.end()) {</span>
<span class='curline'><a href='../S/237.html#L836'>u</a>                 836 src/ai/default/ca_move_to_targets.cpp 		const unit &amp;un = *u;</span>
<span class='curline'><a href='../S/249.html#L54'>u</a>                  54 src/ai/default/ca_move_to_targets.hpp 	void access_points(const move_map&amp; srcdst, const map_location&amp; u, const map_location&amp; dst, std::vector&lt;map_location&gt;&amp; out);</span>
<span class='curline'><a href='../S/249.html#L72'>u</a>                  72 src/ai/default/ca_move_to_targets.hpp 	double rate_target(const target&amp; tg, const unit_map::iterator&amp; u,</span>
<span class='curline'><a href='../S/246.html#L80'>u</a>                  80 src/ai/default/contexts.cpp 			const unit_map::const_iterator u = units_.find(adj[n]);</span>
<span class='curline'><a href='../S/246.html#L82'>u</a>                  82 src/ai/default/contexts.cpp 			if (u == units_.end()</span>
<span class='curline'><a href='../S/246.html#L83'>u</a>                  83 src/ai/default/contexts.cpp 				|| (current_team().is_enemy(u-&gt;side())</span>
<span class='curline'><a href='../S/246.html#L84'>u</a>                  84 src/ai/default/contexts.cpp 					&amp;&amp; u-&gt;invisible(adj[n], *resources::gameboard))</span>
<span class='curline'><a href='../S/246.html#L85'>u</a>                  85 src/ai/default/contexts.cpp 				|| ((&amp;resources::gameboard-&gt;get_team(u-&gt;side()) == &amp;current_team())</span>
<span class='curline'><a href='../S/246.html#L86'>u</a>                  86 src/ai/default/contexts.cpp 					&amp;&amp; u-&gt;movement_left() &gt; 0)) {</span>
<span class='curline'><a href='../S/246.html#L100'>u</a>                 100 src/ai/default/contexts.cpp int default_ai_context_impl::rate_terrain(const unit&amp; u, const map_location&amp; loc) const</span>
<span class='curline'><a href='../S/246.html#L104'>u</a>                 104 src/ai/default/contexts.cpp 	const int defense = u.defense_modifier(terrain);</span>
<span class='curline'><a href='../S/246.html#L112'>u</a>                 112 src/ai/default/contexts.cpp 	if(map_.gives_healing(terrain) &amp;&amp; u.get_ability_bool("regenerate", loc, *resources::gameboard) == false) {</span>
<span class='curline'><a href='../S/246.html#L226'>u</a>                 226 src/ai/default/contexts.cpp 	unit_map::const_iterator u;</span>
<span class='curline'><a href='../S/246.html#L228'>u</a>                 228 src/ai/default/contexts.cpp 		for(u = units_.begin(); u != units_.end(); ++u) {</span>
<span class='curline'><a href='../S/246.html#L230'>u</a>                 230 src/ai/default/contexts.cpp 			if (u-&gt;can_recruit() &amp;&amp; current_team().is_enemy(u-&gt;side())</span>
<span class='curline'><a href='../S/246.html#L231'>u</a>                 231 src/ai/default/contexts.cpp 			    &amp;&amp; !u-&gt;invisible(u-&gt;get_location(), *resources::gameboard)) {</span>
<span class='curline'><a href='../S/246.html#L232'>u</a>                 232 src/ai/default/contexts.cpp 				assert(map_.on_board(u-&gt;get_location()));</span>
<span class='curline'><a href='../S/246.html#L233'>u</a>                 233 src/ai/default/contexts.cpp 				LOG_AI &lt;&lt; "found enemy leader (side: " &lt;&lt; u-&gt;side() &lt;&lt; ") target... " &lt;&lt; u-&gt;get_location() &lt;&lt; " with value: " &lt;&lt; get_leader_value() &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/246.html#L234'>u</a>                 234 src/ai/default/contexts.cpp 				targets.emplace_back(u-&gt;get_location(), get_leader_value(), target::TYPE::LEADER);</span>
<span class='curline'><a href='../S/243.html#L174'>u</a>                 174 src/ai/default/contexts.hpp 	virtual int rate_terrain(const unit&amp; u, const map_location&amp; loc) const = 0;</span>
<span class='curline'><a href='../S/243.html#L235'>u</a>                 235 src/ai/default/contexts.hpp 	virtual int rate_terrain(const unit&amp; u, const map_location&amp; loc) const</span>
<span class='curline'><a href='../S/243.html#L237'>u</a>                 237 src/ai/default/contexts.hpp 		return target_-&gt;rate_terrain(u,loc);</span>
<span class='curline'><a href='../S/243.html#L288'>u</a>                 288 src/ai/default/contexts.hpp 	virtual int rate_terrain(const unit&amp; u, const map_location&amp; loc) const;</span>
<span class='curline'><a href='../S/256.html#L471'>u</a>                 471 src/ai/formula/ai.cpp 		for(const unit &amp;u : units) {</span>
<span class='curline'><a href='../S/256.html#L472'>u</a>                 472 src/ai/formula/ai.cpp 			tmp[u.side() - 1].emplace_back(std::make_shared&lt;unit_callable&gt;(u));</span>
<span class='curline'><a href='../S/253.html#L182'>u</a>                 182 src/ai/formula/function_table.cpp 	void find_movemap(const unit_adapter&amp; u, const map_location&amp; loc,</span>
<span class='curline'><a href='../S/253.html#L220'>u</a>                 220 src/ai/formula/function_table.cpp 				const int move_cost = u.movement_cost(map[locs[i]]);</span>
<span class='curline'><a href='../S/253.html#L574'>u</a>                 574 src/ai/formula/function_table.cpp 		variant u = args()[0]-&gt;evaluate(variables,add_debug_info(fdb,0,"timeofday_modifier:unit"));</span>
<span class='curline'><a href='../S/253.html#L576'>u</a>                 576 src/ai/formula/function_table.cpp 		if( u.is_null() ) {</span>
<span class='curline'><a href='../S/253.html#L580'>u</a>                 580 src/ai/formula/function_table.cpp 		auto u_call = u.try_convert&lt;unit_callable&gt;();</span>
<span class='curline'><a href='../S/253.html#L651'>u</a>                 651 src/ai/formula/function_table.cpp 		const unit_map::const_iterator u = units.find(loc);</span>
<span class='curline'><a href='../S/253.html#L652'>u</a>                 652 src/ai/formula/function_table.cpp 		if (u == units.end()){</span>
<span class='curline'><a href='../S/253.html#L655'>u</a>                 655 src/ai/formula/function_table.cpp 		const pathfind::paths unit_paths(*u, false, true, ai_.current_team());</span>
<span class='curline'><a href='../S/253.html#L1358'>u</a>                1358 src/ai/formula/function_table.cpp 		variant u = args()[0]-&gt;evaluate(variables,add_debug_info(fdb,0,"defense_on:unit"));</span>
<span class='curline'><a href='../S/253.html#L1360'>u</a>                1360 src/ai/formula/function_table.cpp 		if(u.is_null() || loc_var.is_null()) {</span>
<span class='curline'><a href='../S/253.html#L1364'>u</a>                1364 src/ai/formula/function_table.cpp 		auto u_call = u.try_convert&lt;unit_callable&gt;();</span>
<span class='curline'><a href='../S/253.html#L1365'>u</a>                1365 src/ai/formula/function_table.cpp 		auto u_type = u.try_convert&lt;unit_type_callable&gt;();</span>
<span class='curline'><a href='../S/253.html#L1408'>u</a>                1408 src/ai/formula/function_table.cpp 		variant u = args()[0]-&gt;evaluate(variables,add_debug_info(fdb,0,"chance_to_hit:unit"));</span>
<span class='curline'><a href='../S/253.html#L1410'>u</a>                1410 src/ai/formula/function_table.cpp 		if(u.is_null() || loc_var.is_null()) {</span>
<span class='curline'><a href='../S/253.html#L1414'>u</a>                1414 src/ai/formula/function_table.cpp 		auto u_call = u.try_convert&lt;unit_callable&gt;();</span>
<span class='curline'><a href='../S/253.html#L1415'>u</a>                1415 src/ai/formula/function_table.cpp 		auto u_type = u.try_convert&lt;unit_type_callable&gt;();</span>
<span class='curline'><a href='../S/253.html#L1452'>u</a>                1452 src/ai/formula/function_table.cpp 		variant u = args()[0]-&gt;evaluate(variables,add_debug_info(fdb,0,"movement_cost:unit"));</span>
<span class='curline'><a href='../S/253.html#L1454'>u</a>                1454 src/ai/formula/function_table.cpp 		if(u.is_null() || loc_var.is_null()) {</span>
<span class='curline'><a href='../S/253.html#L1458'>u</a>                1458 src/ai/formula/function_table.cpp 		auto u_call = u.try_convert&lt;unit_callable&gt;();</span>
<span class='curline'><a href='../S/253.html#L1459'>u</a>                1459 src/ai/formula/function_table.cpp 		auto u_type = u.try_convert&lt;unit_type_callable&gt;();</span>
<span class='curline'><a href='../S/293.html#L832'>u</a>                 832 src/ai/lua/core.cpp 		for(unit_map::const_iterator u = resources::gameboard-&gt;units().begin(); u != resources::gameboard-&gt;units().end(); ++u) {</span>
<span class='curline'><a href='../S/293.html#L833'>u</a>                 833 src/ai/lua/core.cpp 			if(!u.valid()) {</span>
<span class='curline'><a href='../S/293.html#L836'>u</a>                 836 src/ai/lua/core.cpp 			if(u-&gt;side() == my_side &amp;&amp; real_aspect-&gt;is_allowed_attacker(*u)) {</span>
<span class='curline'><a href='../S/293.html#L837'>u</a>                 837 src/ai/lua/core.cpp 				attackers.push_back(u.get_shared_ptr());</span>
<span class='curline'><a href='../S/293.html#L838'>u</a>                 838 src/ai/lua/core.cpp 			} else if(u-&gt;side() != my_side &amp;&amp; real_aspect-&gt;is_allowed_enemy(*u)) {</span>
<span class='curline'><a href='../S/293.html#L839'>u</a>                 839 src/ai/lua/core.cpp 				enemies.push_back(u.get_shared_ptr());</span>
<span class='curline'><a href='../S/293.html#L861'>u</a>                 861 src/ai/lua/core.cpp 		for (unit_map::const_iterator u = resources::gameboard-&gt;units().begin(); u != resources::gameboard-&gt;units().end(); ++u) {</span>
<span class='curline'><a href='../S/293.html#L862'>u</a>                 862 src/ai/lua/core.cpp 			if (!u.valid() || u-&gt;side() != my_side) {</span>
<span class='curline'><a href='../S/293.html#L865'>u</a>                 865 src/ai/lua/core.cpp 			lua_pushinteger(L, lhash(u-&gt;get_location()));</span>
<span class='curline'><a href='../S/293.html#L866'>u</a>                 866 src/ai/lua/core.cpp 			lua_push(L, val.get_advancements(u));</span>
<span class='curline'><a href='../S/232.html#L43'>u</a>                  43 src/ai/simulated_actions.cpp void helper_place_unit(const unit&amp; u, const map_location&amp; loc);</span>
<span class='curline'><a href='../S/232.html#L138'>u</a>                 138 src/ai/simulated_actions.cpp bool simulated_recruit(int side, const unit_type* u, const map_location&amp; recruit_location){</span>
<span class='curline'><a href='../S/232.html#L141'>u</a>                 141 src/ai/simulated_actions.cpp 	const unit recruit_unit(*u, side, false);	// Random traits, name and gender are not needed. This will cause "duplicate id conflicts" inside unit_map::insert(), but engine will manage this issue correctly.</span>
<span class='curline'><a href='../S/232.html#L144'>u</a>                 144 src/ai/simulated_actions.cpp 	resources::gameboard-&gt;get_team(side).spend_gold(u-&gt;cost());</span>
<span class='curline'><a href='../S/232.html#L146'>u</a>                 146 src/ai/simulated_actions.cpp 	LOG_AI_SIM_ACTIONS &lt;&lt; "recruit " &lt;&lt; u-&gt;type_name() &lt;&lt; " at "</span>
<span class='curline'><a href='../S/232.html#L147'>u</a>                 147 src/ai/simulated_actions.cpp 		&lt;&lt; recruit_location &lt;&lt; " spend " &lt;&lt; u-&gt;cost() &lt;&lt; " gold" &lt;&lt; std::endl;</span>
<span class='curline'><a href='../S/232.html#L211'>u</a>                 211 src/ai/simulated_actions.cpp void helper_place_unit(const unit&amp; u, const map_location&amp; loc){</span>
<span class='curline'><a href='../S/232.html#L212'>u</a>                 212 src/ai/simulated_actions.cpp 	unit_ptr new_unit(new unit(u));</span>
<span class='curline'><a href='../S/230.html#L36'>u</a>                  36 src/ai/simulated_actions.hpp bool simulated_recruit(int side, const unit_type* u, const map_location&amp; recruit_location);</span>
<span class='curline'><a href='../S/1221.html#L1639'>u</a>                1639 src/attack_prediction.cpp combatant::combatant(const battle_context_unit_stats&amp; u, const combatant* prev)</span>
<span class='curline'><a href='../S/1221.html#L1640'>u</a>                1640 src/attack_prediction.cpp 	: hp_dist(u.max_hp + 1, 0.0)</span>
<span class='curline'><a href='../S/1221.html#L1644'>u</a>                1644 src/attack_prediction.cpp 	, u_(u)</span>
<span class='curline'><a href='../S/1221.html#L1655'>u</a>                1655 src/attack_prediction.cpp 		hp_dist[std::min(u.hp, u.max_hp)] = 1.0;</span>
<span class='curline'><a href='../S/1221.html#L1657'>u</a>                1657 src/attack_prediction.cpp 		poisoned = u.is_poisoned ? 1.0 : 0.0;</span>
<span class='curline'><a href='../S/1221.html#L1658'>u</a>                1658 src/attack_prediction.cpp 		slowed = u.is_slowed ? 1.0 : 0.0;</span>
<span class='curline'><a href='../S/1221.html#L1662'>u</a>                1662 src/attack_prediction.cpp 		if(u.is_slowed) {</span>
<span class='curline'><a href='../S/1221.html#L1663'>u</a>                1663 src/attack_prediction.cpp 			summary[0].resize(u.max_hp + 1, 0.0);</span>
<span class='curline'><a href='../S/1221.html#L1670'>u</a>                1670 src/attack_prediction.cpp combatant::combatant(const combatant&amp; that, const battle_context_unit_stats&amp; u)</span>
<span class='curline'><a href='../S/1221.html#L1675'>u</a>                1675 src/attack_prediction.cpp 	, u_(u)</span>
<span class='curline'><a href='../S/1221.html#L2532'>u</a>                2532 src/attack_prediction.cpp 	struct combatant* u[NUM_UNITS];</span>
<span class='curline'><a href='../S/1221.html#L2552'>u</a>                2552 src/attack_prediction.cpp 		u[i] = new combatant(*stats[i]);</span>
<span class='curline'><a href='../S/1221.html#L2575'>u</a>                2575 src/attack_prediction.cpp 				u[j]-&gt;fight(*u[i]);</span>
<span class='curline'><a href='../S/1221.html#L2576'>u</a>                2576 src/attack_prediction.cpp 				u[k]-&gt;fight(*u[i]);</span>
<span class='curline'><a href='../S/1221.html#L2578'>u</a>                2578 src/attack_prediction.cpp 				u[i]-&gt;print("Defender", battle, i + 1);</span>
<span class='curline'><a href='../S/1221.html#L2579'>u</a>                2579 src/attack_prediction.cpp 				u[j]-&gt;print("Attacker #1", battle, j + 1);</span>
<span class='curline'><a href='../S/1221.html#L2580'>u</a>                2580 src/attack_prediction.cpp 				u[k]-&gt;print("Attacker #2", battle, k + 1);</span>
<span class='curline'><a href='../S/1221.html#L2582'>u</a>                2582 src/attack_prediction.cpp 				u[i]-&gt;reset();</span>
<span class='curline'><a href='../S/1221.html#L2583'>u</a>                2583 src/attack_prediction.cpp 				u[j]-&gt;reset();</span>
<span class='curline'><a href='../S/1221.html#L2584'>u</a>                2584 src/attack_prediction.cpp 				u[k]-&gt;reset();</span>
<span class='curline'><a href='../S/1221.html#L2603'>u</a>                2603 src/attack_prediction.cpp 		delete u[i];</span>
<span class='curline'><a href='../S/983.html#L30'>u</a>                  30 src/attack_prediction.hpp 	combatant(const battle_context_unit_stats &amp;u, const combatant *prev = nullptr);</span>
<span class='curline'><a href='../S/983.html#L33'>u</a>                  33 src/attack_prediction.hpp 	combatant(const combatant &amp;that, const battle_context_unit_stats &amp;u);</span>
<span class='curline'><a href='../S/1024.html#L32'>u</a>                  32 src/carryover.cpp 	for(const config&amp; u : side.child_range("unit")) {</span>
<span class='curline'><a href='../S/1024.html#L33'>u</a>                  33 src/carryover.cpp 		recall_list_.push_back(u);</span>
<span class='curline'><a href='../S/1024.html#L48'>u</a>                  48 src/carryover.cpp 	for(const unit_const_ptr &amp; u : t.recall_list()) {</span>
<span class='curline'><a href='../S/1024.html#L50'>u</a>                  50 src/carryover.cpp 		u-&gt;write(recall_list_.back());</span>
<span class='curline'><a href='../S/83.html#L262'>u</a>                 262 src/config_attribute_value.cpp 	T operator()(unsigned long long u) const { return static_cast&lt;T&gt;(u); }</span>
<span class='curline'><a href='../S/83.html#L314'>u</a>                 314 src/config_attribute_value.cpp 	std::string operator()(unsigned long long u) const { return lexical_cast&lt;std::string&gt;(u); }</span>
<span class='curline'><a href='../S/1031.html#L172'>u</a>                 172 src/desktop/version.cpp 	utsname u;</span>
<span class='curline'><a href='../S/1031.html#L174'>u</a>                 174 src/desktop/version.cpp 	if(uname(&amp;u) != 0) {</span>
<span class='curline'><a href='../S/1031.html#L178'>u</a>                 178 src/desktop/version.cpp 	return formatter() &lt;&lt; u.sysname &lt;&lt; ' '</span>
<span class='curline'><a href='../S/1031.html#L179'>u</a>                 179 src/desktop/version.cpp 						&lt;&lt; u.release &lt;&lt; ' '</span>
<span class='curline'><a href='../S/1031.html#L180'>u</a>                 180 src/desktop/version.cpp 						&lt;&lt; u.version &lt;&lt; ' '</span>
<span class='curline'><a href='../S/1031.html#L181'>u</a>                 181 src/desktop/version.cpp 						&lt;&lt; u.machine;</span>
<span class='curline'><a href='../S/683.html#L1822'>u</a>                1822 src/display.cpp 	for(const auto&amp; u : dc_-&gt;units()) {</span>
<span class='curline'><a href='../S/683.html#L1823'>u</a>                1823 src/display.cpp 		if (fogged(u.get_location()) ||</span>
<span class='curline'><a href='../S/683.html#L1824'>u</a>                1824 src/display.cpp 		    (dc_-&gt;teams()[currentTeam_].is_enemy(u.side()) &amp;&amp;</span>
<span class='curline'><a href='../S/683.html#L1825'>u</a>                1825 src/display.cpp 		     u.invisible(u.get_location(), *dc_)) ||</span>
<span class='curline'><a href='../S/683.html#L1826'>u</a>                1826 src/display.cpp 			 u.get_hidden()) {</span>
<span class='curline'><a href='../S/683.html#L1830'>u</a>                1830 src/display.cpp 		int side = u.side();</span>
<span class='curline'><a href='../S/683.html#L1841'>u</a>                1841 src/display.cpp 					if (u.movement_left() == u.total_movement())</span>
<span class='curline'><a href='../S/683.html#L1843'>u</a>                1843 src/display.cpp 					else if (u.movement_left() == 0)</span>
<span class='curline'><a href='../S/683.html#L1853'>u</a>                1853 src/display.cpp 		double u_x = u.get_location().x * xscaling;</span>
<span class='curline'><a href='../S/683.html#L1854'>u</a>                1854 src/display.cpp 		double u_y = (u.get_location().y + (is_odd(u.get_location().x) ? 1 : -1)/4.0) * yscaling;</span>
<span class='curline'><a href='../S/683.html#L3050'>u</a>                3050 src/display.cpp 	for (const unit &amp; u : dc_-&gt;units()) {</span>
<span class='curline'><a href='../S/683.html#L3051'>u</a>                3051 src/display.cpp 		u.anim_comp().refresh();</span>
<span class='curline'><a href='../S/683.html#L3053'>u</a>                3053 src/display.cpp 	for (const unit* u : *fake_unit_man_) {</span>
<span class='curline'><a href='../S/683.html#L3054'>u</a>                3054 src/display.cpp 		u-&gt;anim_comp().refresh();</span>
<span class='curline'><a href='../S/683.html#L3058'>u</a>                3058 src/display.cpp 	for (const unit &amp; u : dc_-&gt;units()) {</span>
<span class='curline'><a href='../S/683.html#L3059'>u</a>                3059 src/display.cpp 		open_mp_list.push_back(&amp;u);</span>
<span class='curline'><a href='../S/683.html#L3065'>u</a>                3065 src/display.cpp 	for (const unit* u : *fake_unit_man_) {</span>
<span class='curline'><a href='../S/683.html#L3066'>u</a>                3066 src/display.cpp 		open_mp_list.push_back(u);</span>
<span class='curline'><a href='../S/683.html#L3087'>u</a>                3087 src/display.cpp 		for (const unit &amp; u : dc_-&gt;units()) {</span>
<span class='curline'><a href='../S/683.html#L3088'>u</a>                3088 src/display.cpp 			new_inval |=  u.anim_comp().invalidate(*this);</span>
<span class='curline'><a href='../S/683.html#L3090'>u</a>                3090 src/display.cpp 		for (const unit* u : *fake_unit_man_) {</span>
<span class='curline'><a href='../S/683.html#L3091'>u</a>                3091 src/display.cpp 			new_inval |=  u-&gt;anim_comp().invalidate(*this);</span>
<span class='curline'><a href='../S/931.html#L42'>u</a>                  42 src/display_context.cpp 		const unit &amp; u = *u_it;</span>
<span class='curline'><a href='../S/931.html#L43'>u</a>                  43 src/display_context.cpp 		if (get_team(side_num).is_enemy(u.side()) &amp;&amp; !u.incapacitated()) {</span>
<span class='curline'><a href='../S/931.html#L49'>u</a>                  49 src/display_context.cpp 			&amp;&amp; !u.invisible(u_loc, *this, true)) {</span>
<span class='curline'><a href='../S/931.html#L60'>u</a>                  60 src/display_context.cpp 	const unit_map::const_iterator u = units().find(loc);</span>
<span class='curline'><a href='../S/931.html#L61'>u</a>                  61 src/display_context.cpp 	if (!u.valid() || !u-&gt;is_visible_to_team(current_team, *this, see_all)) {</span>
<span class='curline'><a href='../S/931.html#L64'>u</a>                  64 src/display_context.cpp 	return &amp;*u;</span>
<span class='curline'><a href='../S/931.html#L72'>u</a>                  72 src/display_context.cpp bool display_context::unit_can_move(const unit &amp;u) const</span>
<span class='curline'><a href='../S/931.html#L74'>u</a>                  74 src/display_context.cpp 	if(!u.attacks_left() &amp;&amp; u.movement_left()==0)</span>
<span class='curline'><a href='../S/931.html#L79'>u</a>                  79 src/display_context.cpp 	if(u.has_moved() &amp;&amp; u.has_goto()) {</span>
<span class='curline'><a href='../S/931.html#L83'>u</a>                  83 src/display_context.cpp 	const team &amp;current_team = get_team(u.side());</span>
<span class='curline'><a href='../S/931.html#L86'>u</a>                  86 src/display_context.cpp 	get_adjacent_tiles(u.get_location(), locs);</span>
<span class='curline'><a href='../S/931.html#L95'>u</a>                  95 src/display_context.cpp 			if (u.movement_cost(map()[locs[n]]) &lt;= u.movement_left()) {</span>
<span class='curline'><a href='../S/931.html#L137'>u</a>                 137 src/display_context.cpp 	for (const unit &amp;u : units()) {</span>
<span class='curline'><a href='../S/931.html#L138'>u</a>                 138 src/display_context.cpp 		if (u.side() == side) ++res;</span>
<span class='curline'><a href='../S/931.html#L146'>u</a>                 146 src/display_context.cpp 	for (const unit &amp;u : units()) {</span>
<span class='curline'><a href='../S/931.html#L147'>u</a>                 147 src/display_context.cpp 		if (u.side() == side) res += u.cost();</span>
<span class='curline'><a href='../S/931.html#L155'>u</a>                 155 src/display_context.cpp 	for (const unit &amp;u : units()) {</span>
<span class='curline'><a href='../S/931.html#L156'>u</a>                 156 src/display_context.cpp 		if (u.side() == side) res += u.upkeep();</span>
<span class='curline'><a href='../S/847.html#L82'>u</a>                  82 src/display_context.hpp 	bool unit_can_move(const unit &amp; u) const;</span>
<span class='curline'><a href='../S/40.html#L101'>u</a>                 101 src/editor/action/action_unit.cpp 	unit&amp; u = *units.find(new_loc_);</span>
<span class='curline'><a href='../S/40.html#L103'>u</a>                 103 src/editor/action/action_unit.cpp 	u.anim_comp().set_standing();</span>
<span class='curline'><a href='../S/62.html#L42'>u</a>                  42 src/editor/action/action_unit.hpp 				const unit&amp; u)</span>
<span class='curline'><a href='../S/62.html#L43'>u</a>                  43 src/editor/action/action_unit.hpp 		: editor_action_location(loc), u_(u)</span>
<span class='curline'><a href='../S/50.html#L232'>u</a>                 232 src/editor/action/mouse/mouse_action_item.cpp void mouse_action_item::set_item_mouse_overlay(editor_display&amp; disp, const overlay&amp; u)</span>
<span class='curline'><a href='../S/50.html#L236'>u</a>                 236 src/editor/action/mouse/mouse_action_item.cpp 	filename &lt;&lt; u.image; // &lt;&lt; "~RC(" &lt;&lt; u.flag_rgb() &lt;&lt; '&gt;'</span>
<span class='curline'><a href='../S/46.html#L67'>u</a>                  67 src/editor/action/mouse/mouse_action_item.hpp 	void set_item_mouse_overlay(editor_display&amp; disp, const overlay&amp; u);</span>
<span class='curline'><a href='../S/48.html#L229'>u</a>                 229 src/editor/action/mouse/mouse_action_unit.cpp 	const unit_type&amp; u = unit_palette_.selected_fg_item();</span>
<span class='curline'><a href='../S/48.html#L230'>u</a>                 230 src/editor/action/mouse/mouse_action_unit.cpp 	set_unit_mouse_overlay(disp, u);</span>
<span class='curline'><a href='../S/48.html#L233'>u</a>                 233 src/editor/action/mouse/mouse_action_unit.cpp void mouse_action_unit::set_unit_mouse_overlay(editor_display&amp; disp, const unit_type&amp; u)</span>
<span class='curline'><a href='../S/48.html#L237'>u</a>                 237 src/editor/action/mouse/mouse_action_unit.cpp 	filename &lt;&lt; u.image() &lt;&lt; "~RC(" &lt;&lt; u.flag_rgb() &lt;&lt; '&gt;'</span>
<span class='curline'><a href='../S/41.html#L67'>u</a>                  67 src/editor/action/mouse/mouse_action_unit.hpp 	void set_unit_mouse_overlay(editor_display&amp; disp, const unit_type&amp; u);</span>
<span class='curline'><a href='../S/21.html#L36'>u</a>                  36 src/editor/editor_display.cpp 	unit_map u;</span>
<span class='curline'><a href='../S/21.html#L41'>u</a>                  41 src/editor/editor_display.cpp 	dummy_editor_display_context() : dummy_cfg1(), em(dummy_cfg1), u(), t(), lbls() {}</span>
<span class='curline'><a href='../S/21.html#L45'>u</a>                  45 src/editor/editor_display.cpp 	virtual const unit_map &amp; units() const { return u; }</span>
<span class='curline'><a href='../S/70.html#L515'>u</a>                 515 src/editor/map/map_context.cpp 				config&amp; u = side.add_child("unit");</span>
<span class='curline'><a href='../S/70.html#L516'>u</a>                 516 src/editor/map/map_context.cpp 				i-&gt;get_location().write(u);</span>
<span class='curline'><a href='../S/70.html#L517'>u</a>                 517 src/editor/map/map_context.cpp 				u["type"] = i-&gt;type_id();</span>
<span class='curline'><a href='../S/70.html#L518'>u</a>                 518 src/editor/map/map_context.cpp 				u["canrecruit"] = i-&gt;can_recruit();</span>
<span class='curline'><a href='../S/70.html#L519'>u</a>                 519 src/editor/map/map_context.cpp 				u["unrenamable"] = i-&gt;unrenamable();</span>
<span class='curline'><a href='../S/70.html#L522'>u</a>                 522 src/editor/map/map_context.cpp 					u["id"] = i-&gt;id();</span>
<span class='curline'><a href='../S/70.html#L524'>u</a>                 524 src/editor/map/map_context.cpp 				u["name"] = i-&gt;name();</span>
<span class='curline'><a href='../S/70.html#L525'>u</a>                 525 src/editor/map/map_context.cpp 				u["extra_recruit"] = utils::join(i-&gt;recruits());</span>
<span class='curline'><a href='../S/70.html#L526'>u</a>                 526 src/editor/map/map_context.cpp 				u["facing"] = map_location::write_direction(i-&gt;facing());</span>
<span class='curline'><a href='../S/22.html#L83'>u</a>                  83 src/editor/palette/unit_palette.cpp void unit_palette::draw_item(const unit_type&amp; u, surface&amp; image, std::stringstream&amp; tooltip_text) {</span>
<span class='curline'><a href='../S/22.html#L86'>u</a>                  86 src/editor/palette/unit_palette.cpp 	filename &lt;&lt; u.image() &lt;&lt; "~RC(" &lt;&lt; u.flag_rgb() &lt;&lt; '&gt;'</span>
<span class='curline'><a href='../S/22.html#L104'>u</a>                 104 src/editor/palette/unit_palette.cpp 	tooltip_text &lt;&lt; u.type_name();</span>
<span class='curline'><a href='../S/22.html#L115'>u</a>                 115 src/editor/palette/unit_palette.cpp const std::string&amp; unit_palette::get_id(const unit_type&amp; u)</span>
<span class='curline'><a href='../S/22.html#L117'>u</a>                 117 src/editor/palette/unit_palette.cpp 	return u.id();</span>
<span class='curline'><a href='../S/2.html#L31'>u</a>                  31 src/fake_unit_manager.cpp void fake_unit_manager::place_temporary_unit(internal_ptr_type u)</span>
<span class='curline'><a href='../S/2.html#L33'>u</a>                  33 src/fake_unit_manager.cpp 	if(std::find(fake_units_.begin(),fake_units_.end(), u) != fake_units_.end()) {</span>
<span class='curline'><a href='../S/2.html#L36'>u</a>                  36 src/fake_unit_manager.cpp 		fake_units_.push_back(u);</span>
<span class='curline'><a href='../S/2.html#L37'>u</a>                  37 src/fake_unit_manager.cpp 		my_display_.invalidate(u-&gt;get_location());</span>
<span class='curline'><a href='../S/2.html#L42'>u</a>                  42 src/fake_unit_manager.cpp int fake_unit_manager::remove_temporary_unit(internal_ptr_type u)</span>
<span class='curline'><a href='../S/2.html#L48'>u</a>                  48 src/fake_unit_manager.cpp 			std::remove(fake_units_.begin(), fake_units_.end(), u);</span>
<span class='curline'><a href='../S/2.html#L53'>u</a>                  53 src/fake_unit_manager.cpp 		my_display_.invalidate(u-&gt;get_location());</span>
<span class='curline'><a href='../S/2.html#L55'>u</a>                  55 src/fake_unit_manager.cpp 		u-&gt;anim_comp().clear_haloes();</span>
<span class='curline'><a href='../S/935.html#L24'>u</a>                  24 src/fake_unit_ptr.cpp fake_unit_ptr::fake_unit_ptr(const internal_ptr &amp; u) : unit_(u), my_manager_(nullptr) {}</span>
<span class='curline'><a href='../S/935.html#L25'>u</a>                  25 src/fake_unit_ptr.cpp fake_unit_ptr::fake_unit_ptr(const internal_ptr &amp; u, fake_unit_manager * mgr) : unit_(u), my_manager_(nullptr)</span>
<span class='curline'><a href='../S/735.html#L37'>u</a>                  37 src/fake_unit_ptr.hpp 	explicit fake_unit_ptr(const internal_ptr &amp; u); //!&lt; Construct a fake unit pointer wrapping a normal unit pointer, marking it as a fake unit.</span>
<span class='curline'><a href='../S/735.html#L38'>u</a>                  38 src/fake_unit_ptr.hpp 	fake_unit_ptr(const internal_ptr &amp; u, fake_unit_manager * mgr); //!&lt; Construct a fake unit pointer, and simultaenously register with a manager.</span>
<span class='curline'><a href='../S/1144.html#L345'>u</a>                 345 src/font/sdl_ttf.cpp 		text_surface const &amp;u = text_cache::find(text_surface(text, size, color, style));</span>
<span class='curline'><a href='../S/1144.html#L346'>u</a>                 346 src/font/sdl_ttf.cpp 		return sdl::create_rect(0, 0, u.width(), u.height());</span>
<span class='curline'><a href='../S/770.html#L104'>u</a>                 104 src/formula/callable_objects.hpp 	unit_callable(const map_location&amp; loc, const unit&amp; u) : loc_(loc), u_(u)</span>
<span class='curline'><a href='../S/770.html#L109'>u</a>                 109 src/formula/callable_objects.hpp 	explicit unit_callable(const unit &amp;u) : loc_(u.get_location()), u_(u)</span>
<span class='curline'><a href='../S/770.html#L130'>u</a>                 130 src/formula/callable_objects.hpp 	explicit unit_type_callable(const unit_type&amp; u) : u_(u)</span>
<span class='curline'><a href='../S/742.html#L178'>u</a>                 178 src/game_board.cpp 	unit_map::iterator u = units_.find(loc);</span>
<span class='curline'><a href='../S/742.html#L179'>u</a>                 179 src/game_board.cpp 	if (!u.valid() || !u-&gt;is_visible_to_team(current_team, *this, see_all))</span>
<span class='curline'><a href='../S/742.html#L181'>u</a>                 181 src/game_board.cpp 	return u;</span>
<span class='curline'><a href='../S/742.html#L187'>u</a>                 187 src/game_board.cpp 	unit_map::const_iterator u = units_.find(loc);</span>
<span class='curline'><a href='../S/742.html#L188'>u</a>                 188 src/game_board.cpp 	if (!u.valid() || !u-&gt;is_visible_to_team(current_team, *this, see_all))</span>
<span class='curline'><a href='../S/742.html#L240'>u</a>                 240 src/game_board.cpp 		for (const unit&amp; u : units_)</span>
<span class='curline'><a href='../S/742.html#L242'>u</a>                 242 src/game_board.cpp 			if(u.side() == t.side())</span>
<span class='curline'><a href='../S/742.html#L252'>u</a>                 252 src/game_board.cpp bool game_board::try_add_unit_to_recall_list(const map_location&amp;, const unit_ptr u)</span>
<span class='curline'><a href='../S/742.html#L254'>u</a>                 254 src/game_board.cpp 	teams_[u-&gt;side()-1].recall_list().add(u);</span>
<span class='curline'><a href='../S/742.html#L355'>u</a>                 355 src/game_board.cpp 				config&amp; u = side.add_child("unit");</span>
<span class='curline'><a href='../S/742.html#L356'>u</a>                 356 src/game_board.cpp 				i.get_location().write(u);</span>
<span class='curline'><a href='../S/742.html#L357'>u</a>                 357 src/game_board.cpp 				i.write(u);</span>
<span class='curline'><a href='../S/742.html#L362'>u</a>                 362 src/game_board.cpp 			config&amp; u = side.add_child("unit");</span>
<span class='curline'><a href='../S/742.html#L363'>u</a>                 363 src/game_board.cpp 			j-&gt;write(u);</span>
<span class='curline'><a href='../S/742.html#L371'>u</a>                 371 src/game_board.cpp temporary_unit_placer::temporary_unit_placer(unit_map&amp; m, const map_location&amp; loc, unit&amp; u)</span>
<span class='curline'><a href='../S/742.html#L374'>u</a>                 374 src/game_board.cpp 	u.clone();</span>
<span class='curline'><a href='../S/742.html#L375'>u</a>                 375 src/game_board.cpp 	m_.add(loc, u);</span>
<span class='curline'><a href='../S/742.html#L378'>u</a>                 378 src/game_board.cpp temporary_unit_placer::temporary_unit_placer(game_board&amp; b, const map_location&amp; loc, unit&amp; u)</span>
<span class='curline'><a href='../S/742.html#L381'>u</a>                 381 src/game_board.cpp 	u.clone();</span>
<span class='curline'><a href='../S/742.html#L382'>u</a>                 382 src/game_board.cpp 	m_.add(loc, u);</span>
<span class='curline'><a href='../S/140.html#L129'>u</a>                 129 src/game_board.hpp 	bool try_add_unit_to_recall_list(const map_location&amp; loc, const unit_ptr u);</span>
<span class='curline'><a href='../S/140.html#L162'>u</a>                 162 src/game_board.hpp 	temporary_unit_placer(unit_map&amp; m, const map_location&amp; loc, unit&amp; u);</span>
<span class='curline'><a href='../S/140.html#L163'>u</a>                 163 src/game_board.hpp 	temporary_unit_placer(game_board&amp; m, const map_location&amp; loc, unit&amp; u);</span>
<span class='curline'><a href='../S/832.html#L173'>u</a>                 173 src/game_display.cpp 	const unit *u = resources::gameboard-&gt;get_visible_unit(hex, dc_-&gt;teams()[viewing_team()], !dont_show_all_);</span>
<span class='curline'><a href='../S/832.html#L174'>u</a>                 174 src/game_display.cpp 	if (u) {</span>
<span class='curline'><a href='../S/832.html#L178'>u</a>                 178 src/game_display.cpp 		u = resources::gameboard-&gt;get_visible_unit(mouseoverHex_, dc_-&gt;teams()[viewing_team()], !dont_show_all_);</span>
<span class='curline'><a href='../S/832.html#L179'>u</a>                 179 src/game_display.cpp 		if (u) {</span>
<span class='curline'><a href='../S/832.html#L200'>u</a>                 200 src/game_display.cpp 	const unit *u = resources::gameboard-&gt;get_visible_unit(hex, dc_-&gt;teams()[viewing_team()], !dont_show_all_);</span>
<span class='curline'><a href='../S/832.html#L201'>u</a>                 201 src/game_display.cpp 	if (u) {</span>
<span class='curline'><a href='../S/832.html#L290'>u</a>                 290 src/game_display.cpp 		const unit *u = resources::gameboard-&gt;get_visible_unit(loc, dc_-&gt;teams()[viewing_team()] );</span>
<span class='curline'><a href='../S/832.html#L291'>u</a>                 291 src/game_display.cpp 		if( u != nullptr ) {</span>
<span class='curline'><a href='../S/832.html#L294'>u</a>                 294 src/game_display.cpp 		if(u == nullptr) {</span>
<span class='curline'><a href='../S/832.html#L299'>u</a>                 299 src/game_display.cpp 		} else if(dc_-&gt;teams()[currentTeam_].is_enemy(u-&gt;side())) {</span>
<span class='curline'><a href='../S/832.html#L304'>u</a>                 304 src/game_display.cpp 		} else if(dc_-&gt;teams()[currentTeam_].side() == u-&gt;side()) {</span>
<span class='curline'><a href='../S/832.html#L516'>u</a>                 516 src/game_display.cpp 	const unit_map::const_iterator u = dc_-&gt;units().find(route_.steps.front());</span>
<span class='curline'><a href='../S/832.html#L517'>u</a>                 517 src/game_display.cpp 	if(u != dc_-&gt;units().end()) {</span>
<span class='curline'><a href='../S/832.html#L518'>u</a>                 518 src/game_display.cpp 		move_cost = u-&gt;movement_cost(dc_-&gt;map().get_terrain(loc));</span>
<span class='curline'><a href='../S/1058.html#L395'>u</a>                 395 src/game_events/action_wml.cpp 		fake_unit_ptr u = create_fake_unit(config);</span>
<span class='curline'><a href='../S/1058.html#L396'>u</a>                 396 src/game_events/action_wml.cpp 		units.push_back(u);</span>
<span class='curline'><a href='../S/1058.html#L397'>u</a>                 397 src/game_events/action_wml.cpp 		paths.push_back(fake_unit_path(*u, xvals, yvals));</span>
<span class='curline'><a href='../S/1058.html#L403'>u</a>                 403 src/game_events/action_wml.cpp 		u-&gt;set_location(paths.back().front());</span>
<span class='curline'><a href='../S/1058.html#L404'>u</a>                 404 src/game_events/action_wml.cpp 		u.place_on_fake_unit_manager(resources::fake_units);</span>
<span class='curline'><a href='../S/1058.html#L462'>u</a>                 462 src/game_events/action_wml.cpp 		for(std::vector&lt;unit_ptr&gt;::iterator u = avail.begin(); u != avail.end(); ++u) {</span>
<span class='curline'><a href='../S/1058.html#L464'>u</a>                 464 src/game_events/action_wml.cpp 			scoped_recall_unit auto_store("this_unit", player_id, u - avail.begin());</span>
<span class='curline'><a href='../S/1058.html#L465'>u</a>                 465 src/game_events/action_wml.cpp 			if (ufilt(*(*u), map_location())) {</span>
<span class='curline'><a href='../S/1058.html#L466'>u</a>                 466 src/game_events/action_wml.cpp 				DBG_NG &lt;&lt; (*u)-&gt;id() &lt;&lt; " matched the filter...\n";</span>
<span class='curline'><a href='../S/1058.html#L467'>u</a>                 467 src/game_events/action_wml.cpp 				const unit_ptr to_recruit = *u;</span>
<span class='curline'><a href='../S/1058.html#L477'>u</a>                 477 src/game_events/action_wml.cpp 					     unit_filter(vconfig(leader-&gt;recall_filter()), resources::filter_con).matches( *(*u),map_location() ) ) {</span>
<span class='curline'><a href='../S/1058.html#L485'>u</a>                 485 src/game_events/action_wml.cpp 							avail.erase(u);	// Erase before recruiting, since recruiting can fire more events</span>
<span class='curline'><a href='../S/1058.html#L500'>u</a>                 500 src/game_events/action_wml.cpp 						avail.erase(u);	// Erase before recruiting, since recruiting can fire more events</span>
<span class='curline'><a href='../S/1055.html#L56'>u</a>                  56 src/game_events/entity_location.cpp entity_location::entity_location(const unit &amp;u)</span>
<span class='curline'><a href='../S/1055.html#L57'>u</a>                  57 src/game_events/entity_location.cpp 	: map_location(u.get_location())</span>
<span class='curline'><a href='../S/1055.html#L58'>u</a>                  58 src/game_events/entity_location.cpp 	, id_(u.underlying_id())</span>
<span class='curline'><a href='../S/1055.html#L67'>u</a>                  67 src/game_events/entity_location.cpp entity_location::entity_location(const unit &amp;u, const map_location &amp; filter_loc)</span>
<span class='curline'><a href='../S/1055.html#L68'>u</a>                  68 src/game_events/entity_location.cpp 	: map_location(u.get_location())</span>
<span class='curline'><a href='../S/1055.html#L69'>u</a>                  69 src/game_events/entity_location.cpp 	, id_(u.underlying_id())</span>
<span class='curline'><a href='../S/1064.html#L36'>u</a>                  36 src/game_events/entity_location.hpp 		entity_location(const unit &amp;u, const map_location &amp;filter_loc);</span>
<span class='curline'><a href='../S/1126.html#L405'>u</a>                 405 src/game_initialization/lobby_info.cpp 	for(auto&amp; u : users_) {</span>
<span class='curline'><a href='../S/1126.html#L406'>u</a>                 406 src/game_initialization/lobby_info.cpp 		users_sorted_.push_back(&amp;u);</span>
<span class='curline'><a href='../S/640.html#L59'>u</a>                  59 src/gui/auxiliary/tips.cpp 			: std::any_of(filters.begin(), filters.end(), [&amp;units](const std::string&amp; u) {</span>
<span class='curline'><a href='../S/640.html#L60'>u</a>                  60 src/gui/auxiliary/tips.cpp 				return units.find(u) != units.end();</span>
<span class='curline'><a href='../S/428.html#L208'>u</a>                 208 src/gui/dialogs/attack_predictions.cpp 	const unit&amp; u = attacker.unit_;</span>
<span class='curline'><a href='../S/428.html#L211'>u</a>                 211 src/gui/dialogs/attack_predictions.cpp 		u.get_location(), u.alignment(), u.is_fearless());</span>
<span class='curline'><a href='../S/448.html#L604'>u</a>                 604 src/gui/dialogs/gamestate_inspector.cpp static stuff_list_adder add_unit_entry(stuff_list_adder&amp; progress, const unit&amp; u, const display_context&amp; dc)</span>
<span class='curline'><a href='../S/448.html#L607'>u</a>                 607 src/gui/dialogs/gamestate_inspector.cpp 	color_t team_color = game_config::tc_info(dc.get_team(u.side()).color())[0];</span>
<span class='curline'><a href='../S/448.html#L610'>u</a>                 610 src/gui/dialogs/gamestate_inspector.cpp 	s &lt;&lt; '(' &lt;&lt; u.get_location() &lt;&lt; ')';</span>
<span class='curline'><a href='../S/448.html#L615'>u</a>                 615 src/gui/dialogs/gamestate_inspector.cpp 	s &lt;&lt; "side=" &lt;&lt; u.side() &lt;&lt; "&lt;/span&gt;";</span>
<span class='curline'><a href='../S/448.html#L618'>u</a>                 618 src/gui/dialogs/gamestate_inspector.cpp 	if(u.can_recruit()) {</span>
<span class='curline'><a href='../S/448.html#L623'>u</a>                 623 src/gui/dialogs/gamestate_inspector.cpp 	s &lt;&lt; "id=\"" &lt;&lt; u.id() &lt;&lt; '"';</span>
<span class='curline'><a href='../S/448.html#L626'>u</a>                 626 src/gui/dialogs/gamestate_inspector.cpp 	progress.widget("type", u.type_id());</span>
<span class='curline'><a href='../S/448.html#L629'>u</a>                 629 src/gui/dialogs/gamestate_inspector.cpp 	s &lt;&lt; "L" &lt;&lt; u.level();</span>
<span class='curline'><a href='../S/448.html#L633'>u</a>                 633 src/gui/dialogs/gamestate_inspector.cpp 	s &lt;&lt; u.experience() &lt;&lt; '/' &lt;&lt; u.max_experience() &lt;&lt; " xp";</span>
<span class='curline'><a href='../S/448.html#L637'>u</a>                 637 src/gui/dialogs/gamestate_inspector.cpp 	s &lt;&lt; u.hitpoints() &lt;&lt; '/' &lt;&lt; u.max_hitpoints() &lt;&lt; " hp";</span>
<span class='curline'><a href='../S/448.html#L640'>u</a>                 640 src/gui/dialogs/gamestate_inspector.cpp 	progress.widget("traits", utils::join(u.get_traits_list(), ", "));</span>
<span class='curline'><a href='../S/448.html#L663'>u</a>                 663 src/gui/dialogs/gamestate_inspector.cpp 	unit_map::const_iterator u = dc().units().begin();</span>
<span class='curline'><a href='../S/448.html#L664'>u</a>                 664 src/gui/dialogs/gamestate_inspector.cpp 	std::advance(u, i);</span>
<span class='curline'><a href='../S/448.html#L666'>u</a>                 666 src/gui/dialogs/gamestate_inspector.cpp 	u-&gt;write(c_unit);</span>
<span class='curline'><a href='../S/448.html#L758'>u</a>                 758 src/gui/dialogs/gamestate_inspector.cpp 	for(const unit_ptr u : dc().get_team(side).recall_list()) {</span>
<span class='curline'><a href='../S/448.html#L760'>u</a>                 760 src/gui/dialogs/gamestate_inspector.cpp 		add_unit_entry(progress, *u, dc());</span>
<span class='curline'><a href='../S/448.html#L768'>u</a>                 768 src/gui/dialogs/gamestate_inspector.cpp 	auto u = dc().get_team(side).recall_list().begin();</span>
<span class='curline'><a href='../S/448.html#L769'>u</a>                 769 src/gui/dialogs/gamestate_inspector.cpp 	std::advance(u, i);</span>
<span class='curline'><a href='../S/448.html#L771'>u</a>                 771 src/gui/dialogs/gamestate_inspector.cpp 	(*u)-&gt;write(c_unit);</span>
<span class='curline'><a href='../S/426.html#L78'>u</a>                  78 src/gui/dialogs/unit_list.cpp static std::string format_if_leader(unit_const_ptr u, const std::string str)</span>
<span class='curline'><a href='../S/426.html#L80'>u</a>                  80 src/gui/dialogs/unit_list.cpp 	return (*u).can_recruit() ? "&lt;span color='#cdad00'&gt;" + str + "&lt;/span&gt;" : str;</span>
<span class='curline'><a href='../S/426.html#L83'>u</a>                  83 src/gui/dialogs/unit_list.cpp static std::string format_movement_string(unit_const_ptr u)</span>
<span class='curline'><a href='../S/426.html#L85'>u</a>                  85 src/gui/dialogs/unit_list.cpp 	const int moves_left = (*u).movement_left();</span>
<span class='curline'><a href='../S/426.html#L86'>u</a>                  86 src/gui/dialogs/unit_list.cpp 	const int moves_max  = (*u).total_movement();</span>
<span class='curline'><a href='../S/422.html#L271'>u</a>                 271 src/gui/dialogs/unit_recall.cpp 	const unit&amp; u = *recall_list_[index].get();</span>
<span class='curline'><a href='../S/422.html#L275'>u</a>                 275 src/gui/dialogs/unit_recall.cpp 	if(u.loyal()) {</span>
<span class='curline'><a href='../S/422.html#L276'>u</a>                 276 src/gui/dialogs/unit_recall.cpp 		message &lt;&lt; _("This unit is loyal and requires no upkeep.") &lt;&lt; " " &lt;&lt; (u.gender() == unit_race::MALE</span>
<span class='curline'><a href='../S/422.html#L280'>u</a>                 280 src/gui/dialogs/unit_recall.cpp 	} else if(u.level() &gt; 1) {</span>
<span class='curline'><a href='../S/422.html#L281'>u</a>                 281 src/gui/dialogs/unit_recall.cpp 		message &lt;&lt; _("This unit is an experienced one, having advanced levels.") &lt;&lt; " " &lt;&lt; (u.gender() == unit_race::MALE</span>
<span class='curline'><a href='../S/422.html#L285'>u</a>                 285 src/gui/dialogs/unit_recall.cpp 	} else if(u.experience() &gt; u.max_experience()/2) {</span>
<span class='curline'><a href='../S/422.html#L286'>u</a>                 286 src/gui/dialogs/unit_recall.cpp 		message &lt;&lt; _("This unit is close to advancing a level.") &lt;&lt; " " &lt;&lt; (u.gender() == unit_race::MALE</span>
<span class='curline'><a href='../S/422.html#L309'>u</a>                 309 src/gui/dialogs/unit_recall.cpp 	LOG_DP &lt;&lt; "Dismissing a unit, side = " &lt;&lt; u.side() &lt;&lt; ", id = '" &lt;&lt; u.id() &lt;&lt; "'\n";</span>
<span class='curline'><a href='../S/422.html#L314'>u</a>                 314 src/gui/dialogs/unit_recall.cpp 	unit_ptr dismissed_unit = team_.recall_list().find_if_matches_id(u.id());</span>
<span class='curline'><a href='../S/559.html#L375'>u</a>                 375 src/gui/widgets/unit_preview_pane.cpp void unit_preview_pane::set_displayed_unit(const unit&amp; u)</span>
<span class='curline'><a href='../S/559.html#L378'>u</a>                 378 src/gui/widgets/unit_preview_pane.cpp 	current_type_ = u.type_id();</span>
<span class='curline'><a href='../S/559.html#L381'>u</a>                 381 src/gui/widgets/unit_preview_pane.cpp 		std::string mods = u.image_mods();</span>
<span class='curline'><a href='../S/559.html#L383'>u</a>                 383 src/gui/widgets/unit_preview_pane.cpp 		if(u.can_recruit()) {</span>
<span class='curline'><a href='../S/559.html#L387'>u</a>                 387 src/gui/widgets/unit_preview_pane.cpp 		for(const std::string&amp; overlay : u.overlays()) {</span>
<span class='curline'><a href='../S/559.html#L393'>u</a>                 393 src/gui/widgets/unit_preview_pane.cpp 		icon_type_-&gt;set_label(u.absolute_image() + mods);</span>
<span class='curline'><a href='../S/559.html#L398'>u</a>                 398 src/gui/widgets/unit_preview_pane.cpp 		if(!u.name().empty()) {</span>
<span class='curline'><a href='../S/559.html#L399'>u</a>                 399 src/gui/widgets/unit_preview_pane.cpp 			name = "&lt;span size='large'&gt;" + u.name() + "&lt;/span&gt;" + "\n" + "&lt;small&gt;" + font::span_color(font::unit_type_color) + u.type_name() + "&lt;/span&gt;&lt;/small&gt;";</span>
<span class='curline'><a href='../S/559.html#L401'>u</a>                 401 src/gui/widgets/unit_preview_pane.cpp 			name = "&lt;span size='large'&gt;" + u.type_name() + "&lt;/span&gt;\n";</span>
<span class='curline'><a href='../S/559.html#L409'>u</a>                 409 src/gui/widgets/unit_preview_pane.cpp 		std::string l_str = vgettext("Lvl $lvl", {{"lvl", std::to_string(u.level())}});</span>
<span class='curline'><a href='../S/559.html#L416'>u</a>                 416 src/gui/widgets/unit_preview_pane.cpp 		label_race_-&gt;set_label(u.race()-&gt;name(u.gender()));</span>
<span class='curline'><a href='../S/559.html#L420'>u</a>                 420 src/gui/widgets/unit_preview_pane.cpp 		icon_race_-&gt;set_label("icons/unit-groups/race_" + u.race()-&gt;id() + "_30.png");</span>
<span class='curline'><a href='../S/559.html#L424'>u</a>                 424 src/gui/widgets/unit_preview_pane.cpp 		const std::string&amp; alignment_name = u.alignment().to_string();</span>
<span class='curline'><a href='../S/559.html#L428'>u</a>                 428 src/gui/widgets/unit_preview_pane.cpp 			u.alignment(),</span>
<span class='curline'><a href='../S/559.html#L429'>u</a>                 429 src/gui/widgets/unit_preview_pane.cpp 			u.gender()));</span>
<span class='curline'><a href='../S/559.html#L435'>u</a>                 435 src/gui/widgets/unit_preview_pane.cpp 		const std::string name = "&lt;span size='large'&gt;" + (!u.name().empty() ? u.name() : " ") + "&lt;/span&gt;";</span>
<span class='curline'><a href='../S/559.html#L438'>u</a>                 438 src/gui/widgets/unit_preview_pane.cpp 		str &lt;&lt; font::span_color(font::unit_type_color) &lt;&lt; u.type_name() &lt;&lt; "&lt;/span&gt;" &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/559.html#L440'>u</a>                 440 src/gui/widgets/unit_preview_pane.cpp 		std::string l_str = vgettext("Lvl $lvl", {{"lvl", std::to_string(u.level())}});</span>
<span class='curline'><a href='../S/559.html#L443'>u</a>                 443 src/gui/widgets/unit_preview_pane.cpp 		str &lt;&lt; u.alignment() &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/559.html#L445'>u</a>                 445 src/gui/widgets/unit_preview_pane.cpp 		str &lt;&lt; utils::join(u.trait_names(), ", ") &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/559.html#L447'>u</a>                 447 src/gui/widgets/unit_preview_pane.cpp 		str &lt;&lt; font::span_color(u.hp_color())</span>
<span class='curline'><a href='../S/559.html#L448'>u</a>                 448 src/gui/widgets/unit_preview_pane.cpp 			&lt;&lt; _("HP: ") &lt;&lt; u.hitpoints() &lt;&lt; "/" &lt;&lt; u.max_hitpoints() &lt;&lt; "&lt;/span&gt;" &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/559.html#L450'>u</a>                 450 src/gui/widgets/unit_preview_pane.cpp 		str &lt;&lt; font::span_color(u.xp_color())</span>
<span class='curline'><a href='../S/559.html#L451'>u</a>                 451 src/gui/widgets/unit_preview_pane.cpp 			&lt;&lt; _("XP: ") &lt;&lt; u.experience() &lt;&lt; "/" &lt;&lt; u.max_experience() &lt;&lt; "&lt;/span&gt;";</span>
<span class='curline'><a href='../S/559.html#L461'>u</a>                 461 src/gui/widgets/unit_preview_pane.cpp 				{ "label", (formatter() &lt;&lt; "&lt;small&gt;" &lt;&lt; font::span_color(u.hp_color()) &lt;&lt; "&lt;b&gt;" &lt;&lt; _("HP: ") &lt;&lt; "&lt;/b&gt;" &lt;&lt; u.hitpoints() &lt;&lt; "/" &lt;&lt; u.max_hitpoints() &lt;&lt; "&lt;/span&gt;" &lt;&lt; " | &lt;/small&gt;").str() },</span>
<span class='curline'><a href='../S/559.html#L463'>u</a>                 463 src/gui/widgets/unit_preview_pane.cpp 				{ "tooltip", get_hp_tooltip(u.get_base_resistances(), [&amp;u](const std::string&amp; dt, bool is_attacker) { return u.resistance_against(dt, is_attacker, u.get_location()); }) }</span>
<span class='curline'><a href='../S/559.html#L466'>u</a>                 466 src/gui/widgets/unit_preview_pane.cpp 				{ "label", (formatter() &lt;&lt; "&lt;small&gt;" &lt;&lt; font::span_color(u.xp_color()) &lt;&lt; "&lt;b&gt;" &lt;&lt; _("XP: ") &lt;&lt; "&lt;/b&gt;" &lt;&lt; u.experience() &lt;&lt; "/" &lt;&lt; u.max_experience() &lt;&lt; "&lt;/span&gt;" &lt;&lt; " | &lt;/small&gt;").str() },</span>
<span class='curline'><a href='../S/559.html#L471'>u</a>                 471 src/gui/widgets/unit_preview_pane.cpp 				{ "label", (formatter() &lt;&lt; "&lt;small&gt;" &lt;&lt; "&lt;b&gt;" &lt;&lt; _("MP: ") &lt;&lt; "&lt;/b&gt;" &lt;&lt; u.movement_left() &lt;&lt; "/" &lt;&lt; u.total_movement() &lt;&lt; "&lt;/small&gt;").str() },</span>
<span class='curline'><a href='../S/559.html#L473'>u</a>                 473 src/gui/widgets/unit_preview_pane.cpp 				{ "tooltip", get_mp_tooltip(u.total_movement(), [&amp;u](t_translation::terrain_code terrain) { return u.movement_cost(terrain); }) }</span>
<span class='curline'><a href='../S/559.html#L477'>u</a>                 477 src/gui/widgets/unit_preview_pane.cpp 		if(!u.trait_names().empty()) {</span>
<span class='curline'><a href='../S/559.html#L484'>u</a>                 484 src/gui/widgets/unit_preview_pane.cpp 			assert(u.trait_names().size() == u.trait_descriptions().size());</span>
<span class='curline'><a href='../S/559.html#L485'>u</a>                 485 src/gui/widgets/unit_preview_pane.cpp 			for (size_t i = 0; i &lt; u.trait_names().size(); ++i) {</span>
<span class='curline'><a href='../S/559.html#L489'>u</a>                 489 src/gui/widgets/unit_preview_pane.cpp 					u.trait_names()[i],</span>
<span class='curline'><a href='../S/559.html#L490'>u</a>                 490 src/gui/widgets/unit_preview_pane.cpp 					u.trait_descriptions()[i]</span>
<span class='curline'><a href='../S/559.html#L495'>u</a>                 495 src/gui/widgets/unit_preview_pane.cpp 		if(!u.get_ability_list().empty()) {</span>
<span class='curline'><a href='../S/559.html#L502'>u</a>                 502 src/gui/widgets/unit_preview_pane.cpp 			for(const auto&amp; ab : u.ability_tooltips()) {</span>
<span class='curline'><a href='../S/559.html#L511'>u</a>                 511 src/gui/widgets/unit_preview_pane.cpp 		print_attack_details(u.attacks(), tree_details_-&gt;get_root_node());</span>
<span class='curline'><a href='../S/548.html#L64'>u</a>                  64 src/gui/widgets/unit_preview_pane.hpp 	void set_displayed_unit(const unit&amp; u);</span>
<span class='curline'><a href='../S/812.html#L58'>u</a>                  58 src/help/help.cpp void show_unit_description(CVideo&amp; video, const unit &amp;u)</span>
<span class='curline'><a href='../S/812.html#L60'>u</a>                  60 src/help/help.cpp 	help::show_unit_description(video, u.type());</span>
<span class='curline'><a href='../S/806.html#L57'>u</a>                  57 src/help/help.hpp void show_unit_description(CVideo&amp; video, const unit &amp;u);</span>
<span class='curline'><a href='../S/810.html#L477'>u</a>                 477 src/help/help_impl.cpp 		for (std::set&lt;std::string, string_less&gt;::iterator u = units.begin(); u != units.end(); ++u) {</span>
<span class='curline'><a href='../S/810.html#L478'>u</a>                 478 src/help/help_impl.cpp 			text &lt;&lt; font::unicode_bullet &lt;&lt; " " &lt;&lt; (*u) &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/810.html#L543'>u</a>                 543 src/help/help_impl.cpp 		for (std::set&lt;std::string, string_less&gt;::iterator u = units.begin(); u != units.end(); ++u) {</span>
<span class='curline'><a href='../S/810.html#L544'>u</a>                 544 src/help/help_impl.cpp 			text &lt;&lt; font::unicode_bullet &lt;&lt; " " &lt;&lt; (*u) &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/810.html#L989'>u</a>                 989 src/help/help_impl.cpp 	for (std::set&lt;std::string, string_less&gt;::iterator u = race_units.begin(); u != race_units.end(); ++u) {</span>
<span class='curline'><a href='../S/810.html#L990'>u</a>                 990 src/help/help_impl.cpp 		text &lt;&lt; font::unicode_bullet &lt;&lt; " " &lt;&lt; (*u) &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/1172.html#L396'>u</a>                 396 src/lua/lapi.cpp     case LUA_TLNGSTR: return tsvalue(o)-&gt;u.lnglen;</span>
<span class='curline'><a href='../S/1172.html#L919'>u</a>                 919 src/lua/lapi.cpp     L-&gt;ci-&gt;u.c.k = k;  /* save continuation */</span>
<span class='curline'><a href='../S/1172.html#L920'>u</a>                 920 src/lua/lapi.cpp     L-&gt;ci-&gt;u.c.ctx = ctx;  /* save context */</span>
<span class='curline'><a href='../S/1172.html#L972'>u</a>                 972 src/lua/lapi.cpp     ci-&gt;u.c.k = k;  /* save continuation */</span>
<span class='curline'><a href='../S/1172.html#L973'>u</a>                 973 src/lua/lapi.cpp     ci-&gt;u.c.ctx = ctx;  /* save context */</span>
<span class='curline'><a href='../S/1172.html#L976'>u</a>                 976 src/lua/lapi.cpp     ci-&gt;u.c.old_errfunc = L-&gt;errfunc;</span>
<span class='curline'><a href='../S/1172.html#L982'>u</a>                 982 src/lua/lapi.cpp     L-&gt;errfunc = ci-&gt;u.c.old_errfunc;</span>
<span class='curline'><a href='../S/1172.html#L1184'>u</a>                1184 src/lua/lapi.cpp   Udata *u;</span>
<span class='curline'><a href='../S/1172.html#L1186'>u</a>                1186 src/lua/lapi.cpp   u = luaS_newudata(L, size);</span>
<span class='curline'><a href='../S/1172.html#L1187'>u</a>                1187 src/lua/lapi.cpp   setuvalue(L, L-&gt;top, u);</span>
<span class='curline'><a href='../S/1172.html#L1191'>u</a>                1191 src/lua/lapi.cpp   return getudatamem(u);</span>
<span class='curline'><a href='../S/1172.html#L1294'>u</a>                1294 src/lua/lapi.cpp   if (upisopen(*up1)) (*up1)-&gt;u.open.touched = 1;</span>
<span class='curline'><a href='../S/1176.html#L48'>u</a>                  48 src/lua/lcode.cpp       if (v) setivalue(v, e-&gt;u.ival);</span>
<span class='curline'><a href='../S/1176.html#L51'>u</a>                  51 src/lua/lcode.cpp       if (v) setfltvalue(v, e-&gt;u.nval);</span>
<span class='curline'><a href='../S/1176.html#L399'>u</a>                 399 src/lua/lcode.cpp     freereg(fs, e-&gt;u.info);</span>
<span class='curline'><a href='../S/1176.html#L408'>u</a>                 408 src/lua/lcode.cpp   int r1 = (e1-&gt;k == VNONRELOC) ? e1-&gt;u.info : -1;</span>
<span class='curline'><a href='../S/1176.html#L409'>u</a>                 409 src/lua/lcode.cpp   int r2 = (e2-&gt;k == VNONRELOC) ? e2-&gt;u.info : -1;</span>
<span class='curline'><a href='../S/1176.html#L544'>u</a>                 544 src/lua/lcode.cpp     e-&gt;u.info = GETARG_A(getinstruction(fs, e));</span>
<span class='curline'><a href='../S/1176.html#L563'>u</a>                 563 src/lua/lcode.cpp       e-&gt;u.info = luaK_codeABC(fs, OP_GETUPVAL, 0, e-&gt;u.info, 0);</span>
<span class='curline'><a href='../S/1176.html#L569'>u</a>                 569 src/lua/lcode.cpp       freereg(fs, e-&gt;u.ind.idx);</span>
<span class='curline'><a href='../S/1176.html#L570'>u</a>                 570 src/lua/lcode.cpp       if (e-&gt;u.ind.vt == VLOCAL) {  /* is 't' in a register? */</span>
<span class='curline'><a href='../S/1176.html#L571'>u</a>                 571 src/lua/lcode.cpp         freereg(fs, e-&gt;u.ind.t);</span>
<span class='curline'><a href='../S/1176.html#L575'>u</a>                 575 src/lua/lcode.cpp         lua_assert(e-&gt;u.ind.vt == VUPVAL);</span>
<span class='curline'><a href='../S/1176.html#L578'>u</a>                 578 src/lua/lcode.cpp       e-&gt;u.info = luaK_codeABC(fs, op, 0, e-&gt;u.ind.t, e-&gt;u.ind.idx);</span>
<span class='curline'><a href='../S/1176.html#L607'>u</a>                 607 src/lua/lcode.cpp       luaK_codek(fs, reg, e-&gt;u.info);</span>
<span class='curline'><a href='../S/1176.html#L611'>u</a>                 611 src/lua/lcode.cpp       luaK_codek(fs, reg, luaK_numberK(fs, e-&gt;u.nval));</span>
<span class='curline'><a href='../S/1176.html#L615'>u</a>                 615 src/lua/lcode.cpp       luaK_codek(fs, reg, luaK_intK(fs, e-&gt;u.ival));</span>
<span class='curline'><a href='../S/1176.html#L624'>u</a>                 624 src/lua/lcode.cpp       if (reg != e-&gt;u.info)</span>
<span class='curline'><a href='../S/1176.html#L625'>u</a>                 625 src/lua/lcode.cpp         luaK_codeABC(fs, OP_MOVE, reg, e-&gt;u.info, 0);</span>
<span class='curline'><a href='../S/1176.html#L633'>u</a>                 633 src/lua/lcode.cpp   e-&gt;u.info = reg;</span>
<span class='curline'><a href='../S/1176.html#L678'>u</a>                 678 src/lua/lcode.cpp     luaK_concat(fs, &amp;e-&gt;t, e-&gt;u.info);  /* put this jump in 't' list */</span>
<span class='curline'><a href='../S/1176.html#L694'>u</a>                 694 src/lua/lcode.cpp   e-&gt;u.info = reg;</span>
<span class='curline'><a href='../S/1176.html#L719'>u</a>                 719 src/lua/lcode.cpp       return e-&gt;u.info;  /* result is already in a register */</span>
<span class='curline'><a href='../S/1176.html#L720'>u</a>                 720 src/lua/lcode.cpp     if (e-&gt;u.info &gt;= fs-&gt;nactvar) {  /* reg. is not a local? */</span>
<span class='curline'><a href='../S/1176.html#L721'>u</a>                 721 src/lua/lcode.cpp       exp2reg(fs, e, e-&gt;u.info);  /* put final result in it */</span>
<span class='curline'><a href='../S/1176.html#L722'>u</a>                 722 src/lua/lcode.cpp       return e-&gt;u.info;</span>
<span class='curline'><a href='../S/1176.html#L726'>u</a>                 726 src/lua/lcode.cpp   return e-&gt;u.info;</span>
<span class='curline'><a href='../S/1176.html#L761'>u</a>                 761 src/lua/lcode.cpp     case VTRUE: e-&gt;u.info = boolK(fs, 1); goto vk;</span>
<span class='curline'><a href='../S/1176.html#L762'>u</a>                 762 src/lua/lcode.cpp     case VFALSE: e-&gt;u.info = boolK(fs, 0); goto vk;</span>
<span class='curline'><a href='../S/1176.html#L763'>u</a>                 763 src/lua/lcode.cpp     case VNIL: e-&gt;u.info = nilK(fs); goto vk;</span>
<span class='curline'><a href='../S/1176.html#L764'>u</a>                 764 src/lua/lcode.cpp     case VKINT: e-&gt;u.info = luaK_intK(fs, e-&gt;u.ival); goto vk;</span>
<span class='curline'><a href='../S/1176.html#L765'>u</a>                 765 src/lua/lcode.cpp     case VKFLT: e-&gt;u.info = luaK_numberK(fs, e-&gt;u.nval); goto vk;</span>
<span class='curline'><a href='../S/1176.html#L769'>u</a>                 769 src/lua/lcode.cpp       if (e-&gt;u.info &lt;= MAXINDEXRK)  /* constant fits in 'argC'? */</span>
<span class='curline'><a href='../S/1176.html#L770'>u</a>                 770 src/lua/lcode.cpp         return RKASK(e-&gt;u.info);</span>
<span class='curline'><a href='../S/1176.html#L786'>u</a>                 786 src/lua/lcode.cpp       exp2reg(fs, ex, var-&gt;u.info);  /* compute 'ex' into proper place */</span>
<span class='curline'><a href='../S/1176.html#L791'>u</a>                 791 src/lua/lcode.cpp       luaK_codeABC(fs, OP_SETUPVAL, e, var-&gt;u.info, 0);</span>
<span class='curline'><a href='../S/1176.html#L795'>u</a>                 795 src/lua/lcode.cpp       OpCode op = (var-&gt;u.ind.vt == VLOCAL) ? OP_SETTABLE : OP_SETTABUP;</span>
<span class='curline'><a href='../S/1176.html#L797'>u</a>                 797 src/lua/lcode.cpp       luaK_codeABC(fs, op, var-&gt;u.ind.t, var-&gt;u.ind.idx, e);</span>
<span class='curline'><a href='../S/1176.html#L812'>u</a>                 812 src/lua/lcode.cpp   ereg = e-&gt;u.info;  /* register where 'e' was placed */</span>
<span class='curline'><a href='../S/1176.html#L814'>u</a>                 814 src/lua/lcode.cpp   e-&gt;u.info = fs-&gt;freereg;  /* base register for op_self */</span>
<span class='curline'><a href='../S/1176.html#L817'>u</a>                 817 src/lua/lcode.cpp   luaK_codeABC(fs, OP_SELF, e-&gt;u.info, ereg, luaK_exp2RK(fs, key));</span>
<span class='curline'><a href='../S/1176.html#L826'>u</a>                 826 src/lua/lcode.cpp   Instruction *pc = getjumpcontrol(fs, e-&gt;u.info);</span>
<span class='curline'><a href='../S/1176.html#L850'>u</a>                 850 src/lua/lcode.cpp   return condjump(fs, OP_TESTSET, NO_REG, e-&gt;u.info, cond);</span>
<span class='curline'><a href='../S/1176.html#L863'>u</a>                 863 src/lua/lcode.cpp       pc = e-&gt;u.info;  /* save jump position */</span>
<span class='curline'><a href='../S/1176.html#L889'>u</a>                 889 src/lua/lcode.cpp       pc = e-&gt;u.info;  /* already jump if true */</span>
<span class='curline'><a href='../S/1176.html#L929'>u</a>                 929 src/lua/lcode.cpp       e-&gt;u.info = luaK_codeABC(fs, OP_NOT, 0, e-&gt;u.info, 0);</span>
<span class='curline'><a href='../S/1176.html#L948'>u</a>                 948 src/lua/lcode.cpp   t-&gt;u.ind.t = t-&gt;u.info;  /* register or upvalue index */</span>
<span class='curline'><a href='../S/1176.html#L949'>u</a>                 949 src/lua/lcode.cpp   t-&gt;u.ind.idx = luaK_exp2RK(fs, k);  /* R/K index for key */</span>
<span class='curline'><a href='../S/1176.html#L950'>u</a>                 950 src/lua/lcode.cpp   t-&gt;u.ind.vt = (t-&gt;k == VUPVAL) ? VUPVAL : VLOCAL;</span>
<span class='curline'><a href='../S/1176.html#L985'>u</a>                 985 src/lua/lcode.cpp     e1-&gt;u.ival = ivalue(&amp;res);</span>
<span class='curline'><a href='../S/1176.html#L992'>u</a>                 992 src/lua/lcode.cpp     e1-&gt;u.nval = n;</span>
<span class='curline'><a href='../S/1176.html#L1006'>u</a>                1006 src/lua/lcode.cpp   e-&gt;u.info = luaK_codeABC(fs, op, 0, r, 0);  /* generate opcode */</span>
<span class='curline'><a href='../S/1176.html#L1023'>u</a>                1023 src/lua/lcode.cpp   e1-&gt;u.info = luaK_codeABC(fs, op, 0, rk1, rk2);  /* generate opcode */</span>
<span class='curline'><a href='../S/1176.html#L1034'>u</a>                1034 src/lua/lcode.cpp   int rk1 = (e1-&gt;k == VK) ? RKASK(e1-&gt;u.info)</span>
<span class='curline'><a href='../S/1176.html#L1035'>u</a>                1035 src/lua/lcode.cpp                           : check_exp(e1-&gt;k == VNONRELOC, e1-&gt;u.info);</span>
<span class='curline'><a href='../S/1176.html#L1040'>u</a>                1040 src/lua/lcode.cpp       e1-&gt;u.info = condjump(fs, OP_EQ, 0, rk1, rk2);</span>
<span class='curline'><a href='../S/1176.html#L1046'>u</a>                1046 src/lua/lcode.cpp       e1-&gt;u.info = condjump(fs, op, 1, rk2, rk1);  /* invert operands */</span>
<span class='curline'><a href='../S/1176.html#L1051'>u</a>                1051 src/lua/lcode.cpp       e1-&gt;u.info = condjump(fs, op, 1, rk1, rk2);</span>
<span class='curline'><a href='../S/1176.html#L1141'>u</a>                1141 src/lua/lcode.cpp         lua_assert(e1-&gt;u.info == GETARG_B(getinstruction(fs, e2))-1);</span>
<span class='curline'><a href='../S/1176.html#L1143'>u</a>                1143 src/lua/lcode.cpp         SETARG_B(getinstruction(fs, e2), e1-&gt;u.info);</span>
<span class='curline'><a href='../S/1176.html#L1144'>u</a>                1144 src/lua/lcode.cpp         e1-&gt;k = VRELOCABLE; e1-&gt;u.info = e2-&gt;u.info;</span>
<span class='curline'><a href='../S/1166.html#L44'>u</a>                  44 src/lua/lcode.h #define getinstruction(fs,e)	((fs)-&gt;f-&gt;code[(e)-&gt;u.info])</span>
<span class='curline'><a href='../S/1202.html#L46'>u</a>                  46 src/lua/ldebug.cpp   return pcRel(ci-&gt;u.l.savedpc, ci_func(ci)-&gt;p);</span>
<span class='curline'><a href='../S/1202.html#L86'>u</a>                  86 src/lua/ldebug.cpp     L-&gt;oldpc = L-&gt;ci-&gt;u.l.savedpc;</span>
<span class='curline'><a href='../S/1202.html#L135'>u</a>                 135 src/lua/ldebug.cpp   if (n &gt;= cast_int(ci-&gt;u.l.base - ci-&gt;func) - nparams)</span>
<span class='curline'><a href='../S/1202.html#L152'>u</a>                 152 src/lua/ldebug.cpp       base = ci-&gt;u.l.base;</span>
<span class='curline'><a href='../S/1202.html#L528'>u</a>                 528 src/lua/ldebug.cpp   ptrdiff_t i = o - ci-&gt;u.l.base;</span>
<span class='curline'><a href='../S/1202.html#L529'>u</a>                 529 src/lua/ldebug.cpp   return (0 &lt;= i &amp;&amp; i &lt; (ci-&gt;top - ci-&gt;u.l.base) &amp;&amp; ci-&gt;u.l.base + i == o);</span>
<span class='curline'><a href='../S/1202.html#L560'>u</a>                 560 src/lua/ldebug.cpp                         cast_int(o - ci-&gt;u.l.base), &amp;name);</span>
<span class='curline'><a href='../S/1202.html#L662'>u</a>                 662 src/lua/ldebug.cpp     int npc = pcRel(ci-&gt;u.l.savedpc, p);</span>
<span class='curline'><a href='../S/1202.html#L665'>u</a>                 665 src/lua/ldebug.cpp         ci-&gt;u.l.savedpc &lt;= L-&gt;oldpc ||  /* when jump back (loop), or when */</span>
<span class='curline'><a href='../S/1202.html#L669'>u</a>                 669 src/lua/ldebug.cpp   L-&gt;oldpc = ci-&gt;u.l.savedpc;</span>
<span class='curline'><a href='../S/1202.html#L673'>u</a>                 673 src/lua/ldebug.cpp     ci-&gt;u.l.savedpc--;  /* undo increment (resume will increment it again) */</span>
<span class='curline'><a href='../S/1205.html#L162'>u</a>                 162 src/lua/ldo.cpp   for (up = L-&gt;openupval; up != NULL; up = up-&gt;u.open.next)</span>
<span class='curline'><a href='../S/1205.html#L168'>u</a>                 168 src/lua/ldo.cpp       ci-&gt;u.l.base = (ci-&gt;u.l.base - oldstack) + L-&gt;stack;</span>
<span class='curline'><a href='../S/1205.html#L279'>u</a>                 279 src/lua/ldo.cpp   ci-&gt;u.l.savedpc++;  /* hooks assume 'pc' is already incremented */</span>
<span class='curline'><a href='../S/1205.html#L281'>u</a>                 281 src/lua/ldo.cpp       GET_OPCODE(*(ci-&gt;previous-&gt;u.l.savedpc - 1)) == OP_TAILCALL) {</span>
<span class='curline'><a href='../S/1205.html#L286'>u</a>                 286 src/lua/ldo.cpp   ci-&gt;u.l.savedpc--;  /* correct 'pc' */</span>
<span class='curline'><a href='../S/1205.html#L387'>u</a>                 387 src/lua/ldo.cpp       ci-&gt;u.l.base = base;</span>
<span class='curline'><a href='../S/1205.html#L390'>u</a>                 390 src/lua/ldo.cpp       ci-&gt;u.l.savedpc = p-&gt;code;  /* starting point */</span>
<span class='curline'><a href='../S/1205.html#L462'>u</a>                 462 src/lua/ldo.cpp     L-&gt;oldpc = ci-&gt;previous-&gt;u.l.savedpc;  /* 'oldpc' for caller function */</span>
<span class='curline'><a href='../S/1205.html#L519'>u</a>                 519 src/lua/ldo.cpp   lua_assert(ci-&gt;u.c.k != NULL &amp;&amp; L-&gt;nny == 0);</span>
<span class='curline'><a href='../S/1205.html#L524'>u</a>                 524 src/lua/ldo.cpp     L-&gt;errfunc = ci-&gt;u.c.old_errfunc;</span>
<span class='curline'><a href='../S/1205.html#L531'>u</a>                 531 src/lua/ldo.cpp   n = (*ci-&gt;u.c.k)(L, status, ci-&gt;u.c.ctx);</span>
<span class='curline'><a href='../S/1205.html#L592'>u</a>                 592 src/lua/ldo.cpp   L-&gt;errfunc = ci-&gt;u.c.old_errfunc;</span>
<span class='curline'><a href='../S/1205.html#L639'>u</a>                 639 src/lua/ldo.cpp       if (ci-&gt;u.c.k != NULL) {  /* does it have a continuation function? */</span>
<span class='curline'><a href='../S/1205.html#L641'>u</a>                 641 src/lua/ldo.cpp         n = (*ci-&gt;u.c.k)(L, LUA_YIELD, ci-&gt;u.c.ctx); /* call continuation */</span>
<span class='curline'><a href='../S/1205.html#L708'>u</a>                 708 src/lua/ldo.cpp     if ((ci-&gt;u.c.k = k) != NULL)  /* is there a continuation? */</span>
<span class='curline'><a href='../S/1205.html#L709'>u</a>                 709 src/lua/ldo.cpp       ci-&gt;u.c.ctx = ctx;  /* save context */</span>
<span class='curline'><a href='../S/1205.html#L719'>u</a>                 719 src/lua/ldo.cpp int luaD_pcall (lua_State *L, Pfunc func, void *u,</span>
<span class='curline'><a href='../S/1205.html#L727'>u</a>                 727 src/lua/ldo.cpp   status = luaD_rawrunprotected(L, func, u);</span>
<span class='curline'><a href='../S/1179.html#L45'>u</a>                  45 src/lua/ldo.h  LUAI_FUNC int luaD_pcall (lua_State *L, Pfunc func, void *u,</span>
<span class='curline'><a href='../S/1206.html#L50'>u</a>                  50 src/lua/lfunc.cpp     uv-&gt;v = &amp;uv-&gt;u.value;  /* make it closed */</span>
<span class='curline'><a href='../S/1206.html#L66'>u</a>                  66 src/lua/lfunc.cpp     pp = &amp;p-&gt;u.open.next;</span>
<span class='curline'><a href='../S/1206.html#L71'>u</a>                  71 src/lua/lfunc.cpp   uv-&gt;u.open.next = *pp;  /* link it to list of open upvalues */</span>
<span class='curline'><a href='../S/1206.html#L72'>u</a>                  72 src/lua/lfunc.cpp   uv-&gt;u.open.touched = 1;</span>
<span class='curline'><a href='../S/1206.html#L87'>u</a>                  87 src/lua/lfunc.cpp     L-&gt;openupval = uv-&gt;u.open.next;  /* remove from 'open' list */</span>
<span class='curline'><a href='../S/1206.html#L91'>u</a>                  91 src/lua/lfunc.cpp       setobj(L, &amp;uv-&gt;u.value, uv-&gt;v);  /* move value to upvalue slot */</span>
<span class='curline'><a href='../S/1206.html#L92'>u</a>                  92 src/lua/lfunc.cpp       uv-&gt;v = &amp;uv-&gt;u.value;  /* now current value lives here */</span>
<span class='curline'><a href='../S/1203.html#L44'>u</a>                  44 src/lua/lfunc.h   } u;</span>
<span class='curline'><a href='../S/1203.html#L47'>u</a>                  47 src/lua/lfunc.h #define upisopen(up)	((up)-&gt;v != &amp;(up)-&gt;u.value)</span>
<span class='curline'><a href='../S/1200.html#L246'>u</a>                 246 src/lua/lgc.cpp       g-&gt;GCmemtrav += sizelstring(gco2ts(o)-&gt;u.lnglen);</span>
<span class='curline'><a href='../S/1200.html#L323'>u</a>                 323 src/lua/lgc.cpp       for (uv = thread-&gt;openupval; uv != NULL; uv = uv-&gt;u.open.next) {</span>
<span class='curline'><a href='../S/1200.html#L324'>u</a>                 324 src/lua/lgc.cpp         if (uv-&gt;u.open.touched) {</span>
<span class='curline'><a href='../S/1200.html#L326'>u</a>                 326 src/lua/lgc.cpp           uv-&gt;u.open.touched = 0;</span>
<span class='curline'><a href='../S/1200.html#L521'>u</a>                 521 src/lua/lgc.cpp         uv-&gt;u.open.touched = 1;  /* can be marked in 'remarkupvals' */</span>
<span class='curline'><a href='../S/1200.html#L715'>u</a>                 715 src/lua/lgc.cpp       luaM_freemem(L, o, sizelstring(gco2ts(o)-&gt;u.lnglen));</span>
<span class='curline'><a href='../S/1189.html#L69'>u</a>                  69 src/lua/llimits.h   double u;</span>
<span class='curline'><a href='../S/1194.html#L311'>u</a>                 311 src/lua/lobject.h   } u;</span>
<span class='curline'><a href='../S/1194.html#L336'>u</a>                 336 src/lua/lobject.h #define tsslen(s)	((s)-&gt;tt == LUA_TSHRSTR ? (s)-&gt;shrlen : (s)-&gt;u.lnglen)</span>
<span class='curline'><a href='../S/1194.html#L368'>u</a>                 368 src/lua/lobject.h #define getudatamem(u)  \</span>
<span class='curline'><a href='../S/1194.html#L369'>u</a>                 369 src/lua/lobject.h   check_exp(sizeof((u)-&gt;ttuv_), (cast(char*, (u)) + sizeof(UUdata)))</span>
<span class='curline'><a href='../S/1194.html#L371'>u</a>                 371 src/lua/lobject.h #define setuservalue(L,u,o) \</span>
<span class='curline'><a href='../S/1194.html#L372'>u</a>                 372 src/lua/lobject.h 	{ const TValue *io=(o); Udata *iu = (u); \</span>
<span class='curline'><a href='../S/1194.html#L377'>u</a>                 377 src/lua/lobject.h #define getuservalue(L,u,o) \</span>
<span class='curline'><a href='../S/1194.html#L378'>u</a>                 378 src/lua/lobject.h 	{ TValue *io=(o); const Udata *iu = (u); \</span>
<span class='curline'><a href='../S/1217.html#L147'>u</a>                 147 src/lua/lparser.cpp   e-&gt;u.info = i;</span>
<span class='curline'><a href='../S/1217.html#L237'>u</a>                 237 src/lua/lparser.cpp   f-&gt;upvalues[fs-&gt;nups].idx = cast_byte(v-&gt;u.info);</span>
<span class='curline'><a href='../S/1217.html#L662'>u</a>                 662 src/lua/lparser.cpp   luaK_codeABC(fs, OP_SETTABLE, cc-&gt;t-&gt;u.info, rkkey, luaK_exp2RK(fs, &amp;val));</span>
<span class='curline'><a href='../S/1217.html#L672'>u</a>                 672 src/lua/lparser.cpp     luaK_setlist(fs, cc-&gt;t-&gt;u.info, cc-&gt;na, cc-&gt;tostore);  /* flush */</span>
<span class='curline'><a href='../S/1217.html#L682'>u</a>                 682 src/lua/lparser.cpp     luaK_setlist(fs, cc-&gt;t-&gt;u.info, cc-&gt;na, LUA_MULTRET);</span>
<span class='curline'><a href='../S/1217.html#L688'>u</a>                 688 src/lua/lparser.cpp     luaK_setlist(fs, cc-&gt;t-&gt;u.info, cc-&gt;na, cc-&gt;tostore);</span>
<span class='curline'><a href='../S/1217.html#L847'>u</a>                 847 src/lua/lparser.cpp   base = f-&gt;u.info;  /* base register for call */</span>
<span class='curline'><a href='../S/1217.html#L937'>u</a>                 937 src/lua/lparser.cpp       v-&gt;u.nval = ls-&gt;t.seminfo.r;</span>
<span class='curline'><a href='../S/1217.html#L942'>u</a>                 942 src/lua/lparser.cpp       v-&gt;u.ival = ls-&gt;t.seminfo.i;</span>
<span class='curline'><a href='../S/1217.html#L1127'>u</a>                1127 src/lua/lparser.cpp       if (lh-&gt;v.u.ind.vt == v-&gt;k &amp;&amp; lh-&gt;v.u.ind.t == v-&gt;u.info) {</span>
<span class='curline'><a href='../S/1217.html#L1129'>u</a>                1129 src/lua/lparser.cpp         lh-&gt;v.u.ind.vt = VLOCAL;</span>
<span class='curline'><a href='../S/1217.html#L1130'>u</a>                1130 src/lua/lparser.cpp         lh-&gt;v.u.ind.t = extra;  /* previous assignment will use safe copy */</span>
<span class='curline'><a href='../S/1217.html#L1133'>u</a>                1133 src/lua/lparser.cpp       if (v-&gt;k == VLOCAL &amp;&amp; lh-&gt;v.u.ind.idx == v-&gt;u.info) {</span>
<span class='curline'><a href='../S/1217.html#L1135'>u</a>                1135 src/lua/lparser.cpp         lh-&gt;v.u.ind.idx = extra;  /* previous assignment will use safe copy */</span>
<span class='curline'><a href='../S/1217.html#L1142'>u</a>                1142 src/lua/lparser.cpp     luaK_codeABC(fs, op, extra, v-&gt;u.info, 0);</span>
<span class='curline'><a href='../S/1217.html#L1287'>u</a>                1287 src/lua/lparser.cpp   reg = e.u.info;</span>
<span class='curline'><a href='../S/1217.html#L1439'>u</a>                1439 src/lua/lparser.cpp   getlocvar(fs, b.u.info)-&gt;startpc = fs-&gt;pc;</span>
<span class='curline'><a href='../S/1174.html#L65'>u</a>                  65 src/lua/lparser.h   } u;</span>
<span class='curline'><a href='../S/1175.html#L88'>u</a>                  88 src/lua/lstate.h   } u;</span>
<span class='curline'><a href='../S/1175.html#L195'>u</a>                 195 src/lua/lstate.h   struct Udata u;</span>
<span class='curline'><a href='../S/1175.html#L208'>u</a>                 208 src/lua/lstate.h #define gco2u(o)  check_exp((o)-&gt;tt == LUA_TUSERDATA, &amp;((cast_u(o))-&gt;u))</span>
<span class='curline'><a href='../S/1177.html#L41'>u</a>                  41 src/lua/lstring.cpp   size_t len = a-&gt;u.lnglen;</span>
<span class='curline'><a href='../S/1177.html#L44'>u</a>                  44 src/lua/lstring.cpp     ((len == b-&gt;u.lnglen) &amp;&amp;  /* equal length and ... */</span>
<span class='curline'><a href='../S/1177.html#L61'>u</a>                  61 src/lua/lstring.cpp     ts-&gt;hash = luaS_hash(getstr(ts), ts-&gt;u.lnglen, ts-&gt;hash);</span>
<span class='curline'><a href='../S/1177.html#L83'>u</a>                  83 src/lua/lstring.cpp       TString *hnext = p-&gt;u.hnext;  /* save next */</span>
<span class='curline'><a href='../S/1177.html#L85'>u</a>                  85 src/lua/lstring.cpp       p-&gt;u.hnext = tb-&gt;hash[h];  /* chain it */</span>
<span class='curline'><a href='../S/1177.html#L149'>u</a>                 149 src/lua/lstring.cpp   ts-&gt;u.lnglen = l;</span>
<span class='curline'><a href='../S/1177.html#L158'>u</a>                 158 src/lua/lstring.cpp     p = &amp;(*p)-&gt;u.hnext;</span>
<span class='curline'><a href='../S/1177.html#L159'>u</a>                 159 src/lua/lstring.cpp   *p = (*p)-&gt;u.hnext;  /* remove element from its list */</span>
<span class='curline'><a href='../S/1177.html#L173'>u</a>                 173 src/lua/lstring.cpp   for (ts = *list; ts != NULL; ts = ts-&gt;u.hnext) {</span>
<span class='curline'><a href='../S/1177.html#L189'>u</a>                 189 src/lua/lstring.cpp   ts-&gt;u.hnext = *list;</span>
<span class='curline'><a href='../S/1177.html#L237'>u</a>                 237 src/lua/lstring.cpp   Udata *u;</span>
<span class='curline'><a href='../S/1177.html#L242'>u</a>                 242 src/lua/lstring.cpp   u = gco2u(o);</span>
<span class='curline'><a href='../S/1177.html#L243'>u</a>                 243 src/lua/lstring.cpp   u-&gt;len = s;</span>
<span class='curline'><a href='../S/1177.html#L244'>u</a>                 244 src/lua/lstring.cpp   u-&gt;metatable = NULL;</span>
<span class='curline'><a href='../S/1177.html#L245'>u</a>                 245 src/lua/lstring.cpp   setuservalue(L, u, luaO_nilobject);</span>
<span class='curline'><a href='../S/1177.html#L246'>u</a>                 246 src/lua/lstring.cpp   return u;</span>
<span class='curline'><a href='../S/1210.html#L18'>u</a>                  18 src/lua/lstring.h #define sizeudata(u)	sizeludata((u)-&gt;len)</span>
<span class='curline'><a href='../S/1216.html#L1131'>u</a>                1131 src/lua/lstrlib.cpp   union { double d; void *p; lua_Integer i; lua_Number n; } u;</span>
<span class='curline'><a href='../S/1216.html#L1134'>u</a>                1134 src/lua/lstrlib.cpp #define MAXALIGN	(offsetof(struct cD, u))</span>
<span class='curline'><a href='../S/1216.html#L1363'>u</a>                1363 src/lua/lstrlib.cpp         volatile Ftypes u;</span>
<span class='curline'><a href='../S/1216.html#L1366'>u</a>                1366 src/lua/lstrlib.cpp         if (size == sizeof(u.f)) u.f = (float)n;  /* copy it into 'u' */</span>
<span class='curline'><a href='../S/1216.html#L1367'>u</a>                1367 src/lua/lstrlib.cpp         else if (size == sizeof(u.d)) u.d = (double)n;</span>
<span class='curline'><a href='../S/1216.html#L1368'>u</a>                1368 src/lua/lstrlib.cpp         else u.n = n;</span>
<span class='curline'><a href='../S/1216.html#L1370'>u</a>                1370 src/lua/lstrlib.cpp         copywithendian(buff, u.buff, size, h.islittle);</span>
<span class='curline'><a href='../S/1216.html#L1501'>u</a>                1501 src/lua/lstrlib.cpp         volatile Ftypes u;</span>
<span class='curline'><a href='../S/1216.html#L1503'>u</a>                1503 src/lua/lstrlib.cpp         copywithendian(u.buff, data + pos, size, h.islittle);</span>
<span class='curline'><a href='../S/1216.html#L1504'>u</a>                1504 src/lua/lstrlib.cpp         if (size == sizeof(u.f)) num = (lua_Number)u.f;</span>
<span class='curline'><a href='../S/1216.html#L1505'>u</a>                1505 src/lua/lstrlib.cpp         else if (size == sizeof(u.d)) num = (lua_Number)u.d;</span>
<span class='curline'><a href='../S/1216.html#L1506'>u</a>                1506 src/lua/lstrlib.cpp         else num = u.n;</span>
<span class='curline'><a href='../S/1183.html#L108'>u</a>                 108 src/lua/ltable.cpp     unsigned int u = cast(unsigned int, i) + cast(unsigned int, ni);</span>
<span class='curline'><a href='../S/1183.html#L109'>u</a>                 109 src/lua/ltable.cpp     return cast_int(u &lt;= cast(unsigned int, INT_MAX) ? u : ~u);</span>
<span class='curline'><a href='../S/1211.html#L341'>u</a>                 341 src/lua/luaconf.h #define lua_cpcall(L,f,u)  \</span>
<span class='curline'><a href='../S/1211.html#L343'>u</a>                 343 src/lua/luaconf.h 	 lua_pushlightuserdata(L,(u)), \</span>
<span class='curline'><a href='../S/1173.html#L532'>u</a>                 532 src/lua/lvm.cpp       setivalue(ra, tsvalue(rb)-&gt;u.lnglen);</span>
<span class='curline'><a href='../S/1173.html#L658'>u</a>                 658 src/lua/lvm.cpp   StkId base = ci-&gt;u.l.base;</span>
<span class='curline'><a href='../S/1173.html#L659'>u</a>                 659 src/lua/lvm.cpp   Instruction inst = *(ci-&gt;u.l.savedpc - 1);  /* interrupted instruction */</span>
<span class='curline'><a href='../S/1173.html#L678'>u</a>                 678 src/lua/lvm.cpp       lua_assert(GET_OPCODE(*ci-&gt;u.l.savedpc) == OP_JMP);</span>
<span class='curline'><a href='../S/1173.html#L680'>u</a>                 680 src/lua/lvm.cpp         ci-&gt;u.l.savedpc++;  /* skip jump instruction */</span>
<span class='curline'><a href='../S/1173.html#L693'>u</a>                 693 src/lua/lvm.cpp       setobj2s(L, ci-&gt;u.l.base + GETARG_A(inst), L-&gt;top - 1);</span>
<span class='curline'><a href='../S/1173.html#L698'>u</a>                 698 src/lua/lvm.cpp       lua_assert(GET_OPCODE(*ci-&gt;u.l.savedpc) == OP_TFORLOOP);</span>
<span class='curline'><a href='../S/1173.html#L740'>u</a>                 740 src/lua/lvm.cpp     if (a != 0) luaF_close(L, ci-&gt;u.l.base + a - 1); \</span>
<span class='curline'><a href='../S/1173.html#L741'>u</a>                 741 src/lua/lvm.cpp     ci-&gt;u.l.savedpc += GETARG_sBx(i) + e; }</span>
<span class='curline'><a href='../S/1173.html#L744'>u</a>                 744 src/lua/lvm.cpp #define donextjump(ci)	{ i = *ci-&gt;u.l.savedpc; dojump(ci, i, 1); }</span>
<span class='curline'><a href='../S/1173.html#L747'>u</a>                 747 src/lua/lvm.cpp #define Protect(x)	{ {x;}; base = ci-&gt;u.l.base; }</span>
<span class='curline'><a href='../S/1173.html#L757'>u</a>                 757 src/lua/lvm.cpp   i = *(ci-&gt;u.l.savedpc++); \</span>
<span class='curline'><a href='../S/1173.html#L761'>u</a>                 761 src/lua/lvm.cpp   lua_assert(base == ci-&gt;u.l.base); \</span>
<span class='curline'><a href='../S/1173.html#L796'>u</a>                 796 src/lua/lvm.cpp   base = ci-&gt;u.l.base;  /* local copy of function's base */</span>
<span class='curline'><a href='../S/1173.html#L814'>u</a>                 814 src/lua/lvm.cpp         lua_assert(GET_OPCODE(*ci-&gt;u.l.savedpc) == OP_EXTRAARG);</span>
<span class='curline'><a href='../S/1173.html#L815'>u</a>                 815 src/lua/lvm.cpp         rb = k + GETARG_Ax(*ci-&gt;u.l.savedpc++);</span>
<span class='curline'><a href='../S/1173.html#L821'>u</a>                 821 src/lua/lvm.cpp         if (GETARG_C(i)) ci-&gt;u.l.savedpc++;  /* skip next instruction (if C) */</span>
<span class='curline'><a href='../S/1173.html#L1089'>u</a>                1089 src/lua/lvm.cpp             ci-&gt;u.l.savedpc++;</span>
<span class='curline'><a href='../S/1173.html#L1098'>u</a>                1098 src/lua/lvm.cpp             ci-&gt;u.l.savedpc++;</span>
<span class='curline'><a href='../S/1173.html#L1107'>u</a>                1107 src/lua/lvm.cpp             ci-&gt;u.l.savedpc++;</span>
<span class='curline'><a href='../S/1173.html#L1115'>u</a>                1115 src/lua/lvm.cpp             ci-&gt;u.l.savedpc++;</span>
<span class='curline'><a href='../S/1173.html#L1123'>u</a>                1123 src/lua/lvm.cpp           ci-&gt;u.l.savedpc++;</span>
<span class='curline'><a href='../S/1173.html#L1159'>u</a>                1159 src/lua/lvm.cpp           StkId lim = nci-&gt;u.l.base + getproto(nfunc)-&gt;numparams;</span>
<span class='curline'><a href='../S/1173.html#L1162'>u</a>                1162 src/lua/lvm.cpp           if (cl-&gt;p-&gt;sizep &gt; 0) luaF_close(L, oci-&gt;u.l.base);</span>
<span class='curline'><a href='../S/1173.html#L1166'>u</a>                1166 src/lua/lvm.cpp           oci-&gt;u.l.base = ofunc + (nci-&gt;u.l.base - nfunc);  /* correct base */</span>
<span class='curline'><a href='../S/1173.html#L1168'>u</a>                1168 src/lua/lvm.cpp           oci-&gt;u.l.savedpc = nci-&gt;u.l.savedpc;</span>
<span class='curline'><a href='../S/1173.html#L1171'>u</a>                1171 src/lua/lvm.cpp           lua_assert(L-&gt;top == oci-&gt;u.l.base + getproto(ofunc)-&gt;maxstacksize);</span>
<span class='curline'><a href='../S/1173.html#L1186'>u</a>                1186 src/lua/lvm.cpp           lua_assert(GET_OPCODE(*((ci)-&gt;u.l.savedpc - 1)) == OP_CALL);</span>
<span class='curline'><a href='../S/1173.html#L1196'>u</a>                1196 src/lua/lvm.cpp             ci-&gt;u.l.savedpc += GETARG_sBx(i);  /* jump back */</span>
<span class='curline'><a href='../S/1173.html#L1207'>u</a>                1207 src/lua/lvm.cpp             ci-&gt;u.l.savedpc += GETARG_sBx(i);  /* jump back */</span>
<span class='curline'><a href='../S/1173.html#L1239'>u</a>                1239 src/lua/lvm.cpp         ci-&gt;u.l.savedpc += GETARG_sBx(i);</span>
<span class='curline'><a href='../S/1173.html#L1250'>u</a>                1250 src/lua/lvm.cpp         i = *(ci-&gt;u.l.savedpc++);  /* go to next instruction */</span>
<span class='curline'><a href='../S/1173.html#L1259'>u</a>                1259 src/lua/lvm.cpp            ci-&gt;u.l.savedpc += GETARG_sBx(i);  /* jump back */</span>
<span class='curline'><a href='../S/1173.html#L1270'>u</a>                1270 src/lua/lvm.cpp           lua_assert(GET_OPCODE(*ci-&gt;u.l.savedpc) == OP_EXTRAARG);</span>
<span class='curline'><a href='../S/1173.html#L1271'>u</a>                1271 src/lua/lvm.cpp           c = GETARG_Ax(*ci-&gt;u.l.savedpc++);</span>
<span class='curline'><a href='../S/919.html#L445'>u</a>                 445 src/menu_events.cpp 	for(auto&amp; u : units()) {</span>
<span class='curline'><a href='../S/919.html#L446'>u</a>                 446 src/menu_events.cpp 		bool invisible = u.invisible(u.get_location(), gui_-&gt;get_disp_context());</span>
<span class='curline'><a href='../S/919.html#L448'>u</a>                 448 src/menu_events.cpp 		if(board().get_team(side_num).is_enemy(u.side()) &amp;&amp; !gui_-&gt;fogged(u.get_location()) &amp;&amp; !u.incapacitated()</span>
<span class='curline'><a href='../S/919.html#L450'>u</a>                 450 src/menu_events.cpp 			const unit_movement_resetter move_reset(u);</span>
<span class='curline'><a href='../S/919.html#L452'>u</a>                 452 src/menu_events.cpp 					= pathfind::paths(u, false, true, teams()[gui_-&gt;viewing_team()], 0, false, ignore_units);</span>
<span class='curline'><a href='../S/955.html#L515'>u</a>                 515 src/mouse_events.cpp 	unit_map::iterator u;</span>
<span class='curline'><a href='../S/955.html#L522'>u</a>                 522 src/mouse_events.cpp 		u = find_unit(selected_hex_);</span>
<span class='curline'><a href='../S/955.html#L526'>u</a>                 526 src/mouse_events.cpp 		if (u &amp;&amp; !browse &amp;&amp; selected_hex_ == hex &amp;&amp; u-&gt;side() == side_num_) {</span>
<span class='curline'><a href='../S/955.html#L527'>u</a>                 527 src/mouse_events.cpp 			u-&gt;set_goto(map_location());</span>
<span class='curline'><a href='../S/955.html#L544'>u</a>                 544 src/mouse_events.cpp 		if (((u.valid() &amp;&amp; u-&gt;side() == side_num_) || pc_.get_whiteboard()-&gt;is_active()) &amp;&amp; clicked_u.valid() ) {</span>
<span class='curline'><a href='../S/955.html#L558'>u</a>                 558 src/mouse_events.cpp 						attack_enemy(u-&gt;get_location(), clicked_u-&gt;get_location(), choice);</span>
<span class='curline'><a href='../S/955.html#L622'>u</a>                 622 src/mouse_events.cpp 					u.valid() &amp;&amp;</span>
<span class='curline'><a href='../S/955.html#L623'>u</a>                 623 src/mouse_events.cpp 					(u-&gt;side() == side_num_ || pc_.get_whiteboard()-&gt;is_active()) &amp;&amp;</span>
<span class='curline'><a href='../S/955.html#L634'>u</a>                 634 src/mouse_events.cpp 					&amp;&amp; !u</span>
<span class='curline'><a href='../S/955.html#L662'>u</a>                 662 src/mouse_events.cpp 					u ? &amp;*u : &amp;*clicked_u )) {</span>
<span class='curline'><a href='../S/955.html#L737'>u</a>                 737 src/mouse_events.cpp 		for(unit_map::iterator u = pc_.gamestate().board_.units_.begin(); u != pc_.gamestate().board_.units_.end(); ++u) {</span>
<span class='curline'><a href='../S/955.html#L738'>u</a>                 738 src/mouse_events.cpp 			bool invisible = u-&gt;invisible(u-&gt;get_location(), gui_-&gt;get_disp_context());</span>
<span class='curline'><a href='../S/955.html#L740'>u</a>                 740 src/mouse_events.cpp 			if (!gui_-&gt;fogged(u-&gt;get_location()) &amp;&amp; !u-&gt;incapacitated() &amp;&amp; !invisible)</span>
<span class='curline'><a href='../S/955.html#L743'>u</a>                 743 src/mouse_events.cpp 				const pathfind::paths&amp; path = pathfind::paths(*u, false, true,</span>
<span class='curline'><a href='../S/955.html#L747'>u</a>                 747 src/mouse_events.cpp 					reaching_unit_locations.destinations.insert(u-&gt;get_location());</span>
<span class='curline'><a href='../S/955.html#L836'>u</a>                 836 src/mouse_events.cpp 		unit_map::const_iterator const u = pc_.gamestate().board_.units().find(steps.front());</span>
<span class='curline'><a href='../S/955.html#L838'>u</a>                 838 src/mouse_events.cpp 		if ( u &amp;&amp;  u-&gt;can_recruit()  &amp;&amp;</span>
<span class='curline'><a href='../S/955.html#L839'>u</a>                 839 src/mouse_events.cpp 		     u-&gt;side() == gui().viewing_side()        &amp;&amp;</span>
<span class='curline'><a href='../S/955.html#L840'>u</a>                 840 src/mouse_events.cpp 		     !pc_.get_whiteboard()-&gt;allow_leader_to_move(*u) )</span>
<span class='curline'><a href='../S/955.html#L1041'>u</a>                1041 src/mouse_events.cpp void mouse_handler::show_attack_options(const unit_map::const_iterator &amp;u)</span>
<span class='curline'><a href='../S/955.html#L1044'>u</a>                1044 src/mouse_events.cpp 	if (u-&gt;attacks_left() == 0)</span>
<span class='curline'><a href='../S/955.html#L1049'>u</a>                1049 src/mouse_events.cpp 	const team &amp; u_team = pc_.gamestate().board_.teams_[u-&gt;side()-1];</span>
<span class='curline'><a href='../S/955.html#L1053'>u</a>                1053 src/mouse_events.cpp 	get_adjacent_tiles(u-&gt;get_location(), adj);</span>
<span class='curline'><a href='../S/17.html#L119'>u</a>                 119 src/mouse_events.hpp 	void show_attack_options(const unit_map::const_iterator &amp;u);</span>
<span class='curline'><a href='../S/849.html#L144'>u</a>                 144 src/pathfind/pathfind.cpp 		const unit *u = resources::gameboard-&gt;get_visible_unit(locs[i], viewing_team, see_all);</span>
<span class='curline'><a href='../S/849.html#L145'>u</a>                 145 src/pathfind/pathfind.cpp 		if ( u  &amp;&amp;  current_team.is_enemy(u-&gt;side())  &amp;&amp;  u-&gt;emits_zoc() )</span>
<span class='curline'><a href='../S/849.html#L518'>u</a>                 518 src/pathfind/pathfind.cpp paths::paths(const unit&amp; u, bool force_ignore_zoc,</span>
<span class='curline'><a href='../S/849.html#L524'>u</a>                 524 src/pathfind/pathfind.cpp 	if (u.side() &lt; 1 || u.side() &gt; int(teams.size())) {</span>
<span class='curline'><a href='../S/849.html#L528'>u</a>                 528 src/pathfind/pathfind.cpp 	find_routes(u.get_location(), u.movement_type().get_movement(),</span>
<span class='curline'><a href='../S/849.html#L529'>u</a>                 529 src/pathfind/pathfind.cpp 	            u.get_state(unit::STATE_SLOWED), u.movement_left(),</span>
<span class='curline'><a href='../S/849.html#L530'>u</a>                 530 src/pathfind/pathfind.cpp 	            u.total_movement(), additional_turns, destinations, nullptr,</span>
<span class='curline'><a href='../S/849.html#L531'>u</a>                 531 src/pathfind/pathfind.cpp 	            allow_teleport ? &amp;u : nullptr,</span>
<span class='curline'><a href='../S/849.html#L532'>u</a>                 532 src/pathfind/pathfind.cpp 	            ignore_units ? nullptr : &amp;teams[u.side()-1],</span>
<span class='curline'><a href='../S/849.html#L533'>u</a>                 533 src/pathfind/pathfind.cpp 	            force_ignore_zoc ? nullptr : &amp;u,</span>
<span class='curline'><a href='../S/849.html#L588'>u</a>                 588 src/pathfind/pathfind.cpp 	const unit_map::const_iterator u = resources::gameboard-&gt;units().find(loc);</span>
<span class='curline'><a href='../S/849.html#L590'>u</a>                 590 src/pathfind/pathfind.cpp 	            destinations, &amp;edges, u.valid() ? &amp;*u : nullptr, nullptr, nullptr, &amp;viewing_team, &amp;jamming_map, nullptr, true);</span>
<span class='curline'><a href='../S/849.html#L634'>u</a>                 634 src/pathfind/pathfind.cpp 	unit const&amp; u = *it;</span>
<span class='curline'><a href='../S/849.html#L637'>u</a>                 637 src/pathfind/pathfind.cpp 	int movement = u.movement_left();</span>
<span class='curline'><a href='../S/849.html#L638'>u</a>                 638 src/pathfind/pathfind.cpp 	const team&amp; unit_team = resources::gameboard-&gt;get_team(u.side());</span>
<span class='curline'><a href='../S/849.html#L648'>u</a>                 648 src/pathfind/pathfind.cpp 		const int move_cost = last_step ? 0 : u.movement_cost((resources::gameboard-&gt;map())[*(i+1)]);</span>
<span class='curline'><a href='../S/849.html#L658'>u</a>                 658 src/pathfind/pathfind.cpp 				 || (viewing_team.is_enemy(u.side()) &amp;&amp; viewing_team.fogged(*i)) );</span>
<span class='curline'><a href='../S/849.html#L662'>u</a>                 662 src/pathfind/pathfind.cpp 			bool invisible = u.invisible(*i, *resources::gameboard, false);</span>
<span class='curline'><a href='../S/849.html#L668'>u</a>                 668 src/pathfind/pathfind.cpp 			movement = u.total_movement();</span>
<span class='curline'><a href='../S/849.html#L675'>u</a>                 675 src/pathfind/pathfind.cpp 					&amp;&amp; !u.get_ability_bool("skirmisher", *(i+1), *resources::gameboard);</span>
<span class='curline'><a href='../S/849.html#L687'>u</a>                 687 src/pathfind/pathfind.cpp shortest_path_calculator::shortest_path_calculator(unit const &amp;u, team const &amp;t,</span>
<span class='curline'><a href='../S/849.html#L690'>u</a>                 690 src/pathfind/pathfind.cpp 	: unit_(u), viewing_team_(t), teams_(teams), map_(map),</span>
<span class='curline'><a href='../S/849.html#L811'>u</a>                 811 src/pathfind/pathfind.cpp emergency_path_calculator::emergency_path_calculator(const unit&amp; u, const gamemap&amp; map)</span>
<span class='curline'><a href='../S/849.html#L812'>u</a>                 812 src/pathfind/pathfind.cpp 	: unit_(u), map_(map)</span>
<span class='curline'><a href='../S/849.html#L843'>u</a>                 843 src/pathfind/pathfind.cpp full_cost_map::full_cost_map(const unit&amp; u, bool force_ignore_zoc,</span>
<span class='curline'><a href='../S/849.html#L851'>u</a>                 851 src/pathfind/pathfind.cpp 	add_unit(u);</span>
<span class='curline'><a href='../S/849.html#L872'>u</a>                 872 src/pathfind/pathfind.cpp void full_cost_map::add_unit(const unit&amp; u, bool use_max_moves)</span>
<span class='curline'><a href='../S/849.html#L875'>u</a>                 875 src/pathfind/pathfind.cpp 	if (u.side() &lt; 1 || u.side() &gt; int(teams.size())) {</span>
<span class='curline'><a href='../S/849.html#L882'>u</a>                 882 src/pathfind/pathfind.cpp 		find_routes(u.get_location(), u.movement_type().get_movement(),</span>
<span class='curline'><a href='../S/849.html#L883'>u</a>                 883 src/pathfind/pathfind.cpp 		            u.get_state(unit::STATE_SLOWED),</span>
<span class='curline'><a href='../S/849.html#L884'>u</a>                 884 src/pathfind/pathfind.cpp 		            (use_max_moves) ? u.total_movement() : u.movement_left(),</span>
<span class='curline'><a href='../S/849.html#L885'>u</a>                 885 src/pathfind/pathfind.cpp 		            u.total_movement(), 99, dummy, nullptr,</span>
<span class='curline'><a href='../S/849.html#L886'>u</a>                 886 src/pathfind/pathfind.cpp 		            allow_teleport_ ? &amp;u : nullptr,</span>
<span class='curline'><a href='../S/849.html#L887'>u</a>                 887 src/pathfind/pathfind.cpp 		            ignore_units_ ? nullptr : &amp;teams[u.side()-1],</span>
<span class='curline'><a href='../S/849.html#L888'>u</a>                 888 src/pathfind/pathfind.cpp 		            force_ignore_zoc_ ? nullptr : &amp;u,</span>
<span class='curline'><a href='../S/849.html#L905'>u</a>                 905 src/pathfind/pathfind.cpp 	unit u(*ut, side, false);</span>
<span class='curline'><a href='../S/849.html#L906'>u</a>                 906 src/pathfind/pathfind.cpp 	u.set_location(origin);</span>
<span class='curline'><a href='../S/849.html#L907'>u</a>                 907 src/pathfind/pathfind.cpp 	add_unit(u);</span>
<span class='curline'><a href='../S/850.html#L78'>u</a>                  78 src/pathfind/pathfind.hpp 	paths(const unit&amp; u,</span>
<span class='curline'><a href='../S/850.html#L205'>u</a>                 205 src/pathfind/pathfind.hpp 	shortest_path_calculator(const unit&amp; u, const team&amp; t,</span>
<span class='curline'><a href='../S/850.html#L242'>u</a>                 242 src/pathfind/pathfind.hpp 	emergency_path_calculator(const unit&amp; u, const gamemap&amp; map);</span>
<span class='curline'><a href='../S/850.html#L256'>u</a>                 256 src/pathfind/pathfind.hpp 	dummy_path_calculator(const unit&amp; u, const gamemap&amp; map);</span>
<span class='curline'><a href='../S/850.html#L269'>u</a>                 269 src/pathfind/pathfind.hpp 	full_cost_map(const unit&amp; u, bool force_ignore_zoc,</span>
<span class='curline'><a href='../S/850.html#L279'>u</a>                 279 src/pathfind/pathfind.hpp 	void add_unit(const unit&amp; u, bool use_max_moves=true);</span>
<span class='curline'><a href='../S/851.html#L109'>u</a>                 109 src/pathfind/teleport.cpp 		, const unit&amp; u</span>
<span class='curline'><a href='../S/851.html#L112'>u</a>                 112 src/pathfind/teleport.cpp 	const map_location &amp;loc = u.get_location();</span>
<span class='curline'><a href='../S/851.html#L125'>u</a>                 125 src/pathfind/teleport.cpp 	if (ufilt.matches(u, loc)) {</span>
<span class='curline'><a href='../S/851.html#L203'>u</a>                 203 src/pathfind/teleport.cpp 				unit_map::iterator u;</span>
<span class='curline'><a href='../S/851.html#L205'>u</a>                 205 src/pathfind/teleport.cpp 					u = resources::gameboard-&gt;units().find(*loc);</span>
<span class='curline'><a href='../S/851.html#L207'>u</a>                 207 src/pathfind/teleport.cpp 					u = resources::gameboard-&gt;find_visible_unit(*loc, viewing_team);</span>
<span class='curline'><a href='../S/851.html#L209'>u</a>                 209 src/pathfind/teleport.cpp 				if (u != resources::gameboard-&gt;units().end()) {</span>
<span class='curline'><a href='../S/851.html#L264'>u</a>                 264 src/pathfind/teleport.cpp const teleport_map get_teleport_locations(const unit &amp;u,</span>
<span class='curline'><a href='../S/851.html#L270'>u</a>                 270 src/pathfind/teleport.cpp 	if (u.get_ability_bool("teleport", *resources::gameboard)) {</span>
<span class='curline'><a href='../S/851.html#L271'>u</a>                 271 src/pathfind/teleport.cpp 		for (const unit_ability &amp; teleport : u.get_abilities("teleport")) {</span>
<span class='curline'><a href='../S/851.html#L283'>u</a>                 283 src/pathfind/teleport.cpp 	return teleport_map(groups, u, viewing_team, see_all, ignore_units, check_vision);</span>
<span class='curline'><a href='../S/852.html#L56'>u</a>                  56 src/pathfind/teleport.hpp 			, const unit&amp; u</span>
<span class='curline'><a href='../S/852.html#L105'>u</a>                 105 src/pathfind/teleport.hpp 			, const unit&amp; u</span>
<span class='curline'><a href='../S/852.html#L152'>u</a>                 152 src/pathfind/teleport.hpp const teleport_map get_teleport_locations(const unit &amp;u, const team &amp;viewing_team,</span>
<span class='curline'><a href='../S/819.html#L357'>u</a>                 357 src/play_controller.cpp 	for (const unit&amp; u : gamestate().board_.units()) {</span>
<span class='curline'><a href='../S/819.html#L358'>u</a>                 358 src/play_controller.cpp 		pump().fire("unit_placed", map_location(u.get_location()));</span>
<span class='curline'><a href='../S/819.html#L563'>u</a>                 563 src/play_controller.cpp 	for (const unit&amp; u : gamestate().board_.units()) {</span>
<span class='curline'><a href='../S/819.html#L564'>u</a>                 564 src/play_controller.cpp 		if (current_team().is_enemy(u.side()) &amp;&amp; !gui_-&gt;fogged(u.get_location())) {</span>
<span class='curline'><a href='../S/819.html#L613'>u</a>                 613 src/play_controller.cpp 		for (const unit&amp; u : gamestate().board_.units()){</span>
<span class='curline'><a href='../S/819.html#L614'>u</a>                 614 src/play_controller.cpp 			const map_location&amp; loc = u.get_location();</span>
<span class='curline'><a href='../S/819.html#L616'>u</a>                 616 src/play_controller.cpp 					!(gamestate().board_.teams()[gui_-&gt;viewing_team()].is_enemy(u.side()) &amp;&amp; u.invisible(loc, gui_-&gt;get_disp_context())))</span>
<span class='curline'><a href='../S/819.html#L617'>u</a>                 617 src/play_controller.cpp 				dictionary.insert(u.name());</span>
<span class='curline'><a href='../S/819.html#L777'>u</a>                 777 src/play_controller.cpp 			const unit_map::iterator u = mouse_handler_.selected_unit();</span>
<span class='curline'><a href='../S/819.html#L779'>u</a>                 779 src/play_controller.cpp 			if(u.valid()) {</span>
<span class='curline'><a href='../S/819.html#L781'>u</a>                 781 src/play_controller.cpp 				unit_movement_resetter move_reset(*u, u-&gt;side() != current_side());</span>
<span class='curline'><a href='../S/819.html#L783'>u</a>                 783 src/play_controller.cpp 				mouse_handler_.set_current_paths(pathfind::paths(*u, false,</span>
<span class='curline'><a href='../S/792.html#L1007'>u</a>                1007 src/preferences/game.cpp 		for (const unit_const_ptr &amp; u : t.recall_list()) {</span>
<span class='curline'><a href='../S/792.html#L1008'>u</a>                1008 src/preferences/game.cpp 			encountered_units_set.insert(u-&gt;type_id());</span>
<span class='curline'><a href='../S/1099.html#L69'>u</a>                  69 src/replay.cpp 		for (const config &amp;u : cfg.child_range("unit"))</span>
<span class='curline'><a href='../S/1099.html#L71'>u</a>                  71 src/replay.cpp 			const map_location loc(u);</span>
<span class='curline'><a href='../S/1099.html#L93'>u</a>                  93 src/replay.cpp 		const unit_map::const_iterator u = units.find(loc);</span>
<span class='curline'><a href='../S/1099.html#L94'>u</a>                  94 src/replay.cpp 		if(u == units.end()) {</span>
<span class='curline'><a href='../S/1099.html#L103'>u</a>                 103 src/replay.cpp 		u-&gt;write(u_cfg);</span>
<span class='curline'><a href='../S/1099.html#L208'>u</a>                 208 src/replay.cpp 	unit_map::const_iterator u = resources::gameboard-&gt;units().find(loc);</span>
<span class='curline'><a href='../S/1099.html#L209'>u</a>                 209 src/replay.cpp 	assert(u.valid());</span>
<span class='curline'><a href='../S/1099.html#L210'>u</a>                 210 src/replay.cpp 	cc["value"] = get_checksum(*u);</span>
<span class='curline'><a href='../S/1099.html#L751'>u</a>                 751 src/replay.cpp 			unit_map::iterator u = resources::gameboard-&gt;units().find(loc);</span>
<span class='curline'><a href='../S/1099.html#L752'>u</a>                 752 src/replay.cpp 			if (u.valid() &amp;&amp; !u-&gt;unrenamable()) {</span>
<span class='curline'><a href='../S/1099.html#L753'>u</a>                 753 src/replay.cpp 				u-&gt;rename(name);</span>
<span class='curline'><a href='../S/1099.html#L762'>u</a>                 762 src/replay.cpp 				   &lt;&lt; loc &lt;&lt; (u.valid() ? ", which is unrenamable" : ", where none exists (anymore)") &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/762.html#L132'>u</a>                 132 src/reports.cpp static config unit_name(const unit *u)</span>
<span class='curline'><a href='../S/762.html#L134'>u</a>                 134 src/reports.cpp 	if (!u) {</span>
<span class='curline'><a href='../S/762.html#L142'>u</a>                 142 src/reports.cpp 	const std::string&amp; name = font::escape_text(u-&gt;name());</span>
<span class='curline'><a href='../S/762.html#L151'>u</a>                 151 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L152'>u</a>                 152 src/reports.cpp 	return unit_name(u);</span>
<span class='curline'><a href='../S/762.html#L156'>u</a>                 156 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L157'>u</a>                 157 src/reports.cpp 	return unit_name(u);</span>
<span class='curline'><a href='../S/762.html#L160'>u</a>                 160 src/reports.cpp static config unit_type(const unit* u)</span>
<span class='curline'><a href='../S/762.html#L162'>u</a>                 162 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L163'>u</a>                 163 src/reports.cpp 	std::string has_variations_prefix = (u-&gt;type().show_variations_in_help() ? ".." : "");</span>
<span class='curline'><a href='../S/762.html#L165'>u</a>                 165 src/reports.cpp 	str &lt;&lt; u-&gt;type_name();</span>
<span class='curline'><a href='../S/762.html#L166'>u</a>                 166 src/reports.cpp 	tooltip &lt;&lt; _("Type: ") &lt;&lt; "&lt;b&gt;" &lt;&lt; u-&gt;type_name() &lt;&lt; "&lt;/b&gt;\n"</span>
<span class='curline'><a href='../S/762.html#L167'>u</a>                 167 src/reports.cpp 		&lt;&lt; u-&gt;unit_description();</span>
<span class='curline'><a href='../S/762.html#L168'>u</a>                 168 src/reports.cpp 	return text_report(str.str(), tooltip.str(), has_variations_prefix + "unit_" + u-&gt;type_id());</span>
<span class='curline'><a href='../S/762.html#L172'>u</a>                 172 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L173'>u</a>                 173 src/reports.cpp 	return unit_type(u);</span>
<span class='curline'><a href='../S/762.html#L177'>u</a>                 177 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L178'>u</a>                 178 src/reports.cpp 	return unit_type(u);</span>
<span class='curline'><a href='../S/762.html#L181'>u</a>                 181 src/reports.cpp static config unit_race(const unit* u)</span>
<span class='curline'><a href='../S/762.html#L183'>u</a>                 183 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L185'>u</a>                 185 src/reports.cpp 	str &lt;&lt; u-&gt;race()-&gt;name(u-&gt;gender());</span>
<span class='curline'><a href='../S/762.html#L186'>u</a>                 186 src/reports.cpp 	tooltip &lt;&lt; _("Race: ") &lt;&lt; "&lt;b&gt;" &lt;&lt; u-&gt;race()-&gt;name(u-&gt;gender()) &lt;&lt; "&lt;/b&gt;";</span>
<span class='curline'><a href='../S/762.html#L187'>u</a>                 187 src/reports.cpp 	return text_report(str.str(), tooltip.str(), "..race_" + u-&gt;race()-&gt;id());</span>
<span class='curline'><a href='../S/762.html#L191'>u</a>                 191 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L192'>u</a>                 192 src/reports.cpp 	return unit_race(u);</span>
<span class='curline'><a href='../S/762.html#L196'>u</a>                 196 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L197'>u</a>                 197 src/reports.cpp 	return unit_race(u);</span>
<span class='curline'><a href='../S/762.html#L200'>u</a>                 200 src/reports.cpp static config unit_side(reports::context &amp; rc, const unit* u)</span>
<span class='curline'><a href='../S/762.html#L202'>u</a>                 202 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L205'>u</a>                 205 src/reports.cpp 	const team &amp;u_team = rc.dc().get_team(u-&gt;side());</span>
<span class='curline'><a href='../S/762.html#L214'>u</a>                 214 src/reports.cpp 	text &lt;&lt; " " &lt;&lt; u-&gt;side();</span>
<span class='curline'><a href='../S/762.html#L222'>u</a>                 222 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L223'>u</a>                 223 src/reports.cpp 	return unit_side(rc,u);</span>
<span class='curline'><a href='../S/762.html#L227'>u</a>                 227 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L228'>u</a>                 228 src/reports.cpp 	return unit_side(rc, u);</span>
<span class='curline'><a href='../S/762.html#L231'>u</a>                 231 src/reports.cpp static config unit_level(const unit* u)</span>
<span class='curline'><a href='../S/762.html#L233'>u</a>                 233 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L235'>u</a>                 235 src/reports.cpp 	str &lt;&lt; u-&gt;level();</span>
<span class='curline'><a href='../S/762.html#L236'>u</a>                 236 src/reports.cpp 	tooltip &lt;&lt; _("Level: ") &lt;&lt; "&lt;b&gt;" &lt;&lt; u-&gt;level() &lt;&lt; "&lt;/b&gt;\n";</span>
<span class='curline'><a href='../S/762.html#L237'>u</a>                 237 src/reports.cpp 	const std::vector&lt;std::string&gt; &amp;adv_to = u-&gt;advances_to_translated();</span>
<span class='curline'><a href='../S/762.html#L247'>u</a>                 247 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L248'>u</a>                 248 src/reports.cpp 	return unit_level(u);</span>
<span class='curline'><a href='../S/762.html#L252'>u</a>                 252 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L253'>u</a>                 253 src/reports.cpp 	return unit_level(u);</span>
<span class='curline'><a href='../S/762.html#L258'>u</a>                 258 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L259'>u</a>                 259 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L262'>u</a>                 262 src/reports.cpp 	for (const pair_string &amp;ps : u-&gt;amla_icons()) {</span>
<span class='curline'><a href='../S/762.html#L268'>u</a>                 268 src/reports.cpp static config unit_traits(const unit* u)</span>
<span class='curline'><a href='../S/762.html#L270'>u</a>                 270 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L272'>u</a>                 272 src/reports.cpp 	const std::vector&lt;t_string&gt; &amp;traits = u-&gt;trait_names();</span>
<span class='curline'><a href='../S/762.html#L273'>u</a>                 273 src/reports.cpp 	const std::vector&lt;t_string&gt; &amp;descriptions = u-&gt;trait_descriptions();</span>
<span class='curline'><a href='../S/762.html#L274'>u</a>                 274 src/reports.cpp 	const std::vector&lt;std::string&gt; &amp;trait_ids = u-&gt;get_traits_list();</span>
<span class='curline'><a href='../S/762.html#L289'>u</a>                 289 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L290'>u</a>                 290 src/reports.cpp 	return unit_traits(u);</span>
<span class='curline'><a href='../S/762.html#L294'>u</a>                 294 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L295'>u</a>                 295 src/reports.cpp 	return unit_traits(u);</span>
<span class='curline'><a href='../S/762.html#L298'>u</a>                 298 src/reports.cpp static config unit_status(reports::context &amp; rc, const unit* u)</span>
<span class='curline'><a href='../S/762.html#L300'>u</a>                 300 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L303'>u</a>                 303 src/reports.cpp 	if (rc.map().on_board(displayed_unit_hex) &amp;&amp; u-&gt;invisible(displayed_unit_hex, rc.dc())) {</span>
<span class='curline'><a href='../S/762.html#L307'>u</a>                 307 src/reports.cpp 	if (u-&gt;get_state(unit::STATE_SLOWED)) {</span>
<span class='curline'><a href='../S/762.html#L311'>u</a>                 311 src/reports.cpp 	if (u-&gt;get_state(unit::STATE_POISONED)) {</span>
<span class='curline'><a href='../S/762.html#L315'>u</a>                 315 src/reports.cpp 	if (u-&gt;get_state(unit::STATE_PETRIFIED)) {</span>
<span class='curline'><a href='../S/762.html#L323'>u</a>                 323 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L324'>u</a>                 324 src/reports.cpp 	return unit_status(rc,u);</span>
<span class='curline'><a href='../S/762.html#L328'>u</a>                 328 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L329'>u</a>                 329 src/reports.cpp 	return unit_status(rc, u);</span>
<span class='curline'><a href='../S/762.html#L332'>u</a>                 332 src/reports.cpp static config unit_alignment(reports::context &amp; rc, const unit* u)</span>
<span class='curline'><a href='../S/762.html#L334'>u</a>                 334 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L336'>u</a>                 336 src/reports.cpp 	const std::string align = unit_type::alignment_description(u-&gt;alignment(), u-&gt;gender());</span>
<span class='curline'><a href='../S/762.html#L337'>u</a>                 337 src/reports.cpp 	const std::string align_id = u-&gt;alignment().to_string();</span>
<span class='curline'><a href='../S/762.html#L338'>u</a>                 338 src/reports.cpp 	int cm = combat_modifier(rc.units(), rc.map(), rc.screen().displayed_unit_hex(), u-&gt;alignment(),</span>
<span class='curline'><a href='../S/762.html#L339'>u</a>                 339 src/reports.cpp 			u-&gt;is_fearless());</span>
<span class='curline'><a href='../S/762.html#L355'>u</a>                 355 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L356'>u</a>                 356 src/reports.cpp 	return unit_alignment(rc, u);</span>
<span class='curline'><a href='../S/762.html#L360'>u</a>                 360 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L361'>u</a>                 361 src/reports.cpp 	return unit_alignment(rc, u);</span>
<span class='curline'><a href='../S/762.html#L365'>u</a>                 365 src/reports.cpp static config unit_abilities(const unit* u)</span>
<span class='curline'><a href='../S/762.html#L367'>u</a>                 367 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L371'>u</a>                 371 src/reports.cpp 	const std::vector&lt;std::tuple&lt;t_string,t_string,t_string&gt; &gt; &amp;abilities = u-&gt;ability_tooltips(&amp;active);</span>
<span class='curline'><a href='../S/762.html#L400'>u</a>                 400 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L401'>u</a>                 401 src/reports.cpp 	return unit_abilities(u);</span>
<span class='curline'><a href='../S/762.html#L405'>u</a>                 405 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L406'>u</a>                 406 src/reports.cpp 	return unit_abilities(u);</span>
<span class='curline'><a href='../S/762.html#L410'>u</a>                 410 src/reports.cpp static config unit_hp(reports::context&amp; rc, const unit* u)</span>
<span class='curline'><a href='../S/762.html#L412'>u</a>                 412 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L414'>u</a>                 414 src/reports.cpp 	str &lt;&lt; span_color(u-&gt;hp_color()) &lt;&lt; u-&gt;hitpoints()</span>
<span class='curline'><a href='../S/762.html#L415'>u</a>                 415 src/reports.cpp 		&lt;&lt; '/' &lt;&lt; u-&gt;max_hitpoints() &lt;&lt; naps;</span>
<span class='curline'><a href='../S/762.html#L421'>u</a>                 421 src/reports.cpp 	for (const utils::string_map::value_type &amp;resist : u-&gt;get_base_resistances())</span>
<span class='curline'><a href='../S/762.html#L426'>u</a>                 426 src/reports.cpp 		int res_att = 100 - u-&gt;resistance_against(resist.first, true, displayed_unit_hex);</span>
<span class='curline'><a href='../S/762.html#L427'>u</a>                 427 src/reports.cpp 		int res_def = 100 - u-&gt;resistance_against(resist.first, false, displayed_unit_hex);</span>
<span class='curline'><a href='../S/762.html#L454'>u</a>                 454 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L455'>u</a>                 455 src/reports.cpp 	return unit_hp(rc, u);</span>
<span class='curline'><a href='../S/762.html#L459'>u</a>                 459 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L460'>u</a>                 460 src/reports.cpp 	return unit_hp(rc, u);</span>
<span class='curline'><a href='../S/762.html#L463'>u</a>                 463 src/reports.cpp static config unit_xp(const unit* u)</span>
<span class='curline'><a href='../S/762.html#L465'>u</a>                 465 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L467'>u</a>                 467 src/reports.cpp 	str &lt;&lt; span_color(u-&gt;xp_color()) &lt;&lt; u-&gt;experience()</span>
<span class='curline'><a href='../S/762.html#L468'>u</a>                 468 src/reports.cpp 		&lt;&lt; '/' &lt;&lt; u-&gt;max_experience() &lt;&lt; naps;</span>
<span class='curline'><a href='../S/762.html#L476'>u</a>                 476 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L477'>u</a>                 477 src/reports.cpp 	return unit_xp(u);</span>
<span class='curline'><a href='../S/762.html#L481'>u</a>                 481 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L482'>u</a>                 482 src/reports.cpp 	return unit_xp(u);</span>
<span class='curline'><a href='../S/762.html#L485'>u</a>                 485 src/reports.cpp static config unit_advancement_options(const unit* u)</span>
<span class='curline'><a href='../S/762.html#L487'>u</a>                 487 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L490'>u</a>                 490 src/reports.cpp 	for (const pair_string &amp;ps : u-&gt;advancement_icons()) {</span>
<span class='curline'><a href='../S/762.html#L497'>u</a>                 497 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L498'>u</a>                 498 src/reports.cpp 	return unit_advancement_options(u);</span>
<span class='curline'><a href='../S/762.html#L502'>u</a>                 502 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L503'>u</a>                 503 src/reports.cpp 	return unit_advancement_options(u);</span>
<span class='curline'><a href='../S/762.html#L506'>u</a>                 506 src/reports.cpp static config unit_defense(reports::context &amp; rc, const unit* u, const map_location&amp; displayed_unit_hex)</span>
<span class='curline'><a href='../S/762.html#L508'>u</a>                 508 src/reports.cpp 	if(!u) {</span>
<span class='curline'><a href='../S/762.html#L519'>u</a>                 519 src/reports.cpp 	int def = 100 - u-&gt;defense_modifier(terrain);</span>
<span class='curline'><a href='../S/762.html#L535'>u</a>                 535 src/reports.cpp 				int t_def = 100 - u-&gt;defense_modifier(t);</span>
<span class='curline'><a href='../S/762.html#L549'>u</a>                 549 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L551'>u</a>                 551 src/reports.cpp 	return unit_defense(rc, u, displayed_unit_hex);</span>
<span class='curline'><a href='../S/762.html#L555'>u</a>                 555 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L557'>u</a>                 557 src/reports.cpp 	return unit_defense(rc, u, selected_hex);</span>
<span class='curline'><a href='../S/762.html#L560'>u</a>                 560 src/reports.cpp static config unit_vision(const unit* u)</span>
<span class='curline'><a href='../S/762.html#L562'>u</a>                 562 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L566'>u</a>                 566 src/reports.cpp 	if (u-&gt;vision() != u-&gt;total_movement()) {</span>
<span class='curline'><a href='../S/762.html#L567'>u</a>                 567 src/reports.cpp 		str &lt;&lt; _("vision: ") &lt;&lt; u-&gt;vision(); }</span>
<span class='curline'><a href='../S/762.html#L572'>u</a>                 572 src/reports.cpp 	const unit* u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L573'>u</a>                 573 src/reports.cpp 	return unit_vision(u);</span>
<span class='curline'><a href='../S/762.html#L577'>u</a>                 577 src/reports.cpp 	const unit* u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L578'>u</a>                 578 src/reports.cpp 	return unit_vision(u);</span>
<span class='curline'><a href='../S/762.html#L581'>u</a>                 581 src/reports.cpp static config unit_moves(reports::context &amp; rc, const unit* u)</span>
<span class='curline'><a href='../S/762.html#L583'>u</a>                 583 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L586'>u</a>                 586 src/reports.cpp 	if (u-&gt;side() == rc.screen().playing_side()) {</span>
<span class='curline'><a href='../S/762.html#L587'>u</a>                 587 src/reports.cpp 		movement_frac = double(u-&gt;movement_left()) / std::max&lt;int&gt;(1, u-&gt;total_movement());</span>
<span class='curline'><a href='../S/762.html#L607'>u</a>                 607 src/reports.cpp 			const int moves = u-&gt;movement_cost(terrain);</span>
<span class='curline'><a href='../S/762.html#L613'>u</a>                 613 src/reports.cpp 			const bool cannot_move = moves &gt; u-&gt;total_movement();</span>
<span class='curline'><a href='../S/762.html#L623'>u</a>                 623 src/reports.cpp 			if(cannot_move &amp;&amp; (moves &gt; u-&gt;total_movement() + 5)) {</span>
<span class='curline'><a href='../S/762.html#L634'>u</a>                 634 src/reports.cpp 	str &lt;&lt; span_color(c) &lt;&lt; u-&gt;movement_left() &lt;&lt; '/' &lt;&lt; u-&gt;total_movement() &lt;&lt; naps;</span>
<span class='curline'><a href='../S/762.html#L639'>u</a>                 639 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L640'>u</a>                 640 src/reports.cpp 	return unit_moves(rc, u);</span>
<span class='curline'><a href='../S/762.html#L644'>u</a>                 644 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L645'>u</a>                 645 src/reports.cpp 	return unit_moves(rc, u);</span>
<span class='curline'><a href='../S/762.html#L648'>u</a>                 648 src/reports.cpp static int attack_info(reports::context &amp; rc, const attack_type &amp;at, config &amp;res, const unit &amp;u, const map_location &amp;displayed_unit_hex)</span>
<span class='curline'><a href='../S/762.html#L652'>u</a>                 652 src/reports.cpp 	at.set_specials_context(displayed_unit_hex, u.side() == rc.screen().playing_side());</span>
<span class='curline'><a href='../S/762.html#L656'>u</a>                 656 src/reports.cpp 	int tod_bonus = combat_modifier(rc.units(), rc.map(), displayed_unit_hex, u.alignment(), u.is_fearless());</span>
<span class='curline'><a href='../S/762.html#L662'>u</a>                 662 src/reports.cpp 	bool slowed = u.get_state(unit::STATE_SLOWED);</span>
<span class='curline'><a href='../S/762.html#L668'>u</a>                 668 src/reports.cpp 	unsigned max_hp = u.max_hitpoints();</span>
<span class='curline'><a href='../S/762.html#L669'>u</a>                 669 src/reports.cpp 	unsigned cur_hp = std::min&lt;unsigned&gt;(std::max(0, u.hitpoints()), max_hp);</span>
<span class='curline'><a href='../S/762.html#L756'>u</a>                 756 src/reports.cpp 	const team &amp;unit_team = rc.dc().get_team(u.side());</span>
<span class='curline'><a href='../S/762.html#L848'>u</a>                 848 src/reports.cpp 	const unit* u = show_attacker ? attacker : defender;</span>
<span class='curline'><a href='../S/762.html#L881'>u</a>                 881 src/reports.cpp 			base_damage = attack_info(rc, *context_unit_stats.weapon, res, *u, unit_loc);</span>
<span class='curline'><a href='../S/762.html#L951'>u</a>                 951 src/reports.cpp 					&lt;&lt; span_color(u-&gt;hp_color(hp)) &lt;&lt; format_hp(hp) &lt;&lt; naps</span>
<span class='curline'><a href='../S/762.html#L962'>u</a>                 962 src/reports.cpp static config unit_weapons(reports::context &amp; rc, const unit *u)</span>
<span class='curline'><a href='../S/762.html#L964'>u</a>                 964 src/reports.cpp 	if (!u || u-&gt;attacks().empty()) return config();</span>
<span class='curline'><a href='../S/762.html#L975'>u</a>                 975 src/reports.cpp 	for (const attack_type &amp;at : u-&gt;attacks())</span>
<span class='curline'><a href='../S/762.html#L977'>u</a>                 977 src/reports.cpp 		attack_info(rc, at, res, *u, displayed_unit_hex);</span>
<span class='curline'><a href='../S/762.html#L983'>u</a>                 983 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L984'>u</a>                 984 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L986'>u</a>                 986 src/reports.cpp 	return unit_weapons(rc, u);</span>
<span class='curline'><a href='../S/762.html#L990'>u</a>                 990 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L993'>u</a>                 993 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L994'>u</a>                 994 src/reports.cpp 	if (!sec_u || u == sec_u) return unit_weapons(rc, sec_u);</span>
<span class='curline'><a href='../S/762.html#L1004'>u</a>                1004 src/reports.cpp 	return unit_weapons(rc, u, attack_loc, sec_u, false);</span>
<span class='curline'><a href='../S/762.html#L1008'>u</a>                1008 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L1011'>u</a>                1011 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L1012'>u</a>                1012 src/reports.cpp 	if (!sec_u || u == sec_u) return unit_weapons(rc, u);</span>
<span class='curline'><a href='../S/762.html#L1020'>u</a>                1020 src/reports.cpp 		return unit_weapons(rc, u);</span>
<span class='curline'><a href='../S/762.html#L1022'>u</a>                1022 src/reports.cpp 	return unit_weapons(rc, u, attack_loc, sec_u, true);</span>
<span class='curline'><a href='../S/762.html#L1027'>u</a>                1027 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L1028'>u</a>                1028 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L1029'>u</a>                1029 src/reports.cpp 	return image_report(u-&gt;absolute_image() + u-&gt;image_mods());</span>
<span class='curline'><a href='../S/762.html#L1033'>u</a>                1033 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L1034'>u</a>                1034 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L1035'>u</a>                1035 src/reports.cpp 	return image_report(u-&gt;absolute_image() + u-&gt;image_mods());</span>
<span class='curline'><a href='../S/762.html#L1040'>u</a>                1040 src/reports.cpp 	const unit *u = get_selected_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L1041'>u</a>                1041 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L1042'>u</a>                1042 src/reports.cpp 	return image_report(u-&gt;small_profile());</span>
<span class='curline'><a href='../S/762.html#L1046'>u</a>                1046 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L1047'>u</a>                1047 src/reports.cpp 	if (!u) return config();</span>
<span class='curline'><a href='../S/762.html#L1048'>u</a>                1048 src/reports.cpp 	return image_report(u-&gt;small_profile());</span>
<span class='curline'><a href='../S/762.html#L1194'>u</a>                1194 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L1196'>u</a>                1196 src/reports.cpp 	if (u)</span>
<span class='curline'><a href='../S/762.html#L1197'>u</a>                1197 src/reports.cpp 		unit_image = "~BLIT(" + u-&gt;absolute_image() + u-&gt;image_mods() + ",35,22)";</span>
<span class='curline'><a href='../S/762.html#L1440'>u</a>                1440 src/reports.cpp 	const unit *u = get_visible_unit(rc);</span>
<span class='curline'><a href='../S/762.html#L1442'>u</a>                1442 src/reports.cpp 	if (!u ||</span>
<span class='curline'><a href='../S/762.html#L1448'>u</a>                1448 src/reports.cpp 	int move_cost = u-&gt;movement_cost(terrain);</span>
<span class='curline'><a href='../S/762.html#L1449'>u</a>                1449 src/reports.cpp 	int defense = 100 - u-&gt;defense_modifier(terrain);</span>
<span class='curline'><a href='../S/929.html#L387'>u</a>                 387 src/save_index.cpp 			for(const config &amp;u : side.child_range("unit")) {</span>
<span class='curline'><a href='../S/929.html#L388'>u</a>                 388 src/save_index.cpp 				if(u.has_attribute("x") &amp;&amp; u.has_attribute("y")) {</span>
<span class='curline'><a href='../S/929.html#L395'>u</a>                 395 src/save_index.cpp 				if(!leader.empty() || !u["canrecruit"].to_bool()) {</span>
<span class='curline'><a href='../S/929.html#L401'>u</a>                 401 src/save_index.cpp 				leader = u["id"].str();</span>
<span class='curline'><a href='../S/929.html#L402'>u</a>                 402 src/save_index.cpp 				leader_name = u["name"].str();</span>
<span class='curline'><a href='../S/929.html#L403'>u</a>                 403 src/save_index.cpp 				leader_image = u["image"].str();</span>
<span class='curline'><a href='../S/929.html#L404'>u</a>                 404 src/save_index.cpp 				leader_image_tc_modifier = "~RC(" + u["flag_rgb"].str() + "&gt;" + u["side"].str() + ")";</span>
<span class='curline'><a href='../S/185.html#L346'>u</a>                 346 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 2);</span>
<span class='curline'><a href='../S/185.html#L363'>u</a>                 363 src/scripting/game_lua_kernel.cpp 			if(dest == u.get_location()) {</span>
<span class='curline'><a href='../S/185.html#L365'>u</a>                 365 src/scripting/game_lua_kernel.cpp 			} else if(!tiles_adjacent(dest, u.get_location())) {</span>
<span class='curline'><a href='../S/185.html#L440'>u</a>                 440 src/scripting/game_lua_kernel.cpp 	anim.add_animation(&amp;u, which, u.get_location(), dest, v1, bars, text, color, hits, primary, secondary, v2);</span>
<span class='curline'><a href='../S/185.html#L507'>u</a>                 507 src/scripting/game_lua_kernel.cpp 		for(const unit&amp; u : units()) {</span>
<span class='curline'><a href='../S/185.html#L508'>u</a>                 508 src/scripting/game_lua_kernel.cpp 			if(u.id() == id) {</span>
<span class='curline'><a href='../S/185.html#L509'>u</a>                 509 src/scripting/game_lua_kernel.cpp 				luaW_pushunit(L, u.underlying_id());</span>
<span class='curline'><a href='../S/185.html#L582'>u</a>                 582 src/scripting/game_lua_kernel.cpp 	lua_unit&amp; u = *luaW_checkunit_ref(L, 1);</span>
<span class='curline'><a href='../S/185.html#L594'>u</a>                 594 src/scripting/game_lua_kernel.cpp 		if(int side = u.on_recall_list()) {</span>
<span class='curline'><a href='../S/185.html#L599'>u</a>                 599 src/scripting/game_lua_kernel.cpp 			scoped_recall_unit auto_store("this_unit", t.save_id(), t.recall_list().find_index(u-&gt;id()));</span>
<span class='curline'><a href='../S/185.html#L600'>u</a>                 600 src/scripting/game_lua_kernel.cpp 			lua_pushboolean(L, unit_filter(filter, &amp;fc).matches(*u, map_location()));</span>
<span class='curline'><a href='../S/185.html#L606'>u</a>                 606 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, unit_filter(filter, &amp;fc).matches(*u, *u_adj));</span>
<span class='curline'><a href='../S/185.html#L607'>u</a>                 607 src/scripting/game_lua_kernel.cpp 	} else if(int side = u.on_recall_list()) {</span>
<span class='curline'><a href='../S/185.html#L611'>u</a>                 611 src/scripting/game_lua_kernel.cpp 		scoped_recall_unit auto_store("this_unit", t.save_id(), t.recall_list().find_index(u-&gt;id()));</span>
<span class='curline'><a href='../S/185.html#L612'>u</a>                 612 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, unit_filter(filter, &amp;fc).matches(*u, loc));</span>
<span class='curline'><a href='../S/185.html#L615'>u</a>                 615 src/scripting/game_lua_kernel.cpp 		map_location loc = u-&gt;get_location();</span>
<span class='curline'><a href='../S/185.html#L617'>u</a>                 617 src/scripting/game_lua_kernel.cpp 		lua_pushboolean(L, unit_filter(filter, &amp;fc).matches(*u, loc));</span>
<span class='curline'><a href='../S/185.html#L641'>u</a>                 641 src/scripting/game_lua_kernel.cpp 		for (unit_ptr &amp; u : t.recall_list())</span>
<span class='curline'><a href='../S/185.html#L645'>u</a>                 645 src/scripting/game_lua_kernel.cpp 					t.save_id(), t.recall_list().find_index(u-&gt;id()));</span>
<span class='curline'><a href='../S/185.html#L646'>u</a>                 646 src/scripting/game_lua_kernel.cpp 				if (!ufilt( *u, map_location() ))</span>
<span class='curline'><a href='../S/185.html#L649'>u</a>                 649 src/scripting/game_lua_kernel.cpp 			luaW_pushunit(L, s, u-&gt;underlying_id());</span>
<span class='curline'><a href='../S/185.html#L1558'>u</a>                1558 src/scripting/game_lua_kernel.cpp 	const unit* u = nullptr;</span>
<span class='curline'><a href='../S/185.html#L1562'>u</a>                1562 src/scripting/game_lua_kernel.cpp 		u = &amp;luaW_checkunit(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1563'>u</a>                1563 src/scripting/game_lua_kernel.cpp 		src = u-&gt;get_location();</span>
<span class='curline'><a href='../S/185.html#L1571'>u</a>                1571 src/scripting/game_lua_kernel.cpp 			u = ui.get_shared_ptr().get();</span>
<span class='curline'><a href='../S/185.html#L1625'>u</a>                1625 src/scripting/game_lua_kernel.cpp 		if (!u) return luaL_argerror(L, 1, "unit not found");</span>
<span class='curline'><a href='../S/185.html#L1629'>u</a>                1629 src/scripting/game_lua_kernel.cpp 			: board().get_team(u-&gt;side());</span>
<span class='curline'><a href='../S/185.html#L1633'>u</a>                1633 src/scripting/game_lua_kernel.cpp 				*u, viewing_team, see_all, ignore_units);</span>
<span class='curline'><a href='../S/185.html#L1635'>u</a>                1635 src/scripting/game_lua_kernel.cpp 		calc.reset(new pathfind::shortest_path_calculator(*u, viewing_team,</span>
<span class='curline'><a href='../S/185.html#L1667'>u</a>                1667 src/scripting/game_lua_kernel.cpp 	const unit* u = nullptr;</span>
<span class='curline'><a href='../S/185.html#L1671'>u</a>                1671 src/scripting/game_lua_kernel.cpp 		u = &amp;luaW_checkunit(L, arg);</span>
<span class='curline'><a href='../S/185.html#L1680'>u</a>                1680 src/scripting/game_lua_kernel.cpp 		u = ui.get_shared_ptr().get();</span>
<span class='curline'><a href='../S/185.html#L1717'>u</a>                1717 src/scripting/game_lua_kernel.cpp 		: board().get_team(u-&gt;side());</span>
<span class='curline'><a href='../S/185.html#L1719'>u</a>                1719 src/scripting/game_lua_kernel.cpp 	pathfind::paths res(*u, ignore_units, !ignore_teleport,</span>
<span class='curline'><a href='../S/185.html#L1910'>u</a>                1910 src/scripting/game_lua_kernel.cpp 	for (const ::unit* const u : real_units)</span>
<span class='curline'><a href='../S/185.html#L1912'>u</a>                1912 src/scripting/game_lua_kernel.cpp 		cost_map.add_unit(*u, use_max_moves);</span>
<span class='curline'><a href='../S/185.html#L2039'>u</a>                2039 src/scripting/game_lua_kernel.cpp 		lua_unit&amp; u = *luaW_checkunit_ref(L, unit_arg);</span>
<span class='curline'><a href='../S/185.html#L2040'>u</a>                2040 src/scripting/game_lua_kernel.cpp 		if(u.on_map() &amp;&amp; u-&gt;get_location() == loc) {</span>
<span class='curline'><a href='../S/185.html#L2044'>u</a>                2044 src/scripting/game_lua_kernel.cpp 			loc = u-&gt;get_location();</span>
<span class='curline'><a href='../S/185.html#L2051'>u</a>                2051 src/scripting/game_lua_kernel.cpp 		u.put_map(loc);</span>
<span class='curline'><a href='../S/185.html#L2052'>u</a>                2052 src/scripting/game_lua_kernel.cpp 		u.get_shared()-&gt;anim_comp().set_standing();</span>
<span class='curline'><a href='../S/185.html#L2064'>u</a>                2064 src/scripting/game_lua_kernel.cpp 		unit_ptr u(new unit(cfg, true, vcfg));</span>
<span class='curline'><a href='../S/185.html#L2066'>u</a>                2066 src/scripting/game_lua_kernel.cpp 		u-&gt;set_location(loc);</span>
<span class='curline'><a href='../S/185.html#L2067'>u</a>                2067 src/scripting/game_lua_kernel.cpp 		units().insert(u);</span>
<span class='curline'><a href='../S/185.html#L2092'>u</a>                2092 src/scripting/game_lua_kernel.cpp 		lua_unit&amp; u = *luaW_checkunit_ref(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2093'>u</a>                2093 src/scripting/game_lua_kernel.cpp 		if (u.on_map()) {</span>
<span class='curline'><a href='../S/185.html#L2094'>u</a>                2094 src/scripting/game_lua_kernel.cpp 			loc = u-&gt;get_location();</span>
<span class='curline'><a href='../S/185.html#L2098'>u</a>                2098 src/scripting/game_lua_kernel.cpp 		} else if (int side = u.on_recall_list()) {</span>
<span class='curline'><a href='../S/185.html#L2101'>u</a>                2101 src/scripting/game_lua_kernel.cpp 			t.recall_list().erase_if_matches_id(u-&gt;id());</span>
<span class='curline'><a href='../S/185.html#L2135'>u</a>                2135 src/scripting/game_lua_kernel.cpp 	unit_ptr u = unit_ptr();</span>
<span class='curline'><a href='../S/185.html#L2141'>u</a>                2141 src/scripting/game_lua_kernel.cpp 		u = lu-&gt;get_shared();</span>
<span class='curline'><a href='../S/185.html#L2148'>u</a>                2148 src/scripting/game_lua_kernel.cpp 		u = unit_ptr(new unit(cfg, true, vcfg));</span>
<span class='curline'><a href='../S/185.html#L2152'>u</a>                2152 src/scripting/game_lua_kernel.cpp 		side = u-&gt;side();</span>
<span class='curline'><a href='../S/185.html#L2154'>u</a>                2154 src/scripting/game_lua_kernel.cpp 		u-&gt;set_side(side);</span>
<span class='curline'><a href='../S/185.html#L2158'>u</a>                2158 src/scripting/game_lua_kernel.cpp 	size_t uid = u-&gt;underlying_id();</span>
<span class='curline'><a href='../S/185.html#L2160'>u</a>                2160 src/scripting/game_lua_kernel.cpp 	t.recall_list().add(u);</span>
<span class='curline'><a href='../S/185.html#L2163'>u</a>                2163 src/scripting/game_lua_kernel.cpp 			units().erase(u-&gt;get_location());</span>
<span class='curline'><a href='../S/185.html#L2181'>u</a>                2181 src/scripting/game_lua_kernel.cpp 	unit_ptr u = lu-&gt;get_shared();</span>
<span class='curline'><a href='../S/185.html#L2184'>u</a>                2184 src/scripting/game_lua_kernel.cpp 		u = units().extract(u-&gt;get_location());</span>
<span class='curline'><a href='../S/185.html#L2185'>u</a>                2185 src/scripting/game_lua_kernel.cpp 		assert(u);</span>
<span class='curline'><a href='../S/185.html#L2186'>u</a>                2186 src/scripting/game_lua_kernel.cpp 		u-&gt;anim_comp().clear_haloes();</span>
<span class='curline'><a href='../S/185.html#L2189'>u</a>                2189 src/scripting/game_lua_kernel.cpp 		unit_ptr v = unit_ptr(new unit(*u));</span>
<span class='curline'><a href='../S/185.html#L2190'>u</a>                2190 src/scripting/game_lua_kernel.cpp 		t.recall_list().erase_if_matches_id(u-&gt;id());</span>
<span class='curline'><a href='../S/185.html#L2191'>u</a>                2191 src/scripting/game_lua_kernel.cpp 		u = v;</span>
<span class='curline'><a href='../S/185.html#L2197'>u</a>                2197 src/scripting/game_lua_kernel.cpp 	new(lu) lua_unit(u);</span>
<span class='curline'><a href='../S/185.html#L2211'>u</a>                2211 src/scripting/game_lua_kernel.cpp 	unit_ptr u;</span>
<span class='curline'><a href='../S/185.html#L2214'>u</a>                2214 src/scripting/game_lua_kernel.cpp 			u = luaW_checkunit_ptr(L, 2, false);</span>
<span class='curline'><a href='../S/185.html#L2218'>u</a>                2218 src/scripting/game_lua_kernel.cpp 			u.reset(new unit(cfg, false, vcfg));</span>
<span class='curline'><a href='../S/185.html#L2222'>u</a>                2222 src/scripting/game_lua_kernel.cpp 	map_location res = find_vacant_tile(loc, pathfind::VACANT_ANY, u.get());</span>
<span class='curline'><a href='../S/185.html#L2261'>u</a>                2261 src/scripting/game_lua_kernel.cpp 	unit_ptr u = unit_ptr(new unit(cfg, true, vcfg));</span>
<span class='curline'><a href='../S/185.html#L2262'>u</a>                2262 src/scripting/game_lua_kernel.cpp 	luaW_pushunit(L, u);</span>
<span class='curline'><a href='../S/185.html#L2273'>u</a>                2273 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2274'>u</a>                2274 src/scripting/game_lua_kernel.cpp 	luaW_pushunit(L, unit_ptr(new unit(u)));</span>
<span class='curline'><a href='../S/185.html#L2288'>u</a>                2288 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2292'>u</a>                2292 src/scripting/game_lua_kernel.cpp 	map_location loc = u.get_location();</span>
<span class='curline'><a href='../S/185.html#L2297'>u</a>                2297 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, u.resistance_against(m, a, loc));</span>
<span class='curline'><a href='../S/185.html#L2309'>u</a>                2309 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2312'>u</a>                2312 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, u.movement_cost(t));</span>
<span class='curline'><a href='../S/185.html#L2324'>u</a>                2324 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2327'>u</a>                2327 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, u.vision_cost(t));</span>
<span class='curline'><a href='../S/185.html#L2339'>u</a>                2339 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2342'>u</a>                2342 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, u.jamming_cost(t));</span>
<span class='curline'><a href='../S/185.html#L2354'>u</a>                2354 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2357'>u</a>                2357 src/scripting/game_lua_kernel.cpp 	lua_pushinteger(L, u.defense_modifier(t));</span>
<span class='curline'><a href='../S/185.html#L2369'>u</a>                2369 src/scripting/game_lua_kernel.cpp 	const unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2371'>u</a>                2371 src/scripting/game_lua_kernel.cpp 	lua_pushboolean(L, u.get_ability_bool(m, board()));</span>
<span class='curline'><a href='../S/185.html#L2382'>u</a>                2382 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L2386'>u</a>                2386 src/scripting/game_lua_kernel.cpp 	u.advance_to(*utp);</span>
<span class='curline'><a href='../S/185.html#L3068'>u</a>                3068 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3087'>u</a>                3087 src/scripting/game_lua_kernel.cpp 	u.add_modification(sm, cfg, !write_to_mods);</span>
<span class='curline'><a href='../S/185.html#L3099'>u</a>                3099 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 1);</span>
<span class='curline'><a href='../S/185.html#L3104'>u</a>                3104 src/scripting/game_lua_kernel.cpp 		u.expire_modifications(filter["duration"]);</span>
<span class='curline'><a href='../S/185.html#L3106'>u</a>                3106 src/scripting/game_lua_kernel.cpp 		for(config&amp; obj : u.get_modifications().child_range(tag)) {</span>
<span class='curline'><a href='../S/185.html#L3111'>u</a>                3111 src/scripting/game_lua_kernel.cpp 		u.expire_modifications("now");</span>
<span class='curline'><a href='../S/185.html#L3125'>u</a>                3125 src/scripting/game_lua_kernel.cpp 	unit&amp; u = luaW_checkunit(L, 1, true);</span>
<span class='curline'><a href='../S/185.html#L3126'>u</a>                3126 src/scripting/game_lua_kernel.cpp 	advance_unit_params par(u.get_location());</span>
<span class='curline'><a href='../S/185.html#L3689'>u</a>                3689 src/scripting/game_lua_kernel.cpp 	unit_ptr u = luaW_checkunit_ptr(L, 1, true);</span>
<span class='curline'><a href='../S/185.html#L3695'>u</a>                3695 src/scripting/game_lua_kernel.cpp 	if (dst == u-&gt;get_location() || !map().on_board(dst)) {</span>
<span class='curline'><a href='../S/185.html#L3698'>u</a>                3698 src/scripting/game_lua_kernel.cpp 	const map_location vacant_dst = find_vacant_tile(dst, pathfind::VACANT_ANY, check_passability ? u.get() : nullptr);</span>
<span class='curline'><a href='../S/185.html#L3705'>u</a>                3705 src/scripting/game_lua_kernel.cpp 		clearer.clear_dest(vacant_dst, *u);</span>
<span class='curline'><a href='../S/185.html#L3708'>u</a>                3708 src/scripting/game_lua_kernel.cpp 	map_location src_loc = u-&gt;get_location();</span>
<span class='curline'><a href='../S/185.html#L3713'>u</a>                3713 src/scripting/game_lua_kernel.cpp 	unit_display::move_unit(teleport_path, u, animate);</span>
<span class='curline'><a href='../S/185.html#L3718'>u</a>                3718 src/scripting/game_lua_kernel.cpp 	u = &amp;*units().find(vacant_dst);</span>
<span class='curline'><a href='../S/185.html#L3719'>u</a>                3719 src/scripting/game_lua_kernel.cpp 	u-&gt;anim_comp().set_standing();</span>
<span class='curline'><a href='../S/185.html#L3723'>u</a>                3723 src/scripting/game_lua_kernel.cpp 		clearer.clear_unit(vacant_dst, *u);</span>
<span class='curline'><a href='../S/185.html#L3727'>u</a>                3727 src/scripting/game_lua_kernel.cpp 		actions::get_village(vacant_dst, u-&gt;side());</span>
<span class='curline'><a href='../S/185.html#L4347'>u</a>                4347 src/scripting/game_lua_kernel.cpp 	lua_unit u(luaW_checkunit(L, 2));</span>
<span class='curline'><a href='../S/185.html#L4355'>u</a>                4355 src/scripting/game_lua_kernel.cpp 		u-&gt;apply_builtin_effect(which_effect, cfg);</span>
<span class='curline'><a href='../S/185.html#L4358'>u</a>                4358 src/scripting/game_lua_kernel.cpp 		std::string description = u-&gt;describe_builtin_effect(which_effect, cfg);</span>
<span class='curline'><a href='../S/185.html#L4512'>u</a>                4512 src/scripting/game_lua_kernel.cpp bool game_lua_kernel::run_filter(char const *name, unit const &amp;u)</span>
<span class='curline'><a href='../S/185.html#L4515'>u</a>                4515 src/scripting/game_lua_kernel.cpp 	unit_map::const_unit_iterator ui = units().find(u.get_location());</span>
<span class='curline'><a href='../S/185.html#L4548'>u</a>                4548 src/scripting/game_lua_kernel.cpp std::string game_lua_kernel::apply_effect(const std::string&amp; name, unit&amp; u, const config&amp; cfg, bool need_apply)</span>
<span class='curline'><a href='../S/185.html#L4554'>u</a>                4554 src/scripting/game_lua_kernel.cpp 	lua_unit* lu = luaW_pushlocalunit(L, u);</span>
<span class='curline'><a href='../S/187.html#L198'>u</a>                 198 src/scripting/game_lua_kernel.hpp 	std::string apply_effect(const std::string&amp; name, unit&amp; u, const config&amp; cfg, bool need_apply);</span>
<span class='curline'><a href='../S/187.html#L208'>u</a>                 208 src/scripting/game_lua_kernel.hpp 	bool run_filter(char const *name, unit const &amp;u);</span>
<span class='curline'><a href='../S/198.html#L76'>u</a>                  76 src/scripting/lua_audio.cpp 	lua_music_track* u = get_track(L, 1);</span>
<span class='curline'><a href='../S/198.html#L77'>u</a>                  77 src/scripting/lua_audio.cpp 	u-&gt;lua_music_track::~lua_music_track();</span>
<span class='curline'><a href='../S/192.html#L144'>u</a>                 144 src/scripting/lua_formula_bridge.cpp 			const unit&amp; u = u_ref-&gt;get_unit();</span>
<span class='curline'><a href='../S/192.html#L145'>u</a>                 145 src/scripting/lua_formula_bridge.cpp 			unit_map::iterator un_it = resources::gameboard-&gt;units().find(u.get_location());</span>
<span class='curline'><a href='../S/192.html#L146'>u</a>                 146 src/scripting/lua_formula_bridge.cpp 			if(&amp;*un_it == &amp;u) {</span>
<span class='curline'><a href='../S/192.html#L147'>u</a>                 147 src/scripting/lua_formula_bridge.cpp 				luaW_pushunit(L, u.underlying_id());</span>
<span class='curline'><a href='../S/192.html#L149'>u</a>                 149 src/scripting/lua_formula_bridge.cpp 				luaW_pushunit(L, u.side(), u.underlying_id());</span>
<span class='curline'><a href='../S/192.html#L191'>u</a>                 191 src/scripting/lua_formula_bridge.cpp 			} else if(unit* u = luaW_tounit(L, i)) {</span>
<span class='curline'><a href='../S/192.html#L192'>u</a>                 192 src/scripting/lua_formula_bridge.cpp 				return variant(std::make_shared&lt;unit_callable&gt;(*u));</span>
<span class='curline'><a href='../S/192.html#L218'>u</a>                 218 src/scripting/lua_formula_bridge.cpp 	if(unit* u = luaW_tounit(L, 2)) {</span>
<span class='curline'><a href='../S/192.html#L219'>u</a>                 219 src/scripting/lua_formula_bridge.cpp 		context.reset(new unit_callable(*u));</span>
<span class='curline'><a href='../S/184.html#L555'>u</a>                 555 src/scripting/lua_gui2.cpp 		} else if(unit* u = luaW_tounit(L, 1)) {</span>
<span class='curline'><a href='../S/184.html#L556'>u</a>                 556 src/scripting/lua_gui2.cpp 			unit_preview_pane-&gt;set_displayed_unit(*u);</span>
<span class='curline'><a href='../S/190.html#L207'>u</a>                 207 src/scripting/lua_unit.cpp lua_unit* luaW_pushlocalunit(lua_State *L, unit&amp; u)</span>
<span class='curline'><a href='../S/190.html#L209'>u</a>                 209 src/scripting/lua_unit.cpp 	lua_unit* res = new(L) lua_unit(u);</span>
<span class='curline'><a href='../S/190.html#L219'>u</a>                 219 src/scripting/lua_unit.cpp 	lua_unit *u = static_cast&lt;lua_unit *&gt;(lua_touserdata(L, 1));</span>
<span class='curline'><a href='../S/190.html#L220'>u</a>                 220 src/scripting/lua_unit.cpp 	u-&gt;lua_unit::~lua_unit();</span>
<span class='curline'><a href='../S/190.html#L266'>u</a>                 266 src/scripting/lua_unit.cpp 	unit const &amp;u = *pu;</span>
<span class='curline'><a href='../S/190.html#L269'>u</a>                 269 src/scripting/lua_unit.cpp 	return_int_attrib("x", u.get_location().wml_x());</span>
<span class='curline'><a href='../S/190.html#L270'>u</a>                 270 src/scripting/lua_unit.cpp 	return_int_attrib("y", u.get_location().wml_y());</span>
<span class='curline'><a href='../S/190.html#L272'>u</a>                 272 src/scripting/lua_unit.cpp 		lua_pushinteger(L, u.get_location().wml_x());</span>
<span class='curline'><a href='../S/190.html#L273'>u</a>                 273 src/scripting/lua_unit.cpp 		lua_pushinteger(L, u.get_location().wml_y());</span>
<span class='curline'><a href='../S/190.html#L276'>u</a>                 276 src/scripting/lua_unit.cpp 	return_int_attrib("side", u.side());</span>
<span class='curline'><a href='../S/190.html#L277'>u</a>                 277 src/scripting/lua_unit.cpp 	return_string_attrib("id", u.id());</span>
<span class='curline'><a href='../S/190.html#L278'>u</a>                 278 src/scripting/lua_unit.cpp 	return_string_attrib("type", u.type_id());</span>
<span class='curline'><a href='../S/190.html#L279'>u</a>                 279 src/scripting/lua_unit.cpp 	return_string_attrib("image_mods", u.effect_image_mods());</span>
<span class='curline'><a href='../S/190.html#L280'>u</a>                 280 src/scripting/lua_unit.cpp 	return_string_attrib("usage", u.usage());</span>
<span class='curline'><a href='../S/190.html#L281'>u</a>                 281 src/scripting/lua_unit.cpp 	return_int_attrib("hitpoints", u.hitpoints());</span>
<span class='curline'><a href='../S/190.html#L282'>u</a>                 282 src/scripting/lua_unit.cpp 	return_int_attrib("max_hitpoints", u.max_hitpoints());</span>
<span class='curline'><a href='../S/190.html#L283'>u</a>                 283 src/scripting/lua_unit.cpp 	return_int_attrib("experience", u.experience());</span>
<span class='curline'><a href='../S/190.html#L284'>u</a>                 284 src/scripting/lua_unit.cpp 	return_int_attrib("max_experience", u.max_experience());</span>
<span class='curline'><a href='../S/190.html#L285'>u</a>                 285 src/scripting/lua_unit.cpp 	return_int_attrib("recall_cost", u.recall_cost());</span>
<span class='curline'><a href='../S/190.html#L286'>u</a>                 286 src/scripting/lua_unit.cpp 	return_int_attrib("moves", u.movement_left());</span>
<span class='curline'><a href='../S/190.html#L287'>u</a>                 287 src/scripting/lua_unit.cpp 	return_int_attrib("max_moves", u.total_movement());</span>
<span class='curline'><a href='../S/190.html#L288'>u</a>                 288 src/scripting/lua_unit.cpp 	return_int_attrib("max_attacks", u.max_attacks());</span>
<span class='curline'><a href='../S/190.html#L289'>u</a>                 289 src/scripting/lua_unit.cpp 	return_int_attrib("attacks_left", u.attacks_left());</span>
<span class='curline'><a href='../S/190.html#L290'>u</a>                 290 src/scripting/lua_unit.cpp 	return_tstring_attrib("name", u.name());</span>
<span class='curline'><a href='../S/190.html#L291'>u</a>                 291 src/scripting/lua_unit.cpp 	return_bool_attrib("canrecruit", u.can_recruit());</span>
<span class='curline'><a href='../S/190.html#L292'>u</a>                 292 src/scripting/lua_unit.cpp 	return_int_attrib("level", u.level());</span>
<span class='curline'><a href='../S/190.html#L293'>u</a>                 293 src/scripting/lua_unit.cpp 	return_int_attrib("cost", u.cost());</span>
<span class='curline'><a href='../S/190.html#L295'>u</a>                 295 src/scripting/lua_unit.cpp 	return_vector_string_attrib("extra_recruit", u.recruits());</span>
<span class='curline'><a href='../S/190.html#L296'>u</a>                 296 src/scripting/lua_unit.cpp 	return_vector_string_attrib("advances_to", u.advances_to());</span>
<span class='curline'><a href='../S/190.html#L299'>u</a>                 299 src/scripting/lua_unit.cpp 		lua_push(L, u.alignment());</span>
<span class='curline'><a href='../S/190.html#L304'>u</a>                 304 src/scripting/lua_unit.cpp 		unit::upkeep_t upkeep = u.upkeep_raw();</span>
<span class='curline'><a href='../S/190.html#L317'>u</a>                 317 src/scripting/lua_unit.cpp 		lua_push(L, u.modification_advancements());</span>
<span class='curline'><a href='../S/190.html#L321'>u</a>                 321 src/scripting/lua_unit.cpp 		lua_push(L, u.overlays());</span>
<span class='curline'><a href='../S/190.html#L325'>u</a>                 325 src/scripting/lua_unit.cpp 		lua_push(L, u.get_traits_list());</span>
<span class='curline'><a href='../S/190.html#L329'>u</a>                 329 src/scripting/lua_unit.cpp 		lua_push(L, u.get_ability_list());</span>
<span class='curline'><a href='../S/190.html#L350'>u</a>                 350 src/scripting/lua_unit.cpp 	return_vector_string_attrib("animations", u.anim_comp().get_flags());</span>
<span class='curline'><a href='../S/190.html#L351'>u</a>                 351 src/scripting/lua_unit.cpp 	return_cfg_attrib("recall_filter", cfg = u.recall_filter());</span>
<span class='curline'><a href='../S/190.html#L352'>u</a>                 352 src/scripting/lua_unit.cpp 	return_bool_attrib("hidden", u.get_hidden());</span>
<span class='curline'><a href='../S/190.html#L353'>u</a>                 353 src/scripting/lua_unit.cpp 	return_bool_attrib("petrified", u.incapacitated());</span>
<span class='curline'><a href='../S/190.html#L354'>u</a>                 354 src/scripting/lua_unit.cpp 	return_bool_attrib("resting", u.resting());</span>
<span class='curline'><a href='../S/190.html#L355'>u</a>                 355 src/scripting/lua_unit.cpp 	return_string_attrib("role", u.get_role());</span>
<span class='curline'><a href='../S/190.html#L356'>u</a>                 356 src/scripting/lua_unit.cpp 	return_string_attrib("race", u.race()-&gt;id());</span>
<span class='curline'><a href='../S/190.html#L357'>u</a>                 357 src/scripting/lua_unit.cpp 	return_string_attrib("gender", gender_string(u.gender()));</span>
<span class='curline'><a href='../S/190.html#L358'>u</a>                 358 src/scripting/lua_unit.cpp 	return_string_attrib("variation", u.variation());</span>
<span class='curline'><a href='../S/190.html#L359'>u</a>                 359 src/scripting/lua_unit.cpp 	return_bool_attrib("zoc", u.get_emit_zoc());</span>
<span class='curline'><a href='../S/190.html#L360'>u</a>                 360 src/scripting/lua_unit.cpp 	return_string_attrib("facing", map_location::write_direction(u.facing()));</span>
<span class='curline'><a href='../S/190.html#L361'>u</a>                 361 src/scripting/lua_unit.cpp 	return_string_attrib("portrait", u.big_profile() == u.absolute_image() ? u.absolute_image() + u.image_mods() : u.big_profile());</span>
<span class='curline'><a href='../S/190.html#L362'>u</a>                 362 src/scripting/lua_unit.cpp 	return_cfg_attrib("__cfg", u.write(cfg); u.get_location().write(cfg));</span>
<span class='curline'><a href='../S/190.html#L382'>u</a>                 382 src/scripting/lua_unit.cpp 	unit &amp;u = *pu;</span>
<span class='curline'><a href='../S/190.html#L386'>u</a>                 386 src/scripting/lua_unit.cpp 	modify_int_attrib("side", u.set_side(value));</span>
<span class='curline'><a href='../S/190.html#L387'>u</a>                 387 src/scripting/lua_unit.cpp 	modify_int_attrib("moves", u.set_movement(value));</span>
<span class='curline'><a href='../S/190.html#L388'>u</a>                 388 src/scripting/lua_unit.cpp 	modify_int_attrib("hitpoints", u.set_hitpoints(value));</span>
<span class='curline'><a href='../S/190.html#L389'>u</a>                 389 src/scripting/lua_unit.cpp 	modify_int_attrib("experience", u.set_experience(value));</span>
<span class='curline'><a href='../S/190.html#L390'>u</a>                 390 src/scripting/lua_unit.cpp 	modify_int_attrib("recall_cost", u.set_recall_cost(value));</span>
<span class='curline'><a href='../S/190.html#L391'>u</a>                 391 src/scripting/lua_unit.cpp 	modify_int_attrib("attacks_left", u.set_attacks(value));</span>
<span class='curline'><a href='../S/190.html#L392'>u</a>                 392 src/scripting/lua_unit.cpp 	modify_int_attrib("level", u.set_level(value));</span>
<span class='curline'><a href='../S/190.html#L393'>u</a>                 393 src/scripting/lua_unit.cpp 	modify_bool_attrib("resting", u.set_resting(value));</span>
<span class='curline'><a href='../S/190.html#L394'>u</a>                 394 src/scripting/lua_unit.cpp 	modify_tstring_attrib("name", u.set_name(value));</span>
<span class='curline'><a href='../S/190.html#L395'>u</a>                 395 src/scripting/lua_unit.cpp 	modify_string_attrib("role", u.set_role(value));</span>
<span class='curline'><a href='../S/190.html#L396'>u</a>                 396 src/scripting/lua_unit.cpp 	modify_string_attrib("facing", u.set_facing(map_location::parse_direction(value)));</span>
<span class='curline'><a href='../S/190.html#L397'>u</a>                 397 src/scripting/lua_unit.cpp 	modify_bool_attrib("hidden", u.set_hidden(value));</span>
<span class='curline'><a href='../S/190.html#L398'>u</a>                 398 src/scripting/lua_unit.cpp 	modify_bool_attrib("zoc", u.set_emit_zoc(value));</span>
<span class='curline'><a href='../S/190.html#L399'>u</a>                 399 src/scripting/lua_unit.cpp 	modify_bool_attrib("canrecruit", u.set_can_recruit(value));</span>
<span class='curline'><a href='../S/190.html#L401'>u</a>                 401 src/scripting/lua_unit.cpp 	modify_vector_string_attrib("extra_recruit", u.set_recruits(value));</span>
<span class='curline'><a href='../S/190.html#L402'>u</a>                 402 src/scripting/lua_unit.cpp 	modify_vector_string_attrib("advances_to", u.set_advances_to(value));</span>
<span class='curline'><a href='../S/190.html#L404'>u</a>                 404 src/scripting/lua_unit.cpp 		u.set_alignment(lua_check&lt;unit_type::ALIGNMENT&gt;(L, 3));</span>
<span class='curline'><a href='../S/190.html#L409'>u</a>                 409 src/scripting/lua_unit.cpp 		u.set_advancements(lua_check&lt;std::vector&lt;config&gt; &gt;(L, 3));</span>
<span class='curline'><a href='../S/190.html#L415'>u</a>                 415 src/scripting/lua_unit.cpp 			u.set_upkeep(luaL_checkinteger(L, 3));</span>
<span class='curline'><a href='../S/190.html#L420'>u</a>                 420 src/scripting/lua_unit.cpp 			u.set_upkeep(unit::upkeep_loyal());</span>
<span class='curline'><a href='../S/190.html#L422'>u</a>                 422 src/scripting/lua_unit.cpp 			u.set_upkeep(unit::upkeep_full());</span>
<span class='curline'><a href='../S/190.html#L431'>u</a>                 431 src/scripting/lua_unit.cpp 		map_location loc = u.get_location();</span>
<span class='curline'><a href='../S/190.html#L432'>u</a>                 432 src/scripting/lua_unit.cpp 		modify_int_attrib("x", loc.set_wml_x(value); u.set_location(loc));</span>
<span class='curline'><a href='../S/190.html#L433'>u</a>                 433 src/scripting/lua_unit.cpp 		modify_int_attrib("y", loc.set_wml_y(value); u.set_location(loc));</span>
<span class='curline'><a href='../S/190.html#L453'>u</a>                 453 src/scripting/lua_unit.cpp 	const unit* u = luaW_tounit(L, -1);</span>
<span class='curline'><a href='../S/190.html#L454'>u</a>                 454 src/scripting/lua_unit.cpp 	if(!u) {</span>
<span class='curline'><a href='../S/190.html#L458'>u</a>                 458 src/scripting/lua_unit.cpp 	lua_pushboolean(L, u-&gt;get_state(m));</span>
<span class='curline'><a href='../S/190.html#L474'>u</a>                 474 src/scripting/lua_unit.cpp 	unit* u = luaW_tounit(L, -1);</span>
<span class='curline'><a href='../S/190.html#L475'>u</a>                 475 src/scripting/lua_unit.cpp 	if(!u) {</span>
<span class='curline'><a href='../S/190.html#L479'>u</a>                 479 src/scripting/lua_unit.cpp 	u-&gt;set_state(m, luaW_toboolean(L, 3));</span>
<span class='curline'><a href='../S/190.html#L495'>u</a>                 495 src/scripting/lua_unit.cpp 	const unit* u = luaW_tounit(L, -1);</span>
<span class='curline'><a href='../S/190.html#L496'>u</a>                 496 src/scripting/lua_unit.cpp 	if(!u) {</span>
<span class='curline'><a href='../S/190.html#L500'>u</a>                 500 src/scripting/lua_unit.cpp 	return_cfgref_attrib("__cfg", u-&gt;variables());</span>
<span class='curline'><a href='../S/190.html#L502'>u</a>                 502 src/scripting/lua_unit.cpp 	variable_access_const v(m, u-&gt;variables());</span>
<span class='curline'><a href='../S/190.html#L518'>u</a>                 518 src/scripting/lua_unit.cpp 	unit* u = luaW_tounit(L, -1);</span>
<span class='curline'><a href='../S/190.html#L519'>u</a>                 519 src/scripting/lua_unit.cpp 	if(!u) {</span>
<span class='curline'><a href='../S/190.html#L524'>u</a>                 524 src/scripting/lua_unit.cpp 		u-&gt;variables() = luaW_checkconfig(L, 3);</span>
<span class='curline'><a href='../S/190.html#L527'>u</a>                 527 src/scripting/lua_unit.cpp 	config&amp; vars = u-&gt;variables();</span>
<span class='curline'><a href='../S/194.html#L44'>u</a>                  44 src/scripting/lua_unit.hpp lua_unit* luaW_pushlocalunit(lua_State *L, unit&amp; u);</span>
<span class='curline'><a href='../S/194.html#L90'>u</a>                  90 src/scripting/lua_unit.hpp 	friend lua_unit* luaW_pushlocalunit(lua_State *L, unit&amp; u);</span>
<span class='curline'><a href='../S/194.html#L93'>u</a>                  93 src/scripting/lua_unit.hpp 	lua_unit(size_t u): uid(u), ptr(), side(0), c_ptr() {}</span>
<span class='curline'><a href='../S/194.html#L94'>u</a>                  94 src/scripting/lua_unit.hpp 	lua_unit(unit_ptr u): uid(0), ptr(u), side(0), c_ptr() {}</span>
<span class='curline'><a href='../S/194.html#L95'>u</a>                  95 src/scripting/lua_unit.hpp 	lua_unit(int s, size_t u): uid(u), ptr(), side(s), c_ptr() {}</span>
<span class='curline'><a href='../S/194.html#L96'>u</a>                  96 src/scripting/lua_unit.hpp 	lua_unit(unit&amp; u): uid(0), ptr(), side(0), c_ptr(&amp;u) {}</span>
<span class='curline'><a href='../S/210.html#L89'>u</a>                  89 src/scripting/lua_unit_attacks.cpp auto find_attack(T* u, const std::string&amp; id) -&gt; attack_ptr_in&lt;T&gt;</span>
<span class='curline'><a href='../S/210.html#L91'>u</a>                  91 src/scripting/lua_unit_attacks.cpp 	auto attacks = u-&gt;attacks();</span>
<span class='curline'><a href='../S/210.html#L101'>u</a>                 101 src/scripting/lua_unit_attacks.cpp auto find_attack(T* u, size_t i) -&gt; attack_ptr_in&lt;T&gt;</span>
<span class='curline'><a href='../S/210.html#L103'>u</a>                 103 src/scripting/lua_unit_attacks.cpp 	auto attacks = u-&gt;attacks();</span>
<span class='curline'><a href='../S/210.html#L127'>u</a>                 127 src/scripting/lua_unit_attacks.cpp 		unit* u = lu-&gt;get();</span>
<span class='curline'><a href='../S/210.html#L128'>u</a>                 128 src/scripting/lua_unit_attacks.cpp 		attack_ptr atk = lua_isnumber(L, 2) ? find_attack(u, luaL_checkinteger(L, 2) - 1) : find_attack(u, luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/210.html#L139'>u</a>                 139 src/scripting/lua_unit_attacks.cpp static attack_itors::iterator get_attack_iter(unit&amp; u, attack_ptr atk)</span>
<span class='curline'><a href='../S/210.html#L142'>u</a>                 142 src/scripting/lua_unit_attacks.cpp 	return std::find_if(u.attacks().begin(), u.attacks().end(), [&amp;atk](const attack_type&amp; atk2) {</span>
<span class='curline'><a href='../S/210.html#L158'>u</a>                 158 src/scripting/lua_unit_attacks.cpp 	unit&amp; u = luaW_checkunit(L, -1);</span>
<span class='curline'><a href='../S/210.html#L159'>u</a>                 159 src/scripting/lua_unit_attacks.cpp 	attack_ptr atk = lua_isnumber(L, 2) ? find_attack(&amp;u, luaL_checkinteger(L, 2) - 1) : find_attack(&amp;u, luaL_checkstring(L, 2));</span>
<span class='curline'><a href='../S/210.html#L160'>u</a>                 160 src/scripting/lua_unit_attacks.cpp 	if(lua_isnumber(L, 2) &amp;&amp; lua_tonumber(L, 2) - 1 &gt; u.attacks().size()) {</span>
<span class='curline'><a href='../S/210.html#L166'>u</a>                 166 src/scripting/lua_unit_attacks.cpp 		u.remove_attack(atk);</span>
<span class='curline'><a href='../S/210.html#L170'>u</a>                 170 src/scripting/lua_unit_attacks.cpp 	auto iter = get_attack_iter(u, atk), end = u.attacks().end();</span>
<span class='curline'><a href='../S/210.html#L173'>u</a>                 173 src/scripting/lua_unit_attacks.cpp 			atk = u.add_attack(end, *atk2);</span>
<span class='curline'><a href='../S/210.html#L181'>u</a>                 181 src/scripting/lua_unit_attacks.cpp 			atk = u.add_attack(end, cfg);</span>
<span class='curline'><a href='../S/210.html#L204'>u</a>                 204 src/scripting/lua_unit_attacks.cpp 	const unit* u = luaW_tounit(L, -1);</span>
<span class='curline'><a href='../S/210.html#L206'>u</a>                 206 src/scripting/lua_unit_attacks.cpp 	if(!u &amp;&amp; !ut) {</span>
<span class='curline'><a href='../S/210.html#L209'>u</a>                 209 src/scripting/lua_unit_attacks.cpp 	lua_pushinteger(L, (u ? u-&gt;attacks() : ut-&gt;attacks()).size());</span>
<span class='curline'><a href='../S/146.html#L125'>u</a>                 125 src/server/game.cpp 	for (user_vector::const_iterator u = users.begin(); u != users.end(); ++u) {</span>
<span class='curline'><a href='../S/146.html#L126'>u</a>                 126 src/server/game.cpp 		remove_player(*u, false, true);</span>
<span class='curline'><a href='../S/157.html#L58'>u</a>                  58 src/server/sample_user_handler.cpp 	std::map&lt;std::string,user&gt;::const_iterator u = users_.find(name);</span>
<span class='curline'><a href='../S/157.html#L60'>u</a>                  60 src/server/sample_user_handler.cpp 	return (u != users_.end());</span>
<span class='curline'><a href='../S/157.html#L70'>u</a>                  70 src/server/sample_user_handler.cpp 	for(std::map&lt;std::string,user&gt;::const_iterator u = users_.begin(); u != users_.end(); ++u) {</span>
<span class='curline'><a href='../S/157.html#L71'>u</a>                  71 src/server/sample_user_handler.cpp 		users.push_back(u-&gt;first);</span>
<span class='curline'><a href='../S/157.html#L195'>u</a>                 195 src/server/sample_user_handler.cpp 	for(std::vector&lt;std::string&gt;::const_iterator u = us.begin(); u != us.end(); ++u) {</span>
<span class='curline'><a href='../S/157.html#L196'>u</a>                 196 src/server/sample_user_handler.cpp 		if((now - get_lastlogin(*u)) &gt; limit) {</span>
<span class='curline'><a href='../S/157.html#L197'>u</a>                 197 src/server/sample_user_handler.cpp 			std::cout &lt;&lt; "User '" &lt;&lt; *u &lt;&lt; "' exceeds expiration limit.\n";</span>
<span class='curline'><a href='../S/157.html#L198'>u</a>                 198 src/server/sample_user_handler.cpp 			remove_user(*u);</span>
<span class='curline'><a href='../S/1044.html#L128'>u</a>                 128 src/side_filter.cpp 		for(const unit &amp;u : fc_-&gt;get_disp_context().units()) {</span>
<span class='curline'><a href='../S/1044.html#L129'>u</a>                 129 src/side_filter.cpp 			if (u.side() != t.side()) {</span>
<span class='curline'><a href='../S/1044.html#L132'>u</a>                 132 src/side_filter.cpp 			if (ufilter_-&gt;matches(u)) {</span>
<span class='curline'><a href='../S/1044.html#L138'>u</a>                 138 src/side_filter.cpp 			for(const unit_const_ptr &amp; u : t.recall_list()) {</span>
<span class='curline'><a href='../S/1044.html#L139'>u</a>                 139 src/side_filter.cpp 				scoped_recall_unit this_unit("this_unit", t.save_id(),t.recall_list().find_index(u-&gt;id()));</span>
<span class='curline'><a href='../S/1044.html#L140'>u</a>                 140 src/side_filter.cpp 				if(ufilter_-&gt;matches(*u)) {</span>
<span class='curline'><a href='../S/1020.html#L41'>u</a>                  41 src/statistics.cpp std::string get_team_save_id(const unit &amp; u)</span>
<span class='curline'><a href='../S/1020.html#L44'>u</a>                  44 src/statistics.cpp 	return resources::gameboard-&gt;get_team(u.side()).save_id();</span>
<span class='curline'><a href='../S/1020.html#L506'>u</a>                 506 src/statistics.cpp void recruit_unit(const unit&amp; u)</span>
<span class='curline'><a href='../S/1020.html#L508'>u</a>                 508 src/statistics.cpp 	stats&amp; s = get_stats(get_team_save_id(u));</span>
<span class='curline'><a href='../S/1020.html#L509'>u</a>                 509 src/statistics.cpp 	s.recruits[u.type().base_id()]++;</span>
<span class='curline'><a href='../S/1020.html#L510'>u</a>                 510 src/statistics.cpp 	s.recruit_cost += u.cost();</span>
<span class='curline'><a href='../S/1020.html#L513'>u</a>                 513 src/statistics.cpp void recall_unit(const unit&amp; u)</span>
<span class='curline'><a href='../S/1020.html#L515'>u</a>                 515 src/statistics.cpp 	stats&amp; s = get_stats(get_team_save_id(u));</span>
<span class='curline'><a href='../S/1020.html#L516'>u</a>                 516 src/statistics.cpp 	s.recalls[u.type_id()]++;</span>
<span class='curline'><a href='../S/1020.html#L517'>u</a>                 517 src/statistics.cpp 	s.recall_cost += u.cost();</span>
<span class='curline'><a href='../S/1020.html#L520'>u</a>                 520 src/statistics.cpp void un_recall_unit(const unit&amp; u)</span>
<span class='curline'><a href='../S/1020.html#L522'>u</a>                 522 src/statistics.cpp 	stats&amp; s = get_stats(get_team_save_id(u));</span>
<span class='curline'><a href='../S/1020.html#L523'>u</a>                 523 src/statistics.cpp 	s.recalls[u.type_id()]--;</span>
<span class='curline'><a href='../S/1020.html#L524'>u</a>                 524 src/statistics.cpp 	s.recall_cost -= u.cost();</span>
<span class='curline'><a href='../S/1020.html#L527'>u</a>                 527 src/statistics.cpp void un_recruit_unit(const unit&amp; u)</span>
<span class='curline'><a href='../S/1020.html#L529'>u</a>                 529 src/statistics.cpp 	stats&amp; s = get_stats(get_team_save_id(u));</span>
<span class='curline'><a href='../S/1020.html#L530'>u</a>                 530 src/statistics.cpp 	s.recruits[u.type().base_id()]--;</span>
<span class='curline'><a href='../S/1020.html#L531'>u</a>                 531 src/statistics.cpp 	s.recruit_cost -= u.cost();</span>
<span class='curline'><a href='../S/1020.html#L534'>u</a>                 534 src/statistics.cpp int un_recall_unit_cost(const unit&amp; u)  // this really belongs elsewhere, perhaps in undo.cpp</span>
<span class='curline'><a href='../S/1020.html#L536'>u</a>                 536 src/statistics.cpp 	return u.recall_cost();</span>
<span class='curline'><a href='../S/1020.html#L540'>u</a>                 540 src/statistics.cpp void advance_unit(const unit&amp; u)</span>
<span class='curline'><a href='../S/1020.html#L542'>u</a>                 542 src/statistics.cpp 	stats&amp; s = get_stats(get_team_save_id(u));</span>
<span class='curline'><a href='../S/1020.html#L543'>u</a>                 543 src/statistics.cpp 	s.advanced_to[u.type_id()]++;</span>
<span class='curline'><a href='../S/89.html#L97'>u</a>                  97 src/statistics.hpp 	void recruit_unit(const unit&amp; u);</span>
<span class='curline'><a href='../S/89.html#L98'>u</a>                  98 src/statistics.hpp 	void recall_unit(const unit&amp; u);</span>
<span class='curline'><a href='../S/89.html#L99'>u</a>                  99 src/statistics.hpp 	void un_recall_unit(const unit&amp; u);</span>
<span class='curline'><a href='../S/89.html#L100'>u</a>                 100 src/statistics.hpp 	void un_recruit_unit(const unit&amp; u);</span>
<span class='curline'><a href='../S/89.html#L101'>u</a>                 101 src/statistics.hpp 	int un_recall_unit_cost(const unit&amp; u);</span>
<span class='curline'><a href='../S/89.html#L103'>u</a>                 103 src/statistics.hpp 	void advance_unit(const unit&amp; u);</span>
<span class='curline'><a href='../S/855.html#L182'>u</a>                 182 src/synced_commands.cpp 	unit_map::iterator u = resources::gameboard-&gt;units().find(src);</span>
<span class='curline'><a href='../S/855.html#L183'>u</a>                 183 src/synced_commands.cpp 	if (!u.valid()) {</span>
<span class='curline'><a href='../S/855.html#L190'>u</a>                 190 src/synced_commands.cpp 		if (u-&gt;type_id() != att_type_id) {</span>
<span class='curline'><a href='../S/855.html#L191'>u</a>                 191 src/synced_commands.cpp 			WRN_REPLAY &lt;&lt; "unexpected attacker type: " &lt;&lt; att_type_id &lt;&lt; "(game state gives: " &lt;&lt; u-&gt;type_id() &lt;&lt; ")" &lt;&lt; std::endl;</span>
<span class='curline'><a href='../S/855.html#L195'>u</a>                 195 src/synced_commands.cpp 	if (static_cast&lt;unsigned&gt;(weapon_num) &gt;= u-&gt;attacks().size()) {</span>
<span class='curline'><a href='../S/855.html#L222'>u</a>                 222 src/synced_commands.cpp 	DBG_REPLAY &lt;&lt; "Attacker XP (before attack): " &lt;&lt; u-&gt;experience() &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/855.html#L282'>u</a>                 282 src/synced_commands.cpp 	unit_map::iterator u = resources::gameboard-&gt;find_visible_unit(dst, current_team);</span>
<span class='curline'><a href='../S/855.html#L283'>u</a>                 283 src/synced_commands.cpp 	if ( u.valid() ) {</span>
<span class='curline'><a href='../S/855.html#L290'>u</a>                 290 src/synced_commands.cpp 	u = resources::gameboard-&gt;units().find(src);</span>
<span class='curline'><a href='../S/855.html#L291'>u</a>                 291 src/synced_commands.cpp 	if (!u.valid()) {</span>
<span class='curline'><a href='../S/1075.html#L182'>u</a>                 182 src/teambuilder.cpp 	void handle_unit(const config &amp;u, const char *origin)</span>
<span class='curline'><a href='../S/1075.html#L186'>u</a>                 186 src/teambuilder.cpp 			&lt;&lt; ": type=["&lt;&lt;u["type"]</span>
<span class='curline'><a href='../S/1075.html#L187'>u</a>                 187 src/teambuilder.cpp 			&lt;&lt; "] id=["&lt;&lt;u["id"]</span>
<span class='curline'><a href='../S/1075.html#L188'>u</a>                 188 src/teambuilder.cpp 			&lt;&lt; "] placement=["&lt;&lt;u["placement"]</span>
<span class='curline'><a href='../S/1075.html#L189'>u</a>                 189 src/teambuilder.cpp 			&lt;&lt; "] x=["&lt;&lt;u["x"]</span>
<span class='curline'><a href='../S/1075.html#L190'>u</a>                 190 src/teambuilder.cpp 			&lt;&lt; "] y=["&lt;&lt;u["y"]</span>
<span class='curline'><a href='../S/1075.html#L193'>u</a>                 193 src/teambuilder.cpp 		if (u["type"].empty()) {</span>
<span class='curline'><a href='../S/1075.html#L194'>u</a>                 194 src/teambuilder.cpp 			WRN_NG_TC &lt;&lt; "warning: when building level, skipping a unit (id=[" &lt;&lt; u["id"] &lt;&lt; "]) from " &lt;&lt; origin</span>
<span class='curline'><a href='../S/1075.html#L201'>u</a>                 201 src/teambuilder.cpp 		const std::string &amp;id = u["id"];</span>
<span class='curline'><a href='../S/1075.html#L205'>u</a>                 205 src/teambuilder.cpp 				config u_tmp = u;</span>
<span class='curline'><a href='../S/1075.html#L210'>u</a>                 210 src/teambuilder.cpp 				unit_configs_.push_back(&amp;u);</span>
<span class='curline'><a href='../S/1075.html#L215'>u</a>                 215 src/teambuilder.cpp 			unit_configs_.push_back(&amp;u);</span>
<span class='curline'><a href='../S/1075.html#L285'>u</a>                 285 src/teambuilder.cpp 		for (const config *u : unit_configs_) {</span>
<span class='curline'><a href='../S/1075.html#L287'>u</a>                 287 src/teambuilder.cpp 				uc.add_unit(*u);</span>
<span class='curline'><a href='../S/311.html#L165'>u</a>                 165 src/terrain/filter.cpp 		const unit_map::const_iterator u = fc_-&gt;get_disp_context().units().find(loc);</span>
<span class='curline'><a href='../S/311.html#L166'>u</a>                 166 src/terrain/filter.cpp 		if (!u.valid())</span>
<span class='curline'><a href='../S/311.html#L170'>u</a>                 170 src/terrain/filter.cpp 		if (!cache_.ufilter_-&gt;matches(*u, loc))</span>
<span class='curline'><a href='../S/996.html#L42'>u</a>                  42 src/units/abilities.cpp 		temporary_facing(unit_map::const_iterator u, map_location::DIRECTION new_dir)</span>
<span class='curline'><a href='../S/996.html#L43'>u</a>                  43 src/units/abilities.cpp 			: save_dir_(u.valid() ? u-&gt;facing() : map_location::NDIRECTIONS)</span>
<span class='curline'><a href='../S/996.html#L44'>u</a>                  44 src/units/abilities.cpp 			, u_(u)</span>
<span class='curline'><a href='../S/1012.html#L54'>u</a>                  54 src/units/drawer.cpp void unit_drawer::redraw_unit (const unit &amp; u) const</span>
<span class='curline'><a href='../S/1012.html#L56'>u</a>                  56 src/units/drawer.cpp 	unit_animation_component &amp; ac = u.anim_comp();</span>
<span class='curline'><a href='../S/1012.html#L57'>u</a>                  57 src/units/drawer.cpp 	map_location loc = u.get_location();</span>
<span class='curline'><a href='../S/1012.html#L59'>u</a>                  59 src/units/drawer.cpp 	int side = u.side();</span>
<span class='curline'><a href='../S/1012.html#L61'>u</a>                  61 src/units/drawer.cpp 	bool hidden = u.get_hidden();</span>
<span class='curline'><a href='../S/1012.html#L62'>u</a>                  62 src/units/drawer.cpp 	bool is_flying = u.is_flying();</span>
<span class='curline'><a href='../S/1012.html#L63'>u</a>                  63 src/units/drawer.cpp 	map_location::DIRECTION facing = u.facing();</span>
<span class='curline'><a href='../S/1012.html#L64'>u</a>                  64 src/units/drawer.cpp 	int hitpoints = u.hitpoints();</span>
<span class='curline'><a href='../S/1012.html#L65'>u</a>                  65 src/units/drawer.cpp 	int max_hitpoints = u.max_hitpoints();</span>
<span class='curline'><a href='../S/1012.html#L66'>u</a>                  66 src/units/drawer.cpp 	int movement_left = u.movement_left();</span>
<span class='curline'><a href='../S/1012.html#L67'>u</a>                  67 src/units/drawer.cpp 	int total_movement = u.total_movement();</span>
<span class='curline'><a href='../S/1012.html#L69'>u</a>                  69 src/units/drawer.cpp 	bool can_recruit = u.can_recruit();</span>
<span class='curline'><a href='../S/1012.html#L70'>u</a>                  70 src/units/drawer.cpp 	bool can_advance = u.can_advance();</span>
<span class='curline'><a href='../S/1012.html#L72'>u</a>                  72 src/units/drawer.cpp 	int experience = u.experience();</span>
<span class='curline'><a href='../S/1012.html#L73'>u</a>                  73 src/units/drawer.cpp 	int max_experience = u.max_experience();</span>
<span class='curline'><a href='../S/1012.html#L75'>u</a>                  75 src/units/drawer.cpp 	bool emit_zoc = u.emits_zoc();</span>
<span class='curline'><a href='../S/1012.html#L77'>u</a>                  77 src/units/drawer.cpp 	color_t hp_color=u.hp_color();</span>
<span class='curline'><a href='../S/1012.html#L78'>u</a>                  78 src/units/drawer.cpp 	color_t xp_color=u.xp_color();</span>
<span class='curline'><a href='../S/1012.html#L80'>u</a>                  80 src/units/drawer.cpp 	std::string ellipse=u.image_ellipse();</span>
<span class='curline'><a href='../S/1012.html#L82'>u</a>                  82 src/units/drawer.cpp 	if ( hidden || is_blindfolded || !u.is_visible_to_team(viewing_team_ref, dc, show_everything) )</span>
<span class='curline'><a href='../S/1012.html#L108'>u</a>                 108 src/units/drawer.cpp 	if (u.invisible(loc, dc) &amp;&amp;</span>
<span class='curline'><a href='../S/1012.html#L126'>u</a>                 126 src/units/drawer.cpp 	if(u.poisoned()) {</span>
<span class='curline'><a href='../S/1012.html#L131'>u</a>                 131 src/units/drawer.cpp 	if(u.slowed()) {</span>
<span class='curline'><a href='../S/1012.html#L146'>u</a>                 146 src/units/drawer.cpp 	params.image_mod = u.image_mods();</span>
<span class='curline'><a href='../S/1012.html#L147'>u</a>                 147 src/units/drawer.cpp 	params.halo_mod = u.TC_image_mods();</span>
<span class='curline'><a href='../S/1012.html#L148'>u</a>                 148 src/units/drawer.cpp 	params.image= u.default_anim_image();</span>
<span class='curline'><a href='../S/1012.html#L151'>u</a>                 151 src/units/drawer.cpp 	if(u.incapacitated()) params.image_mod +="~GS()";</span>
<span class='curline'><a href='../S/1012.html#L167'>u</a>                 167 src/units/drawer.cpp 	if(!has_halo &amp;&amp; !u.image_halo().empty()) {</span>
<span class='curline'><a href='../S/1012.html#L168'>u</a>                 168 src/units/drawer.cpp 		ac.unit_halo_ = halo_man.add(x, y - height_adjust, u.image_halo()+u.TC_image_mods(), map_location(-1, -1));</span>
<span class='curline'><a href='../S/1012.html#L170'>u</a>                 170 src/units/drawer.cpp 	if(has_halo &amp;&amp; u.image_halo().empty()) {</span>
<span class='curline'><a href='../S/1012.html#L227'>u</a>                 227 src/units/drawer.cpp 		const surface unit_img = image::get_image(u.default_anim_image(), image::SCALED_TO_ZOOM);</span>
<span class='curline'><a href='../S/1012.html#L246'>u</a>                 246 src/units/drawer.cpp 				if (preferences::show_enemy_orb() &amp;&amp; !u.incapacitated())</span>
<span class='curline'><a href='../S/1012.html#L260'>u</a>                 260 src/units/drawer.cpp 			if(playing_team == viewing_team &amp;&amp; !u.user_end_turn()) {</span>
<span class='curline'><a href='../S/1012.html#L265'>u</a>                 265 src/units/drawer.cpp 				} else if ( dc.unit_can_move(u) ) {</span>
<span class='curline'><a href='../S/1012.html#L284'>u</a>                 284 src/units/drawer.cpp 		const int hp_bar_height = static_cast&lt;int&gt;(max_hitpoints * u.hp_bar_scaling());</span>
<span class='curline'><a href='../S/1012.html#L294'>u</a>                 294 src/units/drawer.cpp 			const int xp_bar_height = static_cast&lt;int&gt;(max_experience * u.xp_bar_scaling() / std::max&lt;int&gt;(u.level(),1));</span>
<span class='curline'><a href='../S/1012.html#L301'>u</a>                 301 src/units/drawer.cpp 			surface crown(image::get_image(u.leader_crown(),image::SCALED_TO_ZOOM));</span>
<span class='curline'><a href='../S/1012.html#L311'>u</a>                 311 src/units/drawer.cpp 		for(std::vector&lt;std::string&gt;::const_iterator ov = u.overlays().begin(); ov != u.overlays().end(); ++ov) {</span>
<span class='curline'><a href='../S/984.html#L69'>u</a>                  69 src/units/drawer.hpp 	void redraw_unit(const unit &amp; u) const;</span>
<span class='curline'><a href='../S/1011.html#L54'>u</a>                  54 src/units/filter.cpp bool unit_filter::matches(const unit &amp; u) const {</span>
<span class='curline'><a href='../S/1011.html#L55'>u</a>                  55 src/units/filter.cpp 	return matches (u, u.get_location());</span>
<span class='curline'><a href='../S/1011.html#L58'>u</a>                  58 src/units/filter.cpp bool unit_filter::matches(const unit &amp; u, const map_location &amp; loc, const unit &amp; u2) const {</span>
<span class='curline'><a href='../S/1011.html#L59'>u</a>                  59 src/units/filter.cpp 	return impl_-&gt;matches(u,loc,&amp;u2);</span>
<span class='curline'><a href='../S/1011.html#L62'>u</a>                  62 src/units/filter.cpp bool unit_filter::matches(const unit &amp; u, const unit &amp; u2) const {</span>
<span class='curline'><a href='../S/1011.html#L63'>u</a>                  63 src/units/filter.cpp 	return matches(u, u.get_location(), u2);</span>
<span class='curline'><a href='../S/1011.html#L84'>u</a>                  84 src/units/filter.cpp 		for(const unit &amp; u : fc_.get_disp_context().units()) {</span>
<span class='curline'><a href='../S/1011.html#L86'>u</a>                  86 src/units/filter.cpp 			ret.push_back(&amp;u);</span>
<span class='curline'><a href='../S/1011.html#L169'>u</a>                 169 src/units/filter.cpp 	virtual bool matches(const unit &amp; u, const map_location &amp; loc, const unit * u2) const;</span>
<span class='curline'><a href='../S/1011.html#L185'>u</a>                 185 src/units/filter.cpp 	bool internal_matches_filter(const unit &amp; u, const map_location &amp; loc, const unit* u2) const;</span>
<span class='curline'><a href='../S/1011.html#L223'>u</a>                 223 src/units/filter.cpp bool basic_unit_filter_impl::matches(const unit &amp; u, const map_location&amp; loc, const unit * u2) const</span>
<span class='curline'><a href='../S/1011.html#L232'>u</a>                 232 src/units/filter.cpp 			matches = internal_matches_filter(u, loc, u2);</span>
<span class='curline'><a href='../S/1011.html#L234'>u</a>                 234 src/units/filter.cpp 			matches = internal_matches_filter(u, loc, u2);</span>
<span class='curline'><a href='../S/1011.html#L238'>u</a>                 238 src/units/filter.cpp 		matches = internal_matches_filter(u, loc, nullptr);</span>
<span class='curline'><a href='../S/1011.html#L245'>u</a>                 245 src/units/filter.cpp 				matches = matches &amp;&amp; cond_children_[i].matches(u,loc);</span>
<span class='curline'><a href='../S/1011.html#L248'>u</a>                 248 src/units/filter.cpp 				matches = matches || cond_children_[i].matches(u,loc);</span>
<span class='curline'><a href='../S/1011.html#L251'>u</a>                 251 src/units/filter.cpp 				matches = matches &amp;&amp; !cond_children_[i].matches(u,loc);</span>
<span class='curline'><a href='../S/1011.html#L257'>u</a>                 257 src/units/filter.cpp bool basic_unit_filter_impl::internal_matches_filter(const unit &amp; u, const map_location&amp; loc, const unit* u2) const</span>
<span class='curline'><a href='../S/1011.html#L259'>u</a>                 259 src/units/filter.cpp 	if (!vcfg["name"].blank() &amp;&amp; vcfg["name"].t_str() != u.name()) {</span>
<span class='curline'><a href='../S/1011.html#L265'>u</a>                 265 src/units/filter.cpp 		if (std::find(id_list.begin(), id_list.end(), u.id()) == id_list.end()) {</span>
<span class='curline'><a href='../S/1011.html#L271'>u</a>                 271 src/units/filter.cpp 	if (!vcfg["speaker"].blank() &amp;&amp; vcfg["speaker"].str() != u.id()) {</span>
<span class='curline'><a href='../S/1011.html#L296'>u</a>                 296 src/units/filter.cpp 		if(!filt.match(u.side()))</span>
<span class='curline'><a href='../S/1011.html#L318'>u</a>                 318 src/units/filter.cpp 		if (std::find(types.begin(), types.end(), u.type_id()) == types.end()) {</span>
<span class='curline'><a href='../S/1011.html#L336'>u</a>                 336 src/units/filter.cpp 		if(types.find(u.type_id()) == types.end()) {</span>
<span class='curline'><a href='../S/1011.html#L345'>u</a>                 345 src/units/filter.cpp 		if (std::find(types.begin(), types.end(), u.variation()) == types.end()) {</span>
<span class='curline'><a href='../S/1011.html#L355'>u</a>                 355 src/units/filter.cpp 		const unit_type* const type = u.variation().empty() ? &amp;u.type() : unit_types.find(u.type().base_id());</span>
<span class='curline'><a href='../S/1011.html#L372'>u</a>                 372 src/units/filter.cpp 			if (u.has_ability_by_id(ability_id)) {</span>
<span class='curline'><a href='../S/1011.html#L385'>u</a>                 385 src/units/filter.cpp 			if (u.has_ability_type(ability)) {</span>
<span class='curline'><a href='../S/1011.html#L397'>u</a>                 397 src/units/filter.cpp 			if(!u.get_abilities(ability, loc).empty()) {</span>
<span class='curline'><a href='../S/1011.html#L408'>u</a>                 408 src/units/filter.cpp 		std::vector&lt;std::string&gt; check_traits = utils::split(vcfg["trait"]), have_traits = u.get_traits_list(), isect;</span>
<span class='curline'><a href='../S/1011.html#L419'>u</a>                 419 src/units/filter.cpp 		if (std::find(races.begin(), races.end(), u.race()-&gt;id()) == races.end()) {</span>
<span class='curline'><a href='../S/1011.html#L424'>u</a>                 424 src/units/filter.cpp 	if (!vcfg["gender"].blank() &amp;&amp; string_gender(vcfg["gender"]) != u.gender()) {</span>
<span class='curline'><a href='../S/1011.html#L428'>u</a>                 428 src/units/filter.cpp 	if (!vcfg["side"].empty() &amp;&amp; vcfg["side"].to_int(-999) != u.side()) {</span>
<span class='curline'><a href='../S/1011.html#L430'>u</a>                 430 src/units/filter.cpp 		const std::string u_side = std::to_string(u.side());</span>
<span class='curline'><a href='../S/1011.html#L441'>u</a>                 441 src/units/filter.cpp 			if(u.get_state(status)) {</span>
<span class='curline'><a href='../S/1011.html#L455'>u</a>                 455 src/units/filter.cpp 		for(const attack_type&amp; a : u.attacks()) {</span>
<span class='curline'><a href='../S/1011.html#L467'>u</a>                 467 src/units/filter.cpp 		for(const attack_type&amp; a : u.attacks()) {</span>
<span class='curline'><a href='../S/1011.html#L478'>u</a>                 478 src/units/filter.cpp 	if (!vcfg["role"].blank() &amp;&amp; vcfg["role"].str() != u.get_role()) {</span>
<span class='curline'><a href='../S/1011.html#L482'>u</a>                 482 src/units/filter.cpp 	if (!vcfg["ai_special"].blank() &amp;&amp; ((vcfg["ai_special"].str() == "guardian") != u.get_state(unit::STATE_GUARDIAN))) {</span>
<span class='curline'><a href='../S/1011.html#L486'>u</a>                 486 src/units/filter.cpp 	if (!vcfg["canrecruit"].blank() &amp;&amp; vcfg["canrecruit"].to_bool() != u.can_recruit()) {</span>
<span class='curline'><a href='../S/1011.html#L493'>u</a>                 493 src/units/filter.cpp 			if(cost.first &lt;= u.recall_cost() &amp;&amp; u.recall_cost() &lt;= cost.second) {</span>
<span class='curline'><a href='../S/1011.html#L506'>u</a>                 506 src/units/filter.cpp 			if(lvl.first &lt;= u.level() &amp;&amp; u.level() &lt;= lvl.second) {</span>
<span class='curline'><a href='../S/1011.html#L518'>u</a>                 518 src/units/filter.cpp 		int actual_defense = u.defense_modifier(fc_.get_disp_context().map().get_terrain(loc));</span>
<span class='curline'><a href='../S/1011.html#L532'>u</a>                 532 src/units/filter.cpp 		int actual_cost = u.movement_cost(fc_.get_disp_context().map().get_terrain(loc));</span>
<span class='curline'><a href='../S/1011.html#L546'>u</a>                 546 src/units/filter.cpp 		int actual_cost = u.vision_cost(fc_.get_disp_context().map().get_terrain(loc));</span>
<span class='curline'><a href='../S/1011.html#L560'>u</a>                 560 src/units/filter.cpp 		int actual_cost = u.jamming_cost(fc_.get_disp_context().map().get_terrain(loc));</span>
<span class='curline'><a href='../S/1011.html#L585'>u</a>                 585 src/units/filter.cpp 				if (!u.variables().matches(ci.front().cfg))</span>
<span class='curline'><a href='../S/1011.html#L589'>u</a>                 589 src/units/filter.cpp 					u.write(unit_cfg);</span>
<span class='curline'><a href='../S/1011.html#L606'>u</a>                 606 src/units/filter.cpp 			bool hiding = u.invisible(loc, fc_.get_disp_context())</span>
<span class='curline'><a href='../S/1011.html#L607'>u</a>                 607 src/units/filter.cpp 				&amp;&amp; fc_.get_disp_context().get_team(viewer).is_enemy(u.side());</span>
<span class='curline'><a href='../S/1011.html#L637'>u</a>                 637 src/units/filter.cpp 				if (unit_itor == units.end() || !filt(*unit_itor, u)) {</span>
<span class='curline'><a href='../S/1011.html#L645'>u</a>                 645 src/units/filter.cpp 				    fc_.get_disp_context().get_team(u.side()).is_enemy(unit_itor-&gt;side())) {</span>
<span class='curline'><a href='../S/1011.html#L667'>u</a>                 667 src/units/filter.cpp 					if(c["id"] == u.id())</span>
<span class='curline'><a href='../S/1011.html#L683'>u</a>                 683 src/units/filter.cpp 			const wfl::unit_callable main(loc,u);</span>
<span class='curline'><a href='../S/1011.html#L704'>u</a>                 704 src/units/filter.cpp 			bool b = lk-&gt;run_filter(vcfg["lua_function"].str().c_str(), u);</span>
<span class='curline'><a href='../S/1011.html#L714'>u</a>                 714 src/units/filter.cpp 	for (const unit &amp; u : fc_.get_disp_context().units()) {</span>
<span class='curline'><a href='../S/1011.html#L715'>u</a>                 715 src/units/filter.cpp 		if (matches(u, u.get_location(), nullptr)) {</span>
<span class='curline'><a href='../S/1011.html#L720'>u</a>                 720 src/units/filter.cpp 			ret.push_back(&amp;u);</span>
<span class='curline'><a href='../S/1011.html#L728'>u</a>                 728 src/units/filter.cpp 	for(unit_map::const_iterator u = units.begin(); u != units.end(); u++) {</span>
<span class='curline'><a href='../S/1011.html#L729'>u</a>                 729 src/units/filter.cpp 		if (matches(*u,u-&gt;get_location(),nullptr)) {</span>
<span class='curline'><a href='../S/1011.html#L730'>u</a>                 730 src/units/filter.cpp 			return u.get_shared_ptr();</span>
<span class='curline'><a href='../S/1004.html#L41'>u</a>                  41 src/units/filter.hpp 	virtual bool matches(const unit &amp; u, const map_location &amp; loc, const unit * u2 = nullptr) const = 0;</span>
<span class='curline'><a href='../S/1004.html#L67'>u</a>                  67 src/units/filter.hpp 	bool matches(const unit &amp; u, const map_location &amp; loc) const {</span>
<span class='curline'><a href='../S/1004.html#L68'>u</a>                  68 src/units/filter.hpp 		return impl_-&gt;matches(u,loc);</span>
<span class='curline'><a href='../S/1004.html#L73'>u</a>                  73 src/units/filter.hpp 	bool matches(const unit &amp; u) const;</span>
<span class='curline'><a href='../S/1004.html#L75'>u</a>                  75 src/units/filter.hpp 	bool matches(const unit &amp; u, const map_location &amp; loc, const unit &amp; u2) const;</span>
<span class='curline'><a href='../S/1004.html#L76'>u</a>                  76 src/units/filter.hpp 	bool matches(const unit &amp; u, const unit &amp; u2) const;</span>
<span class='curline'><a href='../S/1004.html#L78'>u</a>                  78 src/units/filter.hpp 	bool operator()(const unit &amp; u, const map_location &amp; loc) const {</span>
<span class='curline'><a href='../S/1004.html#L79'>u</a>                  79 src/units/filter.hpp 		return matches(u,loc);</span>
<span class='curline'><a href='../S/1004.html#L82'>u</a>                  82 src/units/filter.hpp 	bool operator()(const unit &amp; u) const {</span>
<span class='curline'><a href='../S/1004.html#L83'>u</a>                  83 src/units/filter.hpp 		return matches(u);</span>
<span class='curline'><a href='../S/1004.html#L86'>u</a>                  86 src/units/filter.hpp 	bool operator()(const unit &amp; u, const map_location &amp; loc, const unit &amp; u2) const {</span>
<span class='curline'><a href='../S/1004.html#L87'>u</a>                  87 src/units/filter.hpp 		return matches(u,loc,u2);</span>
<span class='curline'><a href='../S/1004.html#L90'>u</a>                  90 src/units/filter.hpp 	bool operator()(const unit &amp; u, const unit &amp; u2) const {</span>
<span class='curline'><a href='../S/1004.html#L91'>u</a>                  91 src/units/filter.hpp 		return matches(u,u2);</span>
<span class='curline'><a href='../S/986.html#L25'>u</a>                  25 src/units/helper.cpp int number_of_possible_advances(const unit &amp;u)</span>
<span class='curline'><a href='../S/986.html#L27'>u</a>                  27 src/units/helper.cpp 	return u.advances_to().size() + u.get_modification_advances().size();</span>
<span class='curline'><a href='../S/986.html#L30'>u</a>                  30 src/units/helper.cpp bool will_certainly_advance(const unit_map::iterator &amp;u)</span>
<span class='curline'><a href='../S/986.html#L32'>u</a>                  32 src/units/helper.cpp 	return u.valid() &amp;&amp; u-&gt;advances() &amp;&amp; number_of_possible_advances(*u) &gt; 0;</span>
<span class='curline'><a href='../S/1000.html#L28'>u</a>                  28 src/units/helper.hpp bool will_certainly_advance(const unit_map::iterator &amp;u);</span>
<span class='curline'><a href='../S/993.html#L70'>u</a>                  70 src/units/map.cpp std::pair&lt;unit_map::unit_iterator, bool&gt; unit_map::add(const map_location &amp;l, const unit &amp;u) {</span>
<span class='curline'><a href='../S/993.html#L72'>u</a>                  72 src/units/map.cpp 	unit_ptr p = unit_ptr (new unit(u)); //TODO: should this instead take a shared pointer to a unit, rather than make a copy?</span>
<span class='curline'><a href='../S/993.html#L254'>u</a>                 254 src/units/map.cpp 	unit_ptr u = uit-&gt;second.unit;</span>
<span class='curline'><a href='../S/993.html#L255'>u</a>                 255 src/units/map.cpp 	size_t uid( u-&gt;underlying_id() );</span>
<span class='curline'><a href='../S/993.html#L257'>u</a>                 257 src/units/map.cpp 	DBG_NG &lt;&lt; "Extract unit " &lt;&lt; uid &lt;&lt; " - " &lt;&lt; u-&gt;id()</span>
<span class='curline'><a href='../S/993.html#L271'>u</a>                 271 src/units/map.cpp 	return u;</span>
<span class='curline'><a href='../S/993.html#L277'>u</a>                 277 src/units/map.cpp 	unit_ptr u = extract(loc);</span>
<span class='curline'><a href='../S/993.html#L278'>u</a>                 278 src/units/map.cpp 	if (!u) return 0;</span>
<span class='curline'><a href='../S/993.html#L279'>u</a>                 279 src/units/map.cpp 	u.reset();</span>
<span class='curline'><a href='../S/993.html#L377'>u</a>                 377 src/units/map.cpp bool unit_map::has_unit(const unit * const u) const</span>
<span class='curline'><a href='../S/993.html#L379'>u</a>                 379 src/units/map.cpp 	assert(u);</span>
<span class='curline'><a href='../S/993.html#L382'>u</a>                 382 src/units/map.cpp 		if(item.second.unit.get() == u) {</span>
<span class='curline'><a href='../S/998.html#L326'>u</a>                 326 src/units/map.hpp 	std::pair&lt;unit_iterator, bool&gt; add(const map_location &amp;l, const unit &amp;u);</span>
<span class='curline'><a href='../S/998.html#L395'>u</a>                 395 src/units/map.hpp 	bool has_unit(const unit * const u) const ;</span>
<span class='curline'><a href='../S/997.html#L1201'>u</a>                1201 src/units/types.cpp 	for (unit_type_map::iterator u = types_.begin(), u_end = types_.end(); u != u_end; ++u) {</span>
<span class='curline'><a href='../S/997.html#L1202'>u</a>                1202 src/units/types.cpp 		build_unit_type(u-&gt;second, status);</span>
<span class='curline'><a href='../S/997.html#L1209'>u</a>                1209 src/units/types.cpp 		for (unit_type_map::iterator u = types_.begin(), u_end = types_.end(); u != u_end; ++u) {</span>
<span class='curline'><a href='../S/997.html#L1210'>u</a>                1210 src/units/types.cpp 			add_advancement(u-&gt;second);</span>
<span class='curline'><a href='../S/990.html#L203'>u</a>                 203 src/units/udisplay.cpp void unit_mover::replace_temporary(unit_ptr u)</span>
<span class='curline'><a href='../S/990.html#L210'>u</a>                 210 src/units/udisplay.cpp 	was_hidden_ = u-&gt;get_hidden();</span>
<span class='curline'><a href='../S/990.html#L213'>u</a>                 213 src/units/udisplay.cpp 	temp_unit_ptr_ = fake_unit_ptr(unit_ptr(new unit(*u)), resources::fake_units);</span>
<span class='curline'><a href='../S/990.html#L217'>u</a>                 217 src/units/udisplay.cpp 	u-&gt;set_hidden(true);</span>
<span class='curline'><a href='../S/990.html#L220'>u</a>                 220 src/units/udisplay.cpp 	is_enemy_ =	resources::gameboard-&gt;get_team(u-&gt;side()).is_enemy(disp_-&gt;viewing_side());</span>
<span class='curline'><a href='../S/990.html#L244'>u</a>                 244 src/units/udisplay.cpp void unit_mover::start(unit_ptr u)</span>
<span class='curline'><a href='../S/990.html#L251'>u</a>                 251 src/units/udisplay.cpp 		was_hidden_ = u-&gt;get_hidden();</span>
<span class='curline'><a href='../S/990.html#L252'>u</a>                 252 src/units/udisplay.cpp 		u-&gt;set_hidden(true);</span>
<span class='curline'><a href='../S/990.html#L261'>u</a>                 261 src/units/udisplay.cpp 	replace_temporary(u);</span>
<span class='curline'><a href='../S/990.html#L297'>u</a>                 297 src/units/udisplay.cpp 	u-&gt;set_facing(temp_unit_ptr_-&gt;facing());</span>
<span class='curline'><a href='../S/990.html#L298'>u</a>                 298 src/units/udisplay.cpp 	u-&gt;anim_comp().set_standing(false);	// Need to reset u's animation so the new facing takes effect.</span>
<span class='curline'><a href='../S/990.html#L299'>u</a>                 299 src/units/udisplay.cpp 	u-&gt;set_hidden(was_hidden_);</span>
<span class='curline'><a href='../S/990.html#L315'>u</a>                 315 src/units/udisplay.cpp void unit_mover::proceed_to(unit_ptr u, size_t path_index, bool update, bool wait)</span>
<span class='curline'><a href='../S/990.html#L326'>u</a>                 326 src/units/udisplay.cpp 		replace_temporary(u);</span>
<span class='curline'><a href='../S/990.html#L331'>u</a>                 331 src/units/udisplay.cpp 		u-&gt;set_hidden(true);</span>
<span class='curline'><a href='../S/990.html#L373'>u</a>                 373 src/units/udisplay.cpp 	u-&gt;set_facing(temp_unit_ptr_-&gt;facing());</span>
<span class='curline'><a href='../S/990.html#L374'>u</a>                 374 src/units/udisplay.cpp 	u-&gt;anim_comp().set_standing(false);	// Need to reset u's animation so the new facing takes effect.</span>
<span class='curline'><a href='../S/990.html#L376'>u</a>                 376 src/units/udisplay.cpp 	shown_unit_ = u;</span>
<span class='curline'><a href='../S/990.html#L414'>u</a>                 414 src/units/udisplay.cpp void unit_mover::finish(unit_ptr u, map_location::DIRECTION dir)</span>
<span class='curline'><a href='../S/990.html#L421'>u</a>                 421 src/units/udisplay.cpp 		u-&gt;anim_comp().set_standing(true);</span>
<span class='curline'><a href='../S/990.html#L435'>u</a>                 435 src/units/udisplay.cpp 		replace_temporary(u);</span>
<span class='curline'><a href='../S/990.html#L446'>u</a>                 446 src/units/udisplay.cpp 		u-&gt;set_hidden(was_hidden_);</span>
<span class='curline'><a href='../S/990.html#L457'>u</a>                 457 src/units/udisplay.cpp 		u-&gt;set_hidden(was_hidden_);</span>
<span class='curline'><a href='../S/990.html#L461'>u</a>                 461 src/units/udisplay.cpp 	u-&gt;set_facing(dir == map_location::NDIRECTIONS ? final_dir : dir);</span>
<span class='curline'><a href='../S/990.html#L462'>u</a>                 462 src/units/udisplay.cpp 	u-&gt;anim_comp().set_standing(true);	// Need to reset u's animation so the new facing takes effect.</span>
<span class='curline'><a href='../S/990.html#L486'>u</a>                 486 src/units/udisplay.cpp void move_unit(const std::vector&lt;map_location&gt;&amp; path, unit_ptr u,</span>
<span class='curline'><a href='../S/990.html#L492'>u</a>                 492 src/units/udisplay.cpp 	mover.start(u);</span>
<span class='curline'><a href='../S/990.html#L493'>u</a>                 493 src/units/udisplay.cpp 	mover.proceed_to(u, path.size());</span>
<span class='curline'><a href='../S/990.html#L494'>u</a>                 494 src/units/udisplay.cpp 	mover.finish(u, dir);</span>
<span class='curline'><a href='../S/990.html#L707'>u</a>                 707 src/units/udisplay.cpp 	unit_map::const_iterator u = disp-&gt;get_units().find(loc);</span>
<span class='curline'><a href='../S/990.html#L708'>u</a>                 708 src/units/udisplay.cpp 	if(u == disp-&gt;get_units().end()) return;</span>
<span class='curline'><a href='../S/990.html#L709'>u</a>                 709 src/units/udisplay.cpp 	u-&gt;set_hidden(true);</span>
<span class='curline'><a href='../S/990.html#L723'>u</a>                 723 src/units/udisplay.cpp 	u-&gt;set_hidden(false);</span>
<span class='curline'><a href='../S/990.html#L724'>u</a>                 724 src/units/udisplay.cpp 	animator.add_animation(&amp;*u, "recruited", loc, leader_loc);</span>
<span class='curline'><a href='../S/1014.html#L54'>u</a>                  54 src/units/udisplay.hpp 	void start(unit_ptr u);</span>
<span class='curline'><a href='../S/1014.html#L55'>u</a>                  55 src/units/udisplay.hpp 	void proceed_to(unit_ptr u, size_t path_index, bool update=false, bool wait=true);</span>
<span class='curline'><a href='../S/1014.html#L57'>u</a>                  57 src/units/udisplay.hpp 	void finish(unit_ptr u, map_location::DIRECTION dir = map_location::NDIRECTIONS);</span>
<span class='curline'><a href='../S/1014.html#L60'>u</a>                  60 src/units/udisplay.hpp 	void replace_temporary(unit_ptr u);</span>
<span class='curline'><a href='../S/1014.html#L82'>u</a>                  82 src/units/udisplay.hpp void move_unit(const std::vector&lt;map_location&gt;&amp; path, unit_ptr u,</span>
<span class='curline'><a href='../S/1014.html#L91'>u</a>                  91 src/units/udisplay.hpp void unit_draw_weapon( const map_location&amp; loc, unit&amp; u, const_attack_ptr attack=nullptr, const_attack_ptr secondary_attack=nullptr,const map_location&amp; defender_loc = map_location::null_location(), unit * defender=nullptr);</span>
<span class='curline'><a href='../S/1014.html#L97'>u</a>                  97 src/units/udisplay.hpp void unit_sheath_weapon( const map_location&amp; loc, unit* u=nullptr, const_attack_ptr attack=nullptr, const_attack_ptr secondary_attack=nullptr,const map_location&amp; defender_loc = map_location::null_location(), unit * defender=nullptr);</span>
<span class='curline'><a href='../S/1014.html#L104'>u</a>                 104 src/units/udisplay.hpp  void unit_die( const map_location&amp; loc, unit&amp; u,</span>
<span class='curline'><a href='../S/1008.html#L166'>u</a>                 166 src/units/unit.cpp void intrusive_ptr_add_ref(const unit* u)</span>
<span class='curline'><a href='../S/1008.html#L168'>u</a>                 168 src/units/unit.cpp 	assert(u-&gt;ref_count_ &gt;= 0);</span>
<span class='curline'><a href='../S/1008.html#L174'>u</a>                 174 src/units/unit.cpp 	assert(u-&gt;ref_count_ &lt; 100000);</span>
<span class='curline'><a href='../S/1008.html#L175'>u</a>                 175 src/units/unit.cpp 	LOG_UT &lt;&lt; "Adding a reference to a unit: id = " &lt;&lt; u-&gt;id() &lt;&lt; ", uid = " &lt;&lt; u-&gt;underlying_id() &lt;&lt; ", refcount = " &lt;&lt; u-&gt;ref_count() &lt;&lt; " ptr:" &lt;&lt; u &lt;&lt; std::endl;</span>
<span class='curline'><a href='../S/1008.html#L176'>u</a>                 176 src/units/unit.cpp 	if(u-&gt;ref_count_ == 0) {</span>
<span class='curline'><a href='../S/1008.html#L179'>u</a>                 179 src/units/unit.cpp 	++(u-&gt;ref_count_);</span>
<span class='curline'><a href='../S/1008.html#L182'>u</a>                 182 src/units/unit.cpp void intrusive_ptr_release(const unit* u)</span>
<span class='curline'><a href='../S/1008.html#L184'>u</a>                 184 src/units/unit.cpp 	assert(u-&gt;ref_count_ &gt;= 1);</span>
<span class='curline'><a href='../S/1008.html#L185'>u</a>                 185 src/units/unit.cpp 	assert(u-&gt;ref_count_ &lt; 100000); //See comment in intrusive_ptr_add_ref</span>
<span class='curline'><a href='../S/1008.html#L186'>u</a>                 186 src/units/unit.cpp 	LOG_UT &lt;&lt; "Removing a reference to a unit: id = " &lt;&lt; u-&gt;id() &lt;&lt; ", uid = " &lt;&lt; u-&gt;underlying_id() &lt;&lt; ", refcount = " &lt;&lt; u-&gt;ref_count() &lt;&lt; " ptr:" &lt;&lt; u &lt;&lt; std::endl;</span>
<span class='curline'><a href='../S/1008.html#L187'>u</a>                 187 src/units/unit.cpp 	if(--(u-&gt;ref_count_) == 0)</span>
<span class='curline'><a href='../S/1008.html#L189'>u</a>                 189 src/units/unit.cpp 		LOG_UT &lt;&lt; "Deleting a unit: id = " &lt;&lt; u-&gt;id() &lt;&lt; ", uid = " &lt;&lt; u-&gt;underlying_id() &lt;&lt; std::endl;</span>
<span class='curline'><a href='../S/1008.html#L190'>u</a>                 190 src/units/unit.cpp 		delete u;</span>
<span class='curline'><a href='../S/1008.html#L619'>u</a>                 619 src/units/unit.cpp 	for(auto&amp; u : units_with_cache) {</span>
<span class='curline'><a href='../S/1008.html#L620'>u</a>                 620 src/units/unit.cpp 		u-&gt;clear_visibility_cache();</span>
<span class='curline'><a href='../S/1008.html#L2418'>u</a>                2418 src/units/unit.cpp unit_movement_resetter::unit_movement_resetter(const unit &amp;u, bool operate)</span>
<span class='curline'><a href='../S/1008.html#L2419'>u</a>                2419 src/units/unit.cpp 	: u_(const_cast&lt;unit&amp;&gt;(u))</span>
<span class='curline'><a href='../S/1008.html#L2420'>u</a>                2420 src/units/unit.cpp 	, moves_(u.movement_left(true))</span>
<span class='curline'><a href='../S/1008.html#L2530'>u</a>                2530 src/units/unit.cpp std::string get_checksum(const unit&amp; u)</span>
<span class='curline'><a href='../S/1008.html#L2534'>u</a>                2534 src/units/unit.cpp 	u.write(unit_config);</span>
<span class='curline'><a href='../S/989.html#L113'>u</a>                 113 src/units/unit.hpp 	unit(const unit&amp; u);</span>
<span class='curline'><a href='../S/989.html#L1709'>u</a>                1709 src/units/unit.hpp 	unit_movement_resetter(const unit&amp; u, bool operate = true);</span>
<span class='curline'><a href='../S/989.html#L1728'>u</a>                1728 src/units/unit.hpp std::string get_checksum(const unit&amp; u);</span>
<span class='curline'><a href='../S/1237.html#L55'>u</a>                  55 src/whiteboard/attack.cpp attack::attack(size_t team_index, bool hidden, unit&amp; u, const map_location&amp; target_hex, int weapon_choice, const pathfind::marked_route&amp; route,</span>
<span class='curline'><a href='../S/1237.html#L57'>u</a>                  57 src/whiteboard/attack.cpp 	: move(team_index, hidden, u, route, arrow, fake_unit),</span>
<span class='curline'><a href='../S/1233.html#L763'>u</a>                 763 src/whiteboard/manager.cpp 		unit* u = future_visible_unit(route_-&gt;steps.front());</span>
<span class='curline'><a href='../S/1233.html#L764'>u</a>                 764 src/whiteboard/manager.cpp 		assert(u);</span>
<span class='curline'><a href='../S/1233.html#L765'>u</a>                 765 src/whiteboard/manager.cpp 		size_t first_turn = sa.get_turn_num_of(*u);</span>
<span class='curline'><a href='../S/1233.html#L784'>u</a>                 784 src/whiteboard/manager.cpp 			route.move_cost = path_cost(route.steps,*u);</span>
<span class='curline'><a href='../S/1233.html#L786'>u</a>                 786 src/whiteboard/manager.cpp 			sa.queue_move(turn,*u,route,move_arrow,fake_unit);</span>
<span class='curline'><a href='../S/1244.html#L65'>u</a>                  65 src/whiteboard/mapbuilder.cpp 	for (unit&amp; u : resources::gameboard-&gt;units()) {</span>
<span class='curline'><a href='../S/1244.html#L66'>u</a>                  66 src/whiteboard/mapbuilder.cpp 		bool on_current_side = (u.side() == current_side);</span>
<span class='curline'><a href='../S/1244.html#L71'>u</a>                  71 src/whiteboard/mapbuilder.cpp 		if(!on_current_side &amp;&amp; !u.is_visible_to_team(resources::gameboard-&gt;teams()[viewer_team()], *resources::gameboard, false)) {</span>
<span class='curline'><a href='../S/1244.html#L72'>u</a>                  72 src/whiteboard/mapbuilder.cpp 			removers_.push_back(new temporary_unit_remover(resources::gameboard-&gt;units(), u.get_location()));</span>
<span class='curline'><a href='../S/1244.html#L81'>u</a>                  81 src/whiteboard/mapbuilder.cpp 		resetters_.push_back(new unit_movement_resetter(u,!on_current_side));</span>
<span class='curline'><a href='../S/1244.html#L84'>u</a>                  84 src/whiteboard/mapbuilder.cpp 			acted_this_turn_.insert(&amp;u);</span>
<span class='curline'><a href='../S/1242.html#L65'>u</a>                  65 src/whiteboard/move.cpp move::move(size_t team_index, bool hidden, unit&amp; u, const pathfind::marked_route&amp; route,</span>
<span class='curline'><a href='../S/1242.html#L68'>u</a>                  68 src/whiteboard/move.cpp   unit_underlying_id_(u.underlying_id()),</span>
<span class='curline'><a href='../S/1229.html#L611'>u</a>                 611 src/whiteboard/side_actions.cpp size_t side_actions::get_turn_num_of(unit const&amp; u) const</span>
<span class='curline'><a href='../S/1229.html#L613'>u</a>                 613 src/whiteboard/side_actions.cpp 	const_iterator itor = find_last_action_of(u);</span>
<span class='curline'><a href='../S/1229.html#L871'>u</a>                 871 src/whiteboard/side_actions.cpp 		unit_const_ptr u = act-&gt;get_unit();</span>
<span class='curline'><a href='../S/1229.html#L872'>u</a>                 872 src/whiteboard/side_actions.cpp 		if(u) {</span>
<span class='curline'><a href='../S/1229.html#L873'>u</a>                 873 src/whiteboard/side_actions.cpp 			lazy_units.insert(u);</span>
<span class='curline'><a href='../S/1234.html#L84'>u</a>                  84 src/whiteboard/utility.cpp 	for(unit&amp; u : resources::gameboard-&gt;units())</span>
<span class='curline'><a href='../S/1234.html#L85'>u</a>                  85 src/whiteboard/utility.cpp 		if(u.can_recruit()</span>
<span class='curline'><a href='../S/1234.html#L86'>u</a>                  86 src/whiteboard/utility.cpp 				&amp;&amp; u.side() == static_cast&lt;int&gt;(team_index+1)</span>
<span class='curline'><a href='../S/1234.html#L87'>u</a>                  87 src/whiteboard/utility.cpp 				&amp;&amp; dynamic_cast&lt;game_state*&gt;(resources::filter_con)-&gt;can_recruit_on(u, hex))</span>
<span class='curline'><a href='../S/1234.html#L88'>u</a>                  88 src/whiteboard/utility.cpp 			return &amp;u;</span>
<span class='curline'><a href='../S/1234.html#L113'>u</a>                 113 src/whiteboard/utility.cpp int path_cost(std::vector&lt;map_location&gt; const&amp; path, unit const&amp; u)</span>
<span class='curline'><a href='../S/1234.html#L118'>u</a>                 118 src/whiteboard/utility.cpp 	team const&amp; u_team = resources::gameboard-&gt;get_team(u.side());</span>
<span class='curline'><a href='../S/1234.html#L122'>u</a>                 122 src/whiteboard/utility.cpp 		return u.total_movement();</span>
<span class='curline'><a href='../S/1234.html#L127'>u</a>                 127 src/whiteboard/utility.cpp 		result += u.movement_cost(map[loc]);</span>
<span class='curline'><a href='../S/1234.html#L132'>u</a>                 132 src/whiteboard/utility.cpp temporary_unit_hider::temporary_unit_hider(unit&amp; u)</span>
<span class='curline'><a href='../S/1234.html#L133'>u</a>                 133 src/whiteboard/utility.cpp 		: unit_(&amp;u)</span>
<span class='curline'><a href='../S/1228.html#L67'>u</a>                  67 src/whiteboard/utility.hpp int path_cost(std::vector&lt;map_location&gt; const&amp; path, unit const&amp; u);</span>
<span class='curline'><a href='../S/1228.html#L70'>u</a>                  70 src/whiteboard/utility.hpp 	temporary_unit_hider(unit&amp; u);</span>
<span class='curline'><a href='../S/1081.html#L516'>u</a>                 516 src/xBRZ/xbrz.cpp     double u = scale_u * (b_diff - y);					  //value range: 255 * 2 * u_max * [-1, 1]</span>
<span class='curline'><a href='../S/1081.html#L523'>u</a>                 523 src/xBRZ/xbrz.cpp     assert(std::abs(u) &lt;= 255 * 2 * u_max + eps);</span>
<span class='curline'><a href='../S/1081.html#L526'>u</a>                 526 src/xBRZ/xbrz.cpp     return std::sqrt(square(luminanceWeight * y) + square(u) +  square(v));</span>
<span class='curline'><a href='../S/1345.html#L182'>u</a>                 182 utils/wesnoth-attack-sim.c 	struct unit *u = (unit *)malloc(sizeof(*u));</span>
<span class='curline'><a href='../S/1345.html#L184'>u</a>                 184 utils/wesnoth-attack-sim.c 	u-&gt;damage = atoi((*argv)[1]);</span>
<span class='curline'><a href='../S/1345.html#L185'>u</a>                 185 utils/wesnoth-attack-sim.c 	u-&gt;num_attacks = atoi((*argv)[2]);</span>
<span class='curline'><a href='../S/1345.html#L186'>u</a>                 186 utils/wesnoth-attack-sim.c 	u-&gt;hp = u-&gt;max_hp = atoi((*argv)[3]);</span>
<span class='curline'><a href='../S/1345.html#L187'>u</a>                 187 utils/wesnoth-attack-sim.c 	u-&gt;hit_chance = atoi((*argv)[4]);</span>
<span class='curline'><a href='../S/1345.html#L188'>u</a>                 188 utils/wesnoth-attack-sim.c 	u-&gt;slows = false;</span>
<span class='curline'><a href='../S/1345.html#L189'>u</a>                 189 utils/wesnoth-attack-sim.c 	u-&gt;slowed = false;</span>
<span class='curline'><a href='../S/1345.html#L190'>u</a>                 190 utils/wesnoth-attack-sim.c 	u-&gt;drains = false;</span>
<span class='curline'><a href='../S/1345.html#L191'>u</a>                 191 utils/wesnoth-attack-sim.c 	u-&gt;berserk = false;</span>
<span class='curline'><a href='../S/1345.html#L192'>u</a>                 192 utils/wesnoth-attack-sim.c 	u-&gt;swarm = false;</span>
<span class='curline'><a href='../S/1345.html#L193'>u</a>                 193 utils/wesnoth-attack-sim.c 	u-&gt;firststrike = false;</span>
<span class='curline'><a href='../S/1345.html#L197'>u</a>                 197 utils/wesnoth-attack-sim.c 			u-&gt;max_hp = atoi(max + strlen("maxhp="));</span>
<span class='curline'><a href='../S/1345.html#L198'>u</a>                 198 utils/wesnoth-attack-sim.c 			if (u-&gt;max_hp &lt; u-&gt;hp)</span>
<span class='curline'><a href='../S/1345.html#L204'>u</a>                 204 utils/wesnoth-attack-sim.c 			u-&gt;drains = true;</span>
<span class='curline'><a href='../S/1345.html#L207'>u</a>                 207 utils/wesnoth-attack-sim.c 			u-&gt;slows = true;</span>
<span class='curline'><a href='../S/1345.html#L209'>u</a>                 209 utils/wesnoth-attack-sim.c 			u-&gt;berserk = true;</span>
<span class='curline'><a href='../S/1345.html#L211'>u</a>                 211 utils/wesnoth-attack-sim.c 			u-&gt;firststrike = true;</span>
<span class='curline'><a href='../S/1345.html#L215'>u</a>                 215 utils/wesnoth-attack-sim.c 			u-&gt;swarm = true;</span>
<span class='curline'><a href='../S/1345.html#L221'>u</a>                 221 utils/wesnoth-attack-sim.c 	return u;</span>
<span class='curline'><a href='../S/1345.html#L238'>u</a>                 238 utils/wesnoth-attack-sim.c static void draw_results(const double res[], const struct unit *u,</span>
<span class='curline'><a href='../S/1345.html#L245'>u</a>                 245 utils/wesnoth-attack-sim.c 	       label, u-&gt;damage, u-&gt;num_attacks, u-&gt;hp, u-&gt;hit_chance);</span>
<span class='curline'><a href='../S/1345.html#L246'>u</a>                 246 utils/wesnoth-attack-sim.c 	if (u-&gt;drains)</span>
<span class='curline'><a href='../S/1345.html#L248'>u</a>                 248 utils/wesnoth-attack-sim.c 	if (u-&gt;slows)</span>
<span class='curline'><a href='../S/1345.html#L250'>u</a>                 250 utils/wesnoth-attack-sim.c 	if (u-&gt;berserk)</span>
<span class='curline'><a href='../S/1345.html#L252'>u</a>                 252 utils/wesnoth-attack-sim.c 	if (u-&gt;swarm)</span>
<span class='curline'><a href='../S/1345.html#L254'>u</a>                 254 utils/wesnoth-attack-sim.c 	if (u-&gt;firststrike)</span>
<span class='curline'><a href='../S/1345.html#L256'>u</a>                 256 utils/wesnoth-attack-sim.c 	printf("maxhp=%u ", u-&gt;max_hp);</span>
<span class='curline'><a href='../S/1345.html#L261'>u</a>                 261 utils/wesnoth-attack-sim.c 	for (i = 0; i &lt; u-&gt;max_hp+1; i++)</span>
<span class='curline'><a href='../S/1345.html#L266'>u</a>                 266 utils/wesnoth-attack-sim.c static void compare_results(const double res[], const struct unit *u,</span>
<span class='curline'><a href='../S/1345.html#L275'>u</a>                 275 utils/wesnoth-attack-sim.c 		label, u-&gt;damage, u-&gt;num_attacks, u-&gt;hp, u-&gt;hit_chance);</span>
<span class='curline'><a href='../S/1345.html#L276'>u</a>                 276 utils/wesnoth-attack-sim.c 	if (u-&gt;drains)</span>
<span class='curline'><a href='../S/1345.html#L278'>u</a>                 278 utils/wesnoth-attack-sim.c 	if (u-&gt;slows)</span>
<span class='curline'><a href='../S/1345.html#L280'>u</a>                 280 utils/wesnoth-attack-sim.c 	if (u-&gt;berserk)</span>
<span class='curline'><a href='../S/1345.html#L282'>u</a>                 282 utils/wesnoth-attack-sim.c 	if (u-&gt;swarm)</span>
<span class='curline'><a href='../S/1345.html#L284'>u</a>                 284 utils/wesnoth-attack-sim.c 	if (u-&gt;firststrike)</span>
<span class='curline'><a href='../S/1345.html#L286'>u</a>                 286 utils/wesnoth-attack-sim.c 	sprintf(cmp+strlen(cmp), "maxhp=%u", u-&gt;max_hp);</span>
<span class='curline'><a href='../S/1345.html#L306'>u</a>                 306 utils/wesnoth-attack-sim.c 	for (i = 0; i &lt; u-&gt;max_hp+1; i++) {</span>
<span class='curline'><a href='../S/1345.html#L337'>u</a>                 337 utils/wesnoth-attack-sim.c 	struct unit u[NUM_UNITS];</span>
<span class='curline'><a href='../S/1345.html#L350'>u</a>                 350 utils/wesnoth-attack-sim.c 		u[i].slows       = (i % 11) % 3 == 0;</span>
<span class='curline'><a href='../S/1345.html#L351'>u</a>                 351 utils/wesnoth-attack-sim.c 		u[i].drains      = (i % 13) % 4 == 0;</span>
<span class='curline'><a href='../S/1345.html#L352'>u</a>                 352 utils/wesnoth-attack-sim.c 		u[i].swarm       =  i % 5       == 0;</span>
<span class='curline'><a href='../S/1345.html#L353'>u</a>                 353 utils/wesnoth-attack-sim.c 		u[i].berserk     =  i % 7       == 0;</span>
<span class='curline'><a href='../S/1345.html#L354'>u</a>                 354 utils/wesnoth-attack-sim.c 		u[i].firststrike = (i % 17) / 2 == 0;</span>
<span class='curline'><a href='../S/1345.html#L358'>u</a>                 358 utils/wesnoth-attack-sim.c 		u[i].num_attacks = (alt%19 + 3) / 4;         // range: 0-5, with 0 and 5 less common</span>
<span class='curline'><a href='../S/1345.html#L359'>u</a>                 359 utils/wesnoth-attack-sim.c 		u[i].max_hp      = (i*2)%23 + (i*3)%14 + 25; // range: 25-60, with a bit of a bell curve.</span>
<span class='curline'><a href='../S/1345.html#L364'>u</a>                 364 utils/wesnoth-attack-sim.c 		u[i].hit_chance  = (i % 6)*10 + 30;         // range: 30%-80%</span>
<span class='curline'><a href='../S/1345.html#L365'>u</a>                 365 utils/wesnoth-attack-sim.c 		u[i].damage      = alt % 8 + 2;             // range: 2-9</span>
<span class='curline'><a href='../S/1345.html#L366'>u</a>                 366 utils/wesnoth-attack-sim.c 		u[i].hp          = (alt*5)%u[i].max_hp + 1; // range: 1-max_hp</span>
<span class='curline'><a href='../S/1345.html#L380'>u</a>                 380 utils/wesnoth-attack-sim.c 				double i_result[u[i].max_hp+1];</span>
<span class='curline'><a href='../S/1345.html#L381'>u</a>                 381 utils/wesnoth-attack-sim.c 				double j_result[u[j].max_hp+1];</span>
<span class='curline'><a href='../S/1345.html#L382'>u</a>                 382 utils/wesnoth-attack-sim.c 				double k_result[u[k].max_hp+1];</span>
<span class='curline'><a href='../S/1345.html#L394'>u</a>                 394 utils/wesnoth-attack-sim.c 				attackers[0] = &amp;u[j];</span>
<span class='curline'><a href='../S/1345.html#L395'>u</a>                 395 utils/wesnoth-attack-sim.c 				attackers[1] = &amp;u[k];</span>
<span class='curline'><a href='../S/1345.html#L396'>u</a>                 396 utils/wesnoth-attack-sim.c 				calculate_attack(&amp;u[i], i_result, &amp;i_touched, touched,</span>
<span class='curline'><a href='../S/1345.html#L399'>u</a>                 399 utils/wesnoth-attack-sim.c 				check_sum(i_result, u[i].max_hp);</span>
<span class='curline'><a href='../S/1345.html#L400'>u</a>                 400 utils/wesnoth-attack-sim.c 				check_sum(j_result, u[j].max_hp);</span>
<span class='curline'><a href='../S/1345.html#L401'>u</a>                 401 utils/wesnoth-attack-sim.c 				check_sum(k_result, u[k].max_hp);</span>
<span class='curline'><a href='../S/1345.html#L402'>u</a>                 402 utils/wesnoth-attack-sim.c 				compare_results(i_result, &amp;u[i], "Defender",</span>
<span class='curline'><a href='../S/1345.html#L404'>u</a>                 404 utils/wesnoth-attack-sim.c 				compare_results(j_result, &amp;u[j], "Attacker #1",</span>
<span class='curline'><a href='../S/1345.html#L406'>u</a>                 406 utils/wesnoth-attack-sim.c 				compare_results(k_result, &amp;u[k], "Attacker #2",</span>
</pre>
</body>
</html>
