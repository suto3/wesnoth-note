<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>drains_damage</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/901.html#L1057'>drains_damage</a>    1057 src/actions/attack.cpp 	int drains_damage = 0;</span>
<span class='curline'><a href='../S/901.html#L1059'>drains_damage</a>    1059 src/actions/attack.cpp 		drains_damage = damage_done * attacker_stats-&gt;drain_percent / 100 + attacker_stats-&gt;drain_constant;</span>
<span class='curline'><a href='../S/901.html#L1062'>drains_damage</a>    1062 src/actions/attack.cpp 		drains_damage =</span>
<span class='curline'><a href='../S/901.html#L1063'>drains_damage</a>    1063 src/actions/attack.cpp 			std::min&lt;int&gt;(drains_damage, attacker.get_unit().max_hitpoints() - attacker.get_unit().hitpoints());</span>
<span class='curline'><a href='../S/901.html#L1066'>drains_damage</a>    1066 src/actions/attack.cpp 		drains_damage = std::max&lt;int&gt;(drains_damage, 1 - attacker.get_unit().hitpoints());</span>
<span class='curline'><a href='../S/901.html#L1102'>drains_damage</a>    1102 src/actions/attack.cpp 			abs_n, float_text.str(), drains_damage, "",</span>
<span class='curline'><a href='../S/901.html#L1115'>drains_damage</a>    1115 src/actions/attack.cpp 			: statistics::attack_context::MISSES, damage_done, drains_damage</span>
<span class='curline'><a href='../S/901.html#L1122'>drains_damage</a>    1122 src/actions/attack.cpp 			: statistics::attack_context::MISSES, damage_done, drains_damage</span>
<span class='curline'><a href='../S/901.html#L1169'>drains_damage</a>    1169 src/actions/attack.cpp 	if(drains_damage &gt; 0) {</span>
<span class='curline'><a href='../S/901.html#L1170'>drains_damage</a>    1170 src/actions/attack.cpp 		attacker.get_unit().heal(drains_damage);</span>
<span class='curline'><a href='../S/901.html#L1171'>drains_damage</a>    1171 src/actions/attack.cpp 	} else if(drains_damage &lt; 0) {</span>
<span class='curline'><a href='../S/901.html#L1172'>drains_damage</a>    1172 src/actions/attack.cpp 		attacker_dies = attacker.get_unit().take_hit(-drains_damage);</span>
</pre>
</body>
</html>
