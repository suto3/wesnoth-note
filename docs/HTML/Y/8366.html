<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>def_weapon</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/4380.html#L87'>def_weapon</a>         87 data/ai/lua/battle_calcs.lua function battle_calcs.strike_damage(attacker, defender, att_weapon, def_weapon, dst, cache)</span>
<span class='curline'><a href='../S/4380.html#L107'>def_weapon</a>        107 data/ai/lua/battle_calcs.lua     cind = cind .. '-' .. att_weapon .. 'x' .. def_weapon</span>
<span class='curline'><a href='../S/4380.html#L129'>def_weapon</a>        129 data/ai/lua/battle_calcs.lua     if (def_weapon ~= 0) then</span>
<span class='curline'><a href='../S/4380.html#L131'>def_weapon</a>        131 data/ai/lua/battle_calcs.lua         def_damage = defender_info.attacks[def_weapon].damage</span>
<span class='curline'><a href='../S/4380.html#L134'>def_weapon</a>        134 data/ai/lua/battle_calcs.lua         def_multiplier = attacker_info.resist_mod[defender_info.attacks[def_weapon].type] or 1</span>
<span class='curline'><a href='../S/4380.html#L154'>def_weapon</a>        154 data/ai/lua/battle_calcs.lua     if (def_weapon ~= 0) then</span>
<span class='curline'><a href='../S/4380.html#L167'>def_weapon</a>        167 data/ai/lua/battle_calcs.lua             def_attack = defender_info.attacks[def_weapon]</span>
<span class='curline'><a href='../S/4380.html#L171'>def_weapon</a>        171 data/ai/lua/battle_calcs.lua     return att_damage, def_damage, attacker_info.attacks[att_weapon], defender_info.attacks[def_weapon]</span>
<span class='curline'><a href='../S/4380.html#L209'>def_weapon</a>        209 data/ai/lua/battle_calcs.lua         for def_weapon_number,def_weapon in ipairs(defender_info.attacks) do</span>
<span class='curline'><a href='../S/4380.html#L210'>def_weapon</a>        210 data/ai/lua/battle_calcs.lua             if (def_weapon.range == att_weapon.range) then</span>
<span class='curline'><a href='../S/4380.html#L212'>def_weapon</a>        212 data/ai/lua/battle_calcs.lua                 local def_rating = def_damage * def_weapon.number</span>
<span class='curline'><a href='../S/4380.html#L651'>def_weapon</a>        651 data/ai/lua/battle_calcs.lua     local att_weapon, def_weapon = 0, 0</span>
<span class='curline'><a href='../S/4380.html#L652'>def_weapon</a>        652 data/ai/lua/battle_calcs.lua     if (not cfg.att_weapon) or (not cfg.def_weapon) then</span>
<span class='curline'><a href='../S/4380.html#L653'>def_weapon</a>        653 data/ai/lua/battle_calcs.lua         att_weapon, def_weapon = battle_calcs.best_weapons(attacker, defender, dst, cache)</span>
<span class='curline'><a href='../S/4380.html#L655'>def_weapon</a>        655 data/ai/lua/battle_calcs.lua         att_weapon, def_weapon = cfg.att_weapon, cfg.def_weapon</span>
<span class='curline'><a href='../S/4380.html#L661'>def_weapon</a>        661 data/ai/lua/battle_calcs.lua         battle_calcs.strike_damage(attacker, defender, att_weapon, def_weapon, { dst[1], dst[2] }, cache)</span>
<span class='curline'><a href='../S/4380.html#L789'>def_weapon</a>        789 data/ai/lua/battle_calcs.lua         local battle_cfg = { att_weapon = cfg.att_weapon, def_weapon = cfg.def_weapon, dst = dst }</span>
<span class='curline'><a href='../S/896.html#L494'>def_weapon</a>        494 src/actions/attack.cpp 		const_attack_ptr def_weapon = *defender_weapon &gt;= 0 ? defender.attacks()[*defender_weapon].shared_from_this() : nullptr;</span>
<span class='curline'><a href='../S/896.html#L496'>def_weapon</a>        496 src/actions/attack.cpp 						true, defender, defender_loc, def_weapon, units);</span>
<span class='curline'><a href='../S/896.html#L514'>def_weapon</a>        514 src/actions/attack.cpp 		int def_weapon = choose_defender_weapon(attacker, defender, choices[i], units,</span>
<span class='curline'><a href='../S/896.html#L519'>def_weapon</a>        519 src/actions/attack.cpp 			if (def_weapon &gt;= 0) {</span>
<span class='curline'><a href='../S/896.html#L520'>def_weapon</a>        520 src/actions/attack.cpp 				def = defender.attacks()[def_weapon].shared_from_this();</span>
<span class='curline'><a href='../S/896.html#L529'>def_weapon</a>        529 src/actions/attack.cpp 			defender_stats_ = new battle_context_unit_stats(defender, defender_loc, def_weapon, false,</span>
<span class='curline'><a href='../S/247.html#L1059'>def_weapon</a>       1059 src/ai/default/recruitment.cpp 			const_attack_ptr att_weapon, const_attack_ptr def_weapon,</span>
<span class='curline'><a href='../S/247.html#L1063'>def_weapon</a>       1063 src/ai/default/recruitment.cpp 			attacker_stats(attacker, att_weapon, true, defender, def_weapon,</span>
<span class='curline'><a href='../S/247.html#L1065'>def_weapon</a>       1065 src/ai/default/recruitment.cpp 			defender_stats(defender, def_weapon, false, attacker, att_weapon,</span>
<span class='curline'><a href='../S/247.html#L1129'>def_weapon</a>       1129 src/ai/default/recruitment.cpp 		for (const attack_type&amp; def_weapon : defender_weapons) {</span>
<span class='curline'><a href='../S/247.html#L1130'>def_weapon</a>       1130 src/ai/default/recruitment.cpp 			if (att_weapon.range() != def_weapon.range()) {</span>
<span class='curline'><a href='../S/247.html#L1136'>def_weapon</a>       1136 src/ai/default/recruitment.cpp 					att_weapon.shared_from_this(), def_weapon.shared_from_this(), average_lawful_bonus_));</span>
<span class='curline'><a href='../S/87.html#L87'>def_weapon</a>         87 src/replay_helper.cpp 	int att_weapon, int def_weapon, const std::string&amp; attacker_type_id,</span>
<span class='curline'><a href='../S/87.html#L101'>def_weapon</a>        101 src/replay_helper.cpp 	move["defender_weapon"] = def_weapon;</span>
<span class='curline'><a href='../S/967.html#L35'>def_weapon</a>         35 src/replay_helper.hpp 		int att_weapon, int def_weapon, const std::string&amp; attacker_type_id,</span>
<span class='curline'><a href='../S/996.html#L890'>def_weapon</a>        890 src/units/abilities.cpp 	const_attack_ptr def_weapon = is_attacker_ ? other_attack_ : shared_from_this();</span>
<span class='curline'><a href='../S/996.html#L899'>def_weapon</a>        899 src/units/abilities.cpp 	if (!special_unit_matches(def, att, def_loc, def_weapon, special, is_for_listing_, "filter_defender"))</span>
</pre>
</body>
</html>
