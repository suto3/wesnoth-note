<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>d_</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/898.html#L753'>d_</a>                753 src/actions/attack.cpp 		unit_info a_, d_;</span>
<span class='curline'><a href='../S/898.html#L811'>d_</a>                811 src/actions/attack.cpp 		d_(defender, defend_with, resources::gameboard-&gt;units()),</span>
<span class='curline'><a href='../S/898.html#L834'>d_</a>                834 src/actions/attack.cpp 		if(d_stats_-&gt;weapon != nullptr &amp;&amp; d_.valid()) {</span>
<span class='curline'><a href='../S/898.html#L845'>d_</a>                845 src/actions/attack.cpp 			resources::game_events-&gt;pump().fire(n, a_.loc_, d_.loc_, ev_data);</span>
<span class='curline'><a href='../S/898.html#L848'>d_</a>                848 src/actions/attack.cpp 		const int defender_side = d_.get_unit().side();</span>
<span class='curline'><a href='../S/898.html#L850'>d_</a>                850 src/actions/attack.cpp 			game_events::entity_location(d_.loc_, d_.id_), ev_data);</span>
<span class='curline'><a href='../S/898.html#L855'>d_</a>                855 src/actions/attack.cpp 		if(!a_.valid() || !d_.valid() || !resources::gameboard-&gt;get_team(a_.get_unit().side()).is_enemy(d_.get_unit().side())) {</span>
<span class='curline'><a href='../S/898.html#L872'>d_</a>                872 src/actions/attack.cpp 		if (d_.valid()) {</span>
<span class='curline'><a href='../S/898.html#L873'>d_</a>                873 src/actions/attack.cpp 			refresh_weapon_index(d_.weapon_, d_.weap_id_, d_.get_unit().attacks());</span>
<span class='curline'><a href='../S/898.html#L875'>d_</a>                875 src/actions/attack.cpp 		if(!a_.valid() || !d_.valid()) {</span>
<span class='curline'><a href='../S/898.html#L882'>d_</a>                882 src/actions/attack.cpp 				d_.valid() &amp;&amp; d_.weapon_ &gt;= 0</span>
<span class='curline'><a href='../S/898.html#L883'>d_</a>                883 src/actions/attack.cpp 					? d_.get_unit().attacks()[d_.weapon_].shared_from_this() : nullptr;</span>
<span class='curline'><a href='../S/898.html#L888'>d_</a>                888 src/actions/attack.cpp 		*bc_ =	battle_context(units_, a_.loc_, d_.loc_, a_.weapon_, d_.weapon_);</span>
<span class='curline'><a href='../S/898.html#L892'>d_</a>                892 src/actions/attack.cpp 		d_.cth_ = d_stats_-&gt;chance_to_hit;</span>
<span class='curline'><a href='../S/898.html#L894'>d_</a>                894 src/actions/attack.cpp 		d_.damage_ = d_stats_-&gt;damage;</span>
<span class='curline'><a href='../S/898.html#L900'>d_</a>                900 src/actions/attack.cpp 			&amp;attacker = *(attacker_turn ? &amp;a_ : &amp;d_),</span>
<span class='curline'><a href='../S/898.html#L901'>d_</a>                901 src/actions/attack.cpp 			&amp;defender = *(attacker_turn ? &amp;d_ : &amp;a_);</span>
<span class='curline'><a href='../S/898.html#L1001'>d_</a>               1001 src/actions/attack.cpp 				errbuf_ &lt;&lt; "SYNC: In attack " &lt;&lt; a_.dump() &lt;&lt; " vs " &lt;&lt; d_.dump()</span>
<span class='curline'><a href='../S/898.html#L1192'>d_</a>               1192 src/actions/attack.cpp 		if(!a_.valid() || !d_.valid()) {</span>
<span class='curline'><a href='../S/898.html#L1203'>d_</a>               1203 src/actions/attack.cpp 		a_.get_unit().set_facing(a_.loc_.get_relative_dir(d_.loc_));</span>
<span class='curline'><a href='../S/898.html#L1204'>d_</a>               1204 src/actions/attack.cpp 		d_.get_unit().set_facing(d_.loc_.get_relative_dir(a_.loc_));</span>
<span class='curline'><a href='../S/898.html#L1213'>d_</a>               1213 src/actions/attack.cpp 		d_.get_unit().set_resting(false);</span>
<span class='curline'><a href='../S/898.html#L1218'>d_</a>               1218 src/actions/attack.cpp 		bc_ = new battle_context(units_, a_.loc_, d_.loc_, a_.weapon_, d_.weapon_);</span>
<span class='curline'><a href='../S/898.html#L1225'>d_</a>               1225 src/actions/attack.cpp 			d_.weap_id_ = d_stats_-&gt;weapon-&gt;id();</span>
<span class='curline'><a href='../S/898.html#L1236'>d_</a>               1236 src/actions/attack.cpp 		statistics::attack_context attack_stats(a_.get_unit(), d_.get_unit(), a_stats_-&gt;chance_to_hit, d_stats_-&gt;chance_to_hit);</span>
<span class='curline'><a href='../S/898.html#L1239'>d_</a>               1239 src/actions/attack.cpp 		d_.orig_attacks_ = d_stats_-&gt;num_blows;</span>
<span class='curline'><a href='../S/898.html#L1241'>d_</a>               1241 src/actions/attack.cpp 		d_.n_attacks_ = d_.orig_attacks_;</span>
<span class='curline'><a href='../S/898.html#L1242'>d_</a>               1242 src/actions/attack.cpp 		a_.xp_ = d_.get_unit().level();</span>
<span class='curline'><a href='../S/898.html#L1243'>d_</a>               1243 src/actions/attack.cpp 		d_.xp_ = a_.get_unit().level();</span>
<span class='curline'><a href='../S/898.html#L1247'>d_</a>               1247 src/actions/attack.cpp 		const int defender_side = d_.get_unit().side();</span>
<span class='curline'><a href='../S/898.html#L1249'>d_</a>               1249 src/actions/attack.cpp 		LOG_NG &lt;&lt; "Fight: (" &lt;&lt; a_.loc_ &lt;&lt; ") vs (" &lt;&lt; d_.loc_ &lt;&lt; ") ATT: " &lt;&lt;</span>
<span class='curline'><a href='../S/898.html#L1258'>d_</a>               1258 src/actions/attack.cpp 		unit_display::unit_draw_weapon(a_.loc_,a_.get_unit(),a_stats_-&gt;weapon,d_stats_-&gt;weapon,d_.loc_,&amp;d_.get_unit());</span>
<span class='curline'><a href='../S/898.html#L1276'>d_</a>               1276 src/actions/attack.cpp 			if (d_.n_attacks_ &gt; 0) {</span>
<span class='curline'><a href='../S/898.html#L1285'>d_</a>               1285 src/actions/attack.cpp 			if(rounds &gt; 0 &amp;&amp; d_.n_attacks_ == 0 &amp;&amp; a_.n_attacks_ == 0) {</span>
<span class='curline'><a href='../S/898.html#L1287'>d_</a>               1287 src/actions/attack.cpp 				d_.n_attacks_ = d_.orig_attacks_;</span>
<span class='curline'><a href='../S/898.html#L1292'>d_</a>               1292 src/actions/attack.cpp 			if (a_.n_attacks_ &lt;= 0 &amp;&amp; d_.n_attacks_ &lt;= 0) {</span>
<span class='curline'><a href='../S/898.html#L1315'>d_</a>               1315 src/actions/attack.cpp 		if (d_.valid()) {</span>
<span class='curline'><a href='../S/898.html#L1316'>d_</a>               1316 src/actions/attack.cpp 			unit &amp;u = d_.get_unit();</span>
<span class='curline'><a href='../S/898.html#L1318'>d_</a>               1318 src/actions/attack.cpp 			u.set_experience(u.experience() + d_.xp_);</span>
<span class='curline'><a href='../S/898.html#L1322'>d_</a>               1322 src/actions/attack.cpp 				d_stats_-&gt;weapon,d_.loc_,d_.valid()?&amp;d_.get_unit():nullptr);</span>
<span class='curline'><a href='../S/898.html#L1327'>d_</a>               1327 src/actions/attack.cpp 			resources::screen-&gt;invalidate(d_.loc_);</span>
<span class='curline'><a href='../S/898.html#L1359'>d_</a>               1359 src/actions/attack.cpp 			errbuf_ &lt;&lt; "SYNC: In attack " &lt;&lt; a_.dump() &lt;&lt; " vs " &lt;&lt; d_.dump()</span>
<span class='curline'><a href='../S/898.html#L1369'>d_</a>               1369 src/actions/attack.cpp 			errbuf_ &lt;&lt; "SYNC: In attack " &lt;&lt; a_.dump() &lt;&lt; " vs " &lt;&lt; d_.dump()</span>
<span class='curline'><a href='../S/898.html#L1383'>d_</a>               1383 src/actions/attack.cpp 			errbuf_ &lt;&lt; "SYNC: In attack " &lt;&lt; a_.dump() &lt;&lt; " vs " &lt;&lt; d_.dump()</span>
<span class='curline'><a href='../S/233.html#L278'>d_</a>                278 src/ai/actions.cpp 	const unit_map::const_iterator d_ = resources::gameboard-&gt;units().find(defender_loc_);</span>
<span class='curline'><a href='../S/233.html#L294'>d_</a>                294 src/ai/actions.cpp 			d_-&gt;type_id(), a_-&gt;level(), d_-&gt;level(), resources::tod_manager-&gt;turn(),</span>
</pre>
</body>
</html>
