<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>opp_stats</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1227.html#L1846'>opp_stats</a>        1846 src/attack_prediction.cpp 		const battle_context_unit_stats&amp; opp_stats)</span>
<span class='curline'><a href='../S/1227.html#L1848'>opp_stats</a>        1848 src/attack_prediction.cpp 	return num_slices * opp_num_slices * ((stats.slows || opp_stats.is_slowed) ? 2 : 1)</span>
<span class='curline'><a href='../S/1227.html#L1849'>opp_stats</a>        1849 src/attack_prediction.cpp 		   * ((opp_stats.slows || stats.is_slowed) ? 2 : 1) * stats.max_hp * opp_stats.max_hp;</span>
<span class='curline'><a href='../S/1227.html#L1856'>opp_stats</a>        1856 src/attack_prediction.cpp 	const battle_context_unit_stats&amp; opp_stats)</span>
<span class='curline'><a href='../S/1227.html#L1858'>opp_stats</a>        1858 src/attack_prediction.cpp 	return (stats.is_slowed ? 1 : 0) | (opp_stats.is_slowed ? 2 : 0);</span>
<span class='curline'><a href='../S/1227.html#L1863'>opp_stats</a>        1863 src/attack_prediction.cpp 		const battle_context_unit_stats&amp; opp_stats,</span>
<span class='curline'><a href='../S/1227.html#L1881'>opp_stats</a>        1881 src/attack_prediction.cpp 		opp_hp_dist = std::vector&lt;double&gt;(opp_stats.max_hp + 1);</span>
<span class='curline'><a href='../S/1227.html#L1882'>opp_stats</a>        1882 src/attack_prediction.cpp 		opp_hp_dist[opp_stats.hp] = 1.0;</span>
<span class='curline'><a href='../S/1227.html#L1886'>opp_stats</a>        1886 src/attack_prediction.cpp 				unsigned src_index = opp_stats.hp - j * stats.damage;</span>
<span class='curline'><a href='../S/1227.html#L1909'>opp_stats</a>        1909 src/attack_prediction.cpp 	const double opp_hit_chance = (opp_stats.chance_to_hit / 100.0) * opp_alive_prob;</span>
<span class='curline'><a href='../S/1227.html#L1917'>opp_stats</a>        1917 src/attack_prediction.cpp 				unsigned src_index = stats.hp - j * opp_stats.damage;</span>
<span class='curline'><a href='../S/1227.html#L1920'>opp_stats</a>        1920 src/attack_prediction.cpp 				hp_dist[src_index - opp_stats.damage] += move;</span>
<span class='curline'><a href='../S/1227.html#L1928'>opp_stats</a>        1928 src/attack_prediction.cpp 			for(unsigned int j = opp_stats.damage; j &lt; hp_dist.size(); ++j) {</span>
<span class='curline'><a href='../S/1227.html#L1931'>opp_stats</a>        1931 src/attack_prediction.cpp 				hp_dist[j - opp_stats.damage] += move;</span>
<span class='curline'><a href='../S/1227.html#L1942'>opp_stats</a>        1942 src/attack_prediction.cpp 	if(stats.experience + opp_stats.level &gt;= stats.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L1946'>opp_stats</a>        1946 src/attack_prediction.cpp 	if(opp_stats.experience + stats.level &gt;= opp_stats.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L1953'>opp_stats</a>        1953 src/attack_prediction.cpp 		const battle_context_unit_stats&amp; opp_stats,</span>
<span class='curline'><a href='../S/1227.html#L1969'>opp_stats</a>        1969 src/attack_prediction.cpp 		opp_hp_dist = std::vector&lt;double&gt;(opp_stats.max_hp + 1);</span>
<span class='curline'><a href='../S/1227.html#L1971'>opp_stats</a>        1971 src/attack_prediction.cpp 			opp_hp_dist[opp_stats.hp] = 1.0 - hit_chance;</span>
<span class='curline'><a href='../S/1227.html#L1972'>opp_stats</a>        1972 src/attack_prediction.cpp 			opp_hp_dist[std::max&lt;int&gt;(opp_stats.hp - stats.damage, 0)] = hit_chance;</span>
<span class='curline'><a href='../S/1227.html#L1976'>opp_stats</a>        1976 src/attack_prediction.cpp 			opp_hp_dist[opp_stats.hp] = 1.0;</span>
<span class='curline'><a href='../S/1227.html#L1992'>opp_stats</a>        1992 src/attack_prediction.cpp 	const double opp_hit_chance = (opp_stats.chance_to_hit / 100.0) * opp_alive_prob;</span>
<span class='curline'><a href='../S/1227.html#L1998'>opp_stats</a>        1998 src/attack_prediction.cpp 			hp_dist[std::max&lt;int&gt;(stats.hp - opp_stats.damage, 0)] = opp_hit_chance;</span>
<span class='curline'><a href='../S/1227.html#L2009'>opp_stats</a>        2009 src/attack_prediction.cpp 				hp_dist[std::max&lt;int&gt;(i - opp_stats.damage, 0)] += move;</span>
<span class='curline'><a href='../S/1227.html#L2020'>opp_stats</a>        2020 src/attack_prediction.cpp 	if(stats.experience + opp_stats.level &gt;= stats.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L2022'>opp_stats</a>        2022 src/attack_prediction.cpp 	} else if(stats.experience + game_config::kill_xp(opp_stats.level) &gt;= stats.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L2026'>opp_stats</a>        2026 src/attack_prediction.cpp 	if(opp_stats.experience + stats.level &gt;= opp_stats.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L2028'>opp_stats</a>        2028 src/attack_prediction.cpp 	} else if(opp_stats.experience + game_config::kill_xp(stats.level) &gt;= opp_stats.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L2037'>opp_stats</a>        2037 src/attack_prediction.cpp 		const battle_context_unit_stats&amp; opp_stats,</span>
<span class='curline'><a href='../S/1227.html#L2050'>opp_stats</a>        2050 src/attack_prediction.cpp 	unsigned int rounds = std::max&lt;unsigned int&gt;(stats.rounds, opp_stats.rounds);</span>
<span class='curline'><a href='../S/1227.html#L2056'>opp_stats</a>        2056 src/attack_prediction.cpp 	unsigned int b_damage = opp_stats.damage, b_slow_damage = opp_stats.slow_damage;</span>
<span class='curline'><a href='../S/1227.html#L2062'>opp_stats</a>        2062 src/attack_prediction.cpp 		a_damage = a_slow_damage = opp_stats.max_hp;</span>
<span class='curline'><a href='../S/1227.html#L2065'>opp_stats</a>        2065 src/attack_prediction.cpp 	if(opp_stats.petrifies) {</span>
<span class='curline'><a href='../S/1227.html#L2070'>opp_stats</a>        2070 src/attack_prediction.cpp 	const double opp_hit_chance = opp_stats.chance_to_hit / 100.0;</span>
<span class='curline'><a href='../S/1227.html#L2077'>opp_stats</a>        2077 src/attack_prediction.cpp 		probability_combat_matrix* pm = new probability_combat_matrix(stats.max_hp, opp_stats.max_hp, stats.hp,</span>
<span class='curline'><a href='../S/1227.html#L2078'>opp_stats</a>        2078 src/attack_prediction.cpp 				opp_stats.hp, summary, opp_summary, stats.slows || opp_stats.is_slowed,</span>
<span class='curline'><a href='../S/1227.html#L2079'>opp_stats</a>        2079 src/attack_prediction.cpp 				opp_stats.slows || stats.is_slowed, a_damage, b_damage, a_slow_damage, b_slow_damage,</span>
<span class='curline'><a href='../S/1227.html#L2080'>opp_stats</a>        2080 src/attack_prediction.cpp 				stats.drain_percent, opp_stats.drain_percent, stats.drain_constant, opp_stats.drain_constant);</span>
<span class='curline'><a href='../S/1227.html#L2110'>opp_stats</a>        2110 src/attack_prediction.cpp 			opp_not_hit = pm-&gt;col_sum(plane_index(stats, opp_stats), opp_stats.hp);</span>
<span class='curline'><a href='../S/1227.html#L2112'>opp_stats</a>        2112 src/attack_prediction.cpp 		if(opp_stats.slows) {</span>
<span class='curline'><a href='../S/1227.html#L2113'>opp_stats</a>        2113 src/attack_prediction.cpp 			self_not_hit = pm-&gt;row_sum(plane_index(stats, opp_stats), stats.hp);</span>
<span class='curline'><a href='../S/1227.html#L2118'>opp_stats</a>        2118 src/attack_prediction.cpp 		monte_carlo_combat_matrix* mcm = new monte_carlo_combat_matrix(stats.max_hp, opp_stats.max_hp, stats.hp,</span>
<span class='curline'><a href='../S/1227.html#L2119'>opp_stats</a>        2119 src/attack_prediction.cpp 				opp_stats.hp, summary, opp_summary, stats.slows || opp_stats.is_slowed,</span>
<span class='curline'><a href='../S/1227.html#L2120'>opp_stats</a>        2120 src/attack_prediction.cpp 				opp_stats.slows || stats.is_slowed, a_damage, b_damage, a_slow_damage, b_slow_damage,</span>
<span class='curline'><a href='../S/1227.html#L2121'>opp_stats</a>        2121 src/attack_prediction.cpp 				stats.drain_percent, opp_stats.drain_percent, stats.drain_constant, opp_stats.drain_constant, rounds,</span>
<span class='curline'><a href='../S/1227.html#L2134'>opp_stats</a>        2134 src/attack_prediction.cpp 		m-&gt;remove_petrify_distortion_a(stats.damage, stats.slow_damage, opp_stats.hp);</span>
<span class='curline'><a href='../S/1227.html#L2137'>opp_stats</a>        2137 src/attack_prediction.cpp 	if(opp_stats.petrifies) {</span>
<span class='curline'><a href='../S/1227.html#L2138'>opp_stats</a>        2138 src/attack_prediction.cpp 		m-&gt;remove_petrify_distortion_b(opp_stats.damage, opp_stats.slow_damage, stats.hp);</span>
<span class='curline'><a href='../S/1227.html#L2142'>opp_stats</a>        2142 src/attack_prediction.cpp 		if(stats.experience + opp_stats.level &gt;= stats.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L2144'>opp_stats</a>        2144 src/attack_prediction.cpp 		} else if(stats.experience + game_config::kill_xp(opp_stats.level) &gt;= stats.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L2148'>opp_stats</a>        2148 src/attack_prediction.cpp 		if(opp_stats.experience + stats.level &gt;= opp_stats.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L2150'>opp_stats</a>        2150 src/attack_prediction.cpp 		} else if(opp_stats.experience + game_config::kill_xp(stats.level) &gt;= opp_stats.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L2164'>opp_stats</a>        2164 src/attack_prediction.cpp 		const battle_context_unit_stats&amp; opp_stats,</span>
<span class='curline'><a href='../S/1227.html#L2175'>opp_stats</a>        2175 src/attack_prediction.cpp 	if(!stats.slows &amp;&amp; !opp_stats.slows &amp;&amp; !stats.drains &amp;&amp; !opp_stats.drains &amp;&amp; !stats.petrifies</span>
<span class='curline'><a href='../S/1227.html#L2176'>opp_stats</a>        2176 src/attack_prediction.cpp 			&amp;&amp; !opp_stats.petrifies &amp;&amp; stats.rounds == 1 &amp;&amp; opp_stats.rounds == 1 &amp;&amp; summary[1].empty()</span>
<span class='curline'><a href='../S/1227.html#L2180'>opp_stats</a>        2180 src/attack_prediction.cpp 			one_strike_fight(stats, opp_stats, strikes, opp_strikes, summary[0], opp_summary[0], self_not_hit,</span>
<span class='curline'><a href='../S/1227.html#L2182'>opp_stats</a>        2182 src/attack_prediction.cpp 		} else if(strikes * stats.damage &lt; min_hp(opp_summary[0], opp_stats.hp)</span>
<span class='curline'><a href='../S/1227.html#L2183'>opp_stats</a>        2183 src/attack_prediction.cpp 				&amp;&amp; opp_strikes * opp_stats.damage &lt; min_hp(summary[0], stats.hp)) {</span>
<span class='curline'><a href='../S/1227.html#L2184'>opp_stats</a>        2184 src/attack_prediction.cpp 			no_death_fight(stats, opp_stats, strikes, opp_strikes, summary[0], opp_summary[0], self_not_hit,</span>
<span class='curline'><a href='../S/1227.html#L2187'>opp_stats</a>        2187 src/attack_prediction.cpp 			complex_fight(attack_prediction_mode::probability_calculation, stats, opp_stats, strikes, opp_strikes,</span>
<span class='curline'><a href='../S/1227.html#L2192'>opp_stats</a>        2192 src/attack_prediction.cpp 		complex_fight(attack_prediction_mode::probability_calculation, stats, opp_stats, strikes, opp_strikes, summary,</span>
</pre>
</body>
</html>
