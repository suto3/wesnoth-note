<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>att_stats</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/4378.html#L1691'>att_stats</a>        1691 data/ai/lua/ai_helper.lua                         local att_stats, def_stats</span>
<span class='curline'><a href='../S/4378.html#L1697'>att_stats</a>        1697 data/ai/lua/ai_helper.lua                             att_stats, def_stats = wesnoth.simulate_combat(unit_dst, enemy)</span>
<span class='curline'><a href='../S/4378.html#L1704'>att_stats</a>        1704 data/ai/lua/ai_helper.lua                             att_stats = att_stats,</span>
<span class='curline'><a href='../S/4380.html#L707'>att_stats</a>         707 data/ai/lua/battle_calcs.lua     local att_stats = battle_calcs.hp_distribution(att_coeffs, att_hit_prob, def_hit_prob, attacker.hitpoints, def_damage, def_attack)</span>
<span class='curline'><a href='../S/4380.html#L710'>att_stats</a>         710 data/ai/lua/battle_calcs.lua     return att_stats, def_stats</span>
<span class='curline'><a href='../S/4380.html#L717'>att_stats</a>         717 data/ai/lua/battle_calcs.lua     local att_stats, def_stats = { hp_chance = {} }, { hp_chance = {} }</span>
<span class='curline'><a href='../S/4380.html#L719'>att_stats</a>         719 data/ai/lua/battle_calcs.lua     att_stats.hp_chance[0] = 0</span>
<span class='curline'><a href='../S/4380.html#L720'>att_stats</a>         720 data/ai/lua/battle_calcs.lua     att_stats.hp_chance[21], att_stats.hp_chance[23], att_stats.hp_chance[25], att_stats.hp_chance[27] = 0.125, 0.375, 0.375, 0.125</span>
<span class='curline'><a href='../S/4380.html#L721'>att_stats</a>         721 data/ai/lua/battle_calcs.lua     att_stats.poisoned, att_stats.slowed, att_stats.average_hp = 0.875, 0, 24</span>
<span class='curline'><a href='../S/4380.html#L726'>att_stats</a>         726 data/ai/lua/battle_calcs.lua     return att_stats, def_stats</span>
<span class='curline'><a href='../S/4380.html#L785'>att_stats</a>         785 data/ai/lua/battle_calcs.lua     local att_stats, def_stats = {}, {}</span>
<span class='curline'><a href='../S/4380.html#L786'>att_stats</a>         786 data/ai/lua/battle_calcs.lua     if (not cfg.att_stats) or (not cfg.def_stats) then</span>
<span class='curline'><a href='../S/4380.html#L790'>att_stats</a>         790 data/ai/lua/battle_calcs.lua         att_stats,def_stats = battle_calcs.battle_outcome(attacker, defender, battle_cfg, cache)</span>
<span class='curline'><a href='../S/4380.html#L792'>att_stats</a>         792 data/ai/lua/battle_calcs.lua         att_stats, def_stats = cfg.att_stats, cfg.def_stats</span>
<span class='curline'><a href='../S/4380.html#L805'>att_stats</a>         805 data/ai/lua/battle_calcs.lua     local damage = attacker.hitpoints - att_stats.average_hp</span>
<span class='curline'><a href='../S/4380.html#L807'>att_stats</a>         807 data/ai/lua/battle_calcs.lua     if (att_stats.poisoned ~= 0) then</span>
<span class='curline'><a href='../S/4380.html#L808'>att_stats</a>         808 data/ai/lua/battle_calcs.lua         damage = damage + 8 * (att_stats.poisoned - att_stats.hp_chance[0])</span>
<span class='curline'><a href='../S/4380.html#L811'>att_stats</a>         811 data/ai/lua/battle_calcs.lua     if (att_stats.slowed ~= 0) then</span>
<span class='curline'><a href='../S/4380.html#L812'>att_stats</a>         812 data/ai/lua/battle_calcs.lua         damage = damage + 6 * (att_stats.slowed - att_stats.hp_chance[0])</span>
<span class='curline'><a href='../S/4380.html#L835'>att_stats</a>         835 data/ai/lua/battle_calcs.lua     value_fraction = value_fraction - att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4380.html#L842'>att_stats</a>         842 data/ai/lua/battle_calcs.lua         level_bonus = 1. - att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4380.html#L845'>att_stats</a>         845 data/ai/lua/battle_calcs.lua             level_bonus = (1. - att_stats.hp_chance[0]) * def_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4380.html#L894'>att_stats</a>         894 data/ai/lua/battle_calcs.lua             defender_level_penalty = (1. - def_stats.hp_chance[0]) * att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4380.html#L962'>att_stats</a>         962 data/ai/lua/battle_calcs.lua     return rating, defender_rating, attacker_rating, att_stats, def_stats</span>
<span class='curline'><a href='../S/4380.html#L1001'>att_stats</a>        1001 data/ai/lua/battle_calcs.lua             local base_rating, def_rating, att_rating, att_stats, def_stats =</span>
<span class='curline'><a href='../S/4380.html#L1004'>att_stats</a>        1004 data/ai/lua/battle_calcs.lua             tmp_att_stats[i], tmp_def_stats[i] = att_stats, def_stats</span>
<span class='curline'><a href='../S/4380.html#L1042'>att_stats</a>        1042 data/ai/lua/battle_calcs.lua                 att_stats = tmp_att_stats[i],</span>
<span class='curline'><a href='../S/4380.html#L1050'>att_stats</a>        1050 data/ai/lua/battle_calcs.lua             tmp_att_stats[i] = cache_this_move[defender_ind][att_ind][dst_ind].att_stats</span>
<span class='curline'><a href='../S/4380.html#L1060'>att_stats</a>        1060 data/ai/lua/battle_calcs.lua     local attackers, dsts, att_stats, def_stats, attacker_ratings = {}, {}, {}, {}, {}</span>
<span class='curline'><a href='../S/4380.html#L1065'>att_stats</a>        1065 data/ai/lua/battle_calcs.lua     att_stats[1], def_stats[1] = tmp_att_stats[ratings[1][1]], tmp_def_stats[ratings[1][1]]</span>
<span class='curline'><a href='../S/4380.html#L1073'>att_stats</a>        1073 data/ai/lua/battle_calcs.lua         att_stats[i] = { hp_chance = {} }</span>
<span class='curline'><a href='../S/4380.html#L1079'>att_stats</a>        1079 data/ai/lua/battle_calcs.lua                 att_stats[i].hp_chance[attackers[i].hitpoints] =</span>
<span class='curline'><a href='../S/4380.html#L1080'>att_stats</a>        1080 data/ai/lua/battle_calcs.lua                     (att_stats[i].hp_chance[attackers[i].hitpoints] or 0) + prob1</span>
<span class='curline'><a href='../S/4380.html#L1099'>att_stats</a>        1099 data/ai/lua/battle_calcs.lua                     att_stats[i].hp_chance[hp2] = (att_stats[i].hp_chance[hp2] or 0) + prob1 * prob2</span>
<span class='curline'><a href='../S/4380.html#L1106'>att_stats</a>        1106 data/ai/lua/battle_calcs.lua                 if (not att_stats[i].poisoned) then</span>
<span class='curline'><a href='../S/4380.html#L1107'>att_stats</a>        1107 data/ai/lua/battle_calcs.lua                     att_stats[i].poisoned = ast.poisoned</span>
<span class='curline'><a href='../S/4380.html#L1108'>att_stats</a>        1108 data/ai/lua/battle_calcs.lua                     att_stats[i].slowed = ast.slowed</span>
<span class='curline'><a href='../S/4380.html#L1117'>att_stats</a>        1117 data/ai/lua/battle_calcs.lua         for hp,prob in pairs(att_stats[i].hp_chance) do av_hp = av_hp + hp * prob end</span>
<span class='curline'><a href='../S/4380.html#L1118'>att_stats</a>        1118 data/ai/lua/battle_calcs.lua         att_stats[i].average_hp = av_hp</span>
<span class='curline'><a href='../S/4380.html#L1132'>att_stats</a>        1132 data/ai/lua/battle_calcs.lua         local cfg = { att_stats = att_stats[i], def_stats = def_stats[i] }</span>
<span class='curline'><a href='../S/4380.html#L1141'>att_stats</a>        1141 data/ai/lua/battle_calcs.lua     return rating, attackers, dsts, att_stats, def_stats[#attackers], def_stats</span>
<span class='curline'><a href='../S/4383.html#L232'>att_stats</a>         232 data/ai/lua/ca_high_xp_attack.lua                 local att_stats, def_stats, att_weapon = wesnoth.simulate_combat(attacker_copy, target)</span>
<span class='curline'><a href='../S/4383.html#L236'>att_stats</a>         236 data/ai/lua/ca_high_xp_attack.lua                 if (att_stats.hp_chance[0] &lt;= aggression) then</span>
<span class='curline'><a href='../S/4383.html#L238'>att_stats</a>         238 data/ai/lua/ca_high_xp_attack.lua                         rating = 5000 + def_stats.hp_chance[0] - att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4383.html#L250'>att_stats</a>         250 data/ai/lua/ca_high_xp_attack.lua                         local own_value_loss = (attacker_copy.hitpoints - att_stats.average_hp) / attacker_copy.max_hitpoints</span>
<span class='curline'><a href='../S/4383.html#L251'>att_stats</a>         251 data/ai/lua/ca_high_xp_attack.lua                         own_value_loss = own_value_loss + att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4330.html#L20'>att_stats</a>          20 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                 local att_stats, def_stats = wesnoth.simulate_combat(attacker, n_weapon, target)</span>
<span class='curline'><a href='../S/4330.html#L26'>att_stats</a>          26 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                 if (att_stats.hp_chance[attacker.hitpoints] == 1)</span>
<span class='curline'><a href='../S/4330.html#L27'>att_stats</a>          27 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                     or ((def_stats.hp_chance[0] &gt;= 0.67) and (att_stats.hp_chance[0] == 0))</span>
<span class='curline'><a href='../S/4330.html#L30'>att_stats</a>          30 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                     rating = rating + att_stats.average_hp - def_stats.average_hp</span>
<span class='curline'><a href='../S/4323.html#L384'>att_stats</a>         384 data/ai/micro_ais/cas/ca_bottleneck_move.lua                         local att_stats, def_stats = BC.simulate_combat_loc(unit, { attack.x, attack.y }, attack.defender, n_weapon)</span>
<span class='curline'><a href='../S/4323.html#L393'>att_stats</a>         393 data/ai/micro_ais/cas/ca_bottleneck_move.lua                             if (att_stats.hp_chance[0] == 0) then</span>
<span class='curline'><a href='../S/4323.html#L399'>att_stats</a>         399 data/ai/micro_ais/cas/ca_bottleneck_move.lua                                 and (att_stats.hp_chance[0] == 0)</span>
<span class='curline'><a href='../S/4323.html#L401'>att_stats</a>         401 data/ai/micro_ais/cas/ca_bottleneck_move.lua                                 and (att_stats.average_hp &gt;= 20)</span>
<span class='curline'><a href='../S/4323.html#L404'>att_stats</a>         404 data/ai/micro_ais/cas/ca_bottleneck_move.lua                                 level_up_rating = 14000 + att_stats.average_hp - def_stats.average_hp / 2.</span>
<span class='curline'><a href='../S/4317.html#L325'>att_stats</a>         325 data/ai/micro_ais/cas/ca_fast_attack_utils.lua function ca_fast_attack_utils.attack_rating(attacker_infos, defender_info, dsts, att_stats, def_stat, gamedata, cfg)</span>
<span class='curline'><a href='../S/4317.html#L361'>att_stats</a>         361 data/ai/micro_ais/cas/ca_fast_attack_utils.lua             attacker_info, defender_info, att_stats[i], def_stat, attacker_on_village, cfg</span>
<span class='curline'><a href='../S/4317.html#L370'>att_stats</a>         370 data/ai/micro_ais/cas/ca_fast_attack_utils.lua         defender_info, attacker_infos[1], def_stat, att_stats[1], defender_on_village, cfg</span>
<span class='curline'><a href='../S/4290.html#L63'>att_stats</a>          63 data/ai/micro_ais/cas/ca_messenger_attack.lua             local rating = attack.att_stats.average_hp - 2 * attack.def_stats.average_hp</span>
<span class='curline'><a href='../S/4290.html#L77'>att_stats</a>          77 data/ai/micro_ais/cas/ca_messenger_attack.lua         local rating = attack.att_stats.average_hp - 2 * attack.def_stats.average_hp</span>
<span class='curline'><a href='../S/4314.html#L96'>att_stats</a>          96 data/ai/micro_ais/cas/ca_messenger_move.lua             local att_stats, def_stats = wesnoth.simulate_combat(messenger, n_weapon, target)</span>
<span class='curline'><a href='../S/4314.html#L106'>att_stats</a>         106 data/ai/micro_ais/cas/ca_messenger_move.lua             if (att_stats.hp_chance[messenger.hitpoints] == 1)</span>
<span class='curline'><a href='../S/4314.html#L107'>att_stats</a>         107 data/ai/micro_ais/cas/ca_messenger_move.lua                 or (def_stats.hp_chance[0] &gt;= tonumber(enemy_death_chance)) and (att_stats.hp_chance[0] &lt;= tonumber(messenger_death_chance))</span>
<span class='curline'><a href='../S/4314.html#L109'>att_stats</a>         109 data/ai/micro_ais/cas/ca_messenger_move.lua                 rating = target.max_hitpoints + def_stats.hp_chance[0]*100 + att_stats.average_hp - def_stats.average_hp</span>
<span class='curline'><a href='../S/4308.html#L36'>att_stats</a>          36 data/ai/micro_ais/cas/ca_protect_unit_attack.lua         if (attack.att_stats.hp_chance[0] == 0)</span>
<span class='curline'><a href='../S/4308.html#L37'>att_stats</a>          37 data/ai/micro_ais/cas/ca_protect_unit_attack.lua             and (attack.att_stats.poisoned == 0)</span>
<span class='curline'><a href='../S/4308.html#L38'>att_stats</a>          38 data/ai/micro_ais/cas/ca_protect_unit_attack.lua             and (attack.att_stats.slowed == 0)</span>
<span class='curline'><a href='../S/4308.html#L55'>att_stats</a>          55 data/ai/micro_ais/cas/ca_protect_unit_attack.lua                             local att_stats, def_stats = wesnoth.simulate_combat(enemy_attack.enemy, n_weapon, unit)</span>
<span class='curline'><a href='../S/4308.html#L75'>att_stats</a>          75 data/ai/micro_ais/cas/ca_protect_unit_attack.lua             for hp,chance in pairs(attack.att_stats.hp_chance) do</span>
<span class='curline'><a href='../S/4308.html#L84'>att_stats</a>          84 data/ai/micro_ais/cas/ca_protect_unit_attack.lua                 local rating = min_outcome + attack.att_stats.average_hp - attack.def_stats.average_hp</span>
<span class='curline'><a href='../S/4332.html#L116'>att_stats</a>         116 data/ai/micro_ais/cas/ca_wolves_multipacks_attack.lua                         local rating = attack.att_stats.average_hp / 2. - attack.def_stats.average_hp</span>
<span class='curline'><a href='../S/4998.html#L28'>att_stats</a>          28 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua         local att_stats, def_stats = wesnoth.simulate_combat(attacker_dst, defender)</span>
<span class='curline'><a href='../S/4998.html#L30'>att_stats</a>          30 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua         if (att_stats.hp_chance[0] == 0) then</span>
<span class='curline'><a href='../S/4998.html#L33'>att_stats</a>          33 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua             local attacker_damage = attacker.hitpoints - att_stats.average_hp</span>
<span class='curline'><a href='../S/895.html#L632'>att_stats</a>         632 src/actions/attack.cpp 		battle_context_unit_stats *att_stats = new battle_context_unit_stats(attacker, attacker_loc, attacker_weapon,</span>
<span class='curline'><a href='../S/895.html#L637'>att_stats</a>         637 src/actions/attack.cpp 			delete att_stats;</span>
<span class='curline'><a href='../S/895.html#L641'>att_stats</a>         641 src/actions/attack.cpp 		combatant *att_comb = new combatant(*att_stats);</span>
<span class='curline'><a href='../S/895.html#L657'>att_stats</a>         657 src/actions/attack.cpp 			attacker_stats_ = att_stats;</span>
<span class='curline'><a href='../S/895.html#L662'>att_stats</a>         662 src/actions/attack.cpp 			delete att_stats;</span>
<span class='curline'><a href='../S/1221.html#L2609'>att_stats</a>        2609 src/attack_prediction.cpp 	battle_context_unit_stats *def_stats, *att_stats[20];</span>
<span class='curline'><a href='../S/1221.html#L2628'>att_stats</a>        2628 src/attack_prediction.cpp 		att_stats[i] = parse_unit(&amp;argv);</span>
<span class='curline'><a href='../S/1221.html#L2629'>att_stats</a>        2629 src/attack_prediction.cpp 		att[i] = new combatant(*att_stats[i]);</span>
<span class='curline'><a href='../S/1221.html#L2646'>att_stats</a>        2646 src/attack_prediction.cpp 		delete att_stats[i];</span>
<span class='curline'><a href='../S/1019.html#L446'>att_stats</a>         446 src/statistics.cpp 	stats &amp;att_stats = attacker_stats(), &amp;def_stats = defender_stats();</span>
<span class='curline'><a href='../S/1019.html#L447'>att_stats</a>         447 src/statistics.cpp 	att_stats.expected_damage_inflicted += attacker_inflict;</span>
<span class='curline'><a href='../S/1019.html#L448'>att_stats</a>         448 src/statistics.cpp 	att_stats.expected_damage_taken     += defender_inflict;</span>
<span class='curline'><a href='../S/1019.html#L451'>att_stats</a>         451 src/statistics.cpp 	att_stats.turn_expected_damage_inflicted += attacker_inflict;</span>
<span class='curline'><a href='../S/1019.html#L452'>att_stats</a>         452 src/statistics.cpp 	att_stats.turn_expected_damage_taken     += defender_inflict;</span>
<span class='curline'><a href='../S/1019.html#L461'>att_stats</a>         461 src/statistics.cpp 	stats &amp;att_stats = attacker_stats(), &amp;def_stats = defender_stats();</span>
<span class='curline'><a href='../S/1019.html#L465'>att_stats</a>         465 src/statistics.cpp 		att_stats.damage_taken          -= drain;</span>
<span class='curline'><a href='../S/1019.html#L467'>att_stats</a>         467 src/statistics.cpp 		att_stats.turn_damage_taken     -= drain;</span>
<span class='curline'><a href='../S/1019.html#L470'>att_stats</a>         470 src/statistics.cpp 		att_stats.damage_inflicted      += damage;</span>
<span class='curline'><a href='../S/1019.html#L472'>att_stats</a>         472 src/statistics.cpp 		att_stats.turn_damage_inflicted += damage;</span>
<span class='curline'><a href='../S/1019.html#L477'>att_stats</a>         477 src/statistics.cpp 		++att_stats.killed[defender_type];</span>
<span class='curline'><a href='../S/1019.html#L485'>att_stats</a>         485 src/statistics.cpp 	stats &amp;att_stats = attacker_stats(), &amp;def_stats = defender_stats();</span>
<span class='curline'><a href='../S/1019.html#L490'>att_stats</a>         490 src/statistics.cpp 		att_stats.damage_inflicted      -= drain;</span>
<span class='curline'><a href='../S/1019.html#L492'>att_stats</a>         492 src/statistics.cpp 		att_stats.turn_damage_inflicted -= drain;</span>
<span class='curline'><a href='../S/1019.html#L494'>att_stats</a>         494 src/statistics.cpp 		att_stats.damage_taken          += damage;</span>
<span class='curline'><a href='../S/1019.html#L496'>att_stats</a>         496 src/statistics.cpp 		att_stats.turn_damage_taken     += damage;</span>
<span class='curline'><a href='../S/1019.html#L501'>att_stats</a>         501 src/statistics.cpp 		++att_stats.deaths[attacker_type];</span>
</pre>
</body>
</html>
