<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>defender</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/4378.html#L194'>defender</a>          194 data/ai/lua/ai_helper.lua function ai_helper.checked_attack(ai, attacker, defender, weapon)</span>
<span class='curline'><a href='../S/4378.html#L195'>defender</a>          195 data/ai/lua/ai_helper.lua     local check = ai.check_attack(attacker, defender, weapon)</span>
<span class='curline'><a href='../S/4378.html#L199'>defender</a>          199 data/ai/lua/ai_helper.lua         ai_helper.checked_action_error('ai.attack from ' .. attacker.x .. ',' .. attacker.y .. ' to ' .. defender.x .. ',' .. defender.y, check.status .. ' (' .. check.result .. ')')</span>
<span class='curline'><a href='../S/4378.html#L203'>defender</a>          203 data/ai/lua/ai_helper.lua     return ai.attack(attacker, defender, weapon)</span>
<span class='curline'><a href='../S/4380.html#L87'>defender</a>           87 data/ai/lua/battle_calcs.lua function battle_calcs.strike_damage(attacker, defender, att_weapon, def_weapon, dst, cache)</span>
<span class='curline'><a href='../S/4380.html#L103'>defender</a>          103 data/ai/lua/battle_calcs.lua     local def_lawful_bonus = wesnoth.get_time_of_day({ defender.x, defender.y, true }).lawful_bonus</span>
<span class='curline'><a href='../S/4380.html#L106'>defender</a>          106 data/ai/lua/battle_calcs.lua     cind = cind .. 'x' .. defender.id .. defender.max_hitpoints .. defender.side</span>
<span class='curline'><a href='../S/4380.html#L116'>defender</a>          116 data/ai/lua/battle_calcs.lua     local defender_info = battle_calcs.unit_attack_info(defender, cache)</span>
<span class='curline'><a href='../S/4380.html#L174'>defender</a>          174 data/ai/lua/battle_calcs.lua function battle_calcs.best_weapons(attacker, defender, dst, cache)</span>
<span class='curline'><a href='../S/4380.html#L190'>defender</a>          190 data/ai/lua/battle_calcs.lua     local def_lawful_bonus = wesnoth.get_time_of_day({ defender.x, defender.y, true }).lawful_bonus</span>
<span class='curline'><a href='../S/4380.html#L193'>defender</a>          193 data/ai/lua/battle_calcs.lua     cind = cind .. 'x' .. defender.id .. defender.max_hitpoints .. defender.side</span>
<span class='curline'><a href='../S/4380.html#L202'>defender</a>          202 data/ai/lua/battle_calcs.lua     local defender_info = battle_calcs.unit_attack_info(defender, cache)</span>
<span class='curline'><a href='../S/4380.html#L207'>defender</a>          207 data/ai/lua/battle_calcs.lua         local att_damage = battle_calcs.strike_damage(attacker, defender, att_weapon_number, 0, { dst[1], dst[2] }, cache)</span>
<span class='curline'><a href='../S/4380.html#L211'>defender</a>          211 data/ai/lua/battle_calcs.lua                 local def_damage = battle_calcs.strike_damage(defender, attacker, def_weapon_number, 0, { defender.x, defender.y }, cache)</span>
<span class='curline'><a href='../S/4380.html#L639'>defender</a>          639 data/ai/lua/battle_calcs.lua function battle_calcs.battle_outcome(attacker, defender, cfg, cache)</span>
<span class='curline'><a href='../S/4380.html#L653'>defender</a>          653 data/ai/lua/battle_calcs.lua         att_weapon, def_weapon = battle_calcs.best_weapons(attacker, defender, dst, cache)</span>
<span class='curline'><a href='../S/4380.html#L661'>defender</a>          661 data/ai/lua/battle_calcs.lua         battle_calcs.strike_damage(attacker, defender, att_weapon, def_weapon, { dst[1], dst[2] }, cache)</span>
<span class='curline'><a href='../S/4380.html#L673'>defender</a>          673 data/ai/lua/battle_calcs.lua         def_strikes = math.floor(def_strikes * defender.hitpoints / defender.max_hitpoints)</span>
<span class='curline'><a href='../S/4380.html#L679'>defender</a>          679 data/ai/lua/battle_calcs.lua     local def_max_hits = math.floor((defender.hitpoints - 1) / att_damage)</span>
<span class='curline'><a href='../S/4380.html#L683'>defender</a>          683 data/ai/lua/battle_calcs.lua     local att_hit_prob = wesnoth.unit_defense(defender, wesnoth.get_terrain(defender.x, defender.y)) / 100.</span>
<span class='curline'><a href='../S/4380.html#L708'>defender</a>          708 data/ai/lua/battle_calcs.lua     local def_stats = battle_calcs.hp_distribution(def_coeffs, att_hit_prob, def_hit_prob, defender.hitpoints, att_damage, att_attack)</span>
<span class='curline'><a href='../S/4380.html#L729'>defender</a>          729 data/ai/lua/battle_calcs.lua function battle_calcs.simulate_combat_loc(attacker, dst, defender, weapon)</span>
<span class='curline'><a href='../S/4380.html#L738'>defender</a>          738 data/ai/lua/battle_calcs.lua         return wesnoth.simulate_combat(attacker_dst, weapon, defender)</span>
<span class='curline'><a href='../S/4380.html#L740'>defender</a>          740 data/ai/lua/battle_calcs.lua         return wesnoth.simulate_combat(attacker_dst, defender)</span>
<span class='curline'><a href='../S/4380.html#L744'>defender</a>          744 data/ai/lua/battle_calcs.lua function battle_calcs.attack_rating(attacker, defender, dst, cfg, cache)</span>
<span class='curline'><a href='../S/4380.html#L790'>defender</a>          790 data/ai/lua/battle_calcs.lua         att_stats,def_stats = battle_calcs.battle_outcome(attacker, defender, battle_cfg, cache)</span>
<span class='curline'><a href='../S/4380.html#L840'>defender</a>          840 data/ai/lua/battle_calcs.lua     local defender_level = wesnoth.unit_types[defender.type].level</span>
<span class='curline'><a href='../S/4380.html#L862'>defender</a>          862 data/ai/lua/battle_calcs.lua     local damage = defender.hitpoints - def_stats.average_hp</span>
<span class='curline'><a href='../S/4380.html#L873'>defender</a>          873 data/ai/lua/battle_calcs.lua     local is_village = wesnoth.get_terrain_info(wesnoth.get_terrain(defender.x, defender.y)).village</span>
<span class='curline'><a href='../S/4380.html#L881'>defender</a>          881 data/ai/lua/battle_calcs.lua     local value_fraction = damage / defender.max_hitpoints</span>
<span class='curline'><a href='../S/4380.html#L890'>defender</a>          890 data/ai/lua/battle_calcs.lua     if (defender.max_experience - defender.experience &lt;= attacker_level) then</span>
<span class='curline'><a href='../S/4380.html#L893'>defender</a>          893 data/ai/lua/battle_calcs.lua         if (defender.max_experience - defender.experience &lt;= attacker_level * 8) then</span>
<span class='curline'><a href='../S/4380.html#L900'>defender</a>          900 data/ai/lua/battle_calcs.lua     local defender_value = wesnoth.unit_types[defender.type].cost</span>
<span class='curline'><a href='../S/4380.html#L903'>defender</a>          903 data/ai/lua/battle_calcs.lua     if defender.canrecruit then</span>
<span class='curline'><a href='../S/4380.html#L908'>defender</a>          908 data/ai/lua/battle_calcs.lua     local defender_starting_damage_fraction = (defender.max_hitpoints - defender.hitpoints) / defender.max_hitpoints</span>
<span class='curline'><a href='../S/4380.html#L912'>defender</a>          912 data/ai/lua/battle_calcs.lua     local xp_bonus = defender.experience / defender.max_experience</span>
<span class='curline'><a href='../S/4380.html#L918'>defender</a>          918 data/ai/lua/battle_calcs.lua     local is_village = wesnoth.get_terrain_info(wesnoth.get_terrain(defender.x, defender.y)).village</span>
<span class='curline'><a href='../S/4380.html#L935'>defender</a>          935 data/ai/lua/battle_calcs.lua     local defender_defense = - wesnoth.unit_defense(defender, wesnoth.get_terrain(dst[1], dst[2])) / 100.</span>
<span class='curline'><a href='../S/4380.html#L942'>defender</a>          942 data/ai/lua/battle_calcs.lua             M.distance_between(defender.x, defender.y, leader.x, leader.y)</span>
<span class='curline'><a href='../S/4380.html#L965'>defender</a>          965 data/ai/lua/battle_calcs.lua function battle_calcs.attack_combo_stats(tmp_attackers, tmp_dsts, defender, cache, cache_this_move)</span>
<span class='curline'><a href='../S/4380.html#L991'>defender</a>          991 data/ai/lua/battle_calcs.lua     local defender_ind = defender.x * 1000 + defender.y</span>
<span class='curline'><a href='../S/4380.html#L1002'>defender</a>         1002 data/ai/lua/battle_calcs.lua                 battle_calcs.attack_rating(attacker, defender, tmp_dsts[i], {}, cache )</span>
<span class='curline'><a href='../S/4380.html#L1033'>defender</a>         1033 data/ai/lua/battle_calcs.lua                 rating = rating + wesnoth.unit_types[defender.type].cost / 2.</span>
<span class='curline'><a href='../S/4380.html#L1083'>defender</a>         1083 data/ai/lua/battle_calcs.lua                 local org_hp = defender.hitpoints</span>
<span class='curline'><a href='../S/4380.html#L1084'>defender</a>         1084 data/ai/lua/battle_calcs.lua                 defender.hitpoints = hp1</span>
<span class='curline'><a href='../S/4380.html#L1089'>defender</a>         1089 data/ai/lua/battle_calcs.lua                     ast, dst = battle_calcs.battle_outcome(attackers[i], defender, { dst = dsts[i] } , cache)</span>
<span class='curline'><a href='../S/4380.html#L1096'>defender</a>         1096 data/ai/lua/battle_calcs.lua                 defender.hitpoints = org_hp</span>
<span class='curline'><a href='../S/4380.html#L1133'>defender</a>         1133 data/ai/lua/battle_calcs.lua         local r, dr, ar = battle_calcs.attack_rating(attackers[i], defender, dsts[i], cfg, cache)</span>
<span class='curline'><a href='../S/4382.html#L106'>defender</a>          106 data/ai/lua/generic_recruit_engine.lua             local function get_best_attack(attacker, defender, defender_defense, attacker_defense, can_poison)</span>
<span class='curline'><a href='../S/4382.html#L198'>defender</a>          198 data/ai/lua/generic_recruit_engine.lua                     for defender_attack in H.child_range(defender.__cfg, 'attack') do</span>
<span class='curline'><a href='../S/4382.html#L212'>defender</a>          212 data/ai/lua/generic_recruit_engine.lua                     local resistance = wesnoth.unit_resistance(defender, attack.type)</span>
<span class='curline'><a href='../S/4375.html#L440'>defender</a>          440 data/ai/lua/generic_rush_engine.lua                 local defender = wesnoth.get_unit(a.target.x, a.target.y)</span>
<span class='curline'><a href='../S/4375.html#L443'>defender</a>          443 data/ai/lua/generic_rush_engine.lua                 local cant_poison = defender.status.poisoned or defender.status.unpoisonable</span>
<span class='curline'><a href='../S/4375.html#L446'>defender</a>          446 data/ai/lua/generic_rush_engine.lua                 local on_village = wesnoth.get_terrain_info(wesnoth.get_terrain(defender.x, defender.y)).village</span>
<span class='curline'><a href='../S/4375.html#L449'>defender</a>          449 data/ai/lua/generic_rush_engine.lua                 local about_to_level = defender.max_experience - defender.experience &lt;= (wesnoth.unit_types[attacker.type].level * 2)</span>
<span class='curline'><a href='../S/4375.html#L453'>defender</a>          453 data/ai/lua/generic_rush_engine.lua                     local rating = defender.hitpoints</span>
<span class='curline'><a href='../S/4375.html#L456'>defender</a>          456 data/ai/lua/generic_rush_engine.lua                     if defender.canrecruit then rating = rating + 1000 end</span>
<span class='curline'><a href='../S/4375.html#L459'>defender</a>          459 data/ai/lua/generic_rush_engine.lua                     if wesnoth.unit_ability(defender, 'regenerate') then rating = rating - 1000 end</span>
<span class='curline'><a href='../S/4375.html#L462'>defender</a>          462 data/ai/lua/generic_rush_engine.lua                     local defender_defense = 100 - wesnoth.unit_defense(defender, wesnoth.get_terrain(defender.x, defender.y))</span>
<span class='curline'><a href='../S/4323.html#L323'>defender</a>          323 data/ai/micro_ais/cas/ca_bottleneck_move.lua                     defender = enemy,</span>
<span class='curline'><a href='../S/4323.html#L384'>defender</a>          384 data/ai/micro_ais/cas/ca_bottleneck_move.lua                         local att_stats, def_stats = BC.simulate_combat_loc(unit, { attack.x, attack.y }, attack.defender, n_weapon)</span>
<span class='curline'><a href='../S/4323.html#L420'>defender</a>          420 data/ai/micro_ais/cas/ca_bottleneck_move.lua                             data.BD_level_up_defender = attack.defender</span>
<span class='curline'><a href='../S/4332.html#L128'>defender</a>          128 data/ai/micro_ais/cas/ca_wolves_multipacks_attack.lua                 local defender = wesnoth.get_unit(best_attack.target.x, best_attack.target.y)</span>
<span class='curline'><a href='../S/4332.html#L130'>defender</a>          130 data/ai/micro_ais/cas/ca_wolves_multipacks_attack.lua                 AH.robust_move_and_attack(ai, attacker, best_attack.dst, defender)</span>
<span class='curline'><a href='../S/4332.html#L136'>defender</a>          136 data/ai/micro_ais/cas/ca_wolves_multipacks_attack.lua                     if (not defender) or (not defender.valid) then</span>
<span class='curline'><a href='../S/4998.html#L23'>defender</a>           23 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua         local defender = wesnoth.get_unit(att.target.x, att.target.y)</span>
<span class='curline'><a href='../S/4998.html#L28'>defender</a>           28 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua         local att_stats, def_stats = wesnoth.simulate_combat(attacker_dst, defender)</span>
<span class='curline'><a href='../S/4998.html#L34'>defender</a>           34 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua             local defender_damage = defender.hitpoints - def_stats.average_hp</span>
<span class='curline'><a href='../S/5528.html#L17'>defender</a>           17 data/lua/teleport_filter.lua function backstab_defender_filter(defender)</span>
<span class='curline'><a href='../S/5528.html#L22'>defender</a>           22 data/lua/teleport_filter.lua 	local defender_x = defender.x</span>
<span class='curline'><a href='../S/5528.html#L23'>defender</a>           23 data/lua/teleport_filter.lua 	local defender_y = defender.y</span>
<span class='curline'><a href='../S/5528.html#L51'>defender</a>           51 data/lua/teleport_filter.lua 	return wesnoth.is_enemy(opposite_unit.side, defender.side)</span>
<span class='curline'><a href='../S/1790.html#L96'>defender</a>           96 doc/design/gui2/unit_attack.cpp 		const battle_context::unit_stats&amp; defender =</span>
<span class='curline'><a href='../S/1790.html#L101'>defender</a>          101 doc/design/gui2/unit_attack.cpp 				defender.weapon ? *defender.weapon : no_weapon);</span>
<span class='curline'><a href='../S/896.html#L330'>defender</a>          330 src/actions/attack.cpp 	const unit &amp;defender = *units.find(defender_loc);</span>
<span class='curline'><a href='../S/896.html#L337'>defender</a>          337 src/actions/attack.cpp 		attacker_weapon = choose_attacker_weapon(attacker, defender, units,</span>
<span class='curline'><a href='../S/896.html#L341'>defender</a>          341 src/actions/attack.cpp 		defender_weapon = choose_defender_weapon(attacker, defender, attacker_weapon,</span>
<span class='curline'><a href='../S/896.html#L355'>defender</a>          355 src/actions/attack.cpp 			VALIDATE(defender_weapon &lt; static_cast&lt;int&gt;(defender.attacks().size()),</span>
<span class='curline'><a href='../S/896.html#L357'>defender</a>          357 src/actions/attack.cpp 			ddef = defender.attacks()[defender_weapon].shared_from_this();</span>
<span class='curline'><a href='../S/896.html#L361'>defender</a>          361 src/actions/attack.cpp 				true, defender, defender_loc, ddef, units);</span>
<span class='curline'><a href='../S/896.html#L362'>defender</a>          362 src/actions/attack.cpp 		defender_stats_ = new battle_context_unit_stats(defender, defender_loc, defender_weapon, false,</span>
<span class='curline'><a href='../S/896.html#L475'>defender</a>          475 src/actions/attack.cpp 		const unit &amp;defender, const unit_map&amp; units,</span>
<span class='curline'><a href='../S/896.html#L492'>defender</a>          492 src/actions/attack.cpp 		*defender_weapon = choose_defender_weapon(attacker, defender, choices[0], units,</span>
<span class='curline'><a href='../S/896.html#L494'>defender</a>          494 src/actions/attack.cpp 		const_attack_ptr def_weapon = *defender_weapon &gt;= 0 ? defender.attacks()[*defender_weapon].shared_from_this() : nullptr;</span>
<span class='curline'><a href='../S/896.html#L496'>defender</a>          496 src/actions/attack.cpp 						true, defender, defender_loc, def_weapon, units);</span>
<span class='curline'><a href='../S/896.html#L503'>defender</a>          503 src/actions/attack.cpp 		defender_stats_ = new battle_context_unit_stats(defender, defender_loc, *defender_weapon, false,</span>
<span class='curline'><a href='../S/896.html#L514'>defender</a>          514 src/actions/attack.cpp 		int def_weapon = choose_defender_weapon(attacker, defender, choices[i], units,</span>
<span class='curline'><a href='../S/896.html#L520'>defender</a>          520 src/actions/attack.cpp 				def = defender.attacks()[def_weapon].shared_from_this();</span>
<span class='curline'><a href='../S/896.html#L523'>defender</a>          523 src/actions/attack.cpp 				true, defender, defender_loc, def, units);</span>
<span class='curline'><a href='../S/896.html#L529'>defender</a>          529 src/actions/attack.cpp 			defender_stats_ = new battle_context_unit_stats(defender, defender_loc, def_weapon, false,</span>
<span class='curline'><a href='../S/896.html#L579'>defender</a>          579 src/actions/attack.cpp 		const unit &amp;defender, unsigned attacker_weapon, const unit_map&amp; units,</span>
<span class='curline'><a href='../S/896.html#L590'>defender</a>          590 src/actions/attack.cpp 	for (i = 0; i &lt; defender.attacks().size(); ++i) {</span>
<span class='curline'><a href='../S/896.html#L591'>defender</a>          591 src/actions/attack.cpp 		const attack_type &amp;def = defender.attacks()[i];</span>
<span class='curline'><a href='../S/896.html#L599'>defender</a>          599 src/actions/attack.cpp 		const battle_context_unit_stats def_stats(defender, defender_loc,</span>
<span class='curline'><a href='../S/896.html#L614'>defender</a>          614 src/actions/attack.cpp 			const attack_type &amp;def = defender.attacks()[choices[i]];</span>
<span class='curline'><a href='../S/896.html#L616'>defender</a>          616 src/actions/attack.cpp 				const battle_context_unit_stats def_stats(defender, defender_loc,</span>
<span class='curline'><a href='../S/896.html#L631'>defender</a>          631 src/actions/attack.cpp 		const attack_type &amp;def = defender.attacks()[choices[i]];</span>
<span class='curline'><a href='../S/896.html#L633'>defender</a>          633 src/actions/attack.cpp 				true, defender, defender_loc, def.shared_from_this(), units);</span>
<span class='curline'><a href='../S/896.html#L634'>defender</a>          634 src/actions/attack.cpp 		battle_context_unit_stats *def_stats = new battle_context_unit_stats(defender, defender_loc, choices[i], false,</span>
<span class='curline'><a href='../S/896.html#L702'>defender</a>          702 src/actions/attack.cpp 		attack(const map_location &amp;attacker, const map_location &amp;defender,</span>
<span class='curline'><a href='../S/896.html#L800'>defender</a>          800 src/actions/attack.cpp 	attack::attack(const map_location &amp;attacker, const map_location &amp;defender,</span>
<span class='curline'><a href='../S/896.html#L811'>defender</a>          811 src/actions/attack.cpp 		d_(defender, defend_with, resources::gameboard-&gt;units()),</span>
<span class='curline'><a href='../S/896.html#L901'>defender</a>          901 src/actions/attack.cpp 			&amp;defender = *(attacker_turn ? &amp;d_ : &amp;a_);</span>
<span class='curline'><a href='../S/896.html#L928'>defender</a>          928 src/actions/attack.cpp 		int damage_done = std::min&lt;int&gt;(defender.get_unit().hitpoints(), attacker.damage_);</span>
<span class='curline'><a href='../S/896.html#L952'>defender</a>          952 src/actions/attack.cpp 				const unit &amp;defender_unit = defender.get_unit();</span>
<span class='curline'><a href='../S/896.html#L976'>defender</a>          976 src/actions/attack.cpp 				attacker.loc_, defender.loc_, damage,</span>
<span class='curline'><a href='../S/896.html#L981'>defender</a>          981 src/actions/attack.cpp 		bool dies = defender.get_unit().take_hit(damage);</span>
<span class='curline'><a href='../S/896.html#L1010'>defender</a>         1010 src/actions/attack.cpp 				if (results_dies) defender.get_unit().set_hitpoints(0);</span>
<span class='curline'><a href='../S/896.html#L1042'>defender</a>         1042 src/actions/attack.cpp 			unit_killed(attacker, defender, attacker_stats, defender_stats, false);</span>
<span class='curline'><a href='../S/896.html#L1046'>defender</a>         1046 src/actions/attack.cpp 			unit_killed(defender, attacker, defender_stats, attacker_stats, true);</span>
<span class='curline'><a href='../S/896.html#L1057'>defender</a>         1057 src/actions/attack.cpp 			unit &amp;defender_unit = defender.get_unit();</span>
<span class='curline'><a href='../S/896.html#L1066'>defender</a>         1066 src/actions/attack.cpp 				defender.damage_ = defender_stats-&gt;slow_damage;</span>
<span class='curline'><a href='../S/896.html#L1075'>defender</a>         1075 src/actions/attack.cpp 				defender.n_attacks_ = -1; // Petrified.</span>
<span class='curline'><a href='../S/896.html#L1076'>defender</a>         1076 src/actions/attack.cpp 				resources::game_events-&gt;pump().fire("petrified", defender.loc_, attacker.loc_);</span>
<span class='curline'><a href='../S/896.html#L1091'>defender</a>         1091 src/actions/attack.cpp 	void attack::unit_killed(unit_info&amp; attacker, unit_info&amp; defender,</span>
<span class='curline'><a href='../S/896.html#L1096'>defender</a>         1096 src/actions/attack.cpp 		attacker.xp_ = game_config::kill_xp(defender.get_unit().level());</span>
<span class='curline'><a href='../S/896.html#L1097'>defender</a>         1097 src/actions/attack.cpp 		defender.xp_ = 0;</span>
<span class='curline'><a href='../S/896.html#L1100'>defender</a>         1100 src/actions/attack.cpp 		game_events::entity_location death_loc(defender.loc_, defender.id_);</span>
<span class='curline'><a href='../S/896.html#L1102'>defender</a>         1102 src/actions/attack.cpp 		std::string undead_variation = defender.get_unit().undead_variation();</span>
<span class='curline'><a href='../S/896.html#L1110'>defender</a>         1110 src/actions/attack.cpp 		config d_weapon_cfg = defender_stats-&gt;weapon &amp;&amp; defender.valid() ?</span>
<span class='curline'><a href='../S/896.html#L1122'>defender</a>         1122 src/actions/attack.cpp 		if (!defender.valid() || defender.get_unit().hitpoints() &gt; 0) {</span>
<span class='curline'><a href='../S/896.html#L1128'>defender</a>         1128 src/actions/attack.cpp 			unit_display::unit_die(defender.loc_, defender.get_unit(),</span>
<span class='curline'><a href='../S/896.html#L1131'>defender</a>         1131 src/actions/attack.cpp 			unit_display::unit_die(defender.loc_, defender.get_unit(),</span>
<span class='curline'><a href='../S/896.html#L1139'>defender</a>         1139 src/actions/attack.cpp 		if (!defender.valid() || defender.get_unit().hitpoints() &gt; 0) {</span>
<span class='curline'><a href='../S/896.html#L1144'>defender</a>         1144 src/actions/attack.cpp 		units_.erase(defender.loc_);</span>
<span class='curline'><a href='../S/896.html#L1171'>defender</a>         1171 src/actions/attack.cpp 				game_events::entity_location reanim_loc(defender.loc_, newunit-&gt;underlying_id());</span>
<span class='curline'><a href='../S/896.html#L1393'>defender</a>         1393 src/actions/attack.cpp void attack_unit(const map_location &amp;attacker, const map_location &amp;defender,</span>
<span class='curline'><a href='../S/896.html#L1396'>defender</a>         1396 src/actions/attack.cpp 	attack dummy(attacker, defender, attack_with, defend_with, update_display);</span>
<span class='curline'><a href='../S/896.html#L1400'>defender</a>         1400 src/actions/attack.cpp void attack_unit_and_advance(const map_location &amp;attacker, const map_location &amp;defender,</span>
<span class='curline'><a href='../S/896.html#L1404'>defender</a>         1404 src/actions/attack.cpp 	attack_unit(attacker, defender, attack_with, defend_with, update_display);</span>
<span class='curline'><a href='../S/896.html#L1410'>defender</a>         1410 src/actions/attack.cpp 	unit_map::const_iterator defu = resources::gameboard-&gt;units().find(defender);</span>
<span class='curline'><a href='../S/896.html#L1412'>defender</a>         1412 src/actions/attack.cpp 		advance_unit_at(advance_unit_params(defender).ai_advancements(ai_advancement));</span>
<span class='curline'><a href='../S/896.html#L1466'>defender</a>         1466 src/actions/attack.cpp 	const unit_map::const_iterator defender = units.find(defender_loc);</span>
<span class='curline'><a href='../S/896.html#L1467'>defender</a>         1467 src/actions/attack.cpp 	if(defender == units.end()) return false; // No defender</span>
<span class='curline'><a href='../S/896.html#L1482'>defender</a>         1482 src/actions/attack.cpp 	if (size_t(defender-&gt;side() - 1) &gt;= teams.size() || size_t(opp-&gt;side() - 1) &gt;= teams.size())</span>
<span class='curline'><a href='../S/896.html#L1484'>defender</a>         1484 src/actions/attack.cpp 	if (teams[defender-&gt;side() - 1].is_enemy(opp-&gt;side()))</span>
<span class='curline'><a href='../S/899.html#L176'>defender</a>          176 src/actions/attack.hpp 	int choose_attacker_weapon(const unit &amp;attacker, const unit &amp;defender,</span>
<span class='curline'><a href='../S/899.html#L182'>defender</a>          182 src/actions/attack.hpp 	int choose_defender_weapon(const unit &amp;attacker, const unit &amp;defender,</span>
<span class='curline'><a href='../S/899.html#L196'>defender</a>          196 src/actions/attack.hpp void attack_unit(const map_location &amp;attacker, const map_location &amp;defender,</span>
<span class='curline'><a href='../S/899.html#L200'>defender</a>          200 src/actions/attack.hpp void attack_unit_and_advance(const map_location &amp;attacker, const map_location &amp;defender,</span>
<span class='curline'><a href='../S/233.html#L182'>defender</a>          182 src/ai/actions.cpp 	const unit_map::const_iterator defender = resources::gameboard-&gt;units().find(defender_loc_);</span>
<span class='curline'><a href='../S/233.html#L191'>defender</a>          191 src/ai/actions.cpp 	if (defender==resources::gameboard-&gt;units().end())</span>
<span class='curline'><a href='../S/233.html#L204'>defender</a>          204 src/ai/actions.cpp 	if(defender-&gt;incapacitated()) {</span>
<span class='curline'><a href='../S/233.html#L222'>defender</a>          222 src/ai/actions.cpp 	if(!get_my_team().is_enemy(defender-&gt;side())) {</span>
<span class='curline'><a href='../S/247.html#L1057'>defender</a>         1057 src/ai/default/recruitment.cpp 	attack_simulation(const unit_type* attacker, const unit_type* defender,</span>
<span class='curline'><a href='../S/247.html#L1062'>defender</a>         1062 src/ai/default/recruitment.cpp 			defender_type(defender),</span>
<span class='curline'><a href='../S/247.html#L1063'>defender</a>         1063 src/ai/default/recruitment.cpp 			attacker_stats(attacker, att_weapon, true, defender, def_weapon,</span>
<span class='curline'><a href='../S/247.html#L1065'>defender</a>         1065 src/ai/default/recruitment.cpp 			defender_stats(defender, def_weapon, false, attacker, att_weapon,</span>
<span class='curline'><a href='../S/247.html#L1113'>defender</a>         1113 src/ai/default/recruitment.cpp 			const unit_type* const attacker, const unit_type* const defender,</span>
<span class='curline'><a href='../S/247.html#L1116'>defender</a>         1116 src/ai/default/recruitment.cpp 	if(!attacker || !defender || !damage_to_attacker || !damage_to_defender) {</span>
<span class='curline'><a href='../S/247.html#L1121'>defender</a>         1121 src/ai/default/recruitment.cpp 	const_attack_itors defender_weapons = defender-&gt;attacks();</span>
<span class='curline'><a href='../S/247.html#L1134'>defender</a>         1134 src/ai/default/recruitment.cpp 					attacker, defender,</span>
<span class='curline'><a href='../S/247.html#L1145'>defender</a>         1145 src/ai/default/recruitment.cpp 					attacker, defender,</span>
<span class='curline'><a href='../S/247.html#L1158'>defender</a>         1158 src/ai/default/recruitment.cpp 	*damage_to_defender += (defender-&gt;hitpoints() - best_att_attack-&gt;get_avg_hp_of_defender());</span>
<span class='curline'><a href='../S/236.html#L220'>defender</a>          220 src/ai/default/recruitment.hpp 			const unit_type* const attacker, const unit_type* const defender,</span>
<span class='curline'><a href='../S/253.html#L1538'>defender</a>         1538 src/ai/formula/function_table.cpp 	std::pair&lt;int, int&gt; best_melee_and_ranged_attacks(unit_adapter attacker, unit_adapter defender) const {</span>
<span class='curline'><a href='../S/253.html#L1543'>defender</a>         1543 src/ai/formula/function_table.cpp 			const int dmg = round_damage(attack.damage(), defender.damage_from(attack), 100) * attack.num_attacks();</span>
<span class='curline'><a href='../S/253.html#L1563'>defender</a>         1563 src/ai/formula/function_table.cpp 		unit_adapter defender(u2);</span>
<span class='curline'><a href='../S/253.html#L1566'>defender</a>         1566 src/ai/formula/function_table.cpp 		std::pair&lt;int, int&gt; best_attacker_attacks = best_melee_and_ranged_attacks(attacker, defender);</span>
<span class='curline'><a href='../S/253.html#L1567'>defender</a>         1567 src/ai/formula/function_table.cpp 		std::pair&lt;int, int&gt; best_defender_attacks = best_melee_and_ranged_attacks(defender, attacker);</span>
<span class='curline'><a href='../S/293.html#L209'>defender</a>          209 src/ai/lua/core.cpp 	map_location defender = luaW_checklocation(L, 2);</span>
<span class='curline'><a href='../S/293.html#L230'>defender</a>          230 src/ai/lua/core.cpp 	ai::attack_result_ptr attack_result = ai::actions::execute_attack_action(side,exec,attacker,defender,attacker_weapon,aggression,advancements);</span>
<span class='curline'><a href='../S/428.html#L51'>defender</a>           51 src/gui/dialogs/attack_predictions.cpp attack_predictions::attack_predictions(battle_context&amp; bc, const unit&amp; attacker, const unit&amp; defender)</span>
<span class='curline'><a href='../S/428.html#L53'>defender</a>           53 src/gui/dialogs/attack_predictions.cpp 	, defender_data_(defender, bc.get_defender_combatant(), bc.get_defender_stats())</span>
<span class='curline'><a href='../S/428.html#L76'>defender</a>           76 src/gui/dialogs/attack_predictions.cpp void attack_predictions::set_data(window&amp; window, const combatant_data&amp; attacker, const combatant_data&amp; defender)</span>
<span class='curline'><a href='../S/428.html#L109'>defender</a>          109 src/gui/dialogs/attack_predictions.cpp 	draw_hp_graph(graph_widget, attacker, defender);</span>
<span class='curline'><a href='../S/428.html#L130'>defender</a>          130 src/gui/dialogs/attack_predictions.cpp 	weapon-&gt;set_specials_context(attacker.unit_.get_location(), defender.unit_.get_location(), attacker.stats_.is_attacker, defender.stats_.weapon);</span>
<span class='curline'><a href='../S/428.html#L185'>defender</a>          185 src/gui/dialogs/attack_predictions.cpp 	const int resistance_modifier = defender.unit_.damage_from(*weapon, !attacker.stats_.is_attacker, defender.unit_.get_location());</span>
<span class='curline'><a href='../S/428.html#L259'>defender</a>          259 src/gui/dialogs/attack_predictions.cpp void attack_predictions::draw_hp_graph(drawing&amp; hp_graph, const combatant_data&amp; attacker, const combatant_data&amp; defender)</span>
<span class='curline'><a href='../S/428.html#L301'>defender</a>          301 src/gui/dialogs/attack_predictions.cpp 			if(defender.stats_.petrifies) {</span>
<span class='curline'><a href='../S/429.html#L41'>defender</a>           41 src/gui/dialogs/attack_predictions.hpp 	attack_predictions(battle_context&amp; bc, const unit&amp; attacker, const unit&amp; defender);</span>
<span class='curline'><a href='../S/429.html#L43'>defender</a>           43 src/gui/dialogs/attack_predictions.hpp 	static void display(battle_context&amp; bc, const unit&amp; attacker, const unit&amp; defender, CVideo&amp; video)</span>
<span class='curline'><a href='../S/429.html#L45'>defender</a>           45 src/gui/dialogs/attack_predictions.hpp 		attack_predictions(bc, attacker, defender).show(video);</span>
<span class='curline'><a href='../S/429.html#L68'>defender</a>           68 src/gui/dialogs/attack_predictions.hpp 	void set_data(window&amp; window, const combatant_data&amp; attacker, const combatant_data&amp; defender);</span>
<span class='curline'><a href='../S/429.html#L76'>defender</a>           76 src/gui/dialogs/attack_predictions.hpp 	void draw_hp_graph(drawing&amp; hp_graph, const combatant_data&amp; attacker, const combatant_data&amp; defender);</span>
<span class='curline'><a href='../S/460.html#L118'>defender</a>          118 src/gui/dialogs/unit_attack.cpp 		const battle_context_unit_stats&amp; defender = weapon.get_defender_stats();</span>
<span class='curline'><a href='../S/460.html#L122'>defender</a>          122 src/gui/dialogs/unit_attack.cpp 		const attack_type&amp; defender_weapon = defender.weapon ?</span>
<span class='curline'><a href='../S/460.html#L123'>defender</a>          123 src/gui/dialogs/unit_attack.cpp 			*defender.weapon : *no_weapon;</span>
<span class='curline'><a href='../S/460.html#L131'>defender</a>          131 src/gui/dialogs/unit_attack.cpp 		const color_t d_cth_color = game_config::red_to_green(defender.chance_to_hit);</span>
<span class='curline'><a href='../S/460.html#L155'>defender</a>          155 src/gui/dialogs/unit_attack.cpp 			&lt;&lt; defender.damage &lt;&lt; font::weapon_numbers_sep &lt;&lt; defender.num_blows</span>
<span class='curline'><a href='../S/460.html#L157'>defender</a>          157 src/gui/dialogs/unit_attack.cpp 			&lt;&lt; font::span_color(d_cth_color) &lt;&lt; defender.chance_to_hit &lt;&lt; "%&lt;/span&gt;";</span>
<span class='curline'><a href='../S/955.html#L898'>defender</a>          898 src/mouse_events.cpp int mouse_handler::fill_weapon_choices(std::vector&lt;battle_context&gt;&amp; bc_vector, unit_map::iterator attacker, unit_map::iterator defender)</span>
<span class='curline'><a href='../S/955.html#L904'>defender</a>          904 src/mouse_events.cpp 			battle_context bc(pc_.gamestate().board_.units_, attacker-&gt;get_location(), defender-&gt;get_location(), i);</span>
<span class='curline'><a href='../S/955.html#L920'>defender</a>          920 src/mouse_events.cpp 	unit_map::iterator defender = board.units_.find(defender_loc);</span>
<span class='curline'><a href='../S/955.html#L921'>defender</a>          921 src/mouse_events.cpp 	if(!attacker || !defender) {</span>
<span class='curline'><a href='../S/955.html#L927'>defender</a>          927 src/mouse_events.cpp 	const int best = fill_weapon_choices(bc_vector, attacker, defender);</span>
<span class='curline'><a href='../S/955.html#L942'>defender</a>          942 src/mouse_events.cpp 			, defender</span>
<span class='curline'><a href='../S/955.html#L980'>defender</a>          980 src/mouse_events.cpp 	unit_map::iterator defender = find_unit(defender_loc);</span>
<span class='curline'><a href='../S/955.html#L981'>defender</a>          981 src/mouse_events.cpp 	if(!defender</span>
<span class='curline'><a href='../S/955.html#L982'>defender</a>          982 src/mouse_events.cpp 			|| current_team().is_enemy(defender-&gt;side()) == false</span>
<span class='curline'><a href='../S/955.html#L983'>defender</a>          983 src/mouse_events.cpp 			|| defender-&gt;incapacitated())</span>
<span class='curline'><a href='../S/955.html#L987'>defender</a>          987 src/mouse_events.cpp 	fill_weapon_choices(bc_vector, attacker, defender);</span>
<span class='curline'><a href='../S/955.html#L1015'>defender</a>         1015 src/mouse_events.cpp 		attacker-&gt;type_id(), defender-&gt;type_id(), att.level,</span>
<span class='curline'><a href='../S/17.html#L112'>defender</a>          112 src/mouse_events.hpp 	int fill_weapon_choices(std::vector&lt;battle_context&gt;&amp; bc_vector, unit_map::iterator attacker, unit_map::iterator defender);</span>
<span class='curline'><a href='../S/762.html#L844'>defender</a>          844 src/reports.cpp static config unit_weapons(reports::context &amp; rc, const unit *attacker, const map_location &amp;attacker_pos, const unit *defender, bool show_attacker)</span>
<span class='curline'><a href='../S/762.html#L846'>defender</a>          846 src/reports.cpp 	if (!attacker || !defender) return config();</span>
<span class='curline'><a href='../S/762.html#L848'>defender</a>          848 src/reports.cpp 	const unit* u = show_attacker ? attacker : defender;</span>
<span class='curline'><a href='../S/762.html#L849'>defender</a>          849 src/reports.cpp 	const map_location unit_loc = show_attacker ? attacker_pos : defender-&gt;get_location();</span>
<span class='curline'><a href='../S/762.html#L858'>defender</a>          858 src/reports.cpp 			battle_context weapon(rc.units(), attacker_pos, defender-&gt;get_location(), i, -1, 0.0, nullptr, attacker);</span>
<span class='curline'><a href='../S/990.html#L498'>defender</a>          498 src/units/udisplay.cpp void reset_helpers(const unit *attacker,const unit *defender);</span>
<span class='curline'><a href='../S/990.html#L501'>defender</a>          501 src/units/udisplay.cpp 		const_attack_ptr attack,const_attack_ptr secondary_attack, const map_location&amp; defender_loc,unit* defender)</span>
<span class='curline'><a href='../S/990.html#L509'>defender</a>          509 src/units/udisplay.cpp 	defender-&gt;set_facing(defender_loc.get_relative_dir(loc));</span>
<span class='curline'><a href='../S/990.html#L511'>defender</a>          511 src/units/udisplay.cpp 	animator.add_animation(defender,"draw_weapon",defender_loc,loc,0,false,"",{0,0,0},unit_animation::hit_type::MISS,secondary_attack,attack,0);</span>
<span class='curline'><a href='../S/990.html#L595'>defender</a>          595 src/units/udisplay.cpp 	unit &amp;defender = *def;</span>
<span class='curline'><a href='../S/990.html#L596'>defender</a>          596 src/units/udisplay.cpp 	int def_hitpoints = defender.hitpoints();</span>
<span class='curline'><a href='../S/990.html#L600'>defender</a>          600 src/units/udisplay.cpp 	defender.set_facing(b.get_relative_dir(a));</span>
<span class='curline'><a href='../S/990.html#L605'>defender</a>          605 src/units/udisplay.cpp 	unit_ability_list helpers = defender.get_abilities("resistance");</span>
<span class='curline'><a href='../S/990.html#L611'>defender</a>          611 src/units/udisplay.cpp 	if(damage &gt;= defender.hitpoints()) {</span>
<span class='curline'><a href='../S/990.html#L627'>defender</a>          627 src/units/udisplay.cpp 	animator.add_animation(&amp;defender, defender_anim, def-&gt;get_location(),</span>
<span class='curline'><a href='../S/990.html#L668'>defender</a>          668 src/units/udisplay.cpp 		defender.take_hit(removed_hp);</span>
<span class='curline'><a href='../S/990.html#L680'>defender</a>          680 src/units/udisplay.cpp void reset_helpers(const unit *attacker,const unit *defender)</span>
<span class='curline'><a href='../S/990.html#L693'>defender</a>          693 src/units/udisplay.cpp 	if(defender) {</span>
<span class='curline'><a href='../S/990.html#L694'>defender</a>          694 src/units/udisplay.cpp 		unit_ability_list helpers = defender-&gt;get_abilities("resistance");</span>
<span class='curline'><a href='../S/1014.html#L91'>defender</a>           91 src/units/udisplay.hpp void unit_draw_weapon( const map_location&amp; loc, unit&amp; u, const_attack_ptr attack=nullptr, const_attack_ptr secondary_attack=nullptr,const map_location&amp; defender_loc = map_location::null_location(), unit * defender=nullptr);</span>
<span class='curline'><a href='../S/1014.html#L97'>defender</a>           97 src/units/udisplay.hpp void unit_sheath_weapon( const map_location&amp; loc, unit* u=nullptr, const_attack_ptr attack=nullptr, const_attack_ptr secondary_attack=nullptr,const map_location&amp; defender_loc = map_location::null_location(), unit * defender=nullptr);</span>
<span class='curline'><a href='../S/1345.html#L56'>defender</a>           56 utils/wesnoth-attack-sim.c static void strike(struct unit *attacker, struct unit *defender)</span>
<span class='curline'><a href='../S/1345.html#L63'>defender</a>           63 utils/wesnoth-attack-sim.c 	if (damage &gt; defender-&gt;hp)</span>
<span class='curline'><a href='../S/1345.html#L64'>defender</a>           64 utils/wesnoth-attack-sim.c 		damage = defender-&gt;hp;</span>
<span class='curline'><a href='../S/1345.html#L65'>defender</a>           65 utils/wesnoth-attack-sim.c 	if (attacker-&gt;slows &amp;&amp; !defender-&gt;slowed) {</span>
<span class='curline'><a href='../S/1345.html#L66'>defender</a>           66 utils/wesnoth-attack-sim.c 		defender-&gt;slowed = true;</span>
<span class='curline'><a href='../S/1345.html#L67'>defender</a>           67 utils/wesnoth-attack-sim.c 		defender-&gt;damage = (defender-&gt;damage + 1) / 2;</span>
<span class='curline'><a href='../S/1345.html#L74'>defender</a>           74 utils/wesnoth-attack-sim.c 	defender-&gt;hp -= damage;</span>
<span class='curline'><a href='../S/1345.html#L75'>defender</a>           75 utils/wesnoth-attack-sim.c 	defender-&gt;touched = true;</span>
<span class='curline'><a href='../S/1345.html#L109'>defender</a>          109 utils/wesnoth-attack-sim.c static void calculate_attack(const struct unit *defender,</span>
<span class='curline'><a href='../S/1345.html#L126'>defender</a>          126 utils/wesnoth-attack-sim.c 		struct unit def = *defender;</span>
<span class='curline'><a href='../S/1345.html#L138'>defender</a>          138 utils/wesnoth-attack-sim.c 			def.num_attacks = num_attacks(defender-&gt;num_attacks,</span>
<span class='curline'><a href='../S/1345.html#L139'>defender</a>          139 utils/wesnoth-attack-sim.c 						      defender-&gt;max_hp, def.hp,</span>
<span class='curline'><a href='../S/1345.html#L155'>defender</a>          155 utils/wesnoth-attack-sim.c 	for (i = 0; i &lt;= defender-&gt;max_hp; i++)</span>
</pre>
</body>
</html>
