<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>opponent</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/1227.html#L2250'>opponent</a>         2250 src/attack_prediction.cpp void combatant::fight(combatant&amp; opponent, bool levelup_considered)</span>
<span class='curline'><a href='../S/1227.html#L2253'>opponent</a>         2253 src/attack_prediction.cpp 	if(opponent.u_.firststrike &amp;&amp; !u_.firststrike) {</span>
<span class='curline'><a href='../S/1227.html#L2254'>opponent</a>         2254 src/attack_prediction.cpp 		opponent.fight(*this, levelup_considered);</span>
<span class='curline'><a href='../S/1227.html#L2262'>opponent</a>         2262 src/attack_prediction.cpp 	dump(opponent.u_);</span>
<span class='curline'><a href='../S/1227.html#L2266'>opponent</a>         2266 src/attack_prediction.cpp 	std::vector&lt;double&gt; prev = summary[0], opp_prev = opponent.summary[0];</span>
<span class='curline'><a href='../S/1227.html#L2267'>opponent</a>         2267 src/attack_prediction.cpp 	complex_fight(opponent, 1);</span>
<span class='curline'><a href='../S/1227.html#L2268'>opponent</a>         2268 src/attack_prediction.cpp 	std::vector&lt;double&gt; res = summary[0], opp_res = opponent.summary[0];</span>
<span class='curline'><a href='../S/1227.html#L2270'>opponent</a>         2270 src/attack_prediction.cpp 	opponent.summary[0] = opp_prev;</span>
<span class='curline'><a href='../S/1227.html#L2279'>opponent</a>         2279 src/attack_prediction.cpp 	double opp_already_dead = opponent.hp_dist[0];</span>
<span class='curline'><a href='../S/1227.html#L2284'>opponent</a>         2284 src/attack_prediction.cpp 	const std::vector&lt;combat_slice&gt; opp_split = split_summary(opponent.u_, opponent.summary);</span>
<span class='curline'><a href='../S/1227.html#L2287'>opponent</a>         2287 src/attack_prediction.cpp 		fight_complexity(split.size(), opp_split.size(), u_, opponent.u_) &gt; MONTE_CARLO_SIMULATION_THRESHOLD</span>
<span class='curline'><a href='../S/1227.html#L2293'>opponent</a>         2293 src/attack_prediction.cpp 		complex_fight(attack_prediction_mode::monte_carlo_simulation, u_, opponent.u_, u_.num_blows,</span>
<span class='curline'><a href='../S/1227.html#L2294'>opponent</a>         2294 src/attack_prediction.cpp 		              opponent.u_.num_blows, summary, opponent.summary, self_not_hit, opp_not_hit, levelup_considered, split,</span>
<span class='curline'><a href='../S/1227.html#L2295'>opponent</a>         2295 src/attack_prediction.cpp 		              opp_split, slowed, opponent.slowed);</span>
<span class='curline'><a href='../S/1227.html#L2298'>opponent</a>         2298 src/attack_prediction.cpp 		do_fight(u_, opponent.u_, u_.num_blows, opponent.u_.num_blows, summary, opponent.summary, self_not_hit,</span>
<span class='curline'><a href='../S/1227.html#L2316'>opponent</a>         2316 src/attack_prediction.cpp 				init_slice_summary(sit_opp_summary[0], opponent.summary[0], opp_split[t].begin_hp, opp_split[t].end_hp,</span>
<span class='curline'><a href='../S/1227.html#L2318'>opponent</a>         2318 src/attack_prediction.cpp 				init_slice_summary(sit_opp_summary[1], opponent.summary[1], opp_split[t].begin_hp, opp_split[t].end_hp,</span>
<span class='curline'><a href='../S/1227.html#L2326'>opponent</a>         2326 src/attack_prediction.cpp 				do_fight(u_, opponent.u_, split[s].strikes, opp_split[t].strikes, sit_summary, sit_opp_summary,</span>
<span class='curline'><a href='../S/1227.html#L2342'>opponent</a>         2342 src/attack_prediction.cpp 		opponent.summary[0].swap(opp_summary_result[0]);</span>
<span class='curline'><a href='../S/1227.html#L2343'>opponent</a>         2343 src/attack_prediction.cpp 		opponent.summary[1].swap(opp_summary_result[1]);</span>
<span class='curline'><a href='../S/1227.html#L2348'>opponent</a>         2348 src/attack_prediction.cpp 	assert(opponent.summary[0].size() == opp_res.size());</span>
<span class='curline'><a href='../S/1227.html#L2355'>opponent</a>         2355 src/attack_prediction.cpp 	for(unsigned int i = 0; i &lt; opponent.summary[0].size(); ++i) {</span>
<span class='curline'><a href='../S/1227.html#L2356'>opponent</a>         2356 src/attack_prediction.cpp 		if(std::fabs(opponent.summary[0][i] - opp_res[i]) &gt; 0.000001) {</span>
<span class='curline'><a href='../S/1227.html#L2357'>opponent</a>         2357 src/attack_prediction.cpp 			std::cerr &lt;&lt; "Mismatch for " &lt;&lt; i &lt;&lt; " hp: " &lt;&lt; opponent.summary[0][i] &lt;&lt; " should have been " &lt;&lt; opp_res[i] &lt;&lt; "\n";</span>
<span class='curline'><a href='../S/1227.html#L2373'>opponent</a>         2373 src/attack_prediction.cpp 	if(opponent.summary[1].empty()) {</span>
<span class='curline'><a href='../S/1227.html#L2374'>opponent</a>         2374 src/attack_prediction.cpp 		opponent.hp_dist = opponent.summary[0];</span>
<span class='curline'><a href='../S/1227.html#L2376'>opponent</a>         2376 src/attack_prediction.cpp 		const unsigned size = opponent.summary[0].size();</span>
<span class='curline'><a href='../S/1227.html#L2377'>opponent</a>         2377 src/attack_prediction.cpp 		opponent.hp_dist.resize(size);</span>
<span class='curline'><a href='../S/1227.html#L2379'>opponent</a>         2379 src/attack_prediction.cpp 			opponent.hp_dist[i] = opponent.summary[0][i] + opponent.summary[1][i];</span>
<span class='curline'><a href='../S/1227.html#L2386'>opponent</a>         2386 src/attack_prediction.cpp 	poisoned = calculate_probability_of_debuff(poisoned, opponent.u_.poisons, touched, 1.0 - hp_dist[0],</span>
<span class='curline'><a href='../S/1227.html#L2387'>opponent</a>         2387 src/attack_prediction.cpp 		u_.experience + game_config::kill_xp(opponent.u_.level) &gt;= u_.max_experience, opponent.hp_dist[0] - opp_already_dead);</span>
<span class='curline'><a href='../S/1227.html#L2388'>opponent</a>         2388 src/attack_prediction.cpp 	opponent.poisoned = calculate_probability_of_debuff(opponent.poisoned, u_.poisons, opp_touched, 1.0 - opponent.hp_dist[0],</span>
<span class='curline'><a href='../S/1227.html#L2389'>opponent</a>         2389 src/attack_prediction.cpp 		opponent.u_.experience + game_config::kill_xp(u_.level) &gt;= opponent.u_.max_experience, hp_dist[0] - self_already_dead);</span>
<span class='curline'><a href='../S/1227.html#L2392'>opponent</a>         2392 src/attack_prediction.cpp 		slowed = calculate_probability_of_debuff(slowed, opponent.u_.slows, touched, 1.0 - hp_dist[0],</span>
<span class='curline'><a href='../S/1227.html#L2393'>opponent</a>         2393 src/attack_prediction.cpp 			u_.experience + game_config::kill_xp(opponent.u_.level) &gt;= u_.max_experience, opponent.hp_dist[0] - opp_already_dead);</span>
<span class='curline'><a href='../S/1227.html#L2394'>opponent</a>         2394 src/attack_prediction.cpp 		opponent.slowed = calculate_probability_of_debuff(opponent.slowed, u_.slows, opp_touched, 1.0 - opponent.hp_dist[0],</span>
<span class='curline'><a href='../S/1227.html#L2395'>opponent</a>         2395 src/attack_prediction.cpp 			opponent.u_.experience + game_config::kill_xp(u_.level) &gt;= opponent.u_.max_experience, hp_dist[0] - self_already_dead);</span>
<span class='curline'><a href='../S/1227.html#L2402'>opponent</a>         2402 src/attack_prediction.cpp 		opponent.slowed = std::accumulate(opponent.summary[1].begin(), opponent.summary[1].end(), 0.0);</span>
<span class='curline'><a href='../S/1227.html#L2405'>opponent</a>         2405 src/attack_prediction.cpp 	if(u_.experience + opponent.u_.level &gt;= u_.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L2410'>opponent</a>         2410 src/attack_prediction.cpp 	if(opponent.u_.experience + u_.level &gt;= opponent.u_.max_experience) {</span>
<span class='curline'><a href='../S/1227.html#L2411'>opponent</a>         2411 src/attack_prediction.cpp 		opponent.poisoned = 0.0;</span>
<span class='curline'><a href='../S/1227.html#L2412'>opponent</a>         2412 src/attack_prediction.cpp 		opponent.slowed = 0.0;</span>
<span class='curline'><a href='../S/1227.html#L2416'>opponent</a>         2416 src/attack_prediction.cpp 	opponent.untouched *= opp_not_hit;</span>
<span class='curline'><a href='../S/988.html#L39'>opponent</a>           39 src/attack_prediction.hpp 	void fight(combatant &amp;opponent, bool levelup_considered=true);</span>
</pre>
</body>
</html>
