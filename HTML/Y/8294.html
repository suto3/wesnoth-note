<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>def_stats</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/4368.html#L1691'>def_stats</a>        1691 data/ai/lua/ai_helper.lua                         local att_stats, def_stats</span>
<span class='curline'><a href='../S/4368.html#L1697'>def_stats</a>        1697 data/ai/lua/ai_helper.lua                             att_stats, def_stats = wesnoth.simulate_combat(unit_dst, enemy)</span>
<span class='curline'><a href='../S/4368.html#L1705'>def_stats</a>        1705 data/ai/lua/ai_helper.lua                             def_stats = def_stats,</span>
<span class='curline'><a href='../S/4370.html#L708'>def_stats</a>         708 data/ai/lua/battle_calcs.lua     local def_stats = battle_calcs.hp_distribution(def_coeffs, att_hit_prob, def_hit_prob, defender.hitpoints, att_damage, att_attack)</span>
<span class='curline'><a href='../S/4370.html#L710'>def_stats</a>         710 data/ai/lua/battle_calcs.lua     return att_stats, def_stats</span>
<span class='curline'><a href='../S/4370.html#L717'>def_stats</a>         717 data/ai/lua/battle_calcs.lua     local att_stats, def_stats = { hp_chance = {} }, { hp_chance = {} }</span>
<span class='curline'><a href='../S/4370.html#L723'>def_stats</a>         723 data/ai/lua/battle_calcs.lua     def_stats.hp_chance[0], def_stats.hp_chance[2], def_stats.hp_chance[10] = 0.09, 0.42, 0.49</span>
<span class='curline'><a href='../S/4370.html#L724'>def_stats</a>         724 data/ai/lua/battle_calcs.lua     def_stats.poisoned, def_stats.slowed, def_stats.average_hp = 0, 0, 1.74</span>
<span class='curline'><a href='../S/4370.html#L726'>def_stats</a>         726 data/ai/lua/battle_calcs.lua     return att_stats, def_stats</span>
<span class='curline'><a href='../S/4370.html#L785'>def_stats</a>         785 data/ai/lua/battle_calcs.lua     local att_stats, def_stats = {}, {}</span>
<span class='curline'><a href='../S/4370.html#L786'>def_stats</a>         786 data/ai/lua/battle_calcs.lua     if (not cfg.att_stats) or (not cfg.def_stats) then</span>
<span class='curline'><a href='../S/4370.html#L790'>def_stats</a>         790 data/ai/lua/battle_calcs.lua         att_stats,def_stats = battle_calcs.battle_outcome(attacker, defender, battle_cfg, cache)</span>
<span class='curline'><a href='../S/4370.html#L792'>def_stats</a>         792 data/ai/lua/battle_calcs.lua         att_stats, def_stats = cfg.att_stats, cfg.def_stats</span>
<span class='curline'><a href='../S/4370.html#L845'>def_stats</a>         845 data/ai/lua/battle_calcs.lua             level_bonus = (1. - att_stats.hp_chance[0]) * def_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4370.html#L862'>def_stats</a>         862 data/ai/lua/battle_calcs.lua     local damage = defender.hitpoints - def_stats.average_hp</span>
<span class='curline'><a href='../S/4370.html#L864'>def_stats</a>         864 data/ai/lua/battle_calcs.lua     if (def_stats.poisoned ~= 0) then</span>
<span class='curline'><a href='../S/4370.html#L865'>def_stats</a>         865 data/ai/lua/battle_calcs.lua         damage = damage + 8 * (def_stats.poisoned - def_stats.hp_chance[0])</span>
<span class='curline'><a href='../S/4370.html#L868'>def_stats</a>         868 data/ai/lua/battle_calcs.lua     if (def_stats.slowed ~= 0) then</span>
<span class='curline'><a href='../S/4370.html#L869'>def_stats</a>         869 data/ai/lua/battle_calcs.lua         damage = damage + 6 * (def_stats.slowed - def_stats.hp_chance[0])</span>
<span class='curline'><a href='../S/4370.html#L884'>def_stats</a>         884 data/ai/lua/battle_calcs.lua     value_fraction = value_fraction + def_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4370.html#L891'>def_stats</a>         891 data/ai/lua/battle_calcs.lua         defender_level_penalty = 1. - def_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4370.html#L894'>def_stats</a>         894 data/ai/lua/battle_calcs.lua             defender_level_penalty = (1. - def_stats.hp_chance[0]) * att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4370.html#L962'>def_stats</a>         962 data/ai/lua/battle_calcs.lua     return rating, defender_rating, attacker_rating, att_stats, def_stats</span>
<span class='curline'><a href='../S/4370.html#L1001'>def_stats</a>        1001 data/ai/lua/battle_calcs.lua             local base_rating, def_rating, att_rating, att_stats, def_stats =</span>
<span class='curline'><a href='../S/4370.html#L1004'>def_stats</a>        1004 data/ai/lua/battle_calcs.lua             tmp_att_stats[i], tmp_def_stats[i] = att_stats, def_stats</span>
<span class='curline'><a href='../S/4370.html#L1043'>def_stats</a>        1043 data/ai/lua/battle_calcs.lua                 def_stats = tmp_def_stats[i]</span>
<span class='curline'><a href='../S/4370.html#L1051'>def_stats</a>        1051 data/ai/lua/battle_calcs.lua             tmp_def_stats[i] = cache_this_move[defender_ind][att_ind][dst_ind].def_stats</span>
<span class='curline'><a href='../S/4370.html#L1060'>def_stats</a>        1060 data/ai/lua/battle_calcs.lua     local attackers, dsts, att_stats, def_stats, attacker_ratings = {}, {}, {}, {}, {}</span>
<span class='curline'><a href='../S/4370.html#L1065'>def_stats</a>        1065 data/ai/lua/battle_calcs.lua     att_stats[1], def_stats[1] = tmp_att_stats[ratings[1][1]], tmp_def_stats[ratings[1][1]]</span>
<span class='curline'><a href='../S/4370.html#L1074'>def_stats</a>        1074 data/ai/lua/battle_calcs.lua         def_stats[i] = { hp_chance = {} }</span>
<span class='curline'><a href='../S/4370.html#L1077'>def_stats</a>        1077 data/ai/lua/battle_calcs.lua         for hp1,prob1 in pairs(def_stats[i-1].hp_chance) do -- Note: need pairs(), not ipairs() !!</span>
<span class='curline'><a href='../S/4370.html#L1081'>def_stats</a>        1081 data/ai/lua/battle_calcs.lua                 def_stats[i].hp_chance[0] = (def_stats[i].hp_chance[0] or 0) + prob1</span>
<span class='curline'><a href='../S/4370.html#L1102'>def_stats</a>        1102 data/ai/lua/battle_calcs.lua                     def_stats[i].hp_chance[hp2] = (def_stats[i].hp_chance[hp2] or 0) + prob1 * prob2</span>
<span class='curline'><a href='../S/4370.html#L1109'>def_stats</a>        1109 data/ai/lua/battle_calcs.lua                     def_stats[i].poisoned = 1. - (1. - dst.poisoned) * (1. - def_stats[i-1].poisoned)</span>
<span class='curline'><a href='../S/4370.html#L1110'>def_stats</a>        1110 data/ai/lua/battle_calcs.lua                     def_stats[i].slowed = 1. - (1. - dst.slowed) * (1. - def_stats[i-1].slowed)</span>
<span class='curline'><a href='../S/4370.html#L1120'>def_stats</a>        1120 data/ai/lua/battle_calcs.lua         for hp,prob in pairs(def_stats[i].hp_chance) do av_hp = av_hp + hp * prob end</span>
<span class='curline'><a href='../S/4370.html#L1121'>def_stats</a>        1121 data/ai/lua/battle_calcs.lua         def_stats[i].average_hp = av_hp</span>
<span class='curline'><a href='../S/4370.html#L1132'>def_stats</a>        1132 data/ai/lua/battle_calcs.lua         local cfg = { att_stats = att_stats[i], def_stats = def_stats[i] }</span>
<span class='curline'><a href='../S/4370.html#L1141'>def_stats</a>        1141 data/ai/lua/battle_calcs.lua     return rating, attackers, dsts, att_stats, def_stats[#attackers], def_stats</span>
<span class='curline'><a href='../S/4373.html#L232'>def_stats</a>         232 data/ai/lua/ca_high_xp_attack.lua                 local att_stats, def_stats, att_weapon = wesnoth.simulate_combat(attacker_copy, target)</span>
<span class='curline'><a href='../S/4373.html#L237'>def_stats</a>         237 data/ai/lua/ca_high_xp_attack.lua                     if (def_stats.hp_chance[0] &gt; 0) then</span>
<span class='curline'><a href='../S/4373.html#L238'>def_stats</a>         238 data/ai/lua/ca_high_xp_attack.lua                         rating = 5000 + def_stats.hp_chance[0] - att_stats.hp_chance[0]</span>
<span class='curline'><a href='../S/4373.html#L244'>def_stats</a>         244 data/ai/lua/ca_high_xp_attack.lua                         local enemy_value_loss = (target.hitpoints - def_stats.average_hp) / target.max_hitpoints</span>
<span class='curline'><a href='../S/4320.html#L20'>def_stats</a>          20 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                 local att_stats, def_stats = wesnoth.simulate_combat(attacker, n_weapon, target)</span>
<span class='curline'><a href='../S/4320.html#L27'>def_stats</a>          27 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                     or ((def_stats.hp_chance[0] &gt;= 0.67) and (att_stats.hp_chance[0] == 0))</span>
<span class='curline'><a href='../S/4320.html#L29'>def_stats</a>          29 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                     rating = target.max_hitpoints + def_stats.hp_chance[0] * 100</span>
<span class='curline'><a href='../S/4320.html#L30'>def_stats</a>          30 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                     rating = rating + att_stats.average_hp - def_stats.average_hp</span>
<span class='curline'><a href='../S/4320.html#L34'>def_stats</a>          34 data/ai/micro_ais/cas/ca_bottleneck_attack.lua                     if (def_stats.hp_chance[0] &gt;= 0.67) then</span>
<span class='curline'><a href='../S/4313.html#L384'>def_stats</a>         384 data/ai/micro_ais/cas/ca_bottleneck_move.lua                         local att_stats, def_stats = BC.simulate_combat_loc(unit, { attack.x, attack.y }, attack.defender, n_weapon)</span>
<span class='curline'><a href='../S/4313.html#L395'>def_stats</a>         395 data/ai/micro_ais/cas/ca_bottleneck_move.lua                                 level_up_rating = 15000 - def_stats.average_hp</span>
<span class='curline'><a href='../S/4313.html#L400'>def_stats</a>         400 data/ai/micro_ais/cas/ca_bottleneck_move.lua                                 and (def_stats.hp_chance[0] &gt;= 0.66)</span>
<span class='curline'><a href='../S/4313.html#L404'>def_stats</a>         404 data/ai/micro_ais/cas/ca_bottleneck_move.lua                                 level_up_rating = 14000 + att_stats.average_hp - def_stats.average_hp / 2.</span>
<span class='curline'><a href='../S/4280.html#L63'>def_stats</a>          63 data/ai/micro_ais/cas/ca_messenger_attack.lua             local rating = attack.att_stats.average_hp - 2 * attack.def_stats.average_hp</span>
<span class='curline'><a href='../S/4280.html#L77'>def_stats</a>          77 data/ai/micro_ais/cas/ca_messenger_attack.lua         local rating = attack.att_stats.average_hp - 2 * attack.def_stats.average_hp</span>
<span class='curline'><a href='../S/4304.html#L96'>def_stats</a>          96 data/ai/micro_ais/cas/ca_messenger_move.lua             local att_stats, def_stats = wesnoth.simulate_combat(messenger, n_weapon, target)</span>
<span class='curline'><a href='../S/4304.html#L107'>def_stats</a>         107 data/ai/micro_ais/cas/ca_messenger_move.lua                 or (def_stats.hp_chance[0] &gt;= tonumber(enemy_death_chance)) and (att_stats.hp_chance[0] &lt;= tonumber(messenger_death_chance))</span>
<span class='curline'><a href='../S/4304.html#L109'>def_stats</a>         109 data/ai/micro_ais/cas/ca_messenger_move.lua                 rating = target.max_hitpoints + def_stats.hp_chance[0]*100 + att_stats.average_hp - def_stats.average_hp</span>
<span class='curline'><a href='../S/4298.html#L55'>def_stats</a>          55 data/ai/micro_ais/cas/ca_protect_unit_attack.lua                             local att_stats, def_stats = wesnoth.simulate_combat(enemy_attack.enemy, n_weapon, unit)</span>
<span class='curline'><a href='../S/4298.html#L59'>def_stats</a>          59 data/ai/micro_ais/cas/ca_protect_unit_attack.lua                             for hp,chance in pairs(def_stats.hp_chance) do</span>
<span class='curline'><a href='../S/4298.html#L84'>def_stats</a>          84 data/ai/micro_ais/cas/ca_protect_unit_attack.lua                 local rating = min_outcome + attack.att_stats.average_hp - attack.def_stats.average_hp</span>
<span class='curline'><a href='../S/4322.html#L116'>def_stats</a>         116 data/ai/micro_ais/cas/ca_wolves_multipacks_attack.lua                         local rating = attack.att_stats.average_hp / 2. - attack.def_stats.average_hp</span>
<span class='curline'><a href='../S/4988.html#L28'>def_stats</a>          28 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua         local att_stats, def_stats = wesnoth.simulate_combat(attacker_dst, defender)</span>
<span class='curline'><a href='../S/4988.html#L31'>def_stats</a>          31 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua             local rating = def_stats.hp_chance[0] * 100</span>
<span class='curline'><a href='../S/4988.html#L34'>def_stats</a>          34 data/campaigns/The_Rise_Of_Wesnoth/ai/ca_aggressive_attack_no_suicide.lua             local defender_damage = defender.hitpoints - def_stats.average_hp</span>
<span class='curline'><a href='../S/894.html#L601'>def_stats</a>         601 src/actions/attack.cpp 		const battle_context_unit_stats def_stats(defender, defender_loc,</span>
<span class='curline'><a href='../S/894.html#L603'>def_stats</a>         603 src/actions/attack.cpp 		return (def_stats.disable) ? -1 : choices[0];</span>
<span class='curline'><a href='../S/894.html#L618'>def_stats</a>         618 src/actions/attack.cpp 				const battle_context_unit_stats def_stats(defender, defender_loc,</span>
<span class='curline'><a href='../S/894.html#L620'>def_stats</a>         620 src/actions/attack.cpp 				if (def_stats.disable) continue;</span>
<span class='curline'><a href='../S/894.html#L622'>def_stats</a>         622 src/actions/attack.cpp 				int rating = static_cast&lt;int&gt;(def_stats.num_blows * def_stats.damage *</span>
<span class='curline'><a href='../S/894.html#L623'>def_stats</a>         623 src/actions/attack.cpp 						def_stats.chance_to_hit * def.defense_weight());</span>
<span class='curline'><a href='../S/894.html#L636'>def_stats</a>         636 src/actions/attack.cpp 		battle_context_unit_stats *def_stats = new battle_context_unit_stats(defender, defender_loc, choices[i], false,</span>
<span class='curline'><a href='../S/894.html#L638'>def_stats</a>         638 src/actions/attack.cpp 		if (def_stats-&gt;disable) {</span>
<span class='curline'><a href='../S/894.html#L640'>def_stats</a>         640 src/actions/attack.cpp 			delete def_stats;</span>
<span class='curline'><a href='../S/894.html#L644'>def_stats</a>         644 src/actions/attack.cpp 		combatant *def_comb = new combatant(*def_stats, prev_def);</span>
<span class='curline'><a href='../S/894.html#L647'>def_stats</a>         647 src/actions/attack.cpp 		int simple_rating = static_cast&lt;int&gt;(def_stats-&gt;num_blows *</span>
<span class='curline'><a href='../S/894.html#L648'>def_stats</a>         648 src/actions/attack.cpp 				def_stats-&gt;damage * def_stats-&gt;chance_to_hit * def.defense_weight());</span>
<span class='curline'><a href='../S/894.html#L660'>def_stats</a>         660 src/actions/attack.cpp 			defender_stats_ = def_stats;</span>
<span class='curline'><a href='../S/894.html#L665'>def_stats</a>         665 src/actions/attack.cpp 			delete def_stats;</span>
<span class='curline'><a href='../S/1222.html#L2609'>def_stats</a>        2609 src/attack_prediction.cpp 	battle_context_unit_stats *def_stats, *att_stats[20];</span>
<span class='curline'><a href='../S/1222.html#L2625'>def_stats</a>        2625 src/attack_prediction.cpp 	def_stats = parse_unit(&amp;argv);</span>
<span class='curline'><a href='../S/1222.html#L2626'>def_stats</a>        2626 src/attack_prediction.cpp 	def = new combatant(*def_stats);</span>
<span class='curline'><a href='../S/1222.html#L2650'>def_stats</a>        2650 src/attack_prediction.cpp 	delete def_stats;</span>
<span class='curline'><a href='../S/1019.html#L446'>def_stats</a>         446 src/statistics.cpp 	stats &amp;att_stats = attacker_stats(), &amp;def_stats = defender_stats();</span>
<span class='curline'><a href='../S/1019.html#L449'>def_stats</a>         449 src/statistics.cpp 	def_stats.expected_damage_inflicted += defender_inflict;</span>
<span class='curline'><a href='../S/1019.html#L450'>def_stats</a>         450 src/statistics.cpp 	def_stats.expected_damage_taken     += attacker_inflict;</span>
<span class='curline'><a href='../S/1019.html#L453'>def_stats</a>         453 src/statistics.cpp 	def_stats.turn_expected_damage_inflicted += defender_inflict;</span>
<span class='curline'><a href='../S/1019.html#L454'>def_stats</a>         454 src/statistics.cpp 	def_stats.turn_expected_damage_taken     += attacker_inflict;</span>
<span class='curline'><a href='../S/1019.html#L461'>def_stats</a>         461 src/statistics.cpp 	stats &amp;att_stats = attacker_stats(), &amp;def_stats = defender_stats();</span>
<span class='curline'><a href='../S/1019.html#L466'>def_stats</a>         466 src/statistics.cpp 		def_stats.damage_inflicted      -= drain;</span>
<span class='curline'><a href='../S/1019.html#L468'>def_stats</a>         468 src/statistics.cpp 		def_stats.turn_damage_inflicted -= drain;</span>
<span class='curline'><a href='../S/1019.html#L471'>def_stats</a>         471 src/statistics.cpp 		def_stats.damage_taken          += damage;</span>
<span class='curline'><a href='../S/1019.html#L473'>def_stats</a>         473 src/statistics.cpp 		def_stats.turn_damage_taken     += damage;</span>
<span class='curline'><a href='../S/1019.html#L478'>def_stats</a>         478 src/statistics.cpp 		++def_stats.deaths[defender_type];</span>
<span class='curline'><a href='../S/1019.html#L485'>def_stats</a>         485 src/statistics.cpp 	stats &amp;att_stats = attacker_stats(), &amp;def_stats = defender_stats();</span>
<span class='curline'><a href='../S/1019.html#L489'>def_stats</a>         489 src/statistics.cpp 		def_stats.damage_taken          -= drain;</span>
<span class='curline'><a href='../S/1019.html#L491'>def_stats</a>         491 src/statistics.cpp 		def_stats.turn_damage_taken     -= drain;</span>
<span class='curline'><a href='../S/1019.html#L495'>def_stats</a>         495 src/statistics.cpp 		def_stats.damage_inflicted      += damage;</span>
<span class='curline'><a href='../S/1019.html#L497'>def_stats</a>         497 src/statistics.cpp 		def_stats.turn_damage_inflicted += damage;</span>
<span class='curline'><a href='../S/1019.html#L502'>def_stats</a>         502 src/statistics.cpp 		++def_stats.killed[attacker_type];</span>
</pre>
</body>
</html>
