<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>drains_damage</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.5.6' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<pre>
<span class='curline'><a href='../S/894.html#L939'>drains_damage</a>     939 src/actions/attack.cpp 		int drains_damage = 0;</span>
<span class='curline'><a href='../S/894.html#L941'>drains_damage</a>     941 src/actions/attack.cpp 			drains_damage = damage_done * attacker_stats-&gt;drain_percent / 100 + attacker_stats-&gt;drain_constant;</span>
<span class='curline'><a href='../S/894.html#L943'>drains_damage</a>     943 src/actions/attack.cpp 			drains_damage = std::min&lt;int&gt;(drains_damage, attacker.get_unit().max_hitpoints() - attacker.get_unit().hitpoints());</span>
<span class='curline'><a href='../S/894.html#L945'>drains_damage</a>     945 src/actions/attack.cpp 			drains_damage = std::max&lt;int&gt;(drains_damage, 1 - attacker.get_unit().hitpoints());</span>
<span class='curline'><a href='../S/894.html#L980'>drains_damage</a>     980 src/actions/attack.cpp 				abs_n, float_text.str(), drains_damage, "", &amp;extra_hit_sounds);</span>
<span class='curline'><a href='../S/894.html#L988'>drains_damage</a>     988 src/actions/attack.cpp 				: statistics::attack_context::MISSES, damage_done, drains_damage);</span>
<span class='curline'><a href='../S/894.html#L992'>drains_damage</a>     992 src/actions/attack.cpp 				: statistics::attack_context::MISSES, damage_done, drains_damage);</span>
<span class='curline'><a href='../S/894.html#L1037'>drains_damage</a>    1037 src/actions/attack.cpp 		if (drains_damage &gt; 0) {</span>
<span class='curline'><a href='../S/894.html#L1038'>drains_damage</a>    1038 src/actions/attack.cpp 			attacker.get_unit().heal(drains_damage);</span>
<span class='curline'><a href='../S/894.html#L1039'>drains_damage</a>    1039 src/actions/attack.cpp 		} else if(drains_damage &lt; 0) {</span>
<span class='curline'><a href='../S/894.html#L1040'>drains_damage</a>    1040 src/actions/attack.cpp 			attacker_dies = attacker.get_unit().take_hit(-drains_damage);</span>
</pre>
</body>
</html>
